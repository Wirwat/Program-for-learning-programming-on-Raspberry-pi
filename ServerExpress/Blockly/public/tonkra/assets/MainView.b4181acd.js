import{_ as _export_sfc,r as ref,s as shallowRef,o as onMounted,a as openBlock,c as createElementBlock,b as createBaseVNode,d as createVNode,w as withCtx,e as renderSlot,f as resolveComponent,g as computed,h as onUpdated,u as unref,p as pushScopeId,i as popScopeId,F as Fragment,j as renderList,t as toDisplayString,k as createTextVNode,l as createBlock,m as createCommentVNode,n as isRef,q as normalizeStyle}from"./index.03606211.js";var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(m){return m&&m.__esModule&&Object.prototype.hasOwnProperty.call(m,"default")?m.default:m}var python={exports:{}},coreBrowser={exports:{}},blockly$1={exports:{}},blockly_compressed={exports:{}},hasRequiredBlockly_compressed;function requireBlockly_compressed(){return hasRequiredBlockly_compressed||(hasRequiredBlockly_compressed=1,function(m,f){(function(n,r){m.exports=r()})(commonjsGlobal,function(){var n={};n.$jscomp=n.$jscomp||{},n.$jscomp.scope={},n.$jscomp.createTemplateTagFirstArg=function(t){return t.raw=t},n.$jscomp.createTemplateTagFirstArgWithRaw=function(t,e){return t.raw=e,t},n.$jscomp.arrayIteratorImpl=function(t){var e=0;return function(){return e<t.length?{done:!1,value:t[e++]}:{done:!0}}},n.$jscomp.arrayIterator=function(t){return{next:n.$jscomp.arrayIteratorImpl(t)}},n.$jscomp.makeIterator=function(t){var e=typeof Symbol<"u"&&Symbol.iterator&&t[Symbol.iterator];return e?e.call(t):n.$jscomp.arrayIterator(t)},n.$jscomp.arrayFromIterator=function(t){for(var e,o=[];!(e=t.next()).done;)o.push(e.value);return o},n.$jscomp.arrayFromIterable=function(t){return t instanceof Array?t:n.$jscomp.arrayFromIterator(n.$jscomp.makeIterator(t))},n.$jscomp.owns=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.$jscomp.ASSUME_ES5=!1,n.$jscomp.ASSUME_NO_NATIVE_MAP=!1,n.$jscomp.ASSUME_NO_NATIVE_SET=!1,n.$jscomp.SIMPLE_FROUND_POLYFILL=!1,n.$jscomp.ISOLATE_POLYFILLS=!1,n.$jscomp.FORCE_POLYFILL_PROMISE=!1,n.$jscomp.FORCE_POLYFILL_PROMISE_WHEN_NO_UNHANDLED_REJECTION=!1,n.$jscomp.defineProperty=n.$jscomp.ASSUME_ES5||typeof Object.defineProperties=="function"?Object.defineProperty:function(t,e,o){return t==Array.prototype||t==Object.prototype||(t[e]=o.value),t},n.$jscomp.getGlobal=function(t){t=[typeof globalThis=="object"&&globalThis,t,typeof window=="object"&&window,typeof self=="object"&&self,typeof commonjsGlobal=="object"&&commonjsGlobal];for(var e=0;e<t.length;++e){var o=t[e];if(o&&o.Math==Math)return o}throw Error("Cannot find global object")},n.$jscomp.global=n.$jscomp.getGlobal(this),n.$jscomp.IS_SYMBOL_NATIVE=typeof Symbol=="function"&&typeof Symbol("x")=="symbol",n.$jscomp.TRUST_ES6_POLYFILLS=!n.$jscomp.ISOLATE_POLYFILLS||n.$jscomp.IS_SYMBOL_NATIVE,n.$jscomp.polyfills={},n.$jscomp.propertyToPolyfillSymbol={},n.$jscomp.POLYFILL_PREFIX="$jscp$",n.$jscomp.polyfill=function(t,e,o,i){e&&(n.$jscomp.ISOLATE_POLYFILLS?n.$jscomp.polyfillIsolated(t,e,o,i):n.$jscomp.polyfillUnisolated(t,e,o,i))},n.$jscomp.polyfillUnisolated=function(t,e,o,i){for(o=n.$jscomp.global,t=t.split("."),i=0;i<t.length-1;i++){var s=t[i];if(!(s in o))return;o=o[s]}t=t[t.length-1],i=o[t],e=e(i),e!=i&&e!=null&&n.$jscomp.defineProperty(o,t,{configurable:!0,writable:!0,value:e})},n.$jscomp.polyfillIsolated=function(t,e,o,i){var s=t.split(".");t=s.length===1,i=s[0],i=!t&&i in n.$jscomp.polyfills?n.$jscomp.polyfills:n.$jscomp.global;for(var l=0;l<s.length-1;l++){var h=s[l];if(!(h in i))return;i=i[h]}s=s[s.length-1],o=n.$jscomp.IS_SYMBOL_NATIVE&&o==="es6"?i[s]:null,e=e(o),e!=null&&(t?n.$jscomp.defineProperty(n.$jscomp.polyfills,s,{configurable:!0,writable:!0,value:e}):e!==o&&(n.$jscomp.propertyToPolyfillSymbol[s]===void 0&&(o=1e9*Math.random()>>>0,n.$jscomp.propertyToPolyfillSymbol[s]=n.$jscomp.IS_SYMBOL_NATIVE?n.$jscomp.global.Symbol(s):n.$jscomp.POLYFILL_PREFIX+o+"$"+s),n.$jscomp.defineProperty(i,n.$jscomp.propertyToPolyfillSymbol[s],{configurable:!0,writable:!0,value:e})))},n.$jscomp.assign=n.$jscomp.TRUST_ES6_POLYFILLS&&typeof Object.assign=="function"?Object.assign:function(t,e){for(var o=1;o<arguments.length;o++){var i=arguments[o];if(i)for(var s in i)n.$jscomp.owns(i,s)&&(t[s]=i[s])}return t},n.$jscomp.polyfill("Object.assign",function(t){return t||n.$jscomp.assign},"es6","es3"),n.$jscomp.objectCreate=n.$jscomp.ASSUME_ES5||typeof Object.create=="function"?Object.create:function(t){var e=function(){};return e.prototype=t,new e},n.$jscomp.getConstructImplementation=function(){function t(){function o(){}return Reflect.construct(o,[],function(){}),new o instanceof o}if(n.$jscomp.TRUST_ES6_POLYFILLS&&typeof Reflect<"u"&&Reflect.construct){if(t())return Reflect.construct;var e=Reflect.construct;return function(o,i,s){return o=e(o,i),s&&Reflect.setPrototypeOf(o,s.prototype),o}}return function(o,i,s){return s===void 0&&(s=o),s=n.$jscomp.objectCreate(s.prototype||Object.prototype),Function.prototype.apply.call(o,s,i)||s}},n.$jscomp.construct={valueOf:n.$jscomp.getConstructImplementation}.valueOf(),n.$jscomp.underscoreProtoCanBeSet=function(){var t={a:!0},e={};try{return e.__proto__=t,e.a}catch{}return!1},n.$jscomp.setPrototypeOf=n.$jscomp.TRUST_ES6_POLYFILLS&&typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf:n.$jscomp.underscoreProtoCanBeSet()?function(t,e){if(t.__proto__=e,t.__proto__!==e)throw new TypeError(t+" is not extensible");return t}:null,n.$jscomp.inherits=function(t,e){if(t.prototype=n.$jscomp.objectCreate(e.prototype),t.prototype.constructor=t,n.$jscomp.setPrototypeOf){var o=n.$jscomp.setPrototypeOf;o(t,e)}else for(o in e)if(o!="prototype")if(Object.defineProperties){var i=Object.getOwnPropertyDescriptor(e,o);i&&Object.defineProperty(t,o,i)}else t[o]=e[o];t.superClass_=e.prototype},n.$jscomp.polyfill("Reflect",function(t){return t||{}},"es6","es3"),n.$jscomp.polyfill("Reflect.construct",function(t){return n.$jscomp.construct},"es6","es3"),n.$jscomp.polyfill("Reflect.setPrototypeOf",function(t){if(t)return t;if(n.$jscomp.setPrototypeOf){var e=n.$jscomp.setPrototypeOf;return function(o,i){try{return e(o,i),!0}catch{return!1}}}return null},"es6","es5"),n.$jscomp.polyfill("globalThis",function(t){return t||n.$jscomp.global},"es_2020","es3"),n.$jscomp.checkStringArgs=function(t,e,o){if(t==null)throw new TypeError("The 'this' value for String.prototype."+o+" must not be null or undefined");if(e instanceof RegExp)throw new TypeError("First argument to String.prototype."+o+" must not be a regular expression");return t+""},n.$jscomp.polyfill("String.prototype.startsWith",function(t){return t||function(e,o){var i=n.$jscomp.checkStringArgs(this,e,"startsWith");e+="";var s=i.length,l=e.length;o=Math.max(0,Math.min(o|0,i.length));for(var h=0;h<l&&o<s;)if(i[o++]!=e[h++])return!1;return h>=l}},"es6","es3"),n.$jscomp.initSymbol=function(){},n.$jscomp.polyfill("Symbol",function(t){if(t)return t;var e=function(l,h){this.$jscomp$symbol$id_=l,n.$jscomp.defineProperty(this,"description",{configurable:!0,writable:!0,value:h})};e.prototype.toString=function(){return this.$jscomp$symbol$id_};var o="jscomp_symbol_"+(1e9*Math.random()>>>0)+"_",i=0,s=function(l){if(this instanceof s)throw new TypeError("Symbol is not a constructor");return new e(o+(l||"")+"_"+i++,l)};return s},"es6","es3"),n.$jscomp.polyfill("Symbol.iterator",function(t){if(t)return t;t=Symbol("Symbol.iterator");for(var e="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),o=0;o<e.length;o++){var i=n.$jscomp.global[e[o]];typeof i=="function"&&typeof i.prototype[t]!="function"&&n.$jscomp.defineProperty(i.prototype,t,{configurable:!0,writable:!0,value:function(){return n.$jscomp.iteratorPrototype(n.$jscomp.arrayIteratorImpl(this))}})}return t},"es6","es3"),n.$jscomp.iteratorPrototype=function(t){return t={next:t},t[Symbol.iterator]=function(){return this},t},n.$jscomp.iteratorFromArray=function(t,e){t instanceof String&&(t+="");var o=0,i=!1,s={next:function(){if(!i&&o<t.length){var l=o++;return{value:e(l,t[l]),done:!1}}return i=!0,{done:!0,value:void 0}}};return s[Symbol.iterator]=function(){return s},s},n.$jscomp.polyfill("Array.prototype.keys",function(t){return t||function(){return n.$jscomp.iteratorFromArray(this,function(e){return e})}},"es6","es3"),n.$jscomp.polyfill("Object.setPrototypeOf",function(t){return t||n.$jscomp.setPrototypeOf},"es6","es5"),n.$jscomp.polyfill("Array.prototype.values",function(t){return t||function(){return n.$jscomp.iteratorFromArray(this,function(e,o){return o})}},"es8","es3"),n.$jscomp.checkEs6ConformanceViaProxy=function(){try{var t={},e=Object.create(new n.$jscomp.global.Proxy(t,{get:function(o,i,s){return o==t&&i=="q"&&s==e}}));return e.q===!0}catch{return!1}},n.$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS=!1,n.$jscomp.ES6_CONFORMANCE=n.$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS&&n.$jscomp.checkEs6ConformanceViaProxy(),n.$jscomp.polyfill("WeakMap",function(t){function e(){if(!t||!Object.seal)return!1;try{var x=Object.seal({}),F=Object.seal({}),it=new t([[x,2],[F,3]]);return it.get(x)!=2||it.get(F)!=3?!1:(it.delete(x),it.set(F,4),!it.has(x)&&it.get(F)==4)}catch{return!1}}function o(){}function i(x){var F=typeof x;return F==="object"&&x!==null||F==="function"}function s(x){if(!n.$jscomp.owns(x,h)){var F=new o;n.$jscomp.defineProperty(x,h,{value:F})}}function l(x){if(!n.$jscomp.ISOLATE_POLYFILLS){var F=Object[x];F&&(Object[x]=function(it){return it instanceof o?it:(Object.isExtensible(it)&&s(it),F(it))})}}if(n.$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(t&&n.$jscomp.ES6_CONFORMANCE)return t}else if(e())return t;var h="$jscomp_hidden_"+Math.random();l("freeze"),l("preventExtensions"),l("seal");var S=0,C=function(x){if(this.id_=(S+=Math.random()+1).toString(),x){x=n.$jscomp.makeIterator(x);for(var F;!(F=x.next()).done;)F=F.value,this.set(F[0],F[1])}};return C.prototype.set=function(x,F){if(!i(x))throw Error("Invalid WeakMap key");if(s(x),!n.$jscomp.owns(x,h))throw Error("WeakMap key fail: "+x);return x[h][this.id_]=F,this},C.prototype.get=function(x){return i(x)&&n.$jscomp.owns(x,h)?x[h][this.id_]:void 0},C.prototype.has=function(x){return i(x)&&n.$jscomp.owns(x,h)&&n.$jscomp.owns(x[h],this.id_)},C.prototype.delete=function(x){return i(x)&&n.$jscomp.owns(x,h)&&n.$jscomp.owns(x[h],this.id_)?delete x[h][this.id_]:!1},C},"es6","es3"),n.$jscomp.polyfill("Object.entries",function(t){return t||function(e){var o=[],i;for(i in e)n.$jscomp.owns(e,i)&&o.push([i,e[i]]);return o}},"es8","es3"),n.$jscomp.polyfill("Object.getOwnPropertySymbols",function(t){return t||function(){return[]}},"es6","es5"),n.$jscomp.polyfill("Reflect.ownKeys",function(t){return t||function(e){var o=[],i=Object.getOwnPropertyNames(e);e=Object.getOwnPropertySymbols(e);for(var s=0;s<i.length;s++)(i[s].substring(0,14)=="jscomp_symbol_"?e:o).push(i[s]);return o.concat(e)}},"es6","es5"),n.$jscomp.polyfill("Object.getOwnPropertyDescriptors",function(t){return t||function(e){for(var o={},i=Reflect.ownKeys(e),s=0;s<i.length;s++)o[i[s]]=Object.getOwnPropertyDescriptor(e,i[s]);return o}},"es8","es5"),n.$jscomp.polyfill("Array.prototype.fill",function(t){return t||function(e,o,i){var s=this.length||0;for(0>o&&(o=Math.max(0,s+o)),(i==null||i>s)&&(i=s),i=Number(i),0>i&&(i=Math.max(0,s+i)),o=Number(o||0);o<i;o++)this[o]=e;return this}},"es6","es3"),n.$jscomp.typedArrayFill=function(t){return t||Array.prototype.fill},n.$jscomp.polyfill("Int8Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Uint8Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Uint8ClampedArray.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Int16Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Uint16Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Int32Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Uint32Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Float32Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.polyfill("Float64Array.prototype.fill",n.$jscomp.typedArrayFill,"es6","es5"),n.$jscomp.MapEntry=function(){},n.$jscomp.polyfill("Map",function(t){function e(){if(n.$jscomp.ASSUME_NO_NATIVE_MAP||!t||typeof t!="function"||!t.prototype.entries||typeof Object.seal!="function")return!1;try{var C=Object.seal({x:4}),x=new t(n.$jscomp.makeIterator([[C,"s"]]));if(x.get(C)!="s"||x.size!=1||x.get({x:4})||x.set({x:4},"t")!=x||x.size!=2)return!1;var F=x.entries(),it=F.next();return it.done||it.value[0]!=C||it.value[1]!="s"?!1:(it=F.next(),!(it.done||it.value[0].x!=4||it.value[1]!="t"||!F.next().done))}catch{return!1}}if(n.$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(t&&n.$jscomp.ES6_CONFORMANCE)return t}else if(e())return t;var o=new WeakMap,i=function(C){if(this.data_={},this.head_=h(),this.size=0,C){C=n.$jscomp.makeIterator(C);for(var x;!(x=C.next()).done;)x=x.value,this.set(x[0],x[1])}};i.prototype.set=function(C,x){C=C===0?0:C;var F=s(this,C);return F.list||(F.list=this.data_[F.id]=[]),F.entry?F.entry.value=x:(F.entry={next:this.head_,previous:this.head_.previous,head:this.head_,key:C,value:x},F.list.push(F.entry),this.head_.previous.next=F.entry,this.head_.previous=F.entry,this.size++),this},i.prototype.delete=function(C){return C=s(this,C),C.entry&&C.list?(C.list.splice(C.index,1),C.list.length||delete this.data_[C.id],C.entry.previous.next=C.entry.next,C.entry.next.previous=C.entry.previous,C.entry.head=null,this.size--,!0):!1},i.prototype.clear=function(){this.data_={},this.head_=this.head_.previous=h(),this.size=0},i.prototype.has=function(C){return!!s(this,C).entry},i.prototype.get=function(C){return(C=s(this,C).entry)&&C.value},i.prototype.entries=function(){return l(this,function(C){return[C.key,C.value]})},i.prototype.keys=function(){return l(this,function(C){return C.key})},i.prototype.values=function(){return l(this,function(C){return C.value})},i.prototype.forEach=function(C,x){for(var F=this.entries(),it;!(it=F.next()).done;)it=it.value,C.call(x,it[1],it[0],this)},i.prototype[Symbol.iterator]=i.prototype.entries;var s=function(C,x){var F=x&&typeof x;F=="object"||F=="function"?o.has(x)?F=o.get(x):(F=""+ ++S,o.set(x,F)):F="p_"+x;var it=C.data_[F];if(it&&n.$jscomp.owns(C.data_,F))for(C=0;C<it.length;C++){var xt=it[C];if(x!==x&&xt.key!==xt.key||x===xt.key)return{id:F,list:it,index:C,entry:xt}}return{id:F,list:it,index:-1,entry:void 0}},l=function(C,x){var F=C.head_;return n.$jscomp.iteratorPrototype(function(){if(F){for(;F.head!=C.head_;)F=F.previous;for(;F.next!=F.head;)return F=F.next,{done:!1,value:x(F)};F=null}return{done:!0,value:void 0}})},h=function(){var C={};return C.previous=C.next=C.head=C},S=0;return i},"es6","es3"),n.$jscomp.polyfill("Set",function(t){function e(){if(n.$jscomp.ASSUME_NO_NATIVE_SET||!t||typeof t!="function"||!t.prototype.entries||typeof Object.seal!="function")return!1;try{var i=Object.seal({x:4}),s=new t(n.$jscomp.makeIterator([i]));if(!s.has(i)||s.size!=1||s.add(i)!=s||s.size!=1||s.add({x:4})!=s||s.size!=2)return!1;var l=s.entries(),h=l.next();return h.done||h.value[0]!=i||h.value[1]!=i?!1:(h=l.next(),h.done||h.value[0]==i||h.value[0].x!=4||h.value[1]!=h.value[0]?!1:l.next().done)}catch{return!1}}if(n.$jscomp.USE_PROXY_FOR_ES6_CONFORMANCE_CHECKS){if(t&&n.$jscomp.ES6_CONFORMANCE)return t}else if(e())return t;var o=function(i){if(this.map_=new Map,i){i=n.$jscomp.makeIterator(i);for(var s;!(s=i.next()).done;)this.add(s.value)}this.size=this.map_.size};return o.prototype.add=function(i){return i=i===0?0:i,this.map_.set(i,i),this.size=this.map_.size,this},o.prototype.delete=function(i){return i=this.map_.delete(i),this.size=this.map_.size,i},o.prototype.clear=function(){this.map_.clear(),this.size=0},o.prototype.has=function(i){return this.map_.has(i)},o.prototype.entries=function(){return this.map_.entries()},o.prototype.values=function(){return this.map_.values()},o.prototype.keys=o.prototype.values,o.prototype[Symbol.iterator]=o.prototype.values,o.prototype.forEach=function(i,s){var l=this;this.map_.forEach(function(h){return i.call(s,h,h,l)})},o},"es6","es3");var r=r||{};r.global=globalThis||root,r.define=function(t,e){return e},r.DEBUG=!1,r.DISALLOW_TEST_ONLY_CODE=!r.DEBUG,r.provide=function(t){},r.module=function(t){},r.module.get=function(t){},r.module.declareLegacyNamespace=function(){},r.setTestOnly=function(t){if(r.DISALLOW_TEST_ONLY_CODE)throw t=t||"",Error("Importing test-only code into non-debug environment"+(t?": "+t:"."))},r.require=function(t){},r.requireType=function(t){};var y={warn:function(t,e,o,i){t=t+" was deprecated on "+e+" and will be deleted on "+o+".",i&&(t+=`
Use `+i+" instead."),console.warn(t)}},O={},P=!1;O.register=function(t){if(P)throw Error("CSS already injected");Array.isArray(t)?((0,y.warn)("Registering CSS by passing an array of strings","September 2021","September 2022","css.register passing a multiline string"),O.content+=`
`+t.join(`
`)):O.content+=`
`+t},O.inject=function(t,e){P||(P=!0,t&&(t=e.replace(/[\\/]$/,""),e=O.content.replace(/<<<PATH>>>/g,t),O.content="",t=document.createElement("style"),t.id="blockly-common-style",e=document.createTextNode(e),t.appendChild(e),document.head.insertBefore(t,document.head.firstChild)))},O.content=`
.blocklySvg {
  background-color: #fff;
  outline: none;
  overflow: hidden;  /* IE overflows by default. */
  position: absolute;
  display: block;
}

.blocklyWidgetDiv {
  display: none;
  position: absolute;
  z-index: 99999;  /* big value for bootstrap3 compatibility */
}

.injectionDiv {
  height: 100%;
  position: relative;
  overflow: hidden;  /* So blocks in drag surface disappear at edges */
  touch-action: none;
}

.blocklyNonSelectable {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
}

.blocklyWsDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
}

/* Added as a separate rule with multiple classes to make it more specific
   than a bootstrap rule that selects svg:root. See issue #1275 for context.
*/
.blocklyWsDragSurface.blocklyOverflowVisible {
  overflow: visible;
}

.blocklyBlockDragSurface {
  display: none;
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: visible !important;
  z-index: 50;  /* Display below toolbox, but above everything else. */
}

.blocklyBlockCanvas.blocklyCanvasTransitioning,
.blocklyBubbleCanvas.blocklyCanvasTransitioning {
  transition: transform .5s;
}

.blocklyTooltipDiv {
  background-color: #ffffc7;
  border: 1px solid #ddc;
  box-shadow: 4px 4px 20px 1px rgba(0,0,0,.15);
  color: #000;
  display: none;
  font: 9pt sans-serif;
  opacity: .9;
  padding: 2px;
  position: absolute;
  z-index: 100000;  /* big value for bootstrap3 compatibility */
}

.blocklyDropDownDiv {
  position: absolute;
  left: 0;
  top: 0;
  z-index: 1000;
  display: none;
  border: 1px solid;
  border-color: #dadce0;
  background-color: #fff;
  border-radius: 2px;
  padding: 4px;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownContent {
  max-height: 300px;  // @todo: spec for maximum height.
  overflow: auto;
  overflow-x: hidden;
  position: relative;
}

.blocklyDropDownArrow {
  position: absolute;
  left: 0;
  top: 0;
  width: 16px;
  height: 16px;
  z-index: -1;
  background-color: inherit;
  border-color: inherit;
}

.blocklyDropDownButton {
  display: inline-block;
  float: left;
  padding: 0;
  margin: 4px;
  border-radius: 4px;
  outline: none;
  border: 1px solid;
  transition: box-shadow .1s;
  cursor: pointer;
}

.blocklyArrowTop {
  border-top: 1px solid;
  border-left: 1px solid;
  border-top-left-radius: 4px;
  border-color: inherit;
}

.blocklyArrowBottom {
  border-bottom: 1px solid;
  border-right: 1px solid;
  border-bottom-right-radius: 4px;
  border-color: inherit;
}

.blocklyResizeSE {
  cursor: se-resize;
  fill: #aaa;
}

.blocklyResizeSW {
  cursor: sw-resize;
  fill: #aaa;
}

.blocklyResizeLine {
  stroke: #515A5A;
  stroke-width: 1;
}

.blocklyHighlightedConnectionPath {
  fill: none;
  stroke: #fc3;
  stroke-width: 4px;
}

.blocklyPathLight {
  fill: none;
  stroke-linecap: round;
  stroke-width: 1;
}

.blocklySelected>.blocklyPathLight {
  display: none;
}

.blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grab */
  cursor: url("<<<PATH>>>/handopen.cur"), auto;
  cursor: grab;
  cursor: -webkit-grab;
}

  /* backup for browsers (e.g. IE11) that don't support grabbing */
.blocklyDragging {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

  /* Changes cursor on mouse down. Not effective in Firefox because of
     https://bugzilla.mozilla.org/show_bug.cgi?id=771241 */
.blocklyDraggable:active {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Change the cursor on the whole drag surface in case the mouse gets
   ahead of block during a drag. This way the cursor is still a closed hand.
  */
.blocklyBlockDragSurface .blocklyDraggable {
  /* backup for browsers (e.g. IE11) that don't support grabbing */
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

.blocklyDragging.blocklyDraggingDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyDragging>.blocklyPath,
.blocklyDragging>.blocklyPathLight {
  fill-opacity: .8;
  stroke-opacity: .8;
}

.blocklyDragging>.blocklyPathDark {
  display: none;
}

.blocklyDisabled>.blocklyPath {
  fill-opacity: .5;
  stroke-opacity: .5;
}

.blocklyDisabled>.blocklyPathLight,
.blocklyDisabled>.blocklyPathDark {
  display: none;
}

.blocklyInsertionMarker>.blocklyPath,
.blocklyInsertionMarker>.blocklyPathLight,
.blocklyInsertionMarker>.blocklyPathDark {
  fill-opacity: .2;
  stroke: none;
}

.blocklyMultilineText {
  font-family: monospace;
}

.blocklyNonEditableText>text {
  pointer-events: none;
}

.blocklyFlyout {
  position: absolute;
  z-index: 20;
}

.blocklyText text {
  cursor: default;
}

/*
  Don't allow users to select text.  It gets annoying when trying to
  drag a block and selected text moves instead.
*/
.blocklySvg text,
.blocklyBlockDragSurface text {
  user-select: none;
  -ms-user-select: none;
  -webkit-user-select: none;
  cursor: inherit;
}

.blocklyHidden {
  display: none;
}

.blocklyFieldDropdown:not(.blocklyHidden) {
  display: block;
}

.blocklyIconGroup {
  cursor: default;
}

.blocklyIconGroup:not(:hover),
.blocklyIconGroupReadonly {
  opacity: .6;
}

.blocklyIconShape {
  fill: #00f;
  stroke: #fff;
  stroke-width: 1px;
}

.blocklyIconSymbol {
  fill: #fff;
}

.blocklyMinimalBody {
  margin: 0;
  padding: 0;
}

.blocklyHtmlInput {
  border: none;
  border-radius: 4px;
  height: 100%;
  margin: 0;
  outline: none;
  padding: 0;
  width: 100%;
  text-align: center;
  display: block;
  box-sizing: border-box;
}

/* Edge and IE introduce a close icon when the input value is longer than a
   certain length. This affects our sizing calculations of the text input.
   Hiding the close icon to avoid that. */
.blocklyHtmlInput::-ms-clear {
  display: none;
}

.blocklyMainBackground {
  stroke-width: 1;
  stroke: #c6c6c6;  /* Equates to #ddd due to border being off-pixel. */
}

.blocklyMutatorBackground {
  fill: #fff;
  stroke: #ddd;
  stroke-width: 1;
}

.blocklyFlyoutBackground {
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyMainWorkspaceScrollbar {
  z-index: 20;
}

.blocklyFlyoutScrollbar {
  z-index: 30;
}

.blocklyScrollbarHorizontal,
.blocklyScrollbarVertical {
  position: absolute;
  outline: none;
}

.blocklyScrollbarBackground {
  opacity: 0;
}

.blocklyScrollbarHandle {
  fill: #ccc;
}

.blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyScrollbarHandle:hover {
  fill: #bbb;
}

/* Darken flyout scrollbars due to being on a grey background. */
/* By contrast, workspace scrollbars are on a white background. */
.blocklyFlyout .blocklyScrollbarHandle {
  fill: #bbb;
}

.blocklyFlyout .blocklyScrollbarBackground:hover+.blocklyScrollbarHandle,
.blocklyFlyout .blocklyScrollbarHandle:hover {
  fill: #aaa;
}

.blocklyInvalidInput {
  background: #faa;
}

.blocklyVerticalMarker {
  stroke-width: 3px;
  fill: rgba(255,255,255,.5);
  pointer-events: none;
}

.blocklyComputeCanvas {
  position: absolute;
  width: 0;
  height: 0;
}

.blocklyNoPointerEvents {
  pointer-events: none;
}

.blocklyContextMenu {
  border-radius: 4px;
  max-height: 100%;
}

.blocklyDropdownMenu {
  border-radius: 2px;
  padding: 0 !important;
}

.blocklyDropdownMenu .blocklyMenuItem {
  /* 28px on the left for icon or checkbox. */
  padding-left: 28px;
}

/* BiDi override for the resting state. */
.blocklyDropdownMenu .blocklyMenuItemRtl {
  /* Flip left/right padding for BiDi. */
  padding-left: 5px;
  padding-right: 28px;
}

.blocklyWidgetDiv .blocklyMenu {
  background: #fff;
  border: 1px solid transparent;
  box-shadow: 0 0 3px 1px rgba(0,0,0,.3);
  font: normal 13px Arial, sans-serif;
  margin: 0;
  outline: none;
  padding: 4px 0;
  position: absolute;
  overflow-y: auto;
  overflow-x: hidden;
  max-height: 100%;
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

.blocklyWidgetDiv .blocklyMenu.blocklyFocused {
  box-shadow: 0 0 6px 1px rgba(0,0,0,.3);
}

.blocklyDropDownDiv .blocklyMenu {
  background: inherit;  /* Compatibility with gapi, reset from goog-menu */
  border: inherit;  /* Compatibility with gapi, reset from goog-menu */
  font: normal 13px "Helvetica Neue", Helvetica, sans-serif;
  outline: none;
  position: relative;  /* Compatibility with gapi, reset from goog-menu */
  z-index: 20000;  /* Arbitrary, but some apps depend on it... */
}

/* State: resting. */
.blocklyMenuItem {
  border: none;
  color: #000;
  cursor: pointer;
  list-style: none;
  margin: 0;
  /* 7em on the right for shortcut. */
  min-width: 7em;
  padding: 6px 15px;
  white-space: nowrap;
}

/* State: disabled. */
.blocklyMenuItemDisabled {
  color: #ccc;
  cursor: inherit;
}

/* State: hover. */
.blocklyMenuItemHighlight {
  background-color: rgba(0,0,0,.1);
}

/* State: selected/checked. */
.blocklyMenuItemCheckbox {
  height: 16px;
  position: absolute;
  width: 16px;
}

.blocklyMenuItemSelected .blocklyMenuItemCheckbox {
  background: url(<<<PATH>>>/sprites.png) no-repeat -48px -16px;
  float: left;
  margin-left: -24px;
  position: static;  /* Scroll with the menu. */
}

.blocklyMenuItemRtl .blocklyMenuItemCheckbox {
  float: right;
  margin-right: -24px;
}
`;var c,k,a,d;n.module$exports$Blockly$utils$string={startsWith:function(t,e){return t.lastIndexOf(e,0)===0},shortestStringLength:function(t){return t.length?t.reduce(function(e,o){return e.length<o.length?e:o}).length:0},commonWordPrefix:function(t,e){if(!t.length)return 0;if(t.length===1)return t[0].length;var o=0;e=e||(0,n.module$exports$Blockly$utils$string.shortestStringLength)(t);var i;for(i=0;i<e;i++){for(var s=t[0][i],l=1;l<t.length;l++)if(s!==t[l][i])return o;s===" "&&(o=i+1)}for(s=1;s<t.length;s++)if((l=t[s][i])&&l!==" ")return o;return e},commonWordSuffix:function(t,e){if(!t.length)return 0;if(t.length===1)return t[0].length;var o=0;e=e||(0,n.module$exports$Blockly$utils$string.shortestStringLength)(t);var i;for(i=0;i<e;i++){for(var s=t[0].substr(-i-1,1),l=1;l<t.length;l++)if(s!==t[l].substr(-i-1,1))return o;s===" "&&(o=i+1)}for(s=1;s<t.length;s++)if((l=t[s].charAt(t[s].length-i-1))&&l!==" ")return o;return e},wrap:function(t,e){t=t.split(`
`);for(var o=0;o<t.length;o++)t[o]=c(t[o],e);return t.join(`
`)}},c=function(t,e){if(t.length<=e)return t;for(var o=t.trim().split(/\s+/),i=0;i<o.length;i++)o[i].length>e&&(e=o[i].length);var s=-1/0,l=1;do{i=s;var h=t;t=[],s=o.length/l;for(var S=1,C=0;C<o.length-1;C++)S<(C+1.5)/s?(S++,t[C]=!0):t[C]=!1;t=a(o,t,e),s=k(o,t,e),t=d(o,t),l++}while(s>i);return h},k=function(t,e,o){for(var i=[0],s=[],l=0;l<t.length;l++)i[i.length-1]+=t[l].length,e[l]===!0?(i.push(0),s.push(t[l].charAt(t[l].length-1))):e[l]===!1&&i[i.length-1]++;for(t=Math.max.apply(Math,i),l=e=0;l<i.length;l++)e-=2*Math.pow(Math.abs(o-i[l]),1.5),e-=Math.pow(t-i[l],1.5),".?!".indexOf(s[l])!==-1?e+=o/3:",;)]}".indexOf(s[l])!==-1&&(e+=o/4);return 1<i.length&&i[i.length-1]<=i[i.length-2]&&(e+=.5),e},a=function(t,e,o){for(var i=k(t,e,o),s,l=0;l<e.length-1;l++)if(e[l]!==e[l+1]){var h=[].concat(e);h[l]=!h[l],h[l+1]=!h[l+1];var S=k(t,h,o);S>i&&(i=S,s=h)}return s?a(t,s,o):e},d=function(t,e){for(var o=[],i=0;i<t.length;i++)o.push(t[i]),e[i]!==void 0&&o.push(e[i]?`
`:" ");return o.join("")},n.module$exports$Blockly$utils$string.isNumber=function(t){return/^\s*-?\d+(\.\d+)?\s*$/.test(t)},n.module$exports$Blockly$utils$global={},n.module$exports$Blockly$utils$global.globalThis=function(){return typeof globalThis=="object"?globalThis:typeof self=="object"?self:typeof window=="object"?window:typeof commonjsGlobal=="object"?commonjsGlobal:this}();var g={},I=750;g.TOUCH_ENABLED="ontouchstart"in n.module$exports$Blockly$utils$global.globalThis||!!(n.module$exports$Blockly$utils$global.globalThis.document&&document.documentElement&&"ontouchstart"in document.documentElement)||!(!n.module$exports$Blockly$utils$global.globalThis.navigator||!n.module$exports$Blockly$utils$global.globalThis.navigator.maxTouchPoints&&!n.module$exports$Blockly$utils$global.globalThis.navigator.msMaxTouchPoints);var U=null;g.TOUCH_MAP={},n.module$exports$Blockly$utils$global.globalThis.PointerEvent?g.TOUCH_MAP={mousedown:["pointerdown"],mouseenter:["pointerenter"],mouseleave:["pointerleave"],mousemove:["pointermove"],mouseout:["pointerout"],mouseover:["pointerover"],mouseup:["pointerup","pointercancel"],touchend:["pointerup"],touchcancel:["pointercancel"]}:g.TOUCH_ENABLED&&(g.TOUCH_MAP={mousedown:["touchstart"],mousemove:["touchmove"],mouseup:["touchend","touchcancel"]});var st=0;g.longStart=function(t,e){(0,g.longStop)(),t.changedTouches&&t.changedTouches.length!==1||(st=setTimeout(function(){t.changedTouches&&(t.button=2,t.clientX=t.changedTouches[0].clientX,t.clientY=t.changedTouches[0].clientY),e&&e.handleRightClick(t)},I))},g.longStop=function(){st&&(clearTimeout(st),st=0)},g.clearTouchIdentifier=function(){U=null},g.shouldHandleEvent=function(t){return!(0,g.isMouseOrTouchEvent)(t)||(0,g.checkTouchIdentifier)(t)},g.getTouchIdentifierFromEvent=function(t){return t.pointerId!==void 0?t.pointerId:t.changedTouches&&t.changedTouches[0]&&t.changedTouches[0].identifier!==void 0&&t.changedTouches[0].identifier!==null?t.changedTouches[0].identifier:"mouse"},g.checkTouchIdentifier=function(t){var e=(0,g.getTouchIdentifierFromEvent)(t);return U!=null?U===e:t.type==="mousedown"||t.type==="touchstart"||t.type==="pointerdown"?(U=e,!0):!1},g.setClientFromTouch=function(t){if((0,n.module$exports$Blockly$utils$string.startsWith)(t.type,"touch")&&t.changedTouches){var e=t.changedTouches[0];t.clientX=e.clientX,t.clientY=e.clientY}},g.isMouseOrTouchEvent=function(t){return(0,n.module$exports$Blockly$utils$string.startsWith)(t.type,"touch")||(0,n.module$exports$Blockly$utils$string.startsWith)(t.type,"mouse")||(0,n.module$exports$Blockly$utils$string.startsWith)(t.type,"pointer")},g.isTouchEvent=function(t){return(0,n.module$exports$Blockly$utils$string.startsWith)(t.type,"touch")||(0,n.module$exports$Blockly$utils$string.startsWith)(t.type,"pointer")},g.splitEventByTouches=function(t){var e=[];if(t.changedTouches)for(var o=0;o<t.changedTouches.length;o++)e[o]={type:t.type,changedTouches:[t.changedTouches[o]],target:t.target,stopPropagation:function(){t.stopPropagation()},preventDefault:function(){t.preventDefault()}};else e.push(t);return e};var G={};(function(t){function e(i){return o.indexOf(i.toUpperCase())!==-1}G.raw=t;var o=G.raw.toUpperCase();G.IE=e("Trident")||e("MSIE"),G.EDGE=e("Edge"),G.JavaFx=e("JavaFX"),G.CHROME=(e("Chrome")||e("CriOS"))&&!G.EDGE,G.WEBKIT=e("WebKit")&&!G.EDGE,G.GECKO=e("Gecko")&&!G.WEBKIT&&!G.IE&&!G.EDGE,G.ANDROID=e("Android"),t=n.module$exports$Blockly$utils$global.globalThis.navigator&&n.module$exports$Blockly$utils$global.globalThis.navigator.maxTouchPoints,G.IPAD=e("iPad")||e("Macintosh")&&0<t,G.IPOD=e("iPod"),G.IPHONE=e("iPhone")&&!G.IPAD&&!G.IPOD,G.MAC=e("Macintosh"),G.TABLET=G.IPAD||G.ANDROID&&!e("Mobile")||e("Silk"),G.MOBILE=!G.TABLET&&(G.IPOD||G.IPHONE||G.ANDROID||e("IEMobile"))})(n.module$exports$Blockly$utils$global.globalThis.navigator&&n.module$exports$Blockly$utils$global.globalThis.navigator.userAgent||"");var $={},Pt=40,Te=125;$.conditionalBind=function(t,e,o,i,s,l){var h=!1,S=function(xt){var ho=!s;xt=(0,g.splitEventByTouches)(xt);for(var _o=0;_o<xt.length;_o++){var hn=xt[_o];(!ho||(0,g.shouldHandleEvent)(hn))&&((0,g.setClientFromTouch)(hn),o?i.call(o,hn):i(hn),h=!0)}},C=[];if(n.module$exports$Blockly$utils$global.globalThis.PointerEvent&&e in g.TOUCH_MAP)for(var x=0;x<g.TOUCH_MAP[e].length;x++){var F=g.TOUCH_MAP[e][x];t.addEventListener(F,S,!1),C.push([t,F,S])}else if(t.addEventListener(e,S,!1),C.push([t,e,S]),e in g.TOUCH_MAP)for(x=function(xt){S(xt);var ho=!l;h&&ho&&xt.preventDefault()},F=0;F<g.TOUCH_MAP[e].length;F++){var it=g.TOUCH_MAP[e][F];t.addEventListener(it,x,!1),C.push([t,it,x])}return C},$.bind=function(t,e,o,i){var s=function(x){o?i.call(o,x):i(x)},l=[];if(n.module$exports$Blockly$utils$global.globalThis.PointerEvent&&e in g.TOUCH_MAP)for(var h=0;h<g.TOUCH_MAP[e].length;h++){var S=g.TOUCH_MAP[e][h];t.addEventListener(S,s,!1),l.push([t,S,s])}else if(t.addEventListener(e,s,!1),l.push([t,e,s]),e in g.TOUCH_MAP)for(h=function(x){if(x.changedTouches&&x.changedTouches.length===1){var F=x.changedTouches[0];x.clientX=F.clientX,x.clientY=F.clientY}s(x),x.preventDefault()},S=0;S<g.TOUCH_MAP[e].length;S++){var C=g.TOUCH_MAP[e][S];t.addEventListener(C,h,!1),l.push([t,C,h])}return l},$.unbind=function(t){for(var e;t.length;){e=t.pop();var o=e[0],i=e[1];e=e[2],o.removeEventListener(i,e,!1)}return e},$.isTargetInput=function(t){return t.target.type==="textarea"||t.target.type==="text"||t.target.type==="number"||t.target.type==="email"||t.target.type==="password"||t.target.type==="search"||t.target.type==="tel"||t.target.type==="url"||t.target.isContentEditable||t.target.dataset&&t.target.dataset.isTextInput==="true"},$.isRightButton=function(t){return t.ctrlKey&&G.MAC?!0:t.button===2},$.mouseToSvg=function(t,e,o){var i=e.createSVGPoint();return i.x=t.clientX,i.y=t.clientY,o||(o=e.getScreenCTM().inverse()),i.matrixTransform(o)},$.getScrollDeltaPixels=function(t){switch(t.deltaMode){default:return{x:t.deltaX,y:t.deltaY};case 1:return{x:t.deltaX*Pt,y:t.deltaY*Pt};case 2:return{x:t.deltaX*Te,y:t.deltaY*Te}}};var Lt={};Lt.Blocks=Object.create(null);var Oo;n.module$exports$Blockly$common={},n.module$exports$Blockly$common.getMainWorkspace=function(){return Oo},n.module$exports$Blockly$common.setMainWorkspace=function(t){Oo=t};var nt=null;n.module$exports$Blockly$common.getSelected=function(){return nt},n.module$exports$Blockly$common.setSelected=function(t){nt=t};var Ao;n.module$exports$Blockly$common.getParentContainer=function(){return Ao},n.module$exports$Blockly$common.setParentContainer=function(t){Ao=t},n.module$exports$Blockly$common.svgResize=function(t){for(;t.options.parentWorkspace;)t=t.options.parentWorkspace;var e=t.getParentSvg(),o=t.getCachedParentSvgSize(),i=e.parentNode;if(i){var s=i.offsetWidth;i=i.offsetHeight,o.width!==s&&(e.setAttribute("width",s+"px"),t.setCachedParentSvgSize(s,null)),o.height!==i&&(e.setAttribute("height",i+"px"),t.setCachedParentSvgSize(null,i)),t.resize()}},n.module$exports$Blockly$common.draggingConnections=[],n.module$exports$Blockly$common.getBlockTypeCounts=function(t,e){var o=Object.create(null),i=t.getDescendants(!0);for(e&&(t=t.getNextBlock())&&(t=i.indexOf(t),i.splice(t,i.length-t)),t=0;e=i[t];t++)o[e.type]?o[e.type]++:o[e.type]=1;return o};var Ho=function(t){return function(){this.jsonInit(t)}};n.module$exports$Blockly$common.defineBlocksWithJsonArray=function(t){(0,n.module$exports$Blockly$common.defineBlocks)((0,n.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)(t))},n.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray=function(t){for(var e={},o=0;o<t.length;o++){var i=t[o];if(i){var s=i.type;s?e[s]={init:Ho(i)}:console.warn("Block definition #"+o+" in JSON array is missing a type attribute. Skipping.")}else console.warn("Block definition #"+o+" in JSON array is "+i+". Skipping")}return e},n.module$exports$Blockly$common.defineBlocks=function(t){for(var e=n.$jscomp.makeIterator(Object.keys(t)),o=e.next();!o.done;o=e.next()){o=o.value;var i=t[o];o in Lt.Blocks&&console.warn('Block definiton "'+o+'" overwrites previous definition.'),Lt.Blocks[o]=i}};var Q={},go=void 0;Q.setCustomTooltip=function(t){go=t},Q.getCustomTooltip=function(){return go};var oo=!1;Q.isVisible=function(){return oo},Object.defineProperties(Q,{visible:{get:function(){return(0,y.warn)("Blockly.Tooltip.visible","September 2021","September 2022","Blockly.Tooltip.isVisible()"),(0,Q.isVisible)()}}});var Ve=!1;Q.LIMIT=50;var pe=0,Re=0,ne=0,xo=0,ie=null,Mo=null;Q.OFFSET_X=0,Q.OFFSET_Y=10,Q.RADIUS_OK=10,Q.HOVER_MS=750,Q.MARGINS=5;var Ft=null;Q.getDiv=function(){return Ft},Object.defineProperties(Q,{DIV:{get:function(){return(0,y.warn)("Blockly.Tooltip.DIV","September 2021","September 2022","Blockly.Tooltip.getDiv()"),(0,Q.getDiv)()}}}),Q.getTooltipOfObject=function(t){if(t=No(t)){for(t=t.tooltip;typeof t=="function";)t=t();if(typeof t!="string")throw Error("Tooltip function must return a string.");return t}return""};var No=function(t){for(;t&&t.tooltip;){if(typeof t.tooltip=="string"||typeof t.tooltip=="function")return t;t=t.tooltip}return null};Q.createDom=function(){Ft||(Ft=document.createElement("div"),Ft.className="blocklyTooltipDiv",((0,n.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(Ft))},Q.bindMouseEvents=function(t){t.mouseOverWrapper_=(0,$.bind)(t,"mouseover",null,Qn),t.mouseOutWrapper_=(0,$.bind)(t,"mouseout",null,ti),t.addEventListener("mousemove",Dn,!1)},Q.unbindMouseEvents=function(t){t&&((0,$.unbind)(t.mouseOverWrapper_),(0,$.unbind)(t.mouseOutWrapper_),t.removeEventListener("mousemove",Dn))};var Qn=function(t){Ve||(t=No(t.currentTarget),ie!==t&&((0,Q.hide)(),Mo=null,ie=t),clearTimeout(pe))},ti=function(t){Ve||(pe=setTimeout(function(){Mo=ie=null,(0,Q.hide)()},1),clearTimeout(Re))},Dn=function(t){if(ie&&ie.tooltip&&!Ve)if(oo){var e=ne-t.pageX;t=xo-t.pageY,Math.sqrt(e*e+t*t)>Q.RADIUS_OK&&(0,Q.hide)()}else Mo!==ie&&(clearTimeout(Re),ne=t.pageX,xo=t.pageY,Re=setTimeout(fe,Q.HOVER_MS))};Q.dispose=function(){Mo=ie=null,(0,Q.hide)()},Q.hide=function(){oo&&(oo=!1,Ft&&(Ft.style.display="none")),Re&&clearTimeout(Re)},Q.block=function(){(0,Q.hide)(),Ve=!0},Q.unblock=function(){Ve=!1};var ei=function(){Ft&&ie&&(typeof go=="function"?go(Ft,ie):oi())},oi=function(){var t=(0,Q.getTooltipOfObject)(ie);t=(0,n.module$exports$Blockly$utils$string.wrap)(t,Q.LIMIT),t=t.split(`
`);for(var e=0;e<t.length;e++){var o=document.createElement("div");o.appendChild(document.createTextNode(t[e])),Ft.appendChild(o)}},ni=function(t){var e=document.documentElement.clientWidth,o=document.documentElement.clientHeight,i=ne;i=t?i-(Q.OFFSET_X+Ft.offsetWidth):i+Q.OFFSET_X;var s=xo+Q.OFFSET_Y;return s+Ft.offsetHeight>o+window.scrollY&&(s-=Ft.offsetHeight+2*Q.OFFSET_Y),t?i=Math.max(Q.MARGINS-window.scrollX,i):i+Ft.offsetWidth>e+window.scrollX-2*Q.MARGINS&&(i=e-Ft.offsetWidth-2*Q.MARGINS),{x:i,y:s}},fe=function(){if(!Ve&&(Mo=ie,Ft)){Ft.textContent="",ei();var t=ie.RTL;Ft.style.direction=t?"rtl":"ltr",Ft.style.display="block",oo=!0,t=ni(t);var e=t.y;Ft.style.left=t.x+"px",Ft.style.top=e+"px"}},_={SVG_NS:"http://www.w3.org/2000/svg",HTML_NS:"http://www.w3.org/1999/xhtml",XLINK_NS:"http://www.w3.org/1999/xlink",NodeType:{ELEMENT_NODE:1,TEXT_NODE:3,COMMENT_NODE:8,DOCUMENT_POSITION_CONTAINED_BY:16}},De=null,u=0,T=null;_.createSvgElement=function(t,e,o){t=document.createElementNS(_.SVG_NS,String(t));for(var i in e)t.setAttribute(i,e[i]);return document.body.runtimeStyle&&(t.runtimeStyle=t.currentStyle=t.style),o&&o.appendChild(t),t},_.addClass=function(t,e){var o=t.getAttribute("class")||"";return(" "+o+" ").indexOf(" "+e+" ")!==-1?!1:(o&&(o+=" "),t.setAttribute("class",o+e),!0)},_.removeClasses=function(t,e){e=e.split(" ");for(var o=0;o<e.length;o++)(0,_.removeClass)(t,e[o])},_.removeClass=function(t,e){var o=t.getAttribute("class");if((" "+o+" ").indexOf(" "+e+" ")===-1)return!1;o=o.split(/\s+/);for(var i=0;i<o.length;i++)o[i]&&o[i]!==e||(o.splice(i,1),i--);return o.length?t.setAttribute("class",o.join(" ")):t.removeAttribute("class"),!0},_.hasClass=function(t,e){return(" "+t.getAttribute("class")+" ").indexOf(" "+e+" ")!==-1},_.removeNode=function(t){return t&&t.parentNode?t.parentNode.removeChild(t):null},_.insertAfter=function(t,e){var o=e.nextSibling;if(e=e.parentNode,!e)throw Error("Reference node has no parent.");o?e.insertBefore(t,o):e.appendChild(t)},_.containsNode=function(t,e){return!!(t.compareDocumentPosition(e)&_.NodeType.DOCUMENT_POSITION_CONTAINED_BY)},_.setCssTransform=function(t,e){t.style.transform=e,t.style["-webkit-transform"]=e},_.startTextWidthCache=function(){u++,De||(De=Object.create(null))},_.stopTextWidthCache=function(){u--,u||(De=null)},_.getTextWidth=function(t){var e=t.textContent+`
`+t.className.baseVal,o;if(De&&(o=De[e]))return o;try{o=G.IE||G.EDGE?t.getBBox().width:t.getComputedTextLength()}catch{return 8*t.textContent.length}return De&&(De[e]=o),o},_.getFastTextWidth=function(t,e,o,i){return(0,_.getFastTextWidthWithSizeString)(t,e+"pt",o,i)},_.getFastTextWidthWithSizeString=function(t,e,o,i){var s=t.textContent;t=s+`
`+t.className.baseVal;var l;return De&&(l=De[t])||(T||(l=document.createElement("canvas"),l.className="blocklyComputeCanvas",document.body.appendChild(l),T=l.getContext("2d")),T.font=o+" "+e+" "+i,l=T.measureText(s).width,De&&(De[t]=l)),l},_.measureFontMetrics=function(t,e,o,i){var s=document.createElement("span");s.style.font=o+" "+e+" "+i,s.textContent=t,t=document.createElement("div"),t.style.width="1px",t.style.height=0,e=document.createElement("div"),e.setAttribute("style","position: fixed; top: 0; left: 0; display: flex;"),e.appendChild(s),e.appendChild(t),document.body.appendChild(e),o={height:0,baseline:0};try{e.style.alignItems="baseline",o.baseline=t.offsetTop-s.offsetTop,e.style.alignItems="flex-end",o.height=t.offsetTop-s.offsetTop}finally{document.body.removeChild(e)}return o};var v={},M=null,N=null,ut="",no="",je;v.getDiv=function(){return je},v.testOnly_setDiv=function(t){je=t},Object.defineProperties(v,{DIV:{get:function(){return(0,y.warn)("Blockly.WidgetDiv.DIV","September 2021","September 2022","Blockly.WidgetDiv.getDiv()"),(0,v.getDiv)()}}}),v.createDom=function(){je||(je=document.createElement("div"),je.className="blocklyWidgetDiv",((0,n.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(je))},v.show=function(t,e,o){(0,v.hide)(),M=t,N=o,t=je,t.style.direction=e?"rtl":"ltr",t.style.display="block",e=(0,n.module$exports$Blockly$common.getMainWorkspace)(),ut=e.getRenderer().getClassName(),no=e.getTheme().getClassName(),(0,_.addClass)(t,ut),(0,_.addClass)(t,no)},v.hide=function(){if((0,v.isVisible)()){M=null;var t=je;t.style.display="none",t.style.left="",t.style.top="",N&&N(),N=null,t.textContent="",ut&&((0,_.removeClass)(t,ut),ut=""),no&&((0,_.removeClass)(t,no),no=""),(0,n.module$exports$Blockly$common.getMainWorkspace)().markFocused()}},v.isVisible=function(){return!!M},v.hideIfOwner=function(t){M===t&&(0,v.hide)()};var Fi=function(t,e,o){je.style.left=t+"px",je.style.top=e+"px",je.style.height=o+"px"};v.positionWithAnchor=function(t,e,o,i){var s=br(t,e,o);t=$r(t,e,o,i),0>s?Fi(t,0,o.height+s):Fi(t,s,o.height)};var $r=function(t,e,o,i){return i?Math.min(Math.max(e.right-o.width,t.left),t.right-o.width):Math.max(Math.min(e.left,t.right-o.width),t.left)},br=function(t,e,o){return e.bottom+o.height>=t.bottom?e.top-o.height:e.bottom},Y={},Or="aria-",Ar="role";Y.Role={GRID:"grid",GRIDCELL:"gridcell",GROUP:"group",LISTBOX:"listbox",MENU:"menu",MENUITEM:"menuitem",MENUITEMCHECKBOX:"menuitemcheckbox",OPTION:"option",PRESENTATION:"presentation",ROW:"row",TREE:"tree",TREEITEM:"treeitem"},Y.State={ACTIVEDESCENDANT:"activedescendant",COLCOUNT:"colcount",DISABLED:"disabled",EXPANDED:"expanded",INVALID:"invalid",LABEL:"label",LABELLEDBY:"labelledby",LEVEL:"level",ORIENTATION:"orientation",POSINSET:"posinset",ROWCOUNT:"rowcount",SELECTED:"selected",SETSIZE:"setsize",VALUEMAX:"valuemax",VALUEMIN:"valuemin"},Y.setRole=function(t,e){t.setAttribute(Ar,e)},Y.setState=function(t,e,o){Array.isArray(o)&&(o=o.join(" ")),t.setAttribute(Or+e,o)};var re={TEST_ONLY:{}},xr=0;re.getNextUniqueId=function(){return"blockly-"+(xr++).toString(36)};var Ui="!#$%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";re.TEST_ONLY.genUid=function(){for(var t=Ui.length,e=[],o=0;20>o;o++)e[o]=Ui.charAt(Math.random()*t);return e.join("")},re.genUid=function(){return re.TEST_ONLY.genUid()};var b={},Ro=Object.create(null);b.TEST_ONLY={typeMap:Ro};var Ln=Object.create(null);b.DEFAULT="default",b.Type=function(t){this.name_=t},b.Type.prototype.toString=function(){return this.name_},b.Type.CONNECTION_CHECKER=new b.Type("connectionChecker"),b.Type.CURSOR=new b.Type("cursor"),b.Type.EVENT=new b.Type("event"),b.Type.FIELD=new b.Type("field"),b.Type.RENDERER=new b.Type("renderer"),b.Type.TOOLBOX=new b.Type("toolbox"),b.Type.THEME=new b.Type("theme"),b.Type.TOOLBOX_ITEM=new b.Type("toolboxItem"),b.Type.FLYOUTS_VERTICAL_TOOLBOX=new b.Type("flyoutsVerticalToolbox"),b.Type.FLYOUTS_HORIZONTAL_TOOLBOX=new b.Type("flyoutsHorizontalToolbox"),b.Type.METRICS_MANAGER=new b.Type("metricsManager"),b.Type.BLOCK_DRAGGER=new b.Type("blockDragger"),b.Type.SERIALIZER=new b.Type("serializer"),b.register=function(t,e,o,i){if(!(t instanceof b.Type)&&typeof t!="string"||String(t).trim()==="")throw Error('Invalid type "'+t+'". The type must be a non-empty string or a Blockly.registry.Type.');if(t=String(t).toLowerCase(),typeof e!="string"||e.trim()==="")throw Error('Invalid name "'+e+'". The name must be a non-empty string.');var s=e.toLowerCase();if(!o)throw Error("Can not register a null value");var l=Ro[t],h=Ln[t];if(l||(l=Ro[t]=Object.create(null),h=Ln[t]=Object.create(null)),Mr(t,o),!i&&l[s])throw Error('Name "'+s+'" with type "'+t+'" already registered.');l[s]=o,h[s]=e};var Mr=function(t,e){switch(t){case String(b.Type.FIELD):if(typeof e.fromJson!="function")throw Error('Type "'+t+'" must have a fromJson function')}};b.unregister=function(t,e){t=String(t).toLowerCase(),e=e.toLowerCase();var o=Ro[t];o&&o[e]?(delete Ro[t][e],delete Ln[t][e]):console.warn("Unable to unregister ["+e+"]["+t+"] from the registry.")};var Gi=function(t,e,o){t=String(t).toLowerCase(),e=e.toLowerCase();var i=Ro[t];if(!i||!i[e]){if(e="Unable to find ["+e+"]["+t+"] in the registry.",o)throw Error(e+" You must require or register a "+t+" plugin.");return console.warn(e),null}return i[e]};b.hasItem=function(t,e){return t=String(t).toLowerCase(),e=e.toLowerCase(),(t=Ro[t])?!!t[e]:!1},b.getClass=function(t,e,o){return Gi(t,e,o)},b.getObject=function(t,e,o){return Gi(t,e,o)},b.getAllItems=function(t,e,o){t=String(t).toLowerCase();var i=Ro[t];if(!i){if(i="Unable to find ["+t+"] in the registry.",o)throw Error(i+" You must require or register a "+t+" plugin.");return console.warn(i),null}if(!e)return i;t=Ln[t],o=Object.create(null),e=Object.keys(i);for(var s=0;s<e.length;s++){var l=e[s];o[t[l]]=i[l]}return o},b.getClassFromOptions=function(t,e,o){return e=e.plugins[t.toString()]||b.DEFAULT,typeof e=="function"?e:(0,b.getClass)(t,e,o)};var p={},Vi="",dn=!0;p.setRecordUndo=function(t){dn=t},p.getRecordUndo=function(){return dn};var ii=0;p.CREATE="create",p.BLOCK_CREATE=p.CREATE,p.DELETE="delete",p.BLOCK_DELETE=p.DELETE,p.CHANGE="change",p.BLOCK_CHANGE=p.CHANGE,p.MOVE="move",p.BLOCK_MOVE=p.MOVE,p.VAR_CREATE="var_create",p.VAR_DELETE="var_delete",p.VAR_RENAME="var_rename",p.UI="ui",p.BLOCK_DRAG="drag",p.SELECTED="selected",p.CLICK="click",p.MARKER_MOVE="marker_move",p.BUBBLE_OPEN="bubble_open",p.TRASHCAN_OPEN="trashcan_open",p.TOOLBOX_ITEM_SELECT="toolbox_item_select",p.THEME_CHANGE="theme_change",p.VIEWPORT_CHANGE="viewport_change",p.COMMENT_CREATE="comment_create",p.COMMENT_DELETE="comment_delete",p.COMMENT_CHANGE="comment_change",p.COMMENT_MOVE="comment_move",p.FINISHED_LOADING="finished_loading",p.BUMP_EVENTS=[p.CREATE,p.MOVE,p.COMMENT_CREATE,p.COMMENT_MOVE];var Wo=[];p.fire=function(t){(0,p.isEnabled)()&&(Wo.length||setTimeout(Hi,0),Wo.push(t))};var Hi=function(){for(var t=(0,p.filter)(Wo,!0),e=Wo.length=0,o;o=t[e];e++)if(o.workspaceId){var i=X.Workspace.getById(o.workspaceId);i&&i.fireChangeListener(o)}};p.filter=function(t,e){t=t.slice(),e||t.reverse();for(var o=[],i=Object.create(null),s=0,l=void 0;l=t[s];s++)if(!l.isNull()){var h=[l.isUiEvent?p.UI:l.type,l.blockId,l.workspaceId].join(" "),S=i[h],C=S?S.event:null;S?l.type===p.MOVE&&S.index===s-1?(C.newParentId=l.newParentId,C.newInputName=l.newInputName,C.newCoordinate=l.newCoordinate,S.index=s):l.type===p.CHANGE&&l.element===C.element&&l.name===C.name?C.newValue=l.newValue:l.type===p.VIEWPORT_CHANGE?(S=l,C.viewTop=S.viewTop,C.viewLeft=S.viewLeft,C.scale=S.scale,C.oldScale=S.oldScale):(l.type!==p.CLICK||C.type!==p.BUBBLE_OPEN)&&(i[h]={event:l,index:s},o.push(l)):(i[h]={event:l,index:s},o.push(l))}for(t=o.filter(function(x){return!x.isNull()}),e||t.reverse(),e=1,o=void 0;o=t[e];e++)o.type===p.CHANGE&&o.element==="mutation"&&t.unshift(t.splice(e,1)[0]);return t},p.clearPendingUndo=function(){for(var t=0,e;e=Wo[t];t++)e.recordUndo=!1},p.disable=function(){ii++},p.enable=function(){ii--},p.isEnabled=function(){return ii===0},p.getGroup=function(){return Vi},p.setGroup=function(t){Vi=typeof t=="boolean"?t?(0,re.genUid)():"":t},p.getDescendantIds=function(t){var e=[];t=t.getDescendants(!1);for(var o=0,i;i=t[o];o++)e[o]=i.id;return e},p.fromJson=function(t,e){var o=(0,p.get)(t.type);if(!o)throw Error("Unknown event type.");return o=new o,o.fromJson(t),o.workspaceId=e.id,o},p.get=function(t){return(0,b.getClass)(b.Type.EVENT,t)},p.disableOrphans=function(t){if((t.type===p.MOVE||t.type===p.CREATE)&&t.workspaceId){var e=X.Workspace.getById(t.workspaceId),o=e.getBlockById(t.blockId);if(o){t=dn;try{dn=!1;var i=o.getParent();if(i&&i.isEnabled()){var s=o.getDescendants(!1);for(e=0,i=void 0;i=s[e];e++)i.setEnabled(!0)}else if((o.outputConnection||o.previousConnection)&&!e.isDragging())do o.setEnabled(!1),o=o.getNextBlock();while(o)}finally{dn=t}}}},p.TEST_ONLY={FIRE_QUEUE:Wo,fireNow:Hi};var He={toRadians:function(t){return t*Math.PI/180},toDegrees:function(t){return 180*t/Math.PI},clamp:function(t,e,o){if(o<t){var i=o;o=t,t=i}return Math.max(t,Math.min(e,o))}},Co={bumpIntoBounds:function(t,e,o){var i=o.getBoundingRectangle(),s=i.right-i.left,l=(0,He.clamp)(e.top,i.top,e.top+e.height-(i.bottom-i.top))-i.top,h=e.left;return e=e.left+e.width-s,t.RTL?h=Math.min(e,h):e=Math.max(h,e),(t=(0,He.clamp)(h,i.left,e)-i.left)||l?(o.moveBy(t,l),!0):!1},bumpIntoBoundsHandler:function(t){return function(e){var o=t.getMetricsManager();if(o.hasFixedEdges()&&!t.isDragging())if(p.BUMP_EVENTS.indexOf(e.type)!==-1){o=o.getScrollMetrics(!0);var i=Nr(t,e);if(i){var s=(0,p.getGroup)();(0,p.setGroup)(e.group),(0,Co.bumpIntoBounds)(t,o,i)&&!e.group&&console.warn("Moved object in bounds but there was no event group. This may break undo."),s!==null&&(0,p.setGroup)(s)}}else e.type===p.VIEWPORT_CHANGE&&e.scale>e.oldScale&&(0,Co.bumpTopObjectsIntoBounds)(t)}}},Nr=function(t,e){var o=null;switch(e.type){case p.CREATE:case p.MOVE:(o=t.getBlockById(e.blockId))&&(o=o.getRootBlock());break;case p.COMMENT_CREATE:case p.COMMENT_MOVE:o=t.getCommentById(e.commentId)}return o};Co.bumpTopObjectsIntoBounds=function(t){var e=t.getMetricsManager();if(e.hasFixedEdges()&&!t.isDragging()){e=e.getScrollMetrics(!0);for(var o=t.getTopBoundedElements(),i=0,s;s=o[i];i++)(0,Co.bumpIntoBounds)(t,e,s)}};var H={Coordinate:function(t,e){this.x=t,this.y=e}};H.Coordinate.prototype.clone=function(){return new H.Coordinate(this.x,this.y)},H.Coordinate.prototype.scale=function(t){return this.x*=t,this.y*=t,this},H.Coordinate.prototype.translate=function(t,e){return this.x+=t,this.y+=e,this},H.Coordinate.equals=function(t,e){return t===e?!0:t&&e?t.x===e.x&&t.y===e.y:!1},H.Coordinate.distance=function(t,e){var o=t.x-e.x;return t=t.y-e.y,Math.sqrt(o*o+t*t)},H.Coordinate.magnitude=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},H.Coordinate.difference=function(t,e){return new H.Coordinate(t.x-e.x,t.y-e.y)},H.Coordinate.sum=function(t,e){return new H.Coordinate(t.x+e.x,t.y+e.y)};var jt={Size:function(t,e){this.width=t,this.height=e}};jt.Size.equals=function(t,e){return t===e?!0:t&&e?t.width===e.width&&t.height===e.height:!1};var Ct={getSize:function(t){if(Xi(t,"display")!=="none")return Wi(t);var e=t.style,o=e.display,i=e.visibility,s=e.position;e.visibility="hidden",e.position="absolute",e.display="inline";var l=t.offsetWidth;return t=t.offsetHeight,e.display=o,e.position=s,e.visibility=i,new jt.Size(l,t)}},Wi=function(t){return new jt.Size(t.offsetWidth,t.offsetHeight)},Xi=function(t,e){return(0,Ct.getComputedStyle)(t,e)||(0,Ct.getCascadedStyle)(t,e)||t.style&&t.style[e]};Ct.getComputedStyle=function(t,e){return document.defaultView&&document.defaultView.getComputedStyle&&(t=document.defaultView.getComputedStyle(t,null))&&(t[e]||t.getPropertyValue(e))||""},Ct.getCascadedStyle=function(t,e){return t.currentStyle?t.currentStyle[e]:null},Ct.getPageOffset=function(t){var e=new H.Coordinate(0,0);t=t.getBoundingClientRect();var o=document.documentElement;return o=new H.Coordinate(window.pageXOffset||o.scrollLeft,window.pageYOffset||o.scrollTop),e.x=t.left+o.x,e.y=t.top+o.y,e},Ct.getViewportPageOffset=function(){var t=document.body,e=document.documentElement;return new H.Coordinate(t.scrollLeft||e.scrollLeft,t.scrollTop||e.scrollTop)},Ct.setElementShown=function(t,e){t.style.display=e?"":"none"},Ct.isRightToLeft=function(t){return Xi(t,"direction")==="rtl"},Ct.getBorderBox=function(t){var e=(0,Ct.getComputedStyle)(t,"borderLeftWidth"),o=(0,Ct.getComputedStyle)(t,"borderRightWidth"),i=(0,Ct.getComputedStyle)(t,"borderTopWidth");return t=(0,Ct.getComputedStyle)(t,"borderBottomWidth"),{top:parseFloat(i),right:parseFloat(o),bottom:parseFloat(t),left:parseFloat(e)}},Ct.scrollIntoContainerView=function(t,e,o){t=(0,Ct.getContainerOffsetToScrollInto)(t,e,o),e.scrollLeft=t.x,e.scrollTop=t.y},Ct.getContainerOffsetToScrollInto=function(t,e,o){var i=(0,Ct.getPageOffset)(t),s=(0,Ct.getPageOffset)(e),l=(0,Ct.getBorderBox)(e),h=i.x-s.x-l.left;return i=i.y-s.y-l.top,s=Wi(t),t=e.clientWidth-s.width,s=e.clientHeight-s.height,l=e.scrollLeft,e=e.scrollTop,o?(l+=h-t/2,e+=i-s/2):(l+=Math.min(h,Math.max(h-t,0)),e+=Math.min(i,Math.max(i-s,0))),new H.Coordinate(l,e)};var wt={Rect:function(t,e,o,i){this.top=t,this.bottom=e,this.left=o,this.right=i}};wt.Rect.prototype.contains=function(t,e){return t>=this.left&&t<=this.right&&e>=this.top&&e<=this.bottom},wt.Rect.prototype.intersects=function(t){return!(this.left>t.right||this.right<t.left||this.top>t.bottom||this.bottom<t.top)};var z={ARROW_SIZE:16,BORDER_SIZE:1,ARROW_HORIZONTAL_PADDING:12,PADDING_Y:16,ANIMATION_TIME:.25},ri=null,Do=null,_n="",gn="",Bt,Xo,Lo,si=null,jo=null,ji=null;z.createDom=function(){Bt||(Bt=document.createElement("div"),Bt.className="blocklyDropDownDiv",((0,n.module$exports$Blockly$common.getParentContainer)()||document.body).appendChild(Bt),Xo=document.createElement("div"),Xo.className="blocklyDropDownContent",Bt.appendChild(Xo),Lo=document.createElement("div"),Lo.className="blocklyDropDownArrow",Bt.appendChild(Lo),Bt.style.opacity=0,Bt.style.transition="transform "+z.ANIMATION_TIME+"s, opacity "+z.ANIMATION_TIME+"s",Bt.addEventListener("focusin",function(){(0,_.addClass)(Bt,"blocklyFocused")}),Bt.addEventListener("focusout",function(){(0,_.removeClass)(Bt,"blocklyFocused")}))},z.setBoundsElement=function(t){si=t},z.getContentDiv=function(){return Xo},z.clearContent=function(){Xo.textContent="",Xo.style.width=""},z.setColour=function(t,e){Bt.style.backgroundColor=t,Bt.style.borderColor=e},z.showPositionedByBlock=function(t,e,o,i){return Ji(Yi(e),t,o,i)},z.showPositionedByField=function(t,e,o){return ji=!0,Ji(Ki(t),t,e,o)};var Yi=function(t){var e=t.getSvgRoot(),o=e.getBBox(),i=t.workspace.scale;return t=o.height*i,o=o.width*i,e=(0,Ct.getPageOffset)(e),new wt.Rect(e.y,e.y+t,e.x,e.x+o)},Ki=function(t){return t=t.getScaledBBox(),new wt.Rect(t.top,t.bottom,t.left,t.right)},Ji=function(t,e,o,i){var s=t.left+(t.right-t.left)/2,l=t.bottom;t=t.top,i&&(t+=i),i=e.getSourceBlock();for(var h=i.workspace;h.options.parentWorkspace;)h=h.options.parentWorkspace;return(0,z.setBoundsElement)(h.getParentSvg().parentNode),(0,z.show)(e,i.RTL,s,l,s,t,o)};z.show=function(t,e,o,i,s,l,h){return jo=t,Do=h||null,Bt.style.direction=e?"rtl":"ltr",t=(0,n.module$exports$Blockly$common.getMainWorkspace)(),_n=t.getRenderer().getClassName(),gn=t.getTheme().getClassName(),(0,_.addClass)(Bt,_n),(0,_.addClass)(Bt,gn),Zi(o,i,s,l)},z.TEST_ONLY={},z.TEST_ONLY.getBoundsInfo=function(){var t=(0,Ct.getPageOffset)(si),e=(0,Ct.getSize)(si);return{left:t.x,right:t.x+e.width,top:t.y,bottom:t.y+e.height,width:e.width,height:e.height}},z.TEST_ONLY.getPositionMetrics=function(t,e,o,i){var s=z.TEST_ONLY.getBoundsInfo(),l=(0,Ct.getSize)(Bt);return e+l.height<s.bottom?zi(t,e,s,l):i-l.height>s.top?qi(o,i,s,l):e+l.height<document.documentElement.clientHeight?zi(t,e,s,l):i-l.height>document.documentElement.clientTop?qi(o,i,s,l):Dr(t,s,l)};var zi=function(t,e,o,i){return t=(0,z.getPositionX)(t,o.left,o.right,i.width),{initialX:t.divX,initialY:e,finalX:t.divX,finalY:e+z.PADDING_Y,arrowX:t.arrowX,arrowY:-(z.ARROW_SIZE/2+z.BORDER_SIZE),arrowAtTop:!0,arrowVisible:!0}},qi=function(t,e,o,i){return t=(0,z.getPositionX)(t,o.left,o.right,i.width),{initialX:t.divX,initialY:e-i.height,finalX:t.divX,finalY:e-i.height-z.PADDING_Y,arrowX:t.arrowX,arrowY:i.height-2*z.BORDER_SIZE-z.ARROW_SIZE/2,arrowAtTop:!1,arrowVisible:!0}},Dr=function(t,e,o){return t=(0,z.getPositionX)(t,e.left,e.right,o.width),{initialX:t.divX,initialY:0,finalX:t.divX,finalY:0,arrowAtTop:null,arrowX:null,arrowY:null,arrowVisible:!1}};z.getPositionX=function(t,e,o,i){return e=(0,He.clamp)(e,t-i/2,o-i),t=t-z.ARROW_SIZE/2-e,o=z.ARROW_HORIZONTAL_PADDING,t=(0,He.clamp)(o,t,i-o-z.ARROW_SIZE),{arrowX:t,divX:e}},z.isVisible=function(){return!!jo},z.hideIfOwner=function(t,e){return jo===t?(e?(0,z.hideWithoutAnimation)():(0,z.hide)(),!0):!1},z.hide=function(){Bt.style.transform="translate(0, 0)",Bt.style.opacity=0,ri=setTimeout(function(){(0,z.hideWithoutAnimation)()},1e3*z.ANIMATION_TIME),Do&&(Do(),Do=null)},z.hideWithoutAnimation=function(){(0,z.isVisible)()&&(ri&&clearTimeout(ri),Bt.style.transform="",Bt.style.left="",Bt.style.top="",Bt.style.opacity=0,Bt.style.display="none",Bt.style.backgroundColor="",Bt.style.borderColor="",Do&&(Do(),Do=null),(0,z.clearContent)(),jo=null,_n&&((0,_.removeClass)(Bt,_n),_n=""),gn&&((0,_.removeClass)(Bt,gn),gn=""),(0,n.module$exports$Blockly$common.getMainWorkspace)().markFocused())};var Zi=function(t,e,o,i){t=z.TEST_ONLY.getPositionMetrics(t,e,o,i),t.arrowVisible?(Lo.style.display="",Lo.style.transform="translate("+t.arrowX+"px,"+t.arrowY+"px) rotate(45deg)",Lo.setAttribute("class",t.arrowAtTop?"blocklyDropDownArrow blocklyArrowTop":"blocklyDropDownArrow blocklyArrowBottom")):Lo.style.display="none",e=Math.floor(t.initialX),o=Math.floor(t.initialY),i=Math.floor(t.finalX);var s=Math.floor(t.finalY);return Bt.style.left=e+"px",Bt.style.top=o+"px",Bt.style.display="block",Bt.style.opacity=1,Bt.style.transform="translate("+(i-e)+"px,"+(s-o)+"px)",!!t.arrowAtTop};z.repositionForWindowResize=function(){if(jo){var t=jo,e=t.getSourceBlock();t=ji?Ki(t):Yi(e),e=t.left+(t.right-t.left)/2,Zi(e,t.bottom,e,t.top)}else(0,z.hide)()};var yt={},Qi=/translate\(\s*([-+\d.e]+)([ ,]\s*([-+\d.e]+)\s*)?/,tr=/transform:\s*translate(?:3d)?\(\s*([-+\d.e]+)\s*px([ ,]\s*([-+\d.e]+)\s*px)?/;yt.getRelativeXY=function(t){var e=new H.Coordinate(0,0),o=t.getAttribute("x");return o&&(e.x=parseInt(o,10)),(o=t.getAttribute("y"))&&(e.y=parseInt(o,10)),(o=(o=t.getAttribute("transform"))&&o.match(Qi))&&(e.x+=Number(o[1]),o[3]&&(e.y+=Number(o[3]))),(t=t.getAttribute("style"))&&-1<t.indexOf("translate")&&(t=t.match(tr))&&(e.x+=Number(t[1]),t[3]&&(e.y+=Number(t[3]))),e},yt.getInjectionDivXY=function(t){for(var e=0,o=0;t;){var i=(0,yt.getRelativeXY)(t);if(e+=i.x,o+=i.y,(" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1)break;t=t.parentNode}return new H.Coordinate(e,o)},yt.is3dSupported=function(){if(yt.is3dSupported.cached_!==void 0)return yt.is3dSupported.cached_;if(!n.module$exports$Blockly$utils$global.globalThis.getComputedStyle)return!1;var t=document.createElement("p"),e="none",o={webkitTransform:"-webkit-transform",OTransform:"-o-transform",msTransform:"-ms-transform",MozTransform:"-moz-transform",transform:"transform"};document.body.insertBefore(t,null);for(var i in o)if(t.style[i]!==void 0){if(t.style[i]="translate3d(1px,1px,1px)",e=n.module$exports$Blockly$utils$global.globalThis.getComputedStyle(t),!e)return document.body.removeChild(t),!1;e=e.getPropertyValue(o[i])}return document.body.removeChild(t),yt.is3dSupported.cached_=e!=="none",yt.is3dSupported.cached_},yt.getViewportBBox=function(){var t=(0,Ct.getViewportPageOffset)();return new wt.Rect(t.y,document.documentElement.clientHeight+t.y,t.x,document.documentElement.clientWidth+t.x)},yt.getDocumentScroll=function(){var t=document.documentElement,e=window;return G.IE&&e.pageYOffset!==t.scrollTop?new H.Coordinate(t.scrollLeft,t.scrollTop):new H.Coordinate(e.pageXOffset||t.scrollLeft,e.pageYOffset||t.scrollTop)},yt.screenToWsCoordinates=function(t,e){var o=e.x;e=e.y;var i=t.getInjectionDiv().getBoundingClientRect();return o=new H.Coordinate(o-i.left,e-i.top),e=t.getOriginOffsetInPixels(),H.Coordinate.difference(o,e).scale(1/t.scale)},yt.svgSize=function(t){return(0,y.warn)("Blockly.svgSize","March 2021","March 2022","workspace.getCachedParentSvgSize"),new jt.Size(t.cachedWidth_,t.cachedHeight_)},yt.TEST_ONLY={XY_REGEX:Qi,XY_STYLE_REGEX:tr};var R={Svg:function(t){this.tagName_=t}};R.Svg.prototype.toString=function(){return this.tagName_},R.Svg.ANIMATE=new R.Svg("animate"),R.Svg.CIRCLE=new R.Svg("circle"),R.Svg.CLIPPATH=new R.Svg("clipPath"),R.Svg.DEFS=new R.Svg("defs"),R.Svg.FECOMPOSITE=new R.Svg("feComposite"),R.Svg.FECOMPONENTTRANSFER=new R.Svg("feComponentTransfer"),R.Svg.FEFLOOD=new R.Svg("feFlood"),R.Svg.FEFUNCA=new R.Svg("feFuncA"),R.Svg.FEGAUSSIANBLUR=new R.Svg("feGaussianBlur"),R.Svg.FEPOINTLIGHT=new R.Svg("fePointLight"),R.Svg.FESPECULARLIGHTING=new R.Svg("feSpecularLighting"),R.Svg.FILTER=new R.Svg("filter"),R.Svg.FOREIGNOBJECT=new R.Svg("foreignObject"),R.Svg.G=new R.Svg("g"),R.Svg.IMAGE=new R.Svg("image"),R.Svg.LINE=new R.Svg("line"),R.Svg.PATH=new R.Svg("path"),R.Svg.PATTERN=new R.Svg("pattern"),R.Svg.POLYGON=new R.Svg("polygon"),R.Svg.RECT=new R.Svg("rect"),R.Svg.SVG=new R.Svg("svg"),R.Svg.TEXT=new R.Svg("text"),R.Svg.TSPAN=new R.Svg("tspan");var Ce={BlockDragSurfaceSvg:function(t){this.dragGroup_=this.SVG_=null,this.container_=t,this.scale_=1,this.surfaceXY_=null,this.childSurfaceXY_=new H.Coordinate(0,0),this.createDom()}};Ce.BlockDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=(0,_.createSvgElement)(R.Svg.SVG,{xmlns:_.SVG_NS,"xmlns:html":_.HTML_NS,"xmlns:xlink":_.XLINK_NS,version:"1.1",class:"blocklyBlockDragSurface"},this.container_),this.dragGroup_=(0,_.createSvgElement)(R.Svg.G,{},this.SVG_))},Ce.BlockDragSurfaceSvg.prototype.setBlocksAndShow=function(t){if(this.dragGroup_.childNodes.length)throw Error("Already dragging a block.");this.dragGroup_.appendChild(t),this.SVG_.style.display="block",this.surfaceXY_=new H.Coordinate(0,0)},Ce.BlockDragSurfaceSvg.prototype.translateAndScaleGroup=function(t,e,o){this.scale_=o,t=t.toFixed(0),e=e.toFixed(0),this.childSurfaceXY_.x=parseInt(t,10),this.childSurfaceXY_.y=parseInt(e,10),this.dragGroup_.setAttribute("transform","translate("+t+","+e+") scale("+o+")")},Ce.BlockDragSurfaceSvg.prototype.translateSurfaceInternal_=function(){var t=this.surfaceXY_.x,e=this.surfaceXY_.y;t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",(0,_.setCssTransform)(this.SVG_,"translate3d("+t+"px, "+e+"px, 0)")},Ce.BlockDragSurfaceSvg.prototype.translateBy=function(t,e){this.surfaceXY_=new H.Coordinate(this.surfaceXY_.x+t,this.surfaceXY_.y+e),this.translateSurfaceInternal_()},Ce.BlockDragSurfaceSvg.prototype.translateSurface=function(t,e){this.surfaceXY_=new H.Coordinate(t*this.scale_,e*this.scale_),this.translateSurfaceInternal_()},Ce.BlockDragSurfaceSvg.prototype.getSurfaceTranslation=function(){var t=(0,yt.getRelativeXY)(this.SVG_);return new H.Coordinate(t.x/this.scale_,t.y/this.scale_)},Ce.BlockDragSurfaceSvg.prototype.getGroup=function(){return this.dragGroup_},Ce.BlockDragSurfaceSvg.prototype.getSvgRoot=function(){return this.SVG_},Ce.BlockDragSurfaceSvg.prototype.getCurrentBlock=function(){return this.dragGroup_.firstChild},Ce.BlockDragSurfaceSvg.prototype.getWsTranslation=function(){return this.childSurfaceXY_.clone()},Ce.BlockDragSurfaceSvg.prototype.clearAndHide=function(t){var e=this.getCurrentBlock();if(e&&(t?t.appendChild(e):this.dragGroup_.removeChild(e)),this.SVG_.style.display="none",this.dragGroup_.childNodes.length)throw Error("Drag group was not cleared.");this.surfaceXY_=null};var Ye={Grid:function(t,e){this.scale_=1,this.gridPattern_=t,this.spacing_=e.spacing,this.length_=e.length,this.line2_=(this.line1_=t.firstChild)&&this.line1_.nextSibling,this.snapToGrid_=e.snap}};Ye.Grid.prototype.dispose=function(){this.gridPattern_=null},Ye.Grid.prototype.shouldSnap=function(){return this.snapToGrid_},Ye.Grid.prototype.getSpacing=function(){return this.spacing_},Ye.Grid.prototype.getPatternId=function(){return this.gridPattern_.id},Ye.Grid.prototype.update=function(t){this.scale_=t;var e=this.spacing_*t||100;this.gridPattern_.setAttribute("width",e),this.gridPattern_.setAttribute("height",e),e=Math.floor(this.spacing_/2)+.5;var o=e-this.length_/2,i=e+this.length_/2;e*=t,o*=t,i*=t,this.setLineAttributes_(this.line1_,t,o,i,e,e),this.setLineAttributes_(this.line2_,t,e,e,o,i)},Ye.Grid.prototype.setLineAttributes_=function(t,e,o,i,s,l){t&&(t.setAttribute("stroke-width",e),t.setAttribute("x1",o),t.setAttribute("y1",s),t.setAttribute("x2",i),t.setAttribute("y2",l))},Ye.Grid.prototype.moveTo=function(t,e){this.gridPattern_.setAttribute("x",t),this.gridPattern_.setAttribute("y",e),(G.IE||G.EDGE)&&this.update(this.scale_)},Ye.Grid.createDom=function(t,e,o){return t=(0,_.createSvgElement)(R.Svg.PATTERN,{id:"blocklyGridPattern"+t,patternUnits:"userSpaceOnUse"},o),0<e.length&&0<e.spacing?((0,_.createSvgElement)(R.Svg.LINE,{stroke:e.colour},t),1<e.length&&(0,_.createSvgElement)(R.Svg.LINE,{stroke:e.colour},t)):(0,_.createSvgElement)(R.Svg.LINE,{},t),t},n.module$exports$Blockly$Msg={},n.module$exports$Blockly$Msg.Msg=Object.create(null);var yn;n.module$exports$Blockly$utils$xml={NAME_SPACE:"https://developers.google.com/blockly/xml"},yn=n.module$exports$Blockly$utils$global.globalThis.document,n.module$exports$Blockly$utils$xml.getDocument=function(){return yn},n.module$exports$Blockly$utils$xml.setDocument=function(t){yn=t},n.module$exports$Blockly$utils$xml.createElement=function(t){return yn.createElementNS(n.module$exports$Blockly$utils$xml.NAME_SPACE,t)},n.module$exports$Blockly$utils$xml.createTextNode=function(t){return yn.createTextNode(t)},n.module$exports$Blockly$utils$xml.textToDomDocument=function(t){return new DOMParser().parseFromString(t,"text/xml")},n.module$exports$Blockly$utils$xml.domToText=function(t){return new XMLSerializer().serializeToString(t)},n.module$exports$Blockly$ConnectionType={ConnectionType:{INPUT_VALUE:1,OUTPUT_VALUE:2,NEXT_STATEMENT:3,PREVIOUS_STATEMENT:4}},n.module$exports$Blockly$inputTypes={},n.module$exports$Blockly$inputTypes.inputTypes={VALUE:n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,STATEMENT:n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,DUMMY:5};var er,or;n.module$exports$Blockly$Xml={workspaceToDom:function(t,e){var o=(0,n.module$exports$Blockly$utils$xml.createElement)("xml"),i=(0,n.module$exports$Blockly$Xml.variablesToDom)(n.module$exports$Blockly$Variables.allUsedVarModels(t));i.hasChildNodes()&&o.appendChild(i),i=t.getTopComments(!0);for(var s=0;s<i.length;s++)o.appendChild(i[s].toXmlWithXY(e));for(t=t.getTopBlocks(!0),i=0;i<t.length;i++)o.appendChild((0,n.module$exports$Blockly$Xml.blockToDomWithXY)(t[i],e));return o},variablesToDom:function(t){for(var e=(0,n.module$exports$Blockly$utils$xml.createElement)("variables"),o=0;o<t.length;o++){var i=t[o],s=(0,n.module$exports$Blockly$utils$xml.createElement)("variable");s.appendChild((0,n.module$exports$Blockly$utils$xml.createTextNode)(i.name)),i.type&&s.setAttribute("type",i.type),s.id=i.getId(),e.appendChild(s)}return e},blockToDomWithXY:function(t,e){if(t.isInsertionMarker()&&(t=t.getChildren(!1)[0],!t))return new DocumentFragment;var o;t.workspace.RTL&&(o=t.workspace.getWidth()),e=(0,n.module$exports$Blockly$Xml.blockToDom)(t,e);var i=t.getRelativeToSurfaceXY();return e.setAttribute("x",Math.round(t.workspace.RTL?o-i.x:i.x)),e.setAttribute("y",Math.round(i.y)),e}},er=function(t){if(t.isSerializable()){var e=(0,n.module$exports$Blockly$utils$xml.createElement)("field");return e.setAttribute("name",t.name||""),t.toXml(e)}return null},or=function(t,e){for(var o=0;o<t.inputList.length;o++)for(var i=t.inputList[o],s=0;s<i.fieldRow.length;s++){var l=er(i.fieldRow[s]);l&&e.appendChild(l)}},n.module$exports$Blockly$Xml.blockToDom=function(t,e){if(t.isInsertionMarker())return(e=t.getChildren(!1)[0])?(0,n.module$exports$Blockly$Xml.blockToDom)(e):new DocumentFragment;var o=(0,n.module$exports$Blockly$utils$xml.createElement)(t.isShadow()?"shadow":"block");if(o.setAttribute("type",t.type),e||o.setAttribute("id",t.id),t.mutationToDom){var i=t.mutationToDom();i&&(i.hasChildNodes()||i.hasAttributes())&&o.appendChild(i)}if(or(t,o),i=t.getCommentText()){var s=t.commentModel.size,l=t.commentModel.pinned,h=(0,n.module$exports$Blockly$utils$xml.createElement)("comment");h.appendChild((0,n.module$exports$Blockly$utils$xml.createTextNode)(i)),h.setAttribute("pinned",l),h.setAttribute("h",s.height),h.setAttribute("w",s.width),o.appendChild(h)}for(t.data&&(i=(0,n.module$exports$Blockly$utils$xml.createElement)("data"),i.appendChild((0,n.module$exports$Blockly$utils$xml.createTextNode)(t.data)),o.appendChild(i)),i=0;i<t.inputList.length;i++)if(s=t.inputList[i],l=void 0,h=!0,s.type!==n.module$exports$Blockly$inputTypes.inputTypes.DUMMY){var S=s.connection.targetBlock();s.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE?l=(0,n.module$exports$Blockly$utils$xml.createElement)("value"):s.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&(l=(0,n.module$exports$Blockly$utils$xml.createElement)("statement"));var C=s.connection.getShadowDom();!C||S&&S.isShadow()||l.appendChild(nr(C,e)),S&&(S=(0,n.module$exports$Blockly$Xml.blockToDom)(S,e),S.nodeType===_.NodeType.ELEMENT_NODE&&(l.appendChild(S),h=!1)),l.setAttribute("name",s.name),h||o.appendChild(l)}if(t.inputsInline!==void 0&&t.inputsInline!==t.inputsInlineDefault&&o.setAttribute("inline",t.inputsInline),t.isCollapsed()&&o.setAttribute("collapsed",!0),t.isEnabled()||o.setAttribute("disabled",!0),t.isDeletable()||t.isShadow()||o.setAttribute("deletable",!1),t.isMovable()||t.isShadow()||o.setAttribute("movable",!1),t.isEditable()||o.setAttribute("editable",!1),i=t.getNextBlock(),i&&(s=(0,n.module$exports$Blockly$Xml.blockToDom)(i,e),s.nodeType===_.NodeType.ELEMENT_NODE)){var x=(0,n.module$exports$Blockly$utils$xml.createElement)("next");x.appendChild(s),o.appendChild(x)}return t=t.nextConnection&&t.nextConnection.getShadowDom(),!t||i&&i.isShadow()||x.appendChild(nr(t,e)),o};var nr=function(t,e){for(var o=t=t.cloneNode(!0),i;o;)if(e&&o.nodeName==="shadow"&&o.removeAttribute("id"),o.firstChild)o=o.firstChild;else{for(;o&&!o.nextSibling;)i=o,o=o.parentNode,i.nodeType===_.NodeType.TEXT_NODE&&i.data.trim()===""&&o.firstChild!==i&&(0,_.removeNode)(i);o&&(i=o,o=o.nextSibling,i.nodeType===_.NodeType.TEXT_NODE&&i.data.trim()===""&&(0,_.removeNode)(i))}return t};n.module$exports$Blockly$Xml.domToText=function(t){return(0,n.module$exports$Blockly$utils$xml.domToText)(t).replace(/<(\w+)([^<]*)\/>/g,"<$1$2></$1>")},n.module$exports$Blockly$Xml.domToPrettyText=function(t){t=(0,n.module$exports$Blockly$Xml.domToText)(t).split("<");for(var e="",o=1;o<t.length;o++){var i=t[o];i[0]==="/"&&(e=e.substring(2)),t[o]=e+"<"+i,i[0]!=="/"&&i.slice(-2)!=="/>"&&(e+="  ")}return t=t.join(`
`),t=t.replace(/(<(\w+)\b[^>]*>[^\n]*)\n *<\/\2>/g,"$1</$2>"),t.replace(/^\n/,"")},n.module$exports$Blockly$Xml.textToDom=function(t){var e=(0,n.module$exports$Blockly$utils$xml.textToDomDocument)(t);if(!e||!e.documentElement||e.getElementsByTagName("parsererror").length)throw Error("textToDom was unable to parse: "+t);return e.documentElement},n.module$exports$Blockly$Xml.clearWorkspaceAndLoadFromXml=function(t,e){return e.setResizesEnabled(!1),e.clear(),t=(0,n.module$exports$Blockly$Xml.domToWorkspace)(t,e),e.setResizesEnabled(!0),t},n.module$exports$Blockly$Xml.domToWorkspace=function(t,e){if(t instanceof X.Workspace){var o=t;t=e,e=o,console.warn("Deprecated call to domToWorkspace, swap the arguments.")}var i;e.RTL&&(i=e.getWidth()),o=[],(0,_.startTextWidthCache)();var s=(0,p.getGroup)();s||(0,p.setGroup)(!0),e.setResizesEnabled&&e.setResizesEnabled(!1);var l=!0;try{for(var h=0,S=void 0;S=t.childNodes[h];h++){var C=S.nodeName.toLowerCase(),x=S;if(C==="block"||C==="shadow"&&!(0,p.getRecordUndo)()){var F=(0,n.module$exports$Blockly$Xml.domToBlock)(x,e);o.push(F.id);var it=x.hasAttribute("x")?parseInt(x.getAttribute("x"),10):10,xt=x.hasAttribute("y")?parseInt(x.getAttribute("y"),10):10;isNaN(it)||isNaN(xt)||F.moveBy(e.RTL?i-it:it,xt),l=!1}else{if(C==="shadow")throw TypeError("Shadow block cannot be a top-level block.");if(C==="comment")if(e.rendered){var ho=tt.WorkspaceCommentSvg;ho?ho.fromXmlRendered(x,e,i):console.warn("Missing require for Blockly.WorkspaceCommentSvg, ignoring workspace comment.")}else{var _o=St.WorkspaceComment;_o?_o.fromXml(x,e):console.warn("Missing require for Blockly.WorkspaceComment, ignoring workspace comment.")}else if(C==="variables"){if(l)(0,n.module$exports$Blockly$Xml.domToVariables)(x,e);else throw Error("'variables' tag must exist once before block and shadow tag elements in the workspace XML, but it was found in another location.");l=!1}}}}finally{s||(0,p.setGroup)(!1),(0,_.stopTextWidthCache)()}return e.setResizesEnabled&&e.setResizesEnabled(!0),(0,p.fire)(new((0,p.get)(p.FINISHED_LOADING))(e)),o},n.module$exports$Blockly$Xml.appendDomToWorkspace=function(t,e){if(!e.getBlocksBoundingBox)return(0,n.module$exports$Blockly$Xml.domToWorkspace)(t,e);var o=e.getBlocksBoundingBox();if(t=(0,n.module$exports$Blockly$Xml.domToWorkspace)(t,e),o&&o.top!==o.bottom){var i=o.bottom;o=e.RTL?o.right:o.left;for(var s=1/0,l=-1/0,h=1/0,S=0;S<t.length;S++){var C=e.getBlockById(t[S]).getRelativeToSurfaceXY();C.y<h&&(h=C.y),C.x<s&&(s=C.x),C.x>l&&(l=C.x)}for(i=i-h+10,o=e.RTL?o-l:o-s,s=0;s<t.length;s++)e.getBlockById(t[s]).moveBy(o,i)}return t},n.module$exports$Blockly$Xml.domToBlock=function(t,e){if(t instanceof X.Workspace){var o=t;t=e,e=o,console.warn("Deprecated call to domToBlock, swap the arguments.")}(0,p.disable)(),o=e.getAllVariables();try{var i=li(t,e);if(e.rendered){var s=i,l=i.getDescendants(!1);s.setConnectionTracking(!1);for(var h=l.length-1;0<=h;h--)l[h].initSvg();for(var S=l.length-1;0<=S;S--)l[S].render(!1);setTimeout(function(){s.disposed||s.setConnectionTracking(!0)},1),s.updateDisabled(),e.resizeContents()}else for(var C=i.getDescendants(!1),x=C.length-1;0<=x;x--)C[x].initModel()}finally{(0,p.enable)()}if((0,p.isEnabled)()){for(t=n.module$exports$Blockly$Variables.getAddedVariables(e,o),e=0;e<t.length;e++)l=t[e],(0,p.fire)(new((0,p.get)(p.VAR_CREATE))(l));(0,p.fire)(new((0,p.get)(p.CREATE))(i))}return i},n.module$exports$Blockly$Xml.domToVariables=function(t,e){for(var o=0;o<t.childNodes.length;o++){var i=t.childNodes[o];if(i.nodeType===_.NodeType.ELEMENT_NODE){var s=i.getAttribute("type"),l=i.getAttribute("id");e.createVariable(i.textContent,s,l)}}};var Lr=function(t){for(var e={mutation:[],comment:[],data:[],field:[],input:[],next:[]},o=0;o<t.childNodes.length;o++){var i=t.childNodes[o];if(i.nodeType!==_.NodeType.TEXT_NODE)switch(i.nodeName.toLowerCase()){case"mutation":e.mutation.push(i);break;case"comment":if(!oe){console.warn("Missing require for Comment, ignoring block comment.");break}e.comment.push(i);break;case"data":e.data.push(i);break;case"title":case"field":e.field.push(i);break;case"value":case"statement":e.input.push(i);break;case"next":e.next.push(i);break;default:console.warn("Ignoring unknown tag: "+i.nodeName)}}return e},wr=function(t,e){for(var o=!1,i=0;i<t.length;i++){var s=t[i];e.domToMutation&&(e.domToMutation(s),e.initSvg&&(o=!0))}return o},Pr=function(t,e){for(var o={},i=0;i<t.length;o={$jscomp$loop$prop$blockSvg$289:o.$jscomp$loop$prop$blockSvg$289},i++){var s=t[i],l=s.textContent,h=s.getAttribute("pinned")==="true",S=parseInt(s.getAttribute("w"),10);s=parseInt(s.getAttribute("h"),10),e.setCommentText(l),e.commentModel.pinned=h,isNaN(S)||isNaN(s)||(e.commentModel.size=new jt.Size(S,s)),h&&e.getCommentIcon&&!e.isInFlyout&&(o.$jscomp$loop$prop$blockSvg$289=e,setTimeout(function(C){return function(){C.$jscomp$loop$prop$blockSvg$289.getCommentIcon().setVisible(!0)}}(o),1))}},Fr=function(t,e){for(var o=0;o<t.length;o++)e.data=t[o].textContent},Ur=function(t,e){for(var o=0;o<t.length;o++){var i=t[o],s=i.getAttribute("name");Hr(e,s,i)}},ir=function(t){for(var e={childBlockElement:null,childShadowElement:null},o=0;o<t.childNodes.length;o++){var i=t.childNodes[o];i.nodeType===_.NodeType.ELEMENT_NODE&&(i.nodeName.toLowerCase()==="block"?e.childBlockElement=i:i.nodeName.toLowerCase()==="shadow"&&(e.childShadowElement=i))}return e},Gr=function(t,e,o,i){for(var s=0;s<t.length;s++){var l=t[s],h=l.getAttribute("name"),S=o.getInput(h);if(!S){console.warn("Ignoring non-existent input "+h+" in block "+i);break}if(l=ir(l),l.childBlockElement){if(!S.connection)throw TypeError("Input connection does not exist.");li(l.childBlockElement,e,S.connection,!1)}l.childShadowElement&&S.connection.setShadowDom(l.childShadowElement)}},Vr=function(t,e,o){for(var i=0;i<t.length;i++){var s=ir(t[i]);if(s.childBlockElement){if(!o.nextConnection)throw TypeError("Next statement does not exist.");if(o.nextConnection.isConnected())throw TypeError("Next statement is already connected.");li(s.childBlockElement,e,o.nextConnection,!0)}s.childShadowElement&&o.nextConnection&&o.nextConnection.setShadowDom(s.childShadowElement)}},li=function(t,e,o,i){var s=t.getAttribute("type");if(!s)throw TypeError("Block type unspecified: "+t.outerHTML);var l=t.getAttribute("id");l=e.newBlock(s,l);var h=Lr(t),S=wr(h.mutation,l);if(Pr(h.comment,l),Fr(h.data,l),o)if(i)if(l.previousConnection)o.connect(l.previousConnection);else throw TypeError("Next block does not have previous statement.");else if(l.outputConnection)o.connect(l.outputConnection);else if(l.previousConnection)o.connect(l.previousConnection);else throw TypeError("Child block does not have output or previous statement.");if(Ur(h.field,l),Gr(h.input,e,l,s),Vr(h.next,e,l),S&&l.initSvg(),(e=t.getAttribute("inline"))&&l.setInputsInline(e==="true"),(e=t.getAttribute("disabled"))&&l.setEnabled(e!=="true"&&e!=="disabled"),(e=t.getAttribute("deletable"))&&l.setDeletable(e==="true"),(e=t.getAttribute("movable"))&&l.setMovable(e==="true"),(e=t.getAttribute("editable"))&&l.setEditable(e==="true"),(e=t.getAttribute("collapsed"))&&l.setCollapsed(e==="true"),t.nodeName.toLowerCase()==="shadow"){for(t=l.getChildren(!1),e=0;e<t.length;e++)if(!t[e].isShadow())throw TypeError("Shadow block not allowed non-shadow child.");if(l.getVarModels().length)throw TypeError("Shadow blocks cannot have variable references.");l.setShadow(!0)}return l},Hr=function(t,e,o){var i=t.getField(e);i?i.fromXml(o):console.warn("Ignoring non-existent field "+e+" in block "+t.type)};n.module$exports$Blockly$Xml.deleteNext=function(t){for(var e=0;e<t.childNodes.length;e++){var o=t.childNodes[e];if(o.nodeName.toLowerCase()==="next"){t.removeChild(o);break}}};var q={},ai="categoryToolbox",rr="flyoutToolbox";q.Position={TOP:0,BOTTOM:1,LEFT:2,RIGHT:3},q.convertToolboxDefToJson=function(t){return t?((t instanceof Element||typeof t=="string")&&(t=(0,q.parseToolboxTree)(t),t=Xr(t)),Wr(t),t):null};var Wr=function(t){var e=t.kind;if(t=t.contents,e&&e!==rr&&e!==ai)throw Error("Invalid toolbox kind "+e+". Please supply either "+rr+" or "+ai);if(!t)throw Error("Toolbox must have a contents attribute.")};q.convertFlyoutDefToJsonArray=function(t){return t?t.contents?t.contents:Array.isArray(t)&&0<t.length&&!t[0].nodeType?t:ci(t):[]},q.hasCategories=function(t){if(!t)return!1;var e=t.kind;return e?e===ai:!!t.contents.filter(function(o){return o.kind.toUpperCase()==="CATEGORY"}).length},q.isCategoryCollapsible=function(t){return t&&t.contents?!!t.contents.filter(function(e){return e.kind.toUpperCase()==="CATEGORY"}).length:!1};var Xr=function(t){var e={contents:ci(t)};return t instanceof Node&&sr(t,e),e},ci=function(t){var e=[],o=t.childNodes;o||(o=t),t=0;for(var i;i=o[t];t++)if(i.tagName){var s={},l=i.tagName.toUpperCase();s.kind=l,l==="BLOCK"?s.blockxml=i:i.childNodes&&0<i.childNodes.length&&(s.contents=ci(i)),sr(i,s),e.push(s)}return e},sr=function(t,e){for(var o=0;o<t.attributes.length;o++){var i=t.attributes[o];-1<i.nodeName.indexOf("css-")?(e.cssconfig=e.cssconfig||{},e.cssconfig[i.nodeName.replace("css-","")]=i.value):e[i.nodeName]=i.value}};q.parseToolboxTree=function(t){if(t){if(typeof t!="string"&&(G.IE&&t.outerHTML?t=t.outerHTML:t instanceof Element||(t=null)),typeof t=="string"&&(t=(0,n.module$exports$Blockly$Xml.textToDom)(t),t.nodeName.toLowerCase()!=="xml"))throw TypeError("Toolbox should be an <xml> document.")}else t=null;return t},n.module$exports$Blockly$utils$object={inherits:function(t,e){t.superClass_=e.prototype,Object.setPrototypeOf(t,e),t.prototype=Object.create(e.prototype),t.prototype.constructor=t},mixin:function(t,e){for(var o in e)t[o]=e[o]},deepMerge:function(t,e){for(var o in e)t[o]=e[o]!==null&&typeof e[o]=="object"?(0,n.module$exports$Blockly$utils$object.deepMerge)(t[o]||Object.create(null),e[o]):e[o];return t},values:function(t){return Object.values?Object.values(t):Object.keys(t).map(function(e){return t[e]})}};var ke={Theme:function(t,e,o,i){this.name=t,this.blockStyles=e||Object.create(null),this.categoryStyles=o||Object.create(null),this.componentStyles=i||Object.create(null),this.fontStyle=Object.create(null),this.startHats=null,(0,b.register)(b.Type.THEME,t,this)}};ke.Theme.prototype.getClassName=function(){return this.name+"-theme"},ke.Theme.prototype.setBlockStyle=function(t,e){this.blockStyles[t]=e},ke.Theme.prototype.setCategoryStyle=function(t,e){this.categoryStyles[t]=e},ke.Theme.prototype.getComponentStyle=function(t){return(t=this.componentStyles[t])&&typeof t=="string"&&this.getComponentStyle(t)?this.getComponentStyle(t):t?String(t):null},ke.Theme.prototype.setComponentStyle=function(t,e){this.componentStyles[t]=e},ke.Theme.prototype.setFontStyle=function(t){this.fontStyle=t},ke.Theme.prototype.setStartHats=function(t){this.startHats=t},ke.Theme.defineTheme=function(t,e){var o=new ke.Theme(t),i=e.base;return i&&(typeof i=="string"&&(i=(0,b.getObject)(b.Type.THEME,i)),i instanceof ke.Theme&&((0,n.module$exports$Blockly$utils$object.deepMerge)(o,i),o.name=t)),(0,n.module$exports$Blockly$utils$object.deepMerge)(o.blockStyles,e.blockStyles),(0,n.module$exports$Blockly$utils$object.deepMerge)(o.categoryStyles,e.categoryStyles),(0,n.module$exports$Blockly$utils$object.deepMerge)(o.componentStyles,e.componentStyles),(0,n.module$exports$Blockly$utils$object.deepMerge)(o.fontStyle,e.fontStyle),e.startHats!==null&&(o.startHats=e.startHats),o};var mn={},jr={colour_blocks:{colourPrimary:"20"},list_blocks:{colourPrimary:"260"},logic_blocks:{colourPrimary:"210"},loop_blocks:{colourPrimary:"120"},math_blocks:{colourPrimary:"230"},procedure_blocks:{colourPrimary:"290"},text_blocks:{colourPrimary:"160"},variable_blocks:{colourPrimary:"330"},variable_dynamic_blocks:{colourPrimary:"310"},hat_blocks:{colourPrimary:"330",hat:"cap"}},Yr={colour_category:{colour:"20"},list_category:{colour:"260"},logic_category:{colour:"210"},loop_category:{colour:"120"},math_category:{colour:"230"},procedure_category:{colour:"290"},text_category:{colour:"160"},variable_category:{colour:"330"},variable_dynamic_category:{colour:"310"}};mn.Classic=new ke.Theme("classic",jr,Yr);var Ee={Options:function(t){var e=null,o=!1,i=!1,s=!1,l=!1,h=!1,S=!1,C=!!t.readOnly;C||(e=(0,q.convertToolboxDefToJson)(t.toolbox),o=(0,q.hasCategories)(e),i=t.trashcan,i===void 0&&(i=o),s=t.collapse,s===void 0&&(s=o),l=t.comments,l===void 0&&(l=o),h=t.disable,h===void 0&&(h=o),S=t.sounds,S===void 0&&(S=!0));var x=t.maxTrashcanContents;i?x===void 0&&(x=32):x=0;var F=!!t.rtl,it=t.horizontalLayout;it===void 0&&(it=!1);var xt=t.toolboxPosition;xt=xt!=="end",xt=it?xt?q.Position.TOP:q.Position.BOTTOM:xt===F?q.Position.RIGHT:q.Position.LEFT;var ho=t.css;ho===void 0&&(ho=!0);var _o="https://blockly-demo.appspot.com/static/media/";t.media?_o=t.media:t.path&&(_o=t.path+"media/");var hn=t.oneBasedIndex===void 0?!0:!!t.oneBasedIndex,Xl=t.renderer||"geras",jl=t.plugins||{};this.RTL=F,this.oneBasedIndex=hn,this.collapse=s,this.comments=l,this.disable=h,this.readOnly=C,this.maxBlocks=t.maxBlocks||1/0,this.maxInstances=t.maxInstances,this.pathToMedia=_o,this.hasCategories=o,this.moveOptions=Ee.Options.parseMoveOptions_(t,o),this.hasScrollbars=!!this.moveOptions.scrollbars,this.hasTrashcan=i,this.maxTrashcanContents=x,this.hasSounds=S,this.hasCss=ho,this.horizontalLayout=it,this.languageTree=e,this.gridOptions=Ee.Options.parseGridOptions_(t),this.zoomOptions=Ee.Options.parseZoomOptions_(t),this.toolboxPosition=xt,this.theme=Ee.Options.parseThemeOptions_(t),this.renderer=Xl,this.rendererOverrides=t.rendererOverrides,this.gridPattern=null,this.parentWorkspace=t.parentWorkspace,this.plugins=jl,this.getMetrics=this.setMetrics=void 0}};Ee.Options.parseMoveOptions_=function(t,e){var o=t.move||{},i={};return o.scrollbars===void 0&&t.scrollbars===void 0?i.scrollbars=e:typeof o.scrollbars=="object"?(i.scrollbars={},i.scrollbars.horizontal=!!o.scrollbars.horizontal,i.scrollbars.vertical=!!o.scrollbars.vertical,i.scrollbars.horizontal&&i.scrollbars.vertical?i.scrollbars=!0:i.scrollbars.horizontal||i.scrollbars.vertical||(i.scrollbars=!1)):i.scrollbars=!!o.scrollbars||!!t.scrollbars,i.wheel=i.scrollbars&&o.wheel!==void 0?!!o.wheel:typeof i.scrollbars=="object",i.drag=i.scrollbars?o.drag===void 0?!0:!!o.drag:!1,i},Ee.Options.parseZoomOptions_=function(t){t=t.zoom||{};var e={};return e.controls=t.controls===void 0?!1:!!t.controls,e.wheel=t.wheel===void 0?!1:!!t.wheel,e.startScale=t.startScale===void 0?1:Number(t.startScale),e.maxScale=t.maxScale===void 0?3:Number(t.maxScale),e.minScale=t.minScale===void 0?.3:Number(t.minScale),e.scaleSpeed=t.scaleSpeed===void 0?1.2:Number(t.scaleSpeed),e.pinch=t.pinch===void 0?e.wheel||e.controls:!!t.pinch,e},Ee.Options.parseGridOptions_=function(t){t=t.grid||{};var e={};return e.spacing=Number(t.spacing)||0,e.colour=t.colour||"#888",e.length=t.length===void 0?1:Number(t.length),e.snap=0<e.spacing&&!!t.snap,e},Ee.Options.parseThemeOptions_=function(t){return t=t.theme||mn.Classic,typeof t=="string"?(0,b.getObject)(b.Type.THEME,t):t instanceof ke.Theme?t:ke.Theme.defineTheme(t.name||"builtin"+(0,re.getNextUniqueId)(),t)};var Z={Scrollbar:function(t,e,o,i,s){this.workspace_=t,this.pair_=o||!1,this.horizontal_=e,this.margin_=s!==void 0?s:Z.Scrollbar.DEFAULT_SCROLLBAR_MARGIN,this.ratio=this.oldHostMetrics_=null,this.origin_=new H.Coordinate(0,0),this.startDragHandle=this.handlePosition_=this.handleLength_=this.scrollbarLength_=this.startDragMouse_=0,this.containerVisible_=this.isVisible_=!0,this.svgGroup_=this.outerSvg_=this.svgHandle_=this.svgBackground_=null,this.createDom_(i),this.position=new H.Coordinate(0,0),t=Z.Scrollbar.scrollbarThickness,e?(this.svgBackground_.setAttribute("height",t),this.outerSvg_.setAttribute("height",t),this.svgHandle_.setAttribute("height",t-5),this.svgHandle_.setAttribute("y",2.5),this.lengthAttribute_="width",this.positionAttribute_="x"):(this.svgBackground_.setAttribute("width",t),this.outerSvg_.setAttribute("width",t),this.svgHandle_.setAttribute("width",t-5),this.svgHandle_.setAttribute("x",2.5),this.lengthAttribute_="height",this.positionAttribute_="y"),this.onMouseDownBarWrapper_=(0,$.conditionalBind)(this.svgBackground_,"mousedown",this,this.onMouseDownBar_),this.onMouseDownHandleWrapper_=(0,$.conditionalBind)(this.svgHandle_,"mousedown",this,this.onMouseDownHandle_)}};Z.Scrollbar.prototype.dispose=function(){this.cleanUp_(),(0,$.unbind)(this.onMouseDownBarWrapper_),this.onMouseDownBarWrapper_=null,(0,$.unbind)(this.onMouseDownHandleWrapper_),this.onMouseDownHandleWrapper_=null,(0,_.removeNode)(this.outerSvg_),this.svgBackground_=this.svgGroup_=this.outerSvg_=null,this.svgHandle_&&(this.workspace_.getThemeManager().unsubscribe(this.svgHandle_),this.svgHandle_=null),this.workspace_=null},Z.Scrollbar.prototype.constrainHandleLength_=function(t){return t=0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_)},Z.Scrollbar.prototype.setHandleLength_=function(t){this.handleLength_=t,this.svgHandle_.setAttribute(this.lengthAttribute_,this.handleLength_)},Z.Scrollbar.prototype.constrainHandlePosition_=function(t){return t=0>=t||isNaN(t)?0:Math.min(t,this.scrollbarLength_-this.handleLength_)},Z.Scrollbar.prototype.setHandlePosition=function(t){this.handlePosition_=t,this.svgHandle_.setAttribute(this.positionAttribute_,this.handlePosition_)},Z.Scrollbar.prototype.setScrollbarLength_=function(t){this.scrollbarLength_=t,this.outerSvg_.setAttribute(this.lengthAttribute_,this.scrollbarLength_),this.svgBackground_.setAttribute(this.lengthAttribute_,this.scrollbarLength_)},Z.Scrollbar.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e,(0,_.setCssTransform)(this.outerSvg_,"translate("+(this.position.x+this.origin_.x)+"px,"+(this.position.y+this.origin_.y)+"px)")},Z.Scrollbar.prototype.resize=function(t){!t&&(t=this.workspace_.getMetrics(),!t)||this.oldHostMetrics_&&Z.Scrollbar.metricsAreEquivalent_(t,this.oldHostMetrics_)||(this.horizontal_?this.resizeHorizontal_(t):this.resizeVertical_(t),this.oldHostMetrics_=t,this.updateMetrics_())},Z.Scrollbar.prototype.requiresViewResize_=function(t){return this.oldHostMetrics_?this.oldHostMetrics_.viewWidth!==t.viewWidth||this.oldHostMetrics_.viewHeight!==t.viewHeight||this.oldHostMetrics_.absoluteLeft!==t.absoluteLeft||this.oldHostMetrics_.absoluteTop!==t.absoluteTop:!0},Z.Scrollbar.prototype.resizeHorizontal_=function(t){this.requiresViewResize_(t)?this.resizeViewHorizontal(t):this.resizeContentHorizontal(t)},Z.Scrollbar.prototype.resizeViewHorizontal=function(t){var e=t.viewWidth-2*this.margin_;this.pair_&&(e-=Z.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,e)),e=t.absoluteLeft+this.margin_,this.pair_&&this.workspace_.RTL&&(e+=Z.Scrollbar.scrollbarThickness),this.setPosition(e,t.absoluteTop+t.viewHeight-Z.Scrollbar.scrollbarThickness-this.margin_),this.resizeContentHorizontal(t)},Z.Scrollbar.prototype.resizeContentHorizontal=function(t){if(t.viewWidth>=t.scrollWidth)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewWidth/t.scrollWidth;e=this.constrainHandleLength_(e),this.setHandleLength_(e),e=t.scrollWidth-t.viewWidth;var o=this.scrollbarLength_-this.handleLength_;t=(t.viewLeft-t.scrollLeft)/e*o,t=this.constrainHandlePosition_(t),this.setHandlePosition(t),this.ratio=o/e}},Z.Scrollbar.prototype.resizeVertical_=function(t){this.requiresViewResize_(t)?this.resizeViewVertical(t):this.resizeContentVertical(t)},Z.Scrollbar.prototype.resizeViewVertical=function(t){var e=t.viewHeight-2*this.margin_;this.pair_&&(e-=Z.Scrollbar.scrollbarThickness),this.setScrollbarLength_(Math.max(0,e)),this.setPosition(this.workspace_.RTL?t.absoluteLeft+this.margin_:t.absoluteLeft+t.viewWidth-Z.Scrollbar.scrollbarThickness-this.margin_,t.absoluteTop+this.margin_),this.resizeContentVertical(t)},Z.Scrollbar.prototype.resizeContentVertical=function(t){if(t.viewHeight>=t.scrollHeight)this.setHandleLength_(this.scrollbarLength_),this.setHandlePosition(0),this.pair_||this.setVisible(!1);else{this.pair_||this.setVisible(!0);var e=this.scrollbarLength_*t.viewHeight/t.scrollHeight;e=this.constrainHandleLength_(e),this.setHandleLength_(e),e=t.scrollHeight-t.viewHeight;var o=this.scrollbarLength_-this.handleLength_;t=(t.viewTop-t.scrollTop)/e*o,t=this.constrainHandlePosition_(t),this.setHandlePosition(t),this.ratio=o/e}},Z.Scrollbar.prototype.createDom_=function(t){var e="blocklyScrollbar"+(this.horizontal_?"Horizontal":"Vertical");t&&(e+=" "+t),this.outerSvg_=(0,_.createSvgElement)(R.Svg.SVG,{class:e},null),this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{},this.outerSvg_),this.svgBackground_=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyScrollbarBackground"},this.svgGroup_),t=Math.floor((Z.Scrollbar.scrollbarThickness-5)/2),this.svgHandle_=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyScrollbarHandle",rx:t,ry:t},this.svgGroup_),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgHandle_,"scrollbarOpacity","fill-opacity"),(0,_.insertAfter)(this.outerSvg_,this.workspace_.getParentSvg())},Z.Scrollbar.prototype.isVisible=function(){return this.isVisible_},Z.Scrollbar.prototype.setContainerVisible=function(t){var e=t!==this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},Z.Scrollbar.prototype.setVisible=function(t){var e=t!==this.isVisible();if(this.pair_)throw Error("Unable to toggle visibility of paired scrollbars.");this.isVisible_=t,e&&this.updateDisplay_()},Z.Scrollbar.prototype.updateDisplay_=function(){this.containerVisible_&&this.isVisible()?this.outerSvg_.setAttribute("display","block"):this.outerSvg_.setAttribute("display","none")},Z.Scrollbar.prototype.onMouseDownBar_=function(t){if(this.workspace_.markFocused(),(0,g.clearTouchIdentifier)(),this.cleanUp_(),(0,$.isRightButton)(t))t.stopPropagation();else{var e=(0,$.mouseToSvg)(t,this.workspace_.getParentSvg(),this.workspace_.getInverseScreenCTM());e=this.horizontal_?e.x:e.y;var o=(0,yt.getInjectionDivXY)(this.svgHandle_);o=this.horizontal_?o.x:o.y;var i=this.handlePosition_,s=.95*this.handleLength_;e<=o?i-=s:e>=o+this.handleLength_&&(i+=s),this.setHandlePosition(this.constrainHandlePosition_(i)),this.updateMetrics_(),t.stopPropagation(),t.preventDefault()}},Z.Scrollbar.prototype.onMouseDownHandle_=function(t){this.workspace_.markFocused(),this.cleanUp_(),(0,$.isRightButton)(t)?t.stopPropagation():(this.startDragHandle=this.handlePosition_,this.workspace_.setupDragSurface(),this.startDragMouse_=this.horizontal_?t.clientX:t.clientY,Z.Scrollbar.onMouseUpWrapper_=(0,$.conditionalBind)(document,"mouseup",this,this.onMouseUpHandle_),Z.Scrollbar.onMouseMoveWrapper_=(0,$.conditionalBind)(document,"mousemove",this,this.onMouseMoveHandle_),t.stopPropagation(),t.preventDefault())},Z.Scrollbar.prototype.onMouseMoveHandle_=function(t){this.setHandlePosition(this.constrainHandlePosition_(this.startDragHandle+((this.horizontal_?t.clientX:t.clientY)-this.startDragMouse_))),this.updateMetrics_()},Z.Scrollbar.prototype.onMouseUpHandle_=function(){this.workspace_.resetDragSurface(),(0,g.clearTouchIdentifier)(),this.cleanUp_()},Z.Scrollbar.prototype.cleanUp_=function(){this.workspace_.hideChaff(!0),Z.Scrollbar.onMouseUpWrapper_&&((0,$.unbind)(Z.Scrollbar.onMouseUpWrapper_),Z.Scrollbar.onMouseUpWrapper_=null),Z.Scrollbar.onMouseMoveWrapper_&&((0,$.unbind)(Z.Scrollbar.onMouseMoveWrapper_),Z.Scrollbar.onMouseMoveWrapper_=null)},Z.Scrollbar.prototype.getRatio_=function(){var t=this.handlePosition_/(this.scrollbarLength_-this.handleLength_);return isNaN(t)&&(t=0),t},Z.Scrollbar.prototype.updateMetrics_=function(){var t=this.getRatio_(),e={};this.horizontal_?e.x=t:e.y=t,this.workspace_.setMetrics(e)},Z.Scrollbar.prototype.set=function(t,e){this.setHandlePosition(this.constrainHandlePosition_(t*this.ratio)),(e||e===void 0)&&this.updateMetrics_()},Z.Scrollbar.prototype.setOrigin=function(t,e){this.origin_=new H.Coordinate(t,e)},Z.Scrollbar.metricsAreEquivalent_=function(t,e){return t.viewWidth===e.viewWidth&&t.viewHeight===e.viewHeight&&t.viewLeft===e.viewLeft&&t.viewTop===e.viewTop&&t.absoluteTop===e.absoluteTop&&t.absoluteLeft===e.absoluteLeft&&t.scrollWidth===e.scrollWidth&&t.scrollHeight===e.scrollHeight&&t.scrollLeft===e.scrollLeft&&t.scrollTop===e.scrollTop},Z.Scrollbar.scrollbarThickness=15,g.TOUCH_ENABLED&&(Z.Scrollbar.scrollbarThickness=25),Z.Scrollbar.DEFAULT_SCROLLBAR_MARGIN=.5;var ve={ScrollbarPair:function(t,e,o,i,s){this.workspace_=t,e=e===void 0?!0:e,o=o===void 0?!0:o;var l=e&&o;e&&(this.hScroll=new Z.Scrollbar(t,!0,l,i,s)),o&&(this.vScroll=new Z.Scrollbar(t,!1,l,i,s)),l&&(this.corner_=(0,_.createSvgElement)(R.Svg.RECT,{height:Z.Scrollbar.scrollbarThickness,width:Z.Scrollbar.scrollbarThickness,class:"blocklyScrollbarBackground"},null),(0,_.insertAfter)(this.corner_,t.getBubbleCanvas())),this.oldHostMetrics_=null}};ve.ScrollbarPair.prototype.dispose=function(){(0,_.removeNode)(this.corner_),this.oldHostMetrics_=this.workspace_=this.corner_=null,this.hScroll&&(this.hScroll.dispose(),this.hScroll=null),this.vScroll&&(this.vScroll.dispose(),this.vScroll=null)},ve.ScrollbarPair.prototype.resize=function(){var t=this.workspace_.getMetrics();if(t){var e=!1,o=!1;if(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===t.viewWidth&&this.oldHostMetrics_.viewHeight===t.viewHeight&&this.oldHostMetrics_.absoluteTop===t.absoluteTop&&this.oldHostMetrics_.absoluteLeft===t.absoluteLeft?(this.oldHostMetrics_&&this.oldHostMetrics_.scrollWidth===t.scrollWidth&&this.oldHostMetrics_.viewLeft===t.viewLeft&&this.oldHostMetrics_.scrollLeft===t.scrollLeft||(e=!0),this.oldHostMetrics_&&this.oldHostMetrics_.scrollHeight===t.scrollHeight&&this.oldHostMetrics_.viewTop===t.viewTop&&this.oldHostMetrics_.scrollTop===t.scrollTop||(o=!0)):o=e=!0,e||o){try{(0,p.disable)(),this.hScroll&&e&&this.hScroll.resize(t),this.vScroll&&o&&this.vScroll.resize(t)}finally{(0,p.enable)()}this.workspace_.maybeFireViewportChangeEvent()}this.hScroll&&this.vScroll&&(this.oldHostMetrics_&&this.oldHostMetrics_.viewWidth===t.viewWidth&&this.oldHostMetrics_.absoluteLeft===t.absoluteLeft||this.corner_.setAttribute("x",this.vScroll.position.x),this.oldHostMetrics_&&this.oldHostMetrics_.viewHeight===t.viewHeight&&this.oldHostMetrics_.absoluteTop===t.absoluteTop||this.corner_.setAttribute("y",this.hScroll.position.y)),this.oldHostMetrics_=t}},ve.ScrollbarPair.prototype.canScrollHorizontally=function(){return!!this.hScroll},ve.ScrollbarPair.prototype.canScrollVertically=function(){return!!this.vScroll},ve.ScrollbarPair.prototype.setOrigin=function(t,e){this.hScroll&&this.hScroll.setOrigin(t,e),this.vScroll&&this.vScroll.setOrigin(t,e)},ve.ScrollbarPair.prototype.set=function(t,e,o){this.hScroll&&this.hScroll.set(t,!1),this.vScroll&&this.vScroll.set(e,!1),(o||o===void 0)&&(t={},this.hScroll&&(t.x=this.hScroll.getRatio_()),this.vScroll&&(t.y=this.vScroll.getRatio_()),this.workspace_.setMetrics(t))},ve.ScrollbarPair.prototype.setX=function(t){this.hScroll&&this.hScroll.set(t,!0)},ve.ScrollbarPair.prototype.setY=function(t){this.vScroll&&this.vScroll.set(t,!0)},ve.ScrollbarPair.prototype.setContainerVisible=function(t){this.hScroll&&this.hScroll.setContainerVisible(t),this.vScroll&&this.vScroll.setContainerVisible(t)},ve.ScrollbarPair.prototype.isVisible=function(){var t=!1;return this.hScroll&&(t=this.hScroll.isVisible()),this.vScroll&&(t=t||this.vScroll.isVisible()),t},ve.ScrollbarPair.prototype.resizeContent=function(t){this.hScroll&&this.hScroll.resizeContentHorizontal(t),this.vScroll&&this.vScroll.resizeContentVertical(t)},ve.ScrollbarPair.prototype.resizeView=function(t){this.hScroll&&this.hScroll.resizeViewHorizontal(t),this.vScroll&&this.vScroll.resizeViewVertical(t)};var K={KeyCodes:{WIN_KEY_FF_LINUX:0,MAC_ENTER:3,BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PLUS_SIGN:43,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,FF_SEMICOLON:59,FF_EQUALS:61,FF_DASH:173,FF_HASH:163,QUESTION_MARK:63,AT_SIGN:64,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,WIN_KEY_RIGHT:92,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL_LOCK:145,FIRST_MEDIA_KEY:166,LAST_MEDIA_KEY:183,SEMICOLON:186,DASH:189,EQUALS:187,COMMA:188,PERIOD:190,SLASH:191,APOSTROPHE:192,TILDE:192,SINGLE_QUOTE:222,OPEN_SQUARE_BRACKET:219,BACKSLASH:220,CLOSE_SQUARE_BRACKET:221,WIN_KEY:224,MAC_FF_META:224,MAC_WK_CMD_LEFT:91,MAC_WK_CMD_RIGHT:93,WIN_IME:229,VK_NONAME:252,PHANTOM:255}},J={ShortcutRegistry:function(){this.reset()}};J.ShortcutRegistry.prototype.reset=function(){this.registry_=Object.create(null),this.keyMap_=Object.create(null)},J.ShortcutRegistry.prototype.register=function(t,e){if(this.registry_[t.name]&&!e)throw Error('Shortcut with name "'+t.name+'" already exists.');this.registry_[t.name]=t},J.ShortcutRegistry.prototype.unregister=function(t){return this.registry_[t]?(this.removeAllKeyMappings(t),delete this.registry_[t],!0):(console.warn('Keyboard shortcut with name "'+t+'" not found.'),!1)},J.ShortcutRegistry.prototype.addKeyMapping=function(t,e,o){t=String(t);var i=this.keyMap_[t];if(i&&!o)throw Error('Shortcut with name "'+e+'" collides with shortcuts '+i.toString());i&&o?i.unshift(e):this.keyMap_[t]=[e]},J.ShortcutRegistry.prototype.removeKeyMapping=function(t,e,o){var i=this.keyMap_[t];if(!i&&!o)return console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1;var s=i.indexOf(e);return-1<s?(i.splice(s,1),i.length===0&&delete this.keyMap_[t],!0):(o||console.warn('No keyboard shortcut with name "'+e+'" registered with key code "'+t+'"'),!1)},J.ShortcutRegistry.prototype.removeAllKeyMappings=function(t){for(var e in this.keyMap_)this.removeKeyMapping(e,t,!0)},J.ShortcutRegistry.prototype.setKeyMap=function(t){this.keyMap_=t},J.ShortcutRegistry.prototype.getKeyMap=function(){return(0,n.module$exports$Blockly$utils$object.deepMerge)(Object.create(null),this.keyMap_)},J.ShortcutRegistry.prototype.getRegistry=function(){return(0,n.module$exports$Blockly$utils$object.deepMerge)(Object.create(null),this.registry_)},J.ShortcutRegistry.prototype.onKeyDown=function(t,e){var o=this.serializeKeyEvent_(e);if(o=this.getShortcutNamesByKeyCode(o),!o)return!1;for(var i=0,s;s=o[i];i++)if(s=this.registry_[s],(!s.preconditionFn||s.preconditionFn(t))&&s.callback&&s.callback(t,e,s))return!0;return!1},J.ShortcutRegistry.prototype.getShortcutNamesByKeyCode=function(t){return this.keyMap_[t]||[]},J.ShortcutRegistry.prototype.getKeyCodesByShortcutName=function(t){var e=[],o;for(o in this.keyMap_)-1<this.keyMap_[o].indexOf(t)&&e.push(o);return e},J.ShortcutRegistry.prototype.serializeKeyEvent_=function(t){var e="",o;for(o in J.ShortcutRegistry.modifierKeys)t.getModifierState(o)&&(e!==""&&(e+="+"),e+=o);return e!==""&&t.keyCode?e=e+"+"+t.keyCode:t.keyCode&&(e=t.keyCode.toString()),e},J.ShortcutRegistry.prototype.checkModifiers_=function(t){for(var e=(0,n.module$exports$Blockly$utils$object.values)(J.ShortcutRegistry.modifierKeys),o=0,i;i=t[o];o++)if(0>e.indexOf(i))throw Error(i+" is not a valid modifier key.")},J.ShortcutRegistry.prototype.createSerializedKey=function(t,e){var o="";if(e){this.checkModifiers_(e);for(var i in J.ShortcutRegistry.modifierKeys)-1<e.indexOf(J.ShortcutRegistry.modifierKeys[i])&&(o!==""&&(o+="+"),o+=i)}return o!==""&&t?o=o+"+"+t:t&&(o=t.toString()),o},J.ShortcutRegistry.modifierKeys={Shift:K.KeyCodes.SHIFT,Control:K.KeyCodes.CTRL,Alt:K.KeyCodes.ALT,Meta:K.KeyCodes.META};var Kr=new J.ShortcutRegistry;J.ShortcutRegistry.registry=Kr;var wo={WorkspaceDragSurfaceSvg:function(t){this.SVG_=null,this.container_=t,this.previousSibling_=null,this.createDom()}};wo.WorkspaceDragSurfaceSvg.prototype.createDom=function(){this.SVG_||(this.SVG_=(0,_.createSvgElement)(R.Svg.SVG,{xmlns:_.SVG_NS,"xmlns:html":_.HTML_NS,"xmlns:xlink":_.XLINK_NS,version:"1.1",class:"blocklyWsDragSurface blocklyOverflowVisible"},null),this.container_.appendChild(this.SVG_))},wo.WorkspaceDragSurfaceSvg.prototype.translateSurface=function(t,e){t=t.toFixed(0),e=e.toFixed(0),this.SVG_.style.display="block",(0,_.setCssTransform)(this.SVG_,"translate3d("+t+"px, "+e+"px, 0)")},wo.WorkspaceDragSurfaceSvg.prototype.getSurfaceTranslation=function(){return(0,yt.getRelativeXY)(this.SVG_)},wo.WorkspaceDragSurfaceSvg.prototype.clearAndHide=function(t){if(!t)throw Error("Couldn't clear and hide the drag surface: missing new surface.");var e=this.SVG_.childNodes[0],o=this.SVG_.childNodes[1];if(!(e&&o&&(0,_.hasClass)(e,"blocklyBlockCanvas")&&(0,_.hasClass)(o,"blocklyBubbleCanvas")))throw Error("Couldn't clear and hide the drag surface. A node was missing.");if(this.previousSibling_!==null?(0,_.insertAfter)(e,this.previousSibling_):t.insertBefore(e,t.firstChild),(0,_.insertAfter)(o,e),this.SVG_.style.display="none",this.SVG_.childNodes.length)throw Error("Drag surface was not cleared.");(0,_.setCssTransform)(this.SVG_,""),this.previousSibling_=null},wo.WorkspaceDragSurfaceSvg.prototype.setContentsAndShow=function(t,e,o,i,s,l){if(this.SVG_.childNodes.length)throw Error("Already dragging a block.");this.previousSibling_=o,t.setAttribute("transform","translate(0, 0) scale("+l+")"),e.setAttribute("transform","translate(0, 0) scale("+l+")"),this.SVG_.setAttribute("width",i),this.SVG_.setAttribute("height",s),this.SVG_.appendChild(t),this.SVG_.appendChild(e),this.SVG_.style.display="block"};var Le={},yo=null;Le.copy=function(t){yo=t.toCopyData()},Le.paste=function(){if(!yo)return null;var t=yo.source;return t.isFlyout&&(t=t.targetWorkspace),yo.typeCounts&&t.isCapacityAvailable(yo.typeCounts)?t.paste(yo.saveInfo):null},Le.duplicate=function(t){var e=yo;return(0,Le.copy)(t),t=t.workspace.paste(yo.saveInfo),yo=e,t};var ui;n.module$exports$Blockly$config={},ui=28,n.module$exports$Blockly$config.config={dragRadius:5,flyoutDragRadius:10,snapRadius:ui,connectingSnapRadius:ui,currentConnectionPreference:8,bumpDelay:250};var ae={MenuItem:function(t,e){this.content_=t,this.value_=e,this.enabled_=!0,this.element_=null,this.rightToLeft_=!1,this.roleName_=null,this.highlight_=this.checked_=this.checkable_=!1,this.actionHandler_=null}};ae.MenuItem.prototype.createDom=function(){var t=document.createElement("div");t.id=(0,re.getNextUniqueId)(),this.element_=t,t.className="blocklyMenuItem goog-menuitem "+(this.enabled_?"":"blocklyMenuItemDisabled goog-menuitem-disabled ")+(this.checked_?"blocklyMenuItemSelected goog-option-selected ":"")+(this.highlight_?"blocklyMenuItemHighlight goog-menuitem-highlight ":"")+(this.rightToLeft_?"blocklyMenuItemRtl goog-menuitem-rtl ":"");var e=document.createElement("div");if(e.className="blocklyMenuItemContent goog-menuitem-content",this.checkable_){var o=document.createElement("div");o.className="blocklyMenuItemCheckbox goog-menuitem-checkbox",e.appendChild(o)}return o=this.content_,typeof this.content_=="string"&&(o=document.createTextNode(this.content_)),e.appendChild(o),t.appendChild(e),this.roleName_&&(0,Y.setRole)(t,this.roleName_),(0,Y.setState)(t,Y.State.SELECTED,this.checkable_&&this.checked_||!1),(0,Y.setState)(t,Y.State.DISABLED,!this.enabled_),t},ae.MenuItem.prototype.dispose=function(){this.element_=null},ae.MenuItem.prototype.getElement=function(){return this.element_},ae.MenuItem.prototype.getId=function(){return this.element_.id},ae.MenuItem.prototype.getValue=function(){return this.value_},ae.MenuItem.prototype.setRightToLeft=function(t){this.rightToLeft_=t},ae.MenuItem.prototype.setRole=function(t){this.roleName_=t},ae.MenuItem.prototype.setCheckable=function(t){this.checkable_=t},ae.MenuItem.prototype.setChecked=function(t){this.checked_=t},ae.MenuItem.prototype.setHighlighted=function(t){this.highlight_=t;var e=this.getElement();e&&this.isEnabled()&&(t?((0,_.addClass)(e,"blocklyMenuItemHighlight"),(0,_.addClass)(e,"goog-menuitem-highlight")):((0,_.removeClass)(e,"blocklyMenuItemHighlight"),(0,_.removeClass)(e,"goog-menuitem-highlight")))},ae.MenuItem.prototype.isEnabled=function(){return this.enabled_},ae.MenuItem.prototype.setEnabled=function(t){this.enabled_=t},ae.MenuItem.prototype.performAction=function(){this.isEnabled()&&this.actionHandler_&&this.actionHandler_(this)},ae.MenuItem.prototype.onAction=function(t,e){this.actionHandler_=t.bind(e)};var Ut={Menu:function(){this.menuItems_=[],this.roleName_=this.element_=this.onKeyDownHandler_=this.mouseLeaveHandler_=this.mouseEnterHandler_=this.clickHandler_=this.mouseOverHandler_=this.highlightedItem_=this.openingCoords=null}};Ut.Menu.prototype.addChild=function(t){this.menuItems_.push(t)},Ut.Menu.prototype.render=function(t){var e=document.createElement("div");e.className="blocklyMenu goog-menu blocklyNonSelectable",e.tabIndex=0,this.roleName_&&(0,Y.setRole)(e,this.roleName_),this.element_=e;for(var o=0,i;i=this.menuItems_[o];o++)e.appendChild(i.createDom());this.mouseOverHandler_=(0,$.conditionalBind)(e,"mouseover",this,this.handleMouseOver_,!0),this.clickHandler_=(0,$.conditionalBind)(e,"click",this,this.handleClick_,!0),this.mouseEnterHandler_=(0,$.conditionalBind)(e,"mouseenter",this,this.handleMouseEnter_,!0),this.mouseLeaveHandler_=(0,$.conditionalBind)(e,"mouseleave",this,this.handleMouseLeave_,!0),this.onKeyDownHandler_=(0,$.conditionalBind)(e,"keydown",this,this.handleKeyEvent_),t.appendChild(e)},Ut.Menu.prototype.getElement=function(){return this.element_},Ut.Menu.prototype.focus=function(){var t=this.getElement();t&&(t.focus({preventScroll:!0}),(0,_.addClass)(t,"blocklyFocused"))},Ut.Menu.prototype.blur_=function(){var t=this.getElement();t&&(t.blur(),(0,_.removeClass)(t,"blocklyFocused"))},Ut.Menu.prototype.setRole=function(t){this.roleName_=t},Ut.Menu.prototype.dispose=function(){this.mouseOverHandler_&&((0,$.unbind)(this.mouseOverHandler_),this.mouseOverHandler_=null),this.clickHandler_&&((0,$.unbind)(this.clickHandler_),this.clickHandler_=null),this.mouseEnterHandler_&&((0,$.unbind)(this.mouseEnterHandler_),this.mouseEnterHandler_=null),this.mouseLeaveHandler_&&((0,$.unbind)(this.mouseLeaveHandler_),this.mouseLeaveHandler_=null),this.onKeyDownHandler_&&((0,$.unbind)(this.onKeyDownHandler_),this.onKeyDownHandler_=null);for(var t=0,e;e=this.menuItems_[t];t++)e.dispose();this.element_=null},Ut.Menu.prototype.getMenuItem_=function(t){for(var e=this.getElement();t&&t!==e;){if((0,_.hasClass)(t,"blocklyMenuItem")){for(var o=0,i;i=this.menuItems_[o];o++)if(i.getElement()===t)return i}t=t.parentElement}return null},Ut.Menu.prototype.setHighlighted=function(t){var e=this.highlightedItem_;e&&(e.setHighlighted(!1),this.highlightedItem_=null),t&&(t.setHighlighted(!0),this.highlightedItem_=t,e=this.getElement(),(0,Ct.scrollIntoContainerView)(t.getElement(),e),(0,Y.setState)(e,Y.State.ACTIVEDESCENDANT,t.getId()))},Ut.Menu.prototype.highlightNext=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(t,1)},Ut.Menu.prototype.highlightPrevious=function(){var t=this.menuItems_.indexOf(this.highlightedItem_);this.highlightHelper_(0>t?this.menuItems_.length:t,-1)},Ut.Menu.prototype.highlightFirst_=function(){this.highlightHelper_(-1,1)},Ut.Menu.prototype.highlightLast_=function(){this.highlightHelper_(this.menuItems_.length,-1)},Ut.Menu.prototype.highlightHelper_=function(t,e){t+=e;for(var o;o=this.menuItems_[t];){if(o.isEnabled()){this.setHighlighted(o);break}t+=e}},Ut.Menu.prototype.handleMouseOver_=function(t){(t=this.getMenuItem_(t.target))&&(t.isEnabled()?this.highlightedItem_!==t&&this.setHighlighted(t):this.setHighlighted(null))},Ut.Menu.prototype.handleClick_=function(t){var e=this.openingCoords;if(this.openingCoords=null,e&&typeof t.clientX=="number"){var o=new H.Coordinate(t.clientX,t.clientY);if(1>H.Coordinate.distance(e,o))return}(t=this.getMenuItem_(t.target))&&t.performAction()},Ut.Menu.prototype.handleMouseEnter_=function(t){this.focus()},Ut.Menu.prototype.handleMouseLeave_=function(t){this.getElement()&&(this.blur_(),this.setHighlighted(null))},Ut.Menu.prototype.handleKeyEvent_=function(t){if(this.menuItems_.length&&!(t.shiftKey||t.ctrlKey||t.metaKey||t.altKey)){var e=this.highlightedItem_;switch(t.keyCode){case K.KeyCodes.ENTER:case K.KeyCodes.SPACE:e&&e.performAction();break;case K.KeyCodes.UP:this.highlightPrevious();break;case K.KeyCodes.DOWN:this.highlightNext();break;case K.KeyCodes.PAGE_UP:case K.KeyCodes.HOME:this.highlightFirst_();break;case K.KeyCodes.PAGE_DOWN:case K.KeyCodes.END:this.highlightLast_();break;default:return}t.preventDefault(),t.stopPropagation()}},Ut.Menu.prototype.getSize=function(){var t=this.getElement(),e=(0,Ct.getSize)(t);return e.height=t.scrollHeight,e};var pi={VARIABLES:100,BLOCKS:50},hi={register:function(t,e){(0,b.register)(b.Type.SERIALIZER,t,e)},unregister:function(t){(0,b.unregister)(b.Type.SERIALIZER,t)}},Nt={DeserializationError:function(){var t=Error.apply(this,arguments);this.message=t.message,"stack"in t&&(this.stack=t.stack)}};n.$jscomp.inherits(Nt.DeserializationError,Error),Nt.MissingBlockType=function(t){Nt.DeserializationError.call(this,"Expected to find a 'type' property, defining the block type"),this.state=t},n.$jscomp.inherits(Nt.MissingBlockType,Nt.DeserializationError),Nt.MissingConnection=function(t,e,o){Nt.DeserializationError.call(this,"The block "+e.toDevString()+" is missing a(n) "+t+`
connection`),this.block=e,this.state=o},n.$jscomp.inherits(Nt.MissingConnection,Nt.DeserializationError),Nt.BadConnectionCheck=function(t,e,o,i){Nt.DeserializationError.call(this,"The block "+o.toDevString()+` could not connect its
`+e+" to its parent, because: "+t),this.childBlock=o,this.childState=i},n.$jscomp.inherits(Nt.BadConnectionCheck,Nt.DeserializationError),Nt.RealChildOfShadow=function(t){Nt.DeserializationError.call(this,`Encountered a real block which is defined as a child of a shadow
block. It is an invariant of Blockly that shadow blocks only have shadow
children`),this.state=t},n.$jscomp.inherits(Nt.RealChildOfShadow,Nt.DeserializationError);var wn={ISerializer:function(){}};wn.ISerializer.prototype.save=function(t){},wn.ISerializer.prototype.load=function(t,e){},wn.ISerializer.prototype.clear=function(t){};var zt={save:function(t,e){var o=e===void 0?{}:e;e=o.addCoordinates===void 0?!1:o.addCoordinates;var i=o.addInputBlocks===void 0?!0:o.addInputBlocks,s=o.addNextBlocks===void 0?!0:o.addNextBlocks;if(o=o.doFullSerialization===void 0?!0:o.doFullSerialization,t.isInsertionMarker())return null;var l={type:t.type,id:t.id};return e&&zr(t,l),Jr(t,l),qr(t,l),Zr(t,l),Qr(t,l,o),i&&ts(t,l,o),s&&es(t,l,o),l}},Jr=function(t,e){t.isCollapsed()&&(e.collapsed=!0),t.isEnabled()||(e.enabled=!1),t.inputsInline!==void 0&&t.inputsInline!==t.inputsInlineDefault&&(e.inline=t.inputsInline),t.data&&(e.data=t.data)},zr=function(t,e){var o=t.workspace;t=t.getRelativeToSurfaceXY(),e.x=Math.round(o.RTL?o.getWidth()-t.x:t.x),e.y=Math.round(t.y)},qr=function(t,e){t.saveExtraState?(t=t.saveExtraState(),t!==null&&(e.extraState=t)):t.mutationToDom&&(t=t.mutationToDom(),t!==null&&(e.extraState=(0,n.module$exports$Blockly$Xml.domToText)(t).replace(' xmlns="https://developers.google.com/blockly/xml"',"")))},Zr=function(t,e){t.getCommentText()&&(e.icons={comment:{text:t.getCommentText(),pinned:t.commentModel.pinned,height:Math.round(t.commentModel.size.height),width:Math.round(t.commentModel.size.width)}})},Qr=function(t,e,o){for(var i=Object.create(null),s=0;s<t.inputList.length;s++)for(var l=t.inputList[s],h=0;h<l.fieldRow.length;h++){var S=l.fieldRow[h];S.isSerializable()&&(i[S.name]=S.saveState(o))}Object.keys(i).length&&(e.fields=i)},ts=function(t,e,o){for(var i=Object.create(null),s=0;s<t.inputList.length;s++){var l=t.inputList[s];if(l.type!==n.module$exports$Blockly$inputTypes.inputTypes.DUMMY){var h=lr(l.connection,o);h&&(i[l.name]=h)}}Object.keys(i).length&&(e.inputs=i)},es=function(t,e,o){t.nextConnection&&(t=lr(t.nextConnection,o))&&(e.next=t)},lr=function(t,e){var o=t.getShadowState(!0);if(t=t.targetBlock(),!o&&!t)return null;var i=Object.create(null);return o&&(i.shadow=o),t&&!t.isShadow()&&(i.block=(0,zt.save)(t,{doFullSerialization:e})),i};zt.append=function(t,e,o){return o=o===void 0?{}:o,(0,zt.appendInternal)(t,e,{recordUndo:o.recordUndo===void 0?!1:o.recordUndo})},zt.appendInternal=function(t,e,o){var i=o===void 0?{}:o;o=i.parentConnection===void 0?void 0:i.parentConnection;var s=i.isShadow===void 0?!1:i.isShadow,l=i.recordUndo===void 0?!1:i.recordUndo;i=(0,p.getRecordUndo)(),(0,p.setRecordUndo)(l),(l=(0,p.getGroup)())||(0,p.setGroup)(!0),(0,p.disable)();var h=ar(t,e,{parentConnection:o,isShadow:s});return(0,p.enable)(),(0,p.fire)(new((0,p.get)(p.CREATE))(h)),(0,p.setGroup)(l),(0,p.setRecordUndo)(i),e.rendered&&setTimeout(function(){h.disposed||h.setConnectionTracking(!0)},1),h};var ar=function(t,e,o){var i=o===void 0?{}:o;if(o=i.parentConnection===void 0?void 0:i.parentConnection,i=i.isShadow===void 0?!1:i.isShadow,!t.type)throw new Nt.MissingBlockType(t);var s=e.newBlock(t.type,t.id);return s.setShadow(i),os(s,t),ns(s,t),is(s,t),rs(o,s,t),ss(s,t),ls(s,t),as(s,t),cs(s,t),us(s,e.rendered),s},os=function(t,e){var o=e.x===void 0?0:e.x;e=e.y===void 0?0:e.y;var i=t.workspace;o=i.RTL?i.getWidth()-o:o,t.moveBy(o,e)},ns=function(t,e){e.collapsed&&t.setCollapsed(!0),e.enabled===!1&&t.setEnabled(!1),e.inline!==void 0&&t.setInputsInline(e.inline),e.data!==void 0&&(t.data=e.data)},is=function(t,e){e.extraState&&(t.loadExtraState?t.loadExtraState(e.extraState):t.domToMutation((0,n.module$exports$Blockly$Xml.textToDom)(e.extraState)))},rs=function(t,e,o){if(t){if(t.getSourceBlock().isShadow()&&!e.isShadow())throw new Nt.RealChildOfShadow(o);if(t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE){var i=e.outputConnection;if(!i)throw new Nt.MissingConnection("output",e,o)}else if(i=e.previousConnection,!i)throw new Nt.MissingConnection("previous",e,o);if(!t.connect(i)){var s=e.workspace.connectionChecker;throw new Nt.BadConnectionCheck(s.getErrorMessage(s.canConnectWithReason(i,t,!1),i,t),t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE?"output connection":"previous connection",e,o)}}},ss=function(t,e){e.icons&&(e=e.icons.comment)&&(t.setCommentText(e.text),"pinned"in e&&(t.commentModel.pinned=e.pinned),"width"in e&&"height"in e&&(t.commentModel.size=new jt.Size(e.width,e.height)),e.pinned&&t.rendered&&!t.isInFlyout&&setTimeout(function(){return t.getCommentIcon().setVisible(!0)},1))},ls=function(t,e){if(e.fields)for(var o=Object.keys(e.fields),i=0;i<o.length;i++){var s=o[i],l=e.fields[s],h=t.getField(s);h?h.loadState(l):console.warn("Ignoring non-existant field "+s+" in block "+t.type)}},as=function(t,e){if(e.inputs)for(var o=Object.keys(e.inputs),i=0;i<o.length;i++){var s=o[i],l=t.getInput(s);if(!l||!l.connection)throw new Nt.MissingConnection(s,t,e);cr(l.connection,e.inputs[s])}},cs=function(t,e){if(e.next){if(!t.nextConnection)throw new Nt.MissingConnection("next",t,e);cr(t.nextConnection,e.next)}},cr=function(t,e){e.shadow&&t.setShadowState(e.shadow),e.block&&ar(e.block,t.getSourceBlock().workspace,{parentConnection:t})},us=function(t,e){if(e)for(t.setConnectionTracking(!1),t.initSvg(),t.render(!1),t=t.getIcons(),e=0;e<t.length;e++)t[e].computeIconLocation();else t.initModel()},ps=zt.save,Pn=function(){this.priority=pi.BLOCKS};Pn.prototype.save=function(t){var e=[];t=n.$jscomp.makeIterator(t.getTopBlocks(!1));for(var o=t.next();!o.done;o=t.next())(o=ps(o.value,{addCoordinates:!0,doFullSerialization:!1}))&&e.push(o);return e.length?{languageVersion:0,blocks:e}:null},Pn.prototype.load=function(t,e){t=n.$jscomp.makeIterator(t.blocks);for(var o=t.next();!o.done;o=t.next())(0,zt.append)(o.value,e,{recordUndo:(0,p.getRecordUndo)()})},Pn.prototype.clear=function(t){t=n.$jscomp.makeIterator(t.getTopBlocks(!1));for(var e=t.next();!e.done;e=t.next())e.value.dispose(!1)},(0,hi.register)("blocks",new Pn);var Ht={Abstract:function(){this.isBlank=null,this.workspaceId=void 0,this.group=(0,p.getGroup)(),this.recordUndo=(0,p.getRecordUndo)(),this.isUiEvent=!1,this.type=void 0}};Ht.Abstract.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),t},Ht.Abstract.prototype.fromJson=function(t){this.isBlank=!1,this.group=t.group},Ht.Abstract.prototype.isNull=function(){return!1},Ht.Abstract.prototype.run=function(t){},Ht.Abstract.prototype.getEventWorkspace_=function(){var t;if(this.workspaceId&&(t=X.Workspace.getById(this.workspaceId)),!t)throw Error("Workspace is null. Event must have been generated from real Blockly events.");return t};var Yt={BlockBase:function(t){Ht.Abstract.call(this),this.blockId=(this.isBlank=typeof t>"u")?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id}};n.$jscomp.inherits(Yt.BlockBase,Ht.Abstract),Yt.BlockBase.prototype.toJson=function(){var t=Ht.Abstract.prototype.toJson.call(this);return t.blockId=this.blockId,t},Yt.BlockBase.prototype.fromJson=function(t){Ht.Abstract.prototype.fromJson.call(this,t),this.blockId=t.blockId};var Yo={BlockCreate:function(t){Yt.BlockBase.call(this,t),this.type=p.CREATE,t&&(t.isShadow()&&(this.recordUndo=!1),this.xml=(0,n.module$exports$Blockly$Xml.blockToDomWithXY)(t),this.ids=(0,p.getDescendantIds)(t),this.json=(0,zt.save)(t,{addCoordinates:!0}))}};n.$jscomp.inherits(Yo.BlockCreate,Yt.BlockBase),Yo.BlockCreate.prototype.toJson=function(){var t=Yt.BlockBase.prototype.toJson.call(this);return t.xml=(0,n.module$exports$Blockly$Xml.domToText)(this.xml),t.ids=this.ids,t.json=this.json,this.recordUndo||(t.recordUndo=this.recordUndo),t},Yo.BlockCreate.prototype.fromJson=function(t){Yt.BlockBase.prototype.fromJson.call(this,t),this.xml=(0,n.module$exports$Blockly$Xml.textToDom)(t.xml),this.ids=t.ids,this.json=t.json,t.recordUndo!==void 0&&(this.recordUndo=t.recordUndo)},Yo.BlockCreate.prototype.run=function(t){var e=this.getEventWorkspace_();if(t)(0,zt.append)(this.json,e);else for(t=0;t<this.ids.length;t++){var o=this.ids[t],i=e.getBlockById(o);i?i.dispose(!1):o===this.blockId&&console.warn("Can't uncreate non-existent block: "+o)}},(0,b.register)(b.Type.EVENT,p.CREATE,Yo.BlockCreate);var Tn;n.module$exports$Blockly$ContextMenu={},Tn=null,n.module$exports$Blockly$ContextMenu.getCurrentBlock=function(){return Tn},n.module$exports$Blockly$ContextMenu.setCurrentBlock=function(t){Tn=t},Object.defineProperties(n.module$exports$Blockly$ContextMenu,{currentBlock:{get:function(){return(0,y.warn)("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.getCurrentBlock()"),(0,n.module$exports$Blockly$ContextMenu.getCurrentBlock)()},set:function(t){(0,y.warn)("Blockly.ContextMenu.currentBlock","September 2021","September 2022","Blockly.Tooltip.setCurrentBlock(block)"),(0,n.module$exports$Blockly$ContextMenu.setCurrentBlock)(t)}}});var Fn=null;n.module$exports$Blockly$ContextMenu.show=function(t,e,o){if((0,v.show)(n.module$exports$Blockly$ContextMenu,o,n.module$exports$Blockly$ContextMenu.dispose),e.length){var i=hs(e,o);Fn=i,ds(i,t,o),setTimeout(function(){i.focus()},1),Tn=null}else(0,n.module$exports$Blockly$ContextMenu.hide)()};var hs=function(t,e){var o=new Ut.Menu;o.setRole(Y.Role.MENU);for(var i=0;i<t.length;i++){var s=t[i],l=new ae.MenuItem(s.text);l.setRightToLeft(e),l.setRole(Y.Role.MENUITEM),o.addChild(l),l.setEnabled(s.enabled),s.enabled&&l.onAction(function(h){(0,n.module$exports$Blockly$ContextMenu.hide)(),this.callback(this.scope)},s)}return o},ds=function(t,e,o){var i=(0,yt.getViewportBBox)();e=new wt.Rect(e.clientY+i.top,e.clientY+i.top,e.clientX+i.left,e.clientX+i.left),_s(t);var s=t.getSize();o&&(e.left+=s.width,e.right+=s.width,i.left+=s.width,i.right+=s.width),(0,v.positionWithAnchor)(i,e,s,o),t.focus()},_s=function(t){var e=(0,v.getDiv)();if(!e)throw Error("Attempting to create a context menu when widget div is null");t.render(e),e=t.getElement(),(0,_.addClass)(e,"blocklyContextMenu"),(0,$.conditionalBind)(e,"contextmenu",null,gs),t.focus()},gs=function(t){t.preventDefault(),t.stopPropagation()};n.module$exports$Blockly$ContextMenu.hide=function(){(0,v.hideIfOwner)(n.module$exports$Blockly$ContextMenu),Tn=null},n.module$exports$Blockly$ContextMenu.dispose=function(){Fn&&(Fn.dispose(),Fn=null)},n.module$exports$Blockly$ContextMenu.callbackFactory=function(t,e){return function(){(0,p.disable)();try{var o=(0,n.module$exports$Blockly$Xml.domToBlock)(e,t.workspace),i=t.getRelativeToSurfaceXY();i.x=t.RTL?i.x-n.module$exports$Blockly$config.config.snapRadius:i.x+n.module$exports$Blockly$config.config.snapRadius,i.y+=2*n.module$exports$Blockly$config.config.snapRadius,o.moveBy(i.x,i.y)}finally{(0,p.enable)()}(0,p.isEnabled)()&&!o.isShadow()&&(0,p.fire)(new((0,p.get)(p.CREATE))(o)),o.select()}},n.module$exports$Blockly$ContextMenu.commentDeleteOption=function(t){return{text:n.module$exports$Blockly$Msg.Msg.REMOVE_COMMENT,enabled:!0,callback:function(){(0,p.setGroup)(!0),t.dispose(),(0,p.setGroup)(!1)}}},n.module$exports$Blockly$ContextMenu.commentDuplicateOption=function(t){return{text:n.module$exports$Blockly$Msg.Msg.DUPLICATE_COMMENT,enabled:!0,callback:function(){(0,Le.duplicate)(t)}}},n.module$exports$Blockly$ContextMenu.workspaceCommentOption=function(t,e){var o=tt.WorkspaceCommentSvg;if(!o)throw Error("Missing require for Blockly.WorkspaceCommentSvg");var i={enabled:!G.IE};return i.text=n.module$exports$Blockly$Msg.Msg.ADD_COMMENT,i.callback=function(){var s=new o(t,n.module$exports$Blockly$Msg.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT,o.DEFAULT_SIZE,o.DEFAULT_SIZE),l=t.getInjectionDiv().getBoundingClientRect();l=new H.Coordinate(e.clientX-l.left,e.clientY-l.top);var h=t.getOriginOffsetInPixels();l=H.Coordinate.difference(l,h),l.scale(1/t.scale),s.moveBy(l.x,l.y),t.rendered&&(s.initSvg(),s.render(),s.select())},i};var we={removeElem:function(t,e){return e=t.indexOf(e),e===-1?!1:(t.splice(e,1),!0)}},Ke={},di=!1;Ke.isDebuggerEnabled=function(){return di},Ke.startDebugger=function(){(0,y.warn)("Blockly.blockRendering.debug.startDebugger()","February 2022","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),di=!0},Ke.stopDebugger=function(){(0,y.warn)("Blockly.blockRendering.debug.stopDebugger()","February 2022","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),di=!1};var E={Types:{NONE:0,FIELD:1,HAT:2,ICON:4,SPACER:8,BETWEEN_ROW_SPACER:16,IN_ROW_SPACER:32,EXTERNAL_VALUE_INPUT:64,INPUT:128,INLINE_INPUT:256,STATEMENT_INPUT:512,CONNECTION:1024,PREVIOUS_CONNECTION:2048,NEXT_CONNECTION:4096,OUTPUT_CONNECTION:8192,CORNER:16384,LEFT_SQUARE_CORNER:32768,LEFT_ROUND_CORNER:65536,RIGHT_SQUARE_CORNER:131072,RIGHT_ROUND_CORNER:262144,JAGGED_EDGE:524288,ROW:1048576,TOP_ROW:2097152,BOTTOM_ROW:4194304,INPUT_ROW:8388608}};E.Types.LEFT_CORNER=E.Types.LEFT_SQUARE_CORNER|E.Types.LEFT_ROUND_CORNER,E.Types.RIGHT_CORNER=E.Types.RIGHT_SQUARE_CORNER|E.Types.RIGHT_ROUND_CORNER,E.Types.nextTypeValue_=16777216,E.Types.getType=function(t){return Object.prototype.hasOwnProperty.call(E.Types,t)||(E.Types[t]=E.Types.nextTypeValue_,E.Types.nextTypeValue_<<=1),E.Types[t]},E.Types.isField=function(t){return t.type&E.Types.FIELD},E.Types.isHat=function(t){return t.type&E.Types.HAT},E.Types.isIcon=function(t){return t.type&E.Types.ICON},E.Types.isSpacer=function(t){return t.type&E.Types.SPACER},E.Types.isInRowSpacer=function(t){return t.type&E.Types.IN_ROW_SPACER},E.Types.isInput=function(t){return t.type&E.Types.INPUT},E.Types.isExternalInput=function(t){return t.type&E.Types.EXTERNAL_VALUE_INPUT},E.Types.isInlineInput=function(t){return t.type&E.Types.INLINE_INPUT},E.Types.isStatementInput=function(t){return t.type&E.Types.STATEMENT_INPUT},E.Types.isPreviousConnection=function(t){return t.type&E.Types.PREVIOUS_CONNECTION},E.Types.isNextConnection=function(t){return t.type&E.Types.NEXT_CONNECTION},E.Types.isPreviousOrNextConnection=function(t){return t.type&(E.Types.PREVIOUS_CONNECTION|E.Types.NEXT_CONNECTION)},E.Types.isLeftRoundedCorner=function(t){return t.type&E.Types.LEFT_ROUND_CORNER},E.Types.isRightRoundedCorner=function(t){return t.type&E.Types.RIGHT_ROUND_CORNER},E.Types.isLeftSquareCorner=function(t){return t.type&E.Types.LEFT_SQUARE_CORNER},E.Types.isRightSquareCorner=function(t){return t.type&E.Types.RIGHT_SQUARE_CORNER},E.Types.isCorner=function(t){return t.type&E.Types.CORNER},E.Types.isJaggedEdge=function(t){return t.type&E.Types.JAGGED_EDGE},E.Types.isRow=function(t){return t.type&E.Types.ROW},E.Types.isBetweenRowSpacer=function(t){return t.type&E.Types.BETWEEN_ROW_SPACER},E.Types.isTopRow=function(t){return t.type&E.Types.TOP_ROW},E.Types.isBottomRow=function(t){return t.type&E.Types.BOTTOM_ROW},E.Types.isTopOrBottomRow=function(t){return t.type&(E.Types.TOP_ROW|E.Types.BOTTOM_ROW)},E.Types.isInputRow=function(t){return t.type&E.Types.INPUT_ROW};var Se={Row:function(t){this.type=E.Types.ROW,this.elements=[],this.xPos=this.yPos=this.widthWithConnectedBlocks=this.minWidth=this.minHeight=this.width=this.height=0,this.hasStatement=this.hasExternalInput=!1,this.statementEdge=0,this.hasJaggedEdge=this.hasDummyInput=this.hasInlineInput=!1,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT,this.align=null}};Se.Row.prototype.getLastInput=function(){for(var t=this.elements.length-1;0<=t;t--){var e=this.elements[t];if(E.Types.isInput(e))return e}return null},Se.Row.prototype.measure=function(){throw Error("Unexpected attempt to measure a base Row.")},Se.Row.prototype.startsWithElemSpacer=function(){return!0},Se.Row.prototype.endsWithElemSpacer=function(){return!0},Se.Row.prototype.getFirstSpacer=function(){for(var t=0;t<this.elements.length;t++){var e=this.elements[t];if(E.Types.isSpacer(e))return e}return null},Se.Row.prototype.getLastSpacer=function(){for(var t=this.elements.length-1;0<=t;t--){var e=this.elements[t];if(E.Types.isSpacer(e))return e}return null};var io={BottomRow:function(t){Se.Row.call(this,t),this.type|=E.Types.BOTTOM_ROW,this.hasNextConnection=!1,this.connection=null,this.baseline=this.descenderHeight=0}};n.$jscomp.inherits(io.BottomRow,Se.Row),io.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection||!!t.getNextBlock()},io.BottomRow.prototype.hasRightSquareCorner=function(t){return!0},io.BottomRow.prototype.measure=function(){for(var t=0,e=0,o=0,i=0;i<this.elements.length;i++){var s=this.elements[i];e+=s.width,E.Types.isSpacer(s)||(E.Types.isNextConnection(s)?o=Math.max(o,s.height):t=Math.max(t,s.height))}this.width=Math.max(this.minWidth,e),this.height=Math.max(this.minHeight,t)+o,this.descenderHeight=o,this.widthWithConnectedBlocks=this.width},io.BottomRow.prototype.startsWithElemSpacer=function(){return!1},io.BottomRow.prototype.endsWithElemSpacer=function(){return!1};var qt={Measurable:function(t){this.height=this.width=0,this.type=E.Types.NONE,this.centerline=this.xPos=0,this.constants_=t,this.notchOffset=this.constants_.NOTCH_OFFSET_LEFT}},We={Connection:function(t,e){qt.Measurable.call(this,t),this.connectionModel=e,this.shape=this.constants_.shapeFor(e),this.isDynamicShape=!!this.shape.isDynamic,this.type|=E.Types.CONNECTION}};n.$jscomp.inherits(We.Connection,qt.Measurable);var Et={},_i=.45;Et.getHsvSaturation=function(){return _i},Et.setHsvSaturation=function(t){_i=t};var gi=.65;Et.getHsvValue=function(){return gi},Et.setHsvValue=function(t){gi=t},Et.parse=function(t){t=String(t).toLowerCase().trim();var e=Et.names[t];if(e||(e=t.substring(0,2)==="0x"?"#"+t.substring(2):t,e=e[0]==="#"?e:"#"+e,/^#[0-9a-f]{6}$/.test(e)))return e;if(/^#[0-9a-f]{3}$/.test(e))return["#",e[1],e[1],e[2],e[2],e[3],e[3]].join("");var o=t.match(/^(?:rgb)?\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)$/);return o&&(t=Number(o[1]),e=Number(o[2]),o=Number(o[3]),0<=t&&256>t&&0<=e&&256>e&&0<=o&&256>o)?(0,Et.rgbToHex)(t,e,o):null},Et.rgbToHex=function(t,e,o){return e=t<<16|e<<8|o,16>t?"#"+(16777216|e).toString(16).substr(1):"#"+e.toString(16)},Et.hexToRgb=function(t){return t=(0,Et.parse)(t),t?(t=parseInt(t.substr(1),16),[t>>16,t>>8&255,t&255]):[0,0,0]},Et.hsvToHex=function(t,e,o){var i=0,s=0,l=0;if(e===0)l=s=i=o;else{var h=Math.floor(t/60),S=t/60-h;t=o*(1-e);var C=o*(1-e*S);switch(e=o*(1-e*(1-S)),h){case 1:i=C,s=o,l=t;break;case 2:i=t,s=o,l=e;break;case 3:i=t,s=C,l=o;break;case 4:i=e,s=t,l=o;break;case 5:i=o,s=t,l=C;break;case 6:case 0:i=o,s=e,l=t}}return(0,Et.rgbToHex)(Math.floor(i),Math.floor(s),Math.floor(l))},Et.blend=function(t,e,o){return t=(0,Et.parse)(t),!t||(e=(0,Et.parse)(e),!e)?null:(t=(0,Et.hexToRgb)(t),e=(0,Et.hexToRgb)(e),(0,Et.rgbToHex)(Math.round(e[0]+o*(t[0]-e[0])),Math.round(e[1]+o*(t[1]-e[1])),Math.round(e[2]+o*(t[2]-e[2]))))},Et.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00"},Et.hueToHex=function(t){return(0,Et.hsvToHex)(t,_i,255*gi)};var B={point:function(t,e){return" "+t+","+e+" "},curve:function(t,e){return" "+t+e.join("")},moveTo:function(t,e){return" M "+t+","+e+" "},moveBy:function(t,e){return" m "+t+","+e+" "},lineTo:function(t,e){return" l "+t+","+e+" "},line:function(t){return" l"+t.join("")},lineOnAxis:function(t,e){return" "+t+" "+e+" "},arc:function(t,e,o,i){return t+" "+o+" "+o+" "+e+i}},mt={},yi=function(t,e){var o=[],i=t.split("");i.push("");var s=0;t=[];for(var l=null,h=0;h<i.length;h++){var S=i[h];s===0?S==="%"?((s=t.join(""))&&o.push(s),t.length=0,s=1):t.push(S):s===1?S==="%"?(t.push(S),s=0):e&&"0"<=S&&"9">=S?(s=2,l=S,(S=t.join(""))&&o.push(S),t.length=0):S==="{"?s=3:(t.push("%",S),s=0):s===2?"0"<=S&&"9">=S?l+=S:(o.push(parseInt(l,10)),h--,s=0):s===3&&(S===""?(t.splice(0,0,"%{"),h--,s=0):S!=="}"?t.push(S):(s=t.join(""),/[A-Z]\w*/i.test(s)?(S=s.toUpperCase(),(S=(0,n.module$exports$Blockly$utils$string.startsWith)(S,"BKY_")?S.substring(4):null)&&S in n.module$exports$Blockly$Msg.Msg?(s=n.module$exports$Blockly$Msg.Msg[S],typeof s=="string"?Array.prototype.push.apply(o,yi(s,e)):e?o.push(String(s)):o.push(s)):o.push("%{"+s+"}")):o.push("%{"+s+"}"),s=t.length=0))}for((e=t.join(""))&&o.push(e),i=[],l=t.length=0;l<o.length;l++)typeof o[l]=="string"?t.push(o[l]):((e=t.join(""))&&i.push(e),t.length=0,i.push(o[l]));return(e=t.join(""))&&i.push(e),t.length=0,i};mt.tokenizeInterpolation=function(t){return yi(t,!0)},mt.replaceMessageReferences=function(t){return typeof t!="string"?t:(t=yi(t,!1),t.length?String(t[0]):"")},mt.checkMessageReferences=function(t){for(var e=!0,o=n.module$exports$Blockly$Msg.Msg,i=t.match(/%{BKY_[A-Z]\w*}/ig),s=0;s<i.length;s++){var l=i[s].toUpperCase();o[l.slice(6,-1)]===void 0&&(console.warn("No message string for "+i[s]+" in "+t),e=!1)}return e},mt.parseBlockColour=function(t){var e=typeof t=="string"?(0,mt.replaceMessageReferences)(t):t,o=Number(e);if(!isNaN(o)&&0<=o&&360>=o)return{hue:o,hex:(0,Et.hsvToHex)(o,(0,Et.getHsvSaturation)(),255*(0,Et.getHsvValue)())};if(o=(0,Et.parse)(e))return{hue:null,hex:o};throw o='Invalid colour: "'+e+'"',t!==e&&(o+=' (from "'+t+'")'),Error(o)};var Tt={ConstantProvider:function(){this.NO_PADDING=0,this.SMALL_PADDING=3,this.MEDIUM_PADDING=5,this.MEDIUM_LARGE_PADDING=8,this.LARGE_PADDING=10,this.TALL_INPUT_FIELD_OFFSET_Y=this.MEDIUM_PADDING,this.TAB_HEIGHT=15,this.TAB_OFFSET_FROM_TOP=5,this.TAB_VERTICAL_OVERLAP=2.5,this.TAB_WIDTH=8,this.NOTCH_WIDTH=15,this.NOTCH_HEIGHT=4,this.MIN_BLOCK_WIDTH=12,this.EMPTY_BLOCK_SPACER_HEIGHT=16,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=this.DUMMY_INPUT_MIN_HEIGHT=this.TAB_HEIGHT,this.CORNER_RADIUS=8,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=15,this.STATEMENT_BOTTOM_SPACER=0,this.STATEMENT_INPUT_PADDING_LEFT=20,this.BETWEEN_STATEMENT_PADDING_Y=4,this.TOP_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.MEDIUM_PADDING,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.ADD_START_HATS=!1,this.START_HAT_HEIGHT=15,this.START_HAT_WIDTH=100,this.SPACER_DEFAULT_HEIGHT=15,this.MIN_BLOCK_HEIGHT=24,this.EMPTY_INLINE_INPUT_PADDING=14.5,this.EMPTY_INLINE_INPUT_HEIGHT=this.TAB_HEIGHT+11,this.EXTERNAL_VALUE_INPUT_PADDING=2,this.EMPTY_STATEMENT_INPUT_HEIGHT=this.MIN_BLOCK_HEIGHT,this.START_POINT=(0,B.moveBy)(0,0),this.JAGGED_TEETH_HEIGHT=12,this.JAGGED_TEETH_WIDTH=6,this.FIELD_TEXT_FONTSIZE=11,this.FIELD_TEXT_FONTWEIGHT="normal",this.FIELD_TEXT_FONTFAMILY="sans-serif",this.FIELD_TEXT_BASELINE=this.FIELD_TEXT_HEIGHT=-1,this.FIELD_BORDER_RECT_RADIUS=4,this.FIELD_BORDER_RECT_HEIGHT=16,this.FIELD_BORDER_RECT_X_PADDING=5,this.FIELD_BORDER_RECT_Y_PADDING=3,this.FIELD_BORDER_RECT_COLOUR="#fff",this.FIELD_TEXT_BASELINE_CENTER=!G.IE&&!G.EDGE,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!1,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_DROPDOWN_SVG_ARROW_SIZE=12,this.FIELD_DROPDOWN_SVG_ARROW_DATAURI="data:image/svg+xml;base64,PHN2ZyBpZD0iTGF5ZXJfMSIgZGF0YS1uYW1lPSJMYXllciAxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxMi43MSIgaGVpZ2h0PSI4Ljc5IiB2aWV3Qm94PSIwIDAgMTIuNzEgOC43OSI+PHRpdGxlPmRyb3Bkb3duLWFycm93PC90aXRsZT48ZyBvcGFjaXR5PSIwLjEiPjxwYXRoIGQ9Ik0xMi43MSwyLjQ0QTIuNDEsMi40MSwwLDAsMSwxMiw0LjE2TDguMDgsOC4wOGEyLjQ1LDIuNDUsMCwwLDEtMy40NSwwTDAuNzIsNC4xNkEyLjQyLDIuNDIsMCwwLDEsMCwyLjQ0LDIuNDgsMi40OCwwLDAsMSwuNzEuNzFDMSwwLjQ3LDEuNDMsMCw2LjM2LDBTMTEuNzUsMC40NiwxMiwuNzFBMi40NCwyLjQ0LDAsMCwxLDEyLjcxLDIuNDRaIiBmaWxsPSIjMjMxZjIwIi8+PC9nPjxwYXRoIGQ9Ik02LjM2LDcuNzlhMS40MywxLjQzLDAsMCwxLTEtLjQyTDEuNDIsMy40NWExLjQ0LDEuNDQsMCwwLDEsMC0yYzAuNTYtLjU2LDkuMzEtMC41Niw5Ljg3LDBhMS40NCwxLjQ0LDAsMCwxLDAsMkw3LjM3LDcuMzdBMS40MywxLjQzLDAsMCwxLDYuMzYsNy43OVoiIGZpbGw9IiNmZmYiLz48L3N2Zz4=",this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!1,this.FIELD_COLOUR_DEFAULT_WIDTH=26,this.FIELD_COLOUR_DEFAULT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT,this.FIELD_CHECKBOX_X_OFFSET=this.FIELD_BORDER_RECT_X_PADDING-3,this.randomIdentifier=String(Math.random()).substring(2),this.defs_=null,this.embossFilterId="",this.embossFilter_=null,this.disabledPatternId="",this.disabledPattern_=null,this.debugFilterId="",this.cssNode_=this.debugFilter_=null,this.CURSOR_COLOUR="#cc0a0a",this.MARKER_COLOUR="#4286f4",this.CURSOR_WS_WIDTH=100,this.WS_CURSOR_HEIGHT=5,this.CURSOR_STACK_PADDING=10,this.CURSOR_BLOCK_PADDING=2,this.CURSOR_STROKE_WIDTH=4,this.FULL_BLOCK_FIELDS=!1,this.INSERTION_MARKER_COLOUR="#000000",this.INSERTION_MARKER_OPACITY=.2,this.SHAPES={PUZZLE:1,NOTCH:2}}};Tt.ConstantProvider.prototype.init=function(){this.JAGGED_TEETH=this.makeJaggedTeeth(),this.NOTCH=this.makeNotch(),this.START_HAT=this.makeStartHat(),this.PUZZLE_TAB=this.makePuzzleTab(),this.INSIDE_CORNERS=this.makeInsideCorners(),this.OUTSIDE_CORNERS=this.makeOutsideCorners()},Tt.ConstantProvider.prototype.setTheme=function(t){this.blockStyles=Object.create(null);var e=t.blockStyles,o;for(o in e)this.blockStyles[o]=this.validatedBlockStyle_(e[o]);this.setDynamicProperties_(t)},Tt.ConstantProvider.prototype.setDynamicProperties_=function(t){this.setFontConstants_(t),this.setComponentConstants_(t),this.ADD_START_HATS=t.startHats!==null?t.startHats:this.ADD_START_HATS},Tt.ConstantProvider.prototype.setFontConstants_=function(t){t.fontStyle&&t.fontStyle.family&&(this.FIELD_TEXT_FONTFAMILY=t.fontStyle.family),t.fontStyle&&t.fontStyle.weight&&(this.FIELD_TEXT_FONTWEIGHT=t.fontStyle.weight),t.fontStyle&&t.fontStyle.size&&(this.FIELD_TEXT_FONTSIZE=t.fontStyle.size),t=(0,_.measureFontMetrics)("Hg",this.FIELD_TEXT_FONTSIZE+"pt",this.FIELD_TEXT_FONTWEIGHT,this.FIELD_TEXT_FONTFAMILY),this.FIELD_TEXT_HEIGHT=t.height,this.FIELD_TEXT_BASELINE=t.baseline},Tt.ConstantProvider.prototype.setComponentConstants_=function(t){this.CURSOR_COLOUR=t.getComponentStyle("cursorColour")||this.CURSOR_COLOUR,this.MARKER_COLOUR=t.getComponentStyle("markerColour")||this.MARKER_COLOUR,this.INSERTION_MARKER_COLOUR=t.getComponentStyle("insertionMarkerColour")||this.INSERTION_MARKER_COLOUR,this.INSERTION_MARKER_OPACITY=Number(t.getComponentStyle("insertionMarkerOpacity"))||this.INSERTION_MARKER_OPACITY},Tt.ConstantProvider.prototype.getBlockStyleForColour=function(t){var e="auto_"+t;return this.blockStyles[e]||(this.blockStyles[e]=this.createBlockStyle_(t)),{style:this.blockStyles[e],name:e}},Tt.ConstantProvider.prototype.getBlockStyle=function(t){return this.blockStyles[t||""]||(t&&t.indexOf("auto_")===0?this.getBlockStyleForColour(t.substring(5)).style:this.createBlockStyle_("#000000"))},Tt.ConstantProvider.prototype.createBlockStyle_=function(t){return this.validatedBlockStyle_({colourPrimary:t})},Tt.ConstantProvider.prototype.validatedBlockStyle_=function(t){var e={};return t&&(0,n.module$exports$Blockly$utils$object.mixin)(e,t),t=(0,mt.parseBlockColour)(e.colourPrimary||"#000"),e.colourPrimary=t.hex,e.colourSecondary=e.colourSecondary?(0,mt.parseBlockColour)(e.colourSecondary).hex:this.generateSecondaryColour_(e.colourPrimary),e.colourTertiary=e.colourTertiary?(0,mt.parseBlockColour)(e.colourTertiary).hex:this.generateTertiaryColour_(e.colourPrimary),e.hat=e.hat||"",e},Tt.ConstantProvider.prototype.generateSecondaryColour_=function(t){return(0,Et.blend)("#fff",t,.6)||t},Tt.ConstantProvider.prototype.generateTertiaryColour_=function(t){return(0,Et.blend)("#fff",t,.3)||t},Tt.ConstantProvider.prototype.dispose=function(){this.embossFilter_&&(0,_.removeNode)(this.embossFilter_),this.disabledPattern_&&(0,_.removeNode)(this.disabledPattern_),this.debugFilter_&&(0,_.removeNode)(this.debugFilter_),this.cssNode_=null},Tt.ConstantProvider.prototype.makeJaggedTeeth=function(){var t=this.JAGGED_TEETH_HEIGHT,e=this.JAGGED_TEETH_WIDTH,o=(0,B.line)([(0,B.point)(e,t/4),(0,B.point)(2*-e,t/2),(0,B.point)(e,t/4)]);return{height:t,width:e,path:o}},Tt.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH,o=(0,B.curve)("c",[(0,B.point)(30,-t),(0,B.point)(70,-t),(0,B.point)(e,0)]);return{height:t,width:e,path:o}},Tt.ConstantProvider.prototype.makePuzzleTab=function(){function t(l){l=l?-1:1;var h=-l,S=o/2,C=S+2.5,x=S+.5,F=(0,B.point)(-e,l*S);return S=(0,B.point)(e,l*S),(0,B.curve)("c",[(0,B.point)(0,l*C),(0,B.point)(-e,h*x),F])+(0,B.curve)("s",[(0,B.point)(e,2.5*h),S])}var e=this.TAB_WIDTH,o=this.TAB_HEIGHT,i=t(!0),s=t(!1);return{type:this.SHAPES.PUZZLE,width:e,height:o,pathDown:s,pathUp:i}},Tt.ConstantProvider.prototype.makeNotch=function(){function t(h){return(0,B.line)([(0,B.point)(h*i,o),(0,B.point)(3*h,0),(0,B.point)(h*i,-o)])}var e=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,i=(e-3)/2,s=t(1),l=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:o,pathLeft:s,pathRight:l}},Tt.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,e=(0,B.arc)("a","0 0,0",t,(0,B.point)(-t,t)),o=(0,B.arc)("a","0 0,0",t,(0,B.point)(t,t));return{width:t,height:t,pathTop:e,pathBottom:o}},Tt.ConstantProvider.prototype.makeOutsideCorners=function(){var t=this.CORNER_RADIUS,e=(0,B.moveBy)(0,t)+(0,B.arc)("a","0 0,1",t,(0,B.point)(t,-t)),o=(0,B.arc)("a","0 0,1",t,(0,B.point)(t,t)),i=(0,B.arc)("a","0 0,1",t,(0,B.point)(-t,-t)),s=(0,B.arc)("a","0 0,1",t,(0,B.point)(-t,t));return{topLeft:e,topRight:o,bottomRight:s,bottomLeft:i,rightHeight:t}},Tt.ConstantProvider.prototype.shapeFor=function(t){switch(t.type){case n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:case n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:return this.PUZZLE_TAB;case n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:case n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown connection type")}},Tt.ConstantProvider.prototype.createDom=function(t,e,o){this.injectCSS_(e,o),this.defs_=(0,_.createSvgElement)(R.Svg.DEFS,{},t),t=(0,_.createSvgElement)(R.Svg.FILTER,{id:"blocklyEmbossFilter"+this.randomIdentifier},this.defs_),(0,_.createSvgElement)(R.Svg.FEGAUSSIANBLUR,{in:"SourceAlpha",stdDeviation:1,result:"blur"},t),e=(0,_.createSvgElement)(R.Svg.FESPECULARLIGHTING,{in:"blur",surfaceScale:1,specularConstant:.5,specularExponent:10,"lighting-color":"white",result:"specOut"},t),(0,_.createSvgElement)(R.Svg.FEPOINTLIGHT,{x:-5e3,y:-1e4,z:2e4},e),(0,_.createSvgElement)(R.Svg.FECOMPOSITE,{in:"specOut",in2:"SourceAlpha",operator:"in",result:"specOut"},t),(0,_.createSvgElement)(R.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"specOut",operator:"arithmetic",k1:0,k2:1,k3:1,k4:0},t),this.embossFilterId=t.id,this.embossFilter_=t,t=(0,_.createSvgElement)(R.Svg.PATTERN,{id:"blocklyDisabledPattern"+this.randomIdentifier,patternUnits:"userSpaceOnUse",width:10,height:10},this.defs_),(0,_.createSvgElement)(R.Svg.RECT,{width:10,height:10,fill:"#aaa"},t),(0,_.createSvgElement)(R.Svg.PATH,{d:"M 0 0 L 10 10 M 10 0 L 0 10",stroke:"#cc0"},t),this.disabledPatternId=t.id,this.disabledPattern_=t,this.createDebugFilter()},Tt.ConstantProvider.prototype.createDebugFilter=function(){if(!this.debugFilter_){var t=(0,_.createSvgElement)(R.Svg.FILTER,{id:"blocklyDebugFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},this.defs_),e=(0,_.createSvgElement)(R.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t);(0,_.createSvgElement)(R.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),(0,_.createSvgElement)(R.Svg.FEFLOOD,{"flood-color":"#ff0000","flood-opacity":.5,result:"outColor"},t),(0,_.createSvgElement)(R.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),this.debugFilterId=t.id,this.debugFilter_=t}},Tt.ConstantProvider.prototype.injectCSS_=function(t,e){e=this.getCSS_(e),t="blockly-renderer-style-"+t,this.cssNode_=document.getElementById(t);var o=e.join(`
`);this.cssNode_?this.cssNode_.firstChild.textContent=o:(e=document.createElement("style"),e.id=t,t=document.createTextNode(o),e.appendChild(t),document.head.insertBefore(e,document.head.firstChild),this.cssNode_=e)},Tt.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText, ",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect,",t+" .blocklyEditableText>rect {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","fill-opacity: .6;","stroke: none;","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text {","fill: #000;","}",t+" .blocklyFlyoutLabelText {","fill: #000;","}",t+" .blocklyText.blocklyBubbleText {","fill: #000;","}",t+" .blocklyEditableText:not(.editing):hover>rect {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","}",t+" .blocklySelected>.blocklyPath {","stroke: #fc3;","stroke-width: 3px;","}",t+" .blocklyHighlightedConnectionPath {","stroke: #fc3;","}",t+" .blocklyReplaceable .blocklyPath {","fill-opacity: .5;","}",t+" .blocklyReplaceable .blocklyPathLight,",t+" .blocklyReplaceable .blocklyPathDark {","display: none;","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]};var $o={Field:function(t,e,o){qt.Measurable.call(this,t),this.field=e,this.isEditable=e.EDITABLE,this.flipRtl=e.getFlipRtl(),this.type|=E.Types.FIELD,t=this.field.getSize(),this.height=t.height,this.width=t.width,this.parentInput=o}};n.$jscomp.inherits($o.Field,qt.Measurable);var $e={register:function(t,e){(0,b.register)(b.Type.FIELD,t,e)},unregister:function(t){(0,b.unregister)(b.Type.FIELD,t)},fromJson:function(t){var e=(0,b.getObject)(b.Type.FIELD,t.type);return e?e.fromJson(t):(console.warn("Blockly could not create a field of type "+t.type+". The field is probably not being registered. This could be because the file is not loaded, the field does not register itself (Issue #1584), or the registration is not being reached."),null)}},ys={IASTNodeLocation:function(){}},ms={IASTNodeLocationSvg:function(){}},Ts={IASTNodeLocationWithBlock:function(){}},fs={IKeyboardAccessible:function(){}},ks={IRegistrable:function(){}},be={MarkerManager:function(t){this.cursorSvg_=this.cursor_=null,this.markers_=Object.create(null),this.workspace_=t,this.markerSvg_=null}};be.MarkerManager.prototype.registerMarker=function(t,e){this.markers_[t]&&this.unregisterMarker(t),e.setDrawer(this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,e)),this.setMarkerSvg(e.getDrawer().createDom()),this.markers_[t]=e},be.MarkerManager.prototype.unregisterMarker=function(t){var e=this.markers_[t];if(e)e.dispose(),delete this.markers_[t];else throw Error("Marker with ID "+t+" does not exist. Can only unregister markers that exist.")},be.MarkerManager.prototype.getCursor=function(){return this.cursor_},be.MarkerManager.prototype.getMarker=function(t){return this.markers_[t]||null},be.MarkerManager.prototype.setCursor=function(t){this.cursor_&&this.cursor_.getDrawer()&&this.cursor_.getDrawer().dispose(),(this.cursor_=t)&&(t=this.workspace_.getRenderer().makeMarkerDrawer(this.workspace_,this.cursor_),this.cursor_.setDrawer(t),this.setCursorSvg(this.cursor_.getDrawer().createDom()))},be.MarkerManager.prototype.setCursorSvg=function(t){t?(this.workspace_.getBlockCanvas().appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},be.MarkerManager.prototype.setMarkerSvg=function(t){t?this.workspace_.getBlockCanvas()&&(this.cursorSvg_?this.workspace_.getBlockCanvas().insertBefore(t,this.cursorSvg_):this.workspace_.getBlockCanvas().appendChild(t)):this.markerSvg_=null},be.MarkerManager.prototype.updateMarkers=function(){this.workspace_.keyboardAccessibilityMode&&this.cursorSvg_&&this.workspace_.getCursor().draw()},be.MarkerManager.prototype.dispose=function(){for(var t=Object.keys(this.markers_),e=0,o;o=t[e];e++)this.unregisterMarker(o);this.markers_=null,this.cursor_&&(this.cursor_.dispose(),this.cursor_=null)},be.MarkerManager.LOCAL_MARKER="local_marker_1";var Es={Sentinel:function(){}},Xe={BlockChange:function(t,e,o,i,s){Yt.BlockBase.call(this,t),this.type=p.CHANGE,t&&(this.element=typeof e>"u"?"":e,this.name=typeof o>"u"?"":o,this.oldValue=typeof i>"u"?"":i,this.newValue=typeof s>"u"?"":s)}};n.$jscomp.inherits(Xe.BlockChange,Yt.BlockBase),Xe.BlockChange.prototype.toJson=function(){var t=Yt.BlockBase.prototype.toJson.call(this);return t.element=this.element,this.name&&(t.name=this.name),t.oldValue=this.oldValue,t.newValue=this.newValue,t},Xe.BlockChange.prototype.fromJson=function(t){Yt.BlockBase.prototype.fromJson.call(this,t),this.element=t.element,this.name=t.name,this.oldValue=t.oldValue,this.newValue=t.newValue},Xe.BlockChange.prototype.isNull=function(){return this.oldValue===this.newValue},Xe.BlockChange.prototype.run=function(t){var e=this.getEventWorkspace_().getBlockById(this.blockId);if(e)switch(e.mutator&&e.mutator.setVisible(!1),t=t?this.newValue:this.oldValue,this.element){case"field":(e=e.getField(this.name))?e.setValue(t):console.warn("Can't set non-existent field: "+this.name);break;case"comment":e.setCommentText(t||null);break;case"collapsed":e.setCollapsed(!!t);break;case"disabled":e.setEnabled(!t);break;case"inline":e.setInputsInline(!!t);break;case"mutation":var o=Xe.BlockChange.getExtraBlockState_(e);e.loadExtraState?e.loadExtraState(JSON.parse(t||"{}")):e.domToMutation&&e.domToMutation((0,n.module$exports$Blockly$Xml.textToDom)(t||"<mutation/>")),(0,p.fire)(new Xe.BlockChange(e,"mutation",null,o,t));break;default:console.warn("Unknown change type: "+this.element)}else console.warn("Can't change non-existent block: "+this.blockId)},Xe.BlockChange.getExtraBlockState_=function(t){return t.saveExtraState?(t=t.saveExtraState())?JSON.stringify(t):"":t.mutationToDom&&(t=t.mutationToDom())?(0,n.module$exports$Blockly$Xml.domToText)(t):""},(0,b.register)(b.Type.EVENT,p.CHANGE,Xe.BlockChange);var Je={},mi=0,Un=null;Je.disposeUiEffect=function(t){var e=t.workspace,o=t.getSvgRoot();e.getAudioManager().play("delete"),t=e.getSvgXY(o),o=o.cloneNode(!0),o.translateX_=t.x,o.translateY_=t.y,o.setAttribute("transform","translate("+t.x+","+t.y+")"),e.getParentSvg().appendChild(o),o.bBox_=o.getBBox(),ur(o,e.RTL,new Date,e.scale)};var ur=function(t,e,o,i){var s=(new Date-o)/150;1<s?(0,_.removeNode)(t):(t.setAttribute("transform","translate("+(t.translateX_+(e?-1:1)*t.bBox_.width*i/2*s)+","+(t.translateY_+t.bBox_.height*i*s)+") scale("+(1-s)*i+")"),setTimeout(ur,10,t,e,o,i))};Je.connectionUiEffect=function(t){var e=t.workspace,o=e.scale;if(e.getAudioManager().play("click"),!(1>o)){var i=e.getSvgXY(t.getSvgRoot());t.outputConnection?(i.x+=(t.RTL?3:-3)*o,i.y+=13*o):t.previousConnection&&(i.x+=(t.RTL?-23:23)*o,i.y+=3*o),t=(0,_.createSvgElement)(R.Svg.CIRCLE,{cx:i.x,cy:i.y,r:0,fill:"none",stroke:"#888","stroke-width":10},e.getParentSvg()),pr(t,new Date,o)}};var pr=function(t,e,o){var i=(new Date-e)/150;1<i?(0,_.removeNode)(t):(t.setAttribute("r",25*i*o),t.style.opacity=1-i,mi=setTimeout(pr,10,t,e,o))};Je.disconnectUiEffect=function(t){if(t.workspace.getAudioManager().play("disconnect"),!(1>t.workspace.scale)){var e=t.getHeightWidth().height;e=Math.atan(10/e)/Math.PI*180,t.RTL||(e*=-1),hr(t.getSvgRoot(),e,new Date)}};var hr=function(t,e,o){var i=(new Date-o)/200;1<i?t.skew_="":(t.skew_="skewX("+Math.round(Math.sin(i*Math.PI*3)*(1-i)*e)+")",Un=t,mi=setTimeout(hr,10,t,e,o)),t.setAttribute("transform",t.translate_+t.skew_)};Je.disconnectUiStop=function(){if(Un){clearTimeout(mi);var t=Un;t.skew_="",t.setAttribute("transform",t.translate_),Un=null}};var Zt={COLLAPSE_CHARS:30,DRAG_STACK:!0,OPPOSITE_TYPE:[]};Zt.OPPOSITE_TYPE[n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE]=n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE,Zt.OPPOSITE_TYPE[n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE]=n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,Zt.OPPOSITE_TYPE[n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT]=n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT,Zt.OPPOSITE_TYPE[n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT]=n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,Zt.RENAME_VARIABLE_ID="RENAME_VARIABLE_ID",Zt.DELETE_VARIABLE_ID="DELETE_VARIABLE_ID";var It={ComponentManager:function(){this.componentData_=Object.create(null),this.capabilityToComponentIds_=Object.create(null)}};It.ComponentManager.prototype.addComponent=function(t,e){var o=t.component.id;if(!e&&this.componentData_[o])throw Error('Plugin "'+o+'" with capabilities "'+this.componentData_[o].capabilities+'" already added.');this.componentData_[o]=t,e=[];for(var i=0;i<t.capabilities.length;i++){var s=String(t.capabilities[i]).toLowerCase();e.push(s),this.capabilityToComponentIds_[s]===void 0?this.capabilityToComponentIds_[s]=[o]:this.capabilityToComponentIds_[s].push(o)}this.componentData_[o].capabilities=e},It.ComponentManager.prototype.removeComponent=function(t){var e=this.componentData_[t];if(e){for(var o=0;o<e.capabilities.length;o++){var i=String(e.capabilities[o]).toLowerCase();(0,we.removeElem)(this.capabilityToComponentIds_[i],t)}delete this.componentData_[t]}},It.ComponentManager.prototype.addCapability=function(t,e){if(!this.getComponent(t))throw Error('Cannot add capability, "'+e+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,e)?console.warn('Plugin "'+t+'already has capability "'+e+'"'):(e=String(e).toLowerCase(),this.componentData_[t].capabilities.push(e),this.capabilityToComponentIds_[e].push(t))},It.ComponentManager.prototype.removeCapability=function(t,e){if(!this.getComponent(t))throw Error('Cannot remove capability, "'+e+'". Plugin "'+t+'" has not been added to the ComponentManager');this.hasCapability(t,e)?(e=String(e).toLowerCase(),(0,we.removeElem)(this.componentData_[t].capabilities,e),(0,we.removeElem)(this.capabilityToComponentIds_[e],t)):console.warn('Plugin "'+t+`doesn't have capability "`+e+'" to remove')},It.ComponentManager.prototype.hasCapability=function(t,e){return e=String(e).toLowerCase(),this.componentData_[t].capabilities.indexOf(e)!==-1},It.ComponentManager.prototype.getComponent=function(t){return this.componentData_[t]&&this.componentData_[t].component},It.ComponentManager.prototype.getComponents=function(t,e){if(t=String(t).toLowerCase(),t=this.capabilityToComponentIds_[t],!t)return[];var o=[];if(e){var i=[],s=this.componentData_;t.forEach(function(h){i.push(s[h])}),i.sort(function(h,S){return h.weight-S.weight}),i.forEach(function(h){o.push(h.component)})}else{var l=this.componentData_;t.forEach(function(h){o.push(l[h].component)})}return o},It.ComponentManager.Capability=function(t){this.name_=t},It.ComponentManager.Capability.prototype.toString=function(){return this.name_},It.ComponentManager.Capability.POSITIONABLE=new It.ComponentManager.Capability("positionable"),It.ComponentManager.Capability.DRAG_TARGET=new It.ComponentManager.Capability("drag_target"),It.ComponentManager.Capability.DELETE_AREA=new It.ComponentManager.Capability("delete_area"),It.ComponentManager.Capability.AUTOHIDEABLE=new It.ComponentManager.Capability("autohideable");var vs={IContextMenu:function(){}},Ss={IDeletable:function(){}},Bs={IDraggable:function(){}},Is={IBubble:function(){}},Kt={},dr=function(t,e){window.alert(t),e&&e()},_r=function(t,e){e(window.confirm(t))},gr=function(t,e,o){o(window.prompt(t,e))};Kt.alert=function(t,e){dr(t,e)},Kt.setAlert=function(t){dr=t},Kt.confirm=function(t,e){_r(t,e)},Kt.setConfirm=function(t){_r=t},Kt.prompt=function(t,e,o){gr(t,e,o)},Kt.setPrompt=function(t){gr=t};var he={VarBase:function(t){Ht.Abstract.call(this),this.varId=(this.isBlank=typeof t>"u")?"":t.getId(),this.workspaceId=this.isBlank?"":t.workspace.id}};n.$jscomp.inherits(he.VarBase,Ht.Abstract),he.VarBase.prototype.toJson=function(){var t=Ht.Abstract.prototype.toJson.call(this);return t.varId=this.varId,t},he.VarBase.prototype.fromJson=function(t){Ht.Abstract.prototype.fromJson.call(this,t),this.varId=t.varId};var Ko={VarCreate:function(t){he.VarBase.call(this,t),this.type=p.VAR_CREATE,t&&(this.varType=t.type,this.varName=t.name)}};n.$jscomp.inherits(Ko.VarCreate,he.VarBase),Ko.VarCreate.prototype.toJson=function(){var t=he.VarBase.prototype.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},Ko.VarCreate.prototype.fromJson=function(t){he.VarBase.prototype.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},Ko.VarCreate.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.createVariable(this.varName,this.varType,this.varId):e.deleteVariableById(this.varId)},(0,b.register)(b.Type.EVENT,p.VAR_CREATE,Ko.VarCreate);var Po={VariableModel:function(t,e,o,i){this.workspace=t,this.name=e,this.type=o||"",this.id_=i||(0,re.genUid)(),(0,p.fire)(new((0,p.get)(p.VAR_CREATE))(this))}};Po.VariableModel.prototype.getId=function(){return this.id_},Po.VariableModel.compareByName=function(t,e){return t.name.localeCompare(e.name,void 0,{sensitivity:"base"})};var Ti;n.module$exports$Blockly$Variables={CATEGORY_NAME:"VARIABLE",allUsedVarModels:function(t){var e=t.getAllBlocks(!1);t=Object.create(null);for(var o=0;o<e.length;o++){var i=e[o].getVarModels();if(i)for(var s=0;s<i.length;s++){var l=i[s],h=l.getId();h&&(t[h]=l)}}e=[];for(var S in t)e.push(t[S]);return e}},Ti={},n.module$exports$Blockly$Variables.allDeveloperVariables=function(t){t=t.getAllBlocks(!1);for(var e=Object.create(null),o=0,i;i=t[o];o++){var s=i.getDeveloperVariables;if(!s&&i.getDeveloperVars&&(s=i.getDeveloperVars,Ti[i.type]||(console.warn("Function getDeveloperVars() deprecated. Use getDeveloperVariables() (block type '"+i.type+"')"),Ti[i.type]=!0)),s)for(i=s(),s=0;s<i.length;s++)e[i[s]]=!0}return Object.keys(e)},n.module$exports$Blockly$Variables.flyoutCategory=function(t){var e=[],o=document.createElement("button");return o.setAttribute("text","%{BKY_NEW_VARIABLE}"),o.setAttribute("callbackKey","CREATE_VARIABLE"),t.registerButtonCallback("CREATE_VARIABLE",function(i){(0,n.module$exports$Blockly$Variables.createVariableButtonHandler)(i.getTargetWorkspace())}),e.push(o),t=(0,n.module$exports$Blockly$Variables.flyoutCategoryBlocks)(t),e=e.concat(t)},n.module$exports$Blockly$Variables.flyoutCategoryBlocks=function(t){t=t.getVariablesOfType("");var e=[];if(0<t.length){var o=t[t.length-1];if(Lt.Blocks.variables_set){var i=(0,n.module$exports$Blockly$utils$xml.createElement)("block");i.setAttribute("type","variables_set"),i.setAttribute("gap",Lt.Blocks.math_change?8:24),i.appendChild((0,n.module$exports$Blockly$Variables.generateVariableFieldDom)(o)),e.push(i)}if(Lt.Blocks.math_change&&(i=(0,n.module$exports$Blockly$utils$xml.createElement)("block"),i.setAttribute("type","math_change"),i.setAttribute("gap",Lt.Blocks.variables_get?20:8),i.appendChild((0,n.module$exports$Blockly$Variables.generateVariableFieldDom)(o)),o=(0,n.module$exports$Blockly$Xml.textToDom)('<value name="DELTA"><shadow type="math_number"><field name="NUM">1</field></shadow></value>'),i.appendChild(o),e.push(i)),Lt.Blocks.variables_get)for(t.sort(Po.VariableModel.compareByName),o=0;i=t[o];o++){var s=(0,n.module$exports$Blockly$utils$xml.createElement)("block");s.setAttribute("type","variables_get"),s.setAttribute("gap",8),s.appendChild((0,n.module$exports$Blockly$Variables.generateVariableFieldDom)(i)),e.push(s)}}return e},n.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS="ijkmnopqrstuvwxyzabcdefgh",n.module$exports$Blockly$Variables.generateUniqueName=function(t){return(0,n.module$exports$Blockly$Variables.generateUniqueNameFromOptions)(n.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS.charAt(0),t.getAllVariableNames())},n.module$exports$Blockly$Variables.generateUniqueNameFromOptions=function(t,e){if(!e.length)return t;for(var o=n.module$exports$Blockly$Variables.VAR_LETTER_OPTIONS,i="",s=o.indexOf(t);;){for(var l=!1,h=0;h<e.length;h++)if(e[h].toLowerCase()===t){l=!0;break}if(!l)return t;s++,s===o.length&&(s=0,i=Number(i)+1),t=o.charAt(s)+i}},n.module$exports$Blockly$Variables.createVariableButtonHandler=function(t,e,o){var i=o||"",s=function(l){(0,n.module$exports$Blockly$Variables.promptName)(n.module$exports$Blockly$Msg.Msg.NEW_VARIABLE_TITLE,l,function(h){if(h){var S=(0,n.module$exports$Blockly$Variables.nameUsedWithAnyType)(h,t);if(S){if(S.type===i)var C=n.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS.replace("%1",S.name);else C=n.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE,C=C.replace("%1",S.name).replace("%2",S.type);(0,Kt.alert)(C,function(){s(h)})}else t.createVariable(h,i),e&&e(h)}else e&&e(null)})};s("")},n.module$exports$Blockly$Variables.renameVariable=function(t,e,o){var i=function(s){var l=n.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE_TITLE.replace("%1",e.name);(0,n.module$exports$Blockly$Variables.promptName)(l,s,function(h){if(h){var S=Rs(h,e.type,t);S?(S=n.module$exports$Blockly$Msg.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE.replace("%1",S.name).replace("%2",S.type),(0,Kt.alert)(S,function(){i(h)})):(t.renameVariableById(e.getId(),h),o&&o(h))}else o&&o(null)})};i("")},n.module$exports$Blockly$Variables.promptName=function(t,e,o){(0,Kt.prompt)(t,e,function(i){i&&(i=i.replace(/[\s\xa0]+/g," ").trim(),i===n.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE||i===n.module$exports$Blockly$Msg.Msg.NEW_VARIABLE)&&(i=null),o(i)})};var Rs=function(t,e,o){o=o.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var i=0,s;s=o[i];i++)if(s.name.toLowerCase()===t&&s.type!==e)return s;return null};n.module$exports$Blockly$Variables.nameUsedWithAnyType=function(t,e){e=e.getVariableMap().getAllVariables(),t=t.toLowerCase();for(var o=0,i;i=e[o];o++)if(i.name.toLowerCase()===t)return i;return null},n.module$exports$Blockly$Variables.generateVariableFieldDom=function(t){var e=(0,n.module$exports$Blockly$utils$xml.createElement)("field");return e.setAttribute("name","VAR"),e.setAttribute("id",t.getId()),e.setAttribute("variabletype",t.type),t=(0,n.module$exports$Blockly$utils$xml.createTextNode)(t.name),e.appendChild(t),e},n.module$exports$Blockly$Variables.getOrCreateVariablePackage=function(t,e,o,i){var s=(0,n.module$exports$Blockly$Variables.getVariable)(t,e,o,i);return s||(s=Cs(t,e,o,i)),s},n.module$exports$Blockly$Variables.getVariable=function(t,e,o,i){var s=t.getPotentialVariableMap(),l=null;if(e&&(l=t.getVariableById(e),!l&&s&&(l=s.getVariableById(e)),l))return l;if(o){if(i===void 0)throw Error("Tried to look up a variable by name without a type");l=t.getVariable(o,i),!l&&s&&(l=s.getVariable(o,i))}return l};var Cs=function(t,e,o,i){var s=t.getPotentialVariableMap();return o||(o=n.module$exports$Blockly$Variables.generateUniqueName(t.isFlyout?t.targetWorkspace:t)),s?s.createVariable(o,i,e):t.createVariable(o,i,e)};n.module$exports$Blockly$Variables.getAddedVariables=function(t,e){t=t.getAllVariables();var o=[];if(e.length!==t.length)for(var i=0;i<t.length;i++){var s=t[i];e.indexOf(s)===-1&&o.push(s)}return o},n.module$exports$Blockly$Names={Names:function(t,e){if(this.variablePrefix_=e||"",this.reservedDict_=Object.create(null),this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null,t)for(t=t.split(","),e=0;e<t.length;e++)this.reservedDict_[t[e]]=!0;this.reset()}},n.module$exports$Blockly$Names.Names.prototype.reset=function(){this.db_=Object.create(null),this.dbReverse_=Object.create(null),this.variableMap_=null},n.module$exports$Blockly$Names.Names.prototype.setVariableMap=function(t){this.variableMap_=t},n.module$exports$Blockly$Names.Names.prototype.getNameForUserVariable_=function(t){return this.variableMap_?(t=this.variableMap_.getVariableById(t))?t.name:null:(console.warn(`Deprecated call to Names.prototype.getName without defining a variable map. To fix, add the following code in your generator's init() function:
Blockly.YourGeneratorName.nameDB_.setVariableMap(workspace.getVariableMap());`),null)},n.module$exports$Blockly$Names.Names.prototype.populateVariables=function(t){t=(0,n.module$exports$Blockly$Variables.allUsedVarModels)(t);for(var e=0;e<t.length;e++)this.getName(t[e].getId(),n.module$exports$Blockly$Names.NameType.VARIABLE)},n.module$exports$Blockly$Names.Names.prototype.populateProcedures=function(t){t=n.module$exports$Blockly$Procedures.allProcedures(t),t=t[0].concat(t[1]);for(var e=0;e<t.length;e++)this.getName(t[e][0],n.module$exports$Blockly$Names.NameType.PROCEDURE)},n.module$exports$Blockly$Names.Names.prototype.getName=function(t,e){var o=t;e===n.module$exports$Blockly$Names.NameType.VARIABLE&&(t=this.getNameForUserVariable_(t))&&(o=t),t=o.toLowerCase();var i=e===n.module$exports$Blockly$Names.NameType.VARIABLE||e===n.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE?this.variablePrefix_:"";e in this.db_||(this.db_[e]=Object.create(null));var s=this.db_[e];return t in s?i+s[t]:(e=this.getDistinctName(o,e),s[t]=e.substr(i.length),e)},n.module$exports$Blockly$Names.Names.prototype.getUserNames=function(t){return Object.keys(this.db_[t]||{})},n.module$exports$Blockly$Names.Names.prototype.getDistinctName=function(t,e){t=this.safeName_(t);for(var o="";this.dbReverse_[t+o]||t+o in this.reservedDict_;)o=o?o+1:2;return t+=o,this.dbReverse_[t]=!0,(e===n.module$exports$Blockly$Names.NameType.VARIABLE||e===n.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE?this.variablePrefix_:"")+t},n.module$exports$Blockly$Names.Names.prototype.safeName_=function(t){return t?(t=encodeURI(t.replace(/ /g,"_")).replace(/[^\w]/g,"_"),"0123456789".indexOf(t[0])!==-1&&(t="my_"+t)):t=n.module$exports$Blockly$Msg.Msg.UNNAMED_KEY||"unnamed",t},n.module$exports$Blockly$Names.Names.equals=function(t,e){return t.toLowerCase()===e.toLowerCase()},n.module$exports$Blockly$Names.NameType={DEVELOPER_VARIABLE:"DEVELOPER_VARIABLE",VARIABLE:"VARIABLE",PROCEDURE:"PROCEDURE"},n.module$exports$Blockly$Names.Names.NameType=n.module$exports$Blockly$Names.NameType,n.module$exports$Blockly$Names.Names.DEVELOPER_VARIABLE_TYPE=n.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE;var Jo={VarDelete:function(t){he.VarBase.call(this,t),this.type=p.VAR_DELETE,t&&(this.varType=t.type,this.varName=t.name)}};n.$jscomp.inherits(Jo.VarDelete,he.VarBase),Jo.VarDelete.prototype.toJson=function(){var t=he.VarBase.prototype.toJson.call(this);return t.varType=this.varType,t.varName=this.varName,t},Jo.VarDelete.prototype.fromJson=function(t){he.VarBase.prototype.fromJson.call(this,t),this.varType=t.varType,this.varName=t.varName},Jo.VarDelete.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.deleteVariableById(this.varId):e.createVariable(this.varName,this.varType,this.varId)},(0,b.register)(b.Type.EVENT,p.VAR_DELETE,Jo.VarDelete);var zo={VarRename:function(t,e){he.VarBase.call(this,t),this.type=p.VAR_RENAME,t&&(this.oldName=t.name,this.newName=typeof e>"u"?"":e)}};n.$jscomp.inherits(zo.VarRename,he.VarBase),zo.VarRename.prototype.toJson=function(){var t=he.VarBase.prototype.toJson.call(this);return t.oldName=this.oldName,t.newName=this.newName,t},zo.VarRename.prototype.fromJson=function(t){he.VarBase.prototype.fromJson.call(this,t),this.oldName=t.oldName,this.newName=t.newName},zo.VarRename.prototype.run=function(t){var e=this.getEventWorkspace_();t?e.renameVariableById(this.varId,this.newName):e.renameVariableById(this.varId,this.oldName)},(0,b.register)(b.Type.EVENT,p.VAR_RENAME,zo.VarRename);var Qt={VariableMap:function(t){this.variableMap_=Object.create(null),this.workspace=t}};Qt.VariableMap.prototype.clear=function(){this.variableMap_=Object.create(null)},Qt.VariableMap.prototype.renameVariable=function(t,e){var o=this.getVariable(e,t.type),i=this.workspace.getAllBlocks(!1);(0,p.setGroup)(!0);try{o&&o.getId()!==t.getId()?this.renameVariableWithConflict_(t,e,o,i):this.renameVariableAndUses_(t,e,i)}finally{(0,p.setGroup)(!1)}},Qt.VariableMap.prototype.renameVariableById=function(t,e){var o=this.getVariableById(t);if(!o)throw Error("Tried to rename a variable that didn't exist. ID: "+t);this.renameVariable(o,e)},Qt.VariableMap.prototype.renameVariableAndUses_=function(t,e,o){for((0,p.fire)(new((0,p.get)(p.VAR_RENAME))(t,e)),t.name=e,e=0;e<o.length;e++)o[e].updateVarName(t)},Qt.VariableMap.prototype.renameVariableWithConflict_=function(t,e,o,i){var s=t.type;for(e!==o.name&&this.renameVariableAndUses_(o,e,i),e=0;e<i.length;e++)i[e].renameVarById(t.getId(),o.getId());(0,p.fire)(new((0,p.get)(p.VAR_DELETE))(t)),(0,we.removeElem)(this.variableMap_[s],t)},Qt.VariableMap.prototype.createVariable=function(t,e,o){var i=this.getVariable(t,e);if(i){if(o&&i.getId()!==o)throw Error('Variable "'+t+'" is already in use and its id is "'+i.getId()+'" which conflicts with the passed in id, "'+o+'".');return i}if(o&&this.getVariableById(o))throw Error('Variable id, "'+o+'", is already in use.');return i=o||(0,re.genUid)(),e=e||"",i=new Po.VariableModel(this.workspace,t,e,i),t=this.variableMap_[e]||[],t.push(i),delete this.variableMap_[e],this.variableMap_[e]=t,i},Qt.VariableMap.prototype.deleteVariable=function(t){for(var e=t.getId(),o=this.variableMap_[t.type],i=0;i<o.length;i++)if(o[i].getId()===e){o.splice(i,1),(0,p.fire)(new((0,p.get)(p.VAR_DELETE))(t));break}},Qt.VariableMap.prototype.deleteVariableById=function(t){var e=this.getVariableById(t);if(e){var o=e.name,i=this.getVariableUsesById(t);t=0;for(var s=void 0;s=i[t];t++)if(s.type==="procedures_defnoreturn"||s.type==="procedures_defreturn"){t=String(s.getFieldValue("NAME")),o=n.module$exports$Blockly$Msg.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE.replace("%1",o).replace("%2",t),(0,Kt.alert)(o);return}var l=this;1<i.length?(o=n.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE_CONFIRMATION.replace("%1",String(i.length)).replace("%2",o),(0,Kt.confirm)(o,function(h){h&&e&&l.deleteVariableInternal(e,i)})):l.deleteVariableInternal(e,i)}else console.warn("Can't delete non-existent variable: "+t)},Qt.VariableMap.prototype.deleteVariableInternal=function(t,e){var o=(0,p.getGroup)();o||(0,p.setGroup)(!0);try{for(var i=0;i<e.length;i++)e[i].dispose(!0);this.deleteVariable(t)}finally{o||(0,p.setGroup)(!1)}},Qt.VariableMap.prototype.getVariable=function(t,e){if(e=this.variableMap_[e||""]){for(var o=0,i;i=e[o];o++)if(n.module$exports$Blockly$Names.Names.equals(i.name,t))return i}return null},Qt.VariableMap.prototype.getVariableById=function(t){for(var e=Object.keys(this.variableMap_),o=0;o<e.length;o++)for(var i=e[o],s=0,l;l=this.variableMap_[i][s];s++)if(l.getId()===t)return l;return null},Qt.VariableMap.prototype.getVariablesOfType=function(t){return(t=this.variableMap_[t||""])?t.slice():[]},Qt.VariableMap.prototype.getVariableTypes=function(t){var e={};(0,n.module$exports$Blockly$utils$object.mixin)(e,this.variableMap_),t&&t.getPotentialVariableMap()&&(0,n.module$exports$Blockly$utils$object.mixin)(e,t.getPotentialVariableMap().variableMap_),t=Object.keys(e),e=!1;for(var o=0;o<t.length;o++)t[o]===""&&(e=!0);return e||t.push(""),t},Qt.VariableMap.prototype.getAllVariables=function(){var t=[],e;for(e in this.variableMap_)t=t.concat(this.variableMap_[e]);return t},Qt.VariableMap.prototype.getAllVariableNames=function(){var t=[],e;for(e in this.variableMap_)for(var o=this.variableMap_[e],i=0,s;s=o[i];i++)t.push(s.name);return t},Qt.VariableMap.prototype.getVariableUsesById=function(t){for(var e=[],o=this.workspace.getAllBlocks(!1),i=0;i<o.length;i++){var s=o[i].getVarModels();if(s)for(var l=0;l<s.length;l++)s[l].getId()===t&&e.push(o[i])}return e};var mo={BlockMove:function(t){Yt.BlockBase.call(this,t),this.type=p.MOVE,t&&(t.isShadow()&&(this.recordUndo=!1),t=this.currentLocation_(),this.oldParentId=t.parentId,this.oldInputName=t.inputName,this.oldCoordinate=t.coordinate,this.newCoordinate=this.newInputName=this.newParentId=null)}};n.$jscomp.inherits(mo.BlockMove,Yt.BlockBase),mo.BlockMove.prototype.toJson=function(){var t=Yt.BlockBase.prototype.toJson.call(this);return this.newParentId&&(t.newParentId=this.newParentId),this.newInputName&&(t.newInputName=this.newInputName),this.newCoordinate&&(t.newCoordinate=Math.round(this.newCoordinate.x)+","+Math.round(this.newCoordinate.y)),this.recordUndo||(t.recordUndo=this.recordUndo),t},mo.BlockMove.prototype.fromJson=function(t){if(Yt.BlockBase.prototype.fromJson.call(this,t),this.newParentId=t.newParentId,this.newInputName=t.newInputName,t.newCoordinate){var e=t.newCoordinate.split(",");this.newCoordinate=new H.Coordinate(Number(e[0]),Number(e[1]))}t.recordUndo!==void 0&&(this.recordUndo=t.recordUndo)},mo.BlockMove.prototype.recordNew=function(){var t=this.currentLocation_();this.newParentId=t.parentId,this.newInputName=t.inputName,this.newCoordinate=t.coordinate},mo.BlockMove.prototype.currentLocation_=function(){var t=this.getEventWorkspace_().getBlockById(this.blockId),e={},o=t.getParent();return o?(e.parentId=o.id,(t=o.getInputWithBlock(t))&&(e.inputName=t.name)):e.coordinate=t.getRelativeToSurfaceXY(),e},mo.BlockMove.prototype.isNull=function(){return this.oldParentId===this.newParentId&&this.oldInputName===this.newInputName&&H.Coordinate.equals(this.oldCoordinate,this.newCoordinate)},mo.BlockMove.prototype.run=function(t){var e=this.getEventWorkspace_(),o=e.getBlockById(this.blockId);if(o){var i=t?this.newParentId:this.oldParentId,s=t?this.newInputName:this.oldInputName;if(t=t?this.newCoordinate:this.oldCoordinate,i){var l=e.getBlockById(i);if(!l){console.warn("Can't connect to non-existent block: "+i);return}}if(o.getParent()&&o.unplug(),t)s=o.getRelativeToSurfaceXY(),o.moveBy(t.x-s.x,t.y-s.y);else{if(e=o.outputConnection,(!e||o.previousConnection&&o.previousConnection.isConnected())&&(e=o.previousConnection),o=e.type,s){if(o=l.getInput(s))var h=o.connection}else o===n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&(h=l.nextConnection);h?e.connect(h):console.warn("Can't connect to non-existent input: "+s)}}else console.warn("Can't move non-existent block: "+this.blockId)},(0,b.register)(b.Type.EVENT,p.MOVE,mo.BlockMove);var To={COLLAPSED_INPUT_NAME:"_TEMP_COLLAPSED_INPUT",COLLAPSED_FIELD_NAME:"_TEMP_COLLAPSED_FIELD"},j={Connection:function(t,e){this.sourceBlock_=t,this.type=e,this.targetConnection=null,this.disposed=!1,this.shadowDom_=this.check_=null,this.y=this.x=0,this.shadowState_=null}};j.Connection.prototype.connect_=function(t){var e=n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,o=this.getSourceBlock(),i=t.getSourceBlock();if(t.isConnected()&&t.disconnect(),this.isConnected()){var s=this.stashShadowState_(),l=this.targetBlock();if(l.isShadow())l.dispose(!1);else{this.disconnect();var h=l}this.applyShadowState_(s)}var S;(0,p.isEnabled)()&&(S=new((0,p.get)(p.MOVE))(i)),$s(this,t),i.setParent(o),S&&(S.recordNew(),(0,p.fire)(S)),h&&(t=this.type===e?h.outputConnection:h.previousConnection,(i=j.Connection.getConnectionForOrphanedConnection(i,t))?t.connect(i):t.onFailedConnect(this))},j.Connection.prototype.dispose=function(){if(this.isConnected()){this.setShadowStateInternal_();var t=this.targetBlock();t&&t.unplug()}this.disposed=!0},j.Connection.prototype.getSourceBlock=function(){return this.sourceBlock_},j.Connection.prototype.isSuperior=function(){return this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT},j.Connection.prototype.isConnected=function(){return!!this.targetConnection},j.Connection.prototype.getConnectionChecker=function(){return this.sourceBlock_.workspace.connectionChecker},j.Connection.prototype.onFailedConnect=function(t){},j.Connection.prototype.connect=function(t){if(this.targetConnection===t)return!0;if(this.getConnectionChecker().canConnect(this,t,!1)){var e=(0,p.getGroup)();e||(0,p.setGroup)(!0),this.isSuperior()?this.connect_(t):t.connect_(this),e||(0,p.setGroup)(!1)}return this.isConnected()},j.Connection.prototype.disconnect=function(){var t=this.targetConnection;if(!t)throw Error("Source connection not connected.");if(t.targetConnection!==this)throw Error("Target connection not connected to source connection.");if(this.isSuperior()){var e=this.sourceBlock_,o=t.getSourceBlock();t=this}else e=t.getSourceBlock(),o=this.sourceBlock_;var i=(0,p.getGroup)();i||(0,p.setGroup)(!0),this.disconnectInternal_(e,o),o.isShadow()||t.respawnShadow_(),i||(0,p.setGroup)(!1)},j.Connection.prototype.disconnectInternal_=function(t,e){var o;(0,p.isEnabled)()&&(o=new((0,p.get)(p.MOVE))(e)),this.targetConnection=this.targetConnection.targetConnection=null,e.setParent(null),o&&(o.recordNew(),(0,p.fire)(o))},j.Connection.prototype.respawnShadow_=function(){this.createShadowBlock_(!0)},j.Connection.prototype.targetBlock=function(){return this.isConnected()?this.targetConnection.getSourceBlock():null},j.Connection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||(this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug()},j.Connection.prototype.setCheck=function(t){return t?(Array.isArray(t)||(t=[t]),this.check_=t,this.onCheckChanged_()):this.check_=null,this},j.Connection.prototype.getCheck=function(){return this.check_},j.Connection.prototype.setShadowDom=function(t){this.setShadowStateInternal_({shadowDom:t})},j.Connection.prototype.getShadowDom=function(t){return t&&this.targetBlock().isShadow()?(0,n.module$exports$Blockly$Xml.blockToDom)(this.targetBlock()):this.shadowDom_},j.Connection.prototype.setShadowState=function(t){this.setShadowStateInternal_({shadowState:t})},j.Connection.prototype.getShadowState=function(t){return t&&this.targetBlock()&&this.targetBlock().isShadow()?(0,zt.save)(this.targetBlock()):this.shadowState_},j.Connection.prototype.neighbours=function(t){return[]},j.Connection.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_.inputList,o=0;o<e.length;o++)if(e[o].connection===this){t=e[o];break}return t},j.Connection.prototype.toString=function(){var t=this.sourceBlock_;if(!t)return"Orphan Connection";if(t.outputConnection===this)var e="Output Connection of ";else if(t.previousConnection===this)e="Previous Connection of ";else if(t.nextConnection===this)e="Next Connection of ";else{e=null;for(var o=0,i;i=t.inputList[o];o++)if(i.connection===this){e=i;break}if(e)e='Input "'+e.name+'" connection on ';else return console.warn("Connection not actually connected to sourceBlock_"),"Orphan Connection"}return e+t.toDevString()},j.Connection.prototype.stashShadowState_=function(){var t=this.getShadowDom(!0),e=this.getShadowState(!0);return this.shadowState_=this.shadowDom_=null,{shadowDom:t,shadowState:e}},j.Connection.prototype.applyShadowState_=function(t){var e=t.shadowState;this.shadowDom_=t.shadowDom,this.shadowState_=e},j.Connection.prototype.setShadowStateInternal_=function(t){t=t===void 0?{}:t;var e=t.shadowState===void 0?null:t.shadowState;this.shadowDom_=t.shadowDom===void 0?null:t.shadowDom,this.shadowState_=e,(t=this.targetBlock())?t.isShadow()?(t.dispose(!1),this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock())):(t=this.createShadowBlock_(!1),this.serializeShadow_(t),t&&t.dispose(!1)):(this.respawnShadow_(),this.targetBlock()&&this.targetBlock().isShadow()&&this.serializeShadow_(this.targetBlock()))},j.Connection.prototype.createShadowBlock_=function(t){var e=this.getSourceBlock(),o=this.getShadowState(),i=this.getShadowDom();if(!e.workspace||!o&&!i)return null;if(o)return e=(0,zt.appendInternal)(o,e.workspace,{parentConnection:t?this:void 0,isShadow:!0,recordUndo:!1});if(i){if(e=(0,n.module$exports$Blockly$Xml.domToBlock)(i,e.workspace),t)if(this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE){if(!e.outputConnection)throw Error("Shadow block is missing an output connection");if(!this.connect(e.outputConnection))throw Error("Could not connect shadow block to connection")}else if(this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT){if(!e.previousConnection)throw Error("Shadow block is missing previous connection");if(!this.connect(e.previousConnection))throw Error("Could not connect shadow block to connection")}else throw Error("Cannot connect a shadow block to a previous/output connection");return e}return null},j.Connection.prototype.serializeShadow_=function(t){t&&(this.shadowDom_=(0,n.module$exports$Blockly$Xml.blockToDom)(t),this.shadowState_=(0,zt.save)(t))},j.Connection.getConnectionForOrphanedConnection=function(t,e){if(e.type===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE)return Os(t,e.getSourceBlock());t=t.lastConnectionInStack(!0);var o=e.getConnectionChecker();return t&&o.canConnect(e,t,!1)?t:null},j.Connection.CAN_CONNECT=0,j.Connection.REASON_SELF_CONNECTION=1,j.Connection.REASON_WRONG_TYPE=2,j.Connection.REASON_TARGET_NULL=3,j.Connection.REASON_CHECKS_FAILED=4,j.Connection.REASON_DIFFERENT_WORKSPACES=5,j.Connection.REASON_SHADOW_PARENT=6,j.Connection.REASON_DRAG_CHECKS_FAILED=7,j.Connection.REASON_PREVIOUS_AND_OUTPUT=8;var $s=function(t,e){if(!t||!e)throw Error("Cannot connect null connections.");t.targetConnection=e,e.targetConnection=t},bs=function(t,e){var o=null;e=e.outputConnection;for(var i=e.getConnectionChecker(),s=0,l;l=t.inputList[s];s++)if((l=l.connection)&&i.canConnect(e,l,!1)){if(o)return null;o=l}return o},Os=function(t,e){for(var o;o=bs(t,e);)if(t=o.targetBlock(),!t||t.isShadow())return o;return null},As={IConnectionChecker:function(){}},fo={ConnectionChecker:function(){}};fo.ConnectionChecker.prototype.canConnect=function(t,e,o,i){return this.canConnectWithReason(t,e,o,i)===j.Connection.CAN_CONNECT},fo.ConnectionChecker.prototype.canConnectWithReason=function(t,e,o,i){var s=this.doSafetyChecks(t,e);return s!==j.Connection.CAN_CONNECT?s:this.doTypeChecks(t,e)?o&&!this.doDragChecks(t,e,i||0)?j.Connection.REASON_DRAG_CHECKS_FAILED:j.Connection.CAN_CONNECT:j.Connection.REASON_CHECKS_FAILED},fo.ConnectionChecker.prototype.getErrorMessage=function(t,e,o){switch(t){case j.Connection.REASON_SELF_CONNECTION:return"Attempted to connect a block to itself.";case j.Connection.REASON_DIFFERENT_WORKSPACES:return"Blocks not on same workspace.";case j.Connection.REASON_WRONG_TYPE:return"Attempt to connect incompatible types.";case j.Connection.REASON_TARGET_NULL:return"Target connection is null.";case j.Connection.REASON_CHECKS_FAILED:return"Connection checks failed. "+(e+" expected "+e.getCheck()+", found "+o.getCheck());case j.Connection.REASON_SHADOW_PARENT:return"Connecting non-shadow to shadow block.";case j.Connection.REASON_DRAG_CHECKS_FAILED:return"Drag checks failed.";case j.Connection.REASON_PREVIOUS_AND_OUTPUT:return"Block would have an output and a previous connection.";default:return"Unknown connection failure: this should never happen!"}},fo.ConnectionChecker.prototype.doSafetyChecks=function(t,e){if(!t||!e)return j.Connection.REASON_TARGET_NULL;if(t.isSuperior())var o=t.getSourceBlock(),i=e.getSourceBlock(),s=e;else i=t.getSourceBlock(),o=e.getSourceBlock(),s=t,t=e;return o===i?j.Connection.REASON_SELF_CONNECTION:s.type!==Zt.OPPOSITE_TYPE[t.type]?j.Connection.REASON_WRONG_TYPE:o.workspace!==i.workspace?j.Connection.REASON_DIFFERENT_WORKSPACES:o.isShadow()&&!i.isShadow()?j.Connection.REASON_SHADOW_PARENT:s.type===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE&&i.previousConnection&&i.previousConnection.isConnected()||s.type===n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&i.outputConnection&&i.outputConnection.isConnected()?j.Connection.REASON_PREVIOUS_AND_OUTPUT:j.Connection.CAN_CONNECT},fo.ConnectionChecker.prototype.doTypeChecks=function(t,e){if(t=t.getCheck(),e=e.getCheck(),!t||!e)return!0;for(var o=0;o<t.length;o++)if(e.indexOf(t[o])!==-1)return!0;return!1},fo.ConnectionChecker.prototype.doDragChecks=function(t,e,o){if(t.distanceFrom(e)>o||e.getSourceBlock().isInsertionMarker())return!1;switch(e.type){case n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:return this.canConnectToPrevious_(t,e);case n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isInsertionMarker()||t.isConnected())return!1;break;case n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:if(e.isConnected()&&!e.targetBlock().isMovable()&&!e.targetBlock().isShadow())return!1;break;case n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:if(e.isConnected()&&!t.getSourceBlock().nextConnection&&!e.targetBlock().isShadow()&&e.targetBlock().nextConnection)return!1;break;default:return!1}return n.module$exports$Blockly$common.draggingConnections.indexOf(e)===-1},fo.ConnectionChecker.prototype.canConnectToPrevious_=function(t,e){return t.targetConnection||n.module$exports$Blockly$common.draggingConnections.indexOf(e)!==-1?!1:e.targetConnection?(t=e.targetBlock(),t.isInsertionMarker()?!t.getPreviousBlock():!1):!0},(0,b.register)(b.Type.CONNECTION_CHECKER,b.DEFAULT,fo.ConnectionChecker);var X={},fn=Object.create(null);X.Workspace=function(t){this.id=(0,re.genUid)(),fn[this.id]=this,this.options=t||new Ee.Options({}),this.RTL=!!this.options.RTL,this.horizontalLayout=!!this.options.horizontalLayout,this.toolboxPosition=this.options.toolboxPosition,this.isClearing=this.isMutator=this.isFlyout=this.rendered=!1,this.MAX_UNDO=1024,this.connectionDBList=null,this.connectionChecker=new((0,b.getClassFromOptions)(b.Type.CONNECTION_CHECKER,this.options,!0))(this),this.topBlocks_=[],this.topComments_=[],this.commentDB_=Object.create(null),this.listeners_=[],this.undoStack_=[],this.redoStack_=[],this.blockDB_=Object.create(null),this.typedBlocksDB_=Object.create(null),this.variableMap_=new Qt.VariableMap(this),this.potentialVariableMap_=null},X.Workspace.prototype.dispose=function(){this.listeners_.length=0,this.clear(),delete fn[this.id]},X.Workspace.prototype.sortObjects_=function(t,e){return t=t.getRelativeToSurfaceXY(),e=e.getRelativeToSurfaceXY(),t.y+X.Workspace.prototype.sortObjects_.offset*t.x-(e.y+X.Workspace.prototype.sortObjects_.offset*e.x)},X.Workspace.prototype.addTopBlock=function(t){this.topBlocks_.push(t)},X.Workspace.prototype.removeTopBlock=function(t){if(!(0,we.removeElem)(this.topBlocks_,t))throw Error("Block not present in workspace's list of top-most blocks.")},X.Workspace.prototype.getTopBlocks=function(t){var e=[].concat(this.topBlocks_);return t&&1<e.length&&(this.sortObjects_.offset=Math.sin((0,He.toRadians)(X.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e},X.Workspace.prototype.addTypedBlock=function(t){this.typedBlocksDB_[t.type]||(this.typedBlocksDB_[t.type]=[]),this.typedBlocksDB_[t.type].push(t)},X.Workspace.prototype.removeTypedBlock=function(t){(0,we.removeElem)(this.typedBlocksDB_[t.type],t),this.typedBlocksDB_[t.type].length||delete this.typedBlocksDB_[t.type]},X.Workspace.prototype.getBlocksByType=function(t,e){return this.typedBlocksDB_[t]?(t=this.typedBlocksDB_[t].slice(0),e&&1<t.length&&(this.sortObjects_.offset=Math.sin((0,He.toRadians)(X.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),t.sort(this.sortObjects_)),t.filter(function(o){return!o.isInsertionMarker()})):[]},X.Workspace.prototype.addTopComment=function(t){this.topComments_.push(t),this.commentDB_[t.id]&&console.warn('Overriding an existing comment on this workspace, with id "'+t.id+'"'),this.commentDB_[t.id]=t},X.Workspace.prototype.removeTopComment=function(t){if(!(0,we.removeElem)(this.topComments_,t))throw Error("Comment not present in workspace's list of top-most comments.");delete this.commentDB_[t.id]},X.Workspace.prototype.getTopComments=function(t){var e=[].concat(this.topComments_);return t&&1<e.length&&(this.sortObjects_.offset=Math.sin((0,He.toRadians)(X.Workspace.SCAN_ANGLE)),this.RTL&&(this.sortObjects_.offset*=-1),e.sort(this.sortObjects_)),e},X.Workspace.prototype.getAllBlocks=function(t){if(t){var e=this.getTopBlocks(!0);t=[];for(var o=0;o<e.length;o++)t.push.apply(t,e[o].getDescendants(!0))}else for(t=this.getTopBlocks(!1),e=0;e<t.length;e++)t.push.apply(t,t[e].getChildren(!1));return t.filter(function(i){return!i.isInsertionMarker()})},X.Workspace.prototype.clear=function(){this.isClearing=!0;try{var t=(0,p.getGroup)();for(t||(0,p.setGroup)(!0);this.topBlocks_.length;)this.topBlocks_[0].dispose(!1);for(;this.topComments_.length;)this.topComments_[this.topComments_.length-1].dispose();t||(0,p.setGroup)(!1),this.variableMap_.clear(),this.potentialVariableMap_&&this.potentialVariableMap_.clear()}finally{this.isClearing=!1}},X.Workspace.prototype.renameVariableById=function(t,e){this.variableMap_.renameVariableById(t,e)},X.Workspace.prototype.createVariable=function(t,e,o){return this.variableMap_.createVariable(t,e,o)},X.Workspace.prototype.getVariableUsesById=function(t){return this.variableMap_.getVariableUsesById(t)},X.Workspace.prototype.deleteVariableById=function(t){this.variableMap_.deleteVariableById(t)},X.Workspace.prototype.getVariable=function(t,e){return this.variableMap_.getVariable(t,e)},X.Workspace.prototype.getVariableById=function(t){return this.variableMap_.getVariableById(t)},X.Workspace.prototype.getVariablesOfType=function(t){return this.variableMap_.getVariablesOfType(t)},X.Workspace.prototype.getVariableTypes=function(){return this.variableMap_.getVariableTypes(this)},X.Workspace.prototype.getAllVariables=function(){return this.variableMap_.getAllVariables()},X.Workspace.prototype.getAllVariableNames=function(){return this.variableMap_.getAllVariableNames()},X.Workspace.prototype.getWidth=function(){return 0},X.Workspace.prototype.newBlock=function(t,e){return new D.Block(this,t,e)},X.Workspace.prototype.remainingCapacity=function(){return isNaN(this.options.maxBlocks)?1/0:this.options.maxBlocks-this.getAllBlocks(!1).length},X.Workspace.prototype.remainingCapacityOfType=function(t){return this.options.maxInstances?(this.options.maxInstances[t]!==void 0?this.options.maxInstances[t]:1/0)-this.getBlocksByType(t,!1).length:1/0},X.Workspace.prototype.isCapacityAvailable=function(t){if(!this.hasBlockLimits())return!0;var e=0,o;for(o in t){if(t[o]>this.remainingCapacityOfType(o))return!1;e+=t[o]}return!(e>this.remainingCapacity())},X.Workspace.prototype.hasBlockLimits=function(){return this.options.maxBlocks!==1/0||!!this.options.maxInstances},X.Workspace.prototype.getUndoStack=function(){return this.undoStack_},X.Workspace.prototype.getRedoStack=function(){return this.redoStack_},X.Workspace.prototype.undo=function(t){var e=t?this.redoStack_:this.undoStack_,o=t?this.undoStack_:this.redoStack_,i=e.pop();if(i){for(var s=[i];e.length&&i.group&&i.group===e[e.length-1].group;)s.push(e.pop());for(e=0;e<s.length;e++)o.push(s[e]);s=(0,p.filter)(s,t),(0,p.setRecordUndo)(!1);try{for(o=0;o<s.length;o++)s[o].run(t)}finally{(0,p.setRecordUndo)(!0)}}},X.Workspace.prototype.clearUndo=function(){this.undoStack_.length=0,this.redoStack_.length=0,(0,p.clearPendingUndo)()},X.Workspace.prototype.addChangeListener=function(t){return this.listeners_.push(t),t},X.Workspace.prototype.removeChangeListener=function(t){(0,we.removeElem)(this.listeners_,t)},X.Workspace.prototype.fireChangeListener=function(t){if(t.recordUndo)for(this.undoStack_.push(t),this.redoStack_.length=0;this.undoStack_.length>this.MAX_UNDO&&0<=this.MAX_UNDO;)this.undoStack_.shift();for(var e=0;e<this.listeners_.length;e++)(0,this.listeners_[e])(t)},X.Workspace.prototype.getBlockById=function(t){return this.blockDB_[t]||null},X.Workspace.prototype.setBlockById=function(t,e){this.blockDB_[t]=e},X.Workspace.prototype.removeBlockById=function(t){delete this.blockDB_[t]},X.Workspace.prototype.getCommentById=function(t){return this.commentDB_[t]||null},X.Workspace.prototype.allInputsFilled=function(t){for(var e=this.getTopBlocks(!1),o=0;o<e.length;o++)if(!e[o].allInputsFilled(t))return!1;return!0},X.Workspace.prototype.getPotentialVariableMap=function(){return this.potentialVariableMap_},X.Workspace.prototype.createPotentialVariableMap=function(){this.potentialVariableMap_=new Qt.VariableMap(this)},X.Workspace.prototype.getVariableMap=function(){return this.variableMap_},X.Workspace.prototype.setVariableMap=function(t){this.variableMap_=t},X.Workspace.getById=function(t){return fn[t]||null},X.Workspace.getAll=function(){var t=[],e;for(e in fn)t.push(fn[e]);return t},X.Workspace.SCAN_ANGLE=3;var W={Bubble:function(t,e,o,i,s,l){this.workspace_=t,this.content_=e,this.shape_=o,this.rendered_=!1,this.anchorXY_=this.resizeGroup_=this.bubbleBack_=this.bubbleArrow_=this.bubbleGroup_=null,this.height_=this.width_=this.relativeTop_=this.relativeLeft_=0,this.autoLayout_=!0,this.onMouseDownResizeWrapper_=this.onMouseDownBubbleWrapper_=this.moveCallback_=this.resizeCallback_=null,this.disposed=!1,o=W.Bubble.ARROW_ANGLE,this.workspace_.RTL&&(o=-o),this.arrow_radians_=(0,He.toRadians)(o),t.getBubbleCanvas().appendChild(this.createDom_(e,!(!s||!l))),this.setAnchorLocation(i),s&&l||(t=this.content_.getBBox(),s=t.width+2*W.Bubble.BORDER_WIDTH,l=t.height+2*W.Bubble.BORDER_WIDTH),this.setBubbleSize(s,l),this.positionBubble_(),this.renderArrow_(),this.rendered_=!0}};W.Bubble.prototype.createDom_=function(t,e){this.bubbleGroup_=(0,_.createSvgElement)(R.Svg.G,{},null);var o={filter:"url(#"+this.workspace_.getRenderer().getConstants().embossFilterId+")"};return G.JAVA_FX&&(o={}),o=(0,_.createSvgElement)(R.Svg.G,o,this.bubbleGroup_),this.bubbleArrow_=(0,_.createSvgElement)(R.Svg.PATH,{},o),this.bubbleBack_=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyDraggable",x:0,y:0,rx:W.Bubble.BORDER_WIDTH,ry:W.Bubble.BORDER_WIDTH},o),e?(this.resizeGroup_=(0,_.createSvgElement)(R.Svg.G,{class:this.workspace_.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.bubbleGroup_),e=2*W.Bubble.BORDER_WIDTH,(0,_.createSvgElement)(R.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,e.toString())},this.resizeGroup_),(0,_.createSvgElement)(R.Svg.LINE,{class:"blocklyResizeLine",x1:e/3,y1:e-1,x2:e-1,y2:e/3},this.resizeGroup_),(0,_.createSvgElement)(R.Svg.LINE,{class:"blocklyResizeLine",x1:2*e/3,y1:e-1,x2:e-1,y2:2*e/3},this.resizeGroup_)):this.resizeGroup_=null,this.workspace_.options.readOnly||(this.onMouseDownBubbleWrapper_=(0,$.conditionalBind)(this.bubbleBack_,"mousedown",this,this.bubbleMouseDown_),this.resizeGroup_&&(this.onMouseDownResizeWrapper_=(0,$.conditionalBind)(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_))),this.bubbleGroup_.appendChild(t),this.bubbleGroup_},W.Bubble.prototype.getSvgRoot=function(){return this.bubbleGroup_},W.Bubble.prototype.setSvgId=function(t){this.bubbleGroup_.dataset&&(this.bubbleGroup_.dataset.blockId=t)},W.Bubble.prototype.bubbleMouseDown_=function(t){var e=this.workspace_.getGesture(t);e&&e.handleBubbleStart(t,this)},W.Bubble.prototype.showContextMenu=function(t){},W.Bubble.prototype.isDeletable=function(){return!1},W.Bubble.prototype.setDeleteStyle=function(t){},W.Bubble.prototype.resizeMouseDown_=function(t){this.promote(),W.Bubble.unbindDragEvents_(),(0,$.isRightButton)(t)||(this.workspace_.startDrag(t,new H.Coordinate(this.workspace_.RTL?-this.width_:this.width_,this.height_)),W.Bubble.onMouseUpWrapper_=(0,$.conditionalBind)(document,"mouseup",this,W.Bubble.bubbleMouseUp_),W.Bubble.onMouseMoveWrapper_=(0,$.conditionalBind)(document,"mousemove",this,this.resizeMouseMove_),this.workspace_.hideChaff()),t.stopPropagation()},W.Bubble.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace_.moveDrag(t),this.setBubbleSize(this.workspace_.RTL?-t.x:t.x,t.y),this.workspace_.RTL&&this.positionBubble_()},W.Bubble.prototype.registerResizeEvent=function(t){this.resizeCallback_=t},W.Bubble.prototype.registerMoveEvent=function(t){this.moveCallback_=t},W.Bubble.prototype.promote=function(){var t=this.bubbleGroup_.parentNode;return t.lastChild!==this.bubbleGroup_?(t.appendChild(this.bubbleGroup_),!0):!1},W.Bubble.prototype.setAnchorLocation=function(t){this.anchorXY_=t,this.rendered_&&this.positionBubble_()},W.Bubble.prototype.layoutBubble_=function(){var t=this.workspace_.getMetricsManager().getViewMetrics(!0),e=this.getOptimalRelativeLeft_(t),o=this.getOptimalRelativeTop_(t),i=this.shape_.getBBox(),s={x:e,y:-this.height_-this.workspace_.getRenderer().getConstants().MIN_BLOCK_HEIGHT},l={x:-this.width_-30,y:o};o={x:i.width,y:o};var h={x:e,y:i.height};e=i.width<i.height?o:h,i=i.width<i.height?h:o,o=this.getOverlap_(s,t),h=this.getOverlap_(l,t);var S=this.getOverlap_(e,t);t=this.getOverlap_(i,t),t=Math.max(o,h,S,t),o===t?(this.relativeLeft_=s.x,this.relativeTop_=s.y):h===t?(this.relativeLeft_=l.x,this.relativeTop_=l.y):S===t?(this.relativeLeft_=e.x,this.relativeTop_=e.y):(this.relativeLeft_=i.x,this.relativeTop_=i.y)},W.Bubble.prototype.getOverlap_=function(t,e){var o=this.workspace_.RTL?this.anchorXY_.x-t.x-this.width_:t.x+this.anchorXY_.x;return t=t.y+this.anchorXY_.y,Math.max(0,Math.min(1,(Math.min(o+this.width_,e.left+e.width)-Math.max(o,e.left))*(Math.min(t+this.height_,e.top+e.height)-Math.max(t,e.top))/(this.width_*this.height_)))},W.Bubble.prototype.getOptimalRelativeLeft_=function(t){var e=-this.width_/4;if(this.width_>t.width)return e;if(this.workspace_.RTL){var o=this.anchorXY_.x-e,i=t.left+t.width;t=t.left+Z.Scrollbar.scrollbarThickness/this.workspace_.scale,o-this.width_<t?e=-(t-this.anchorXY_.x+this.width_):o>i&&(e=-(i-this.anchorXY_.x))}else{o=e+this.anchorXY_.x,i=o+this.width_;var s=t.left;t=t.left+t.width-Z.Scrollbar.scrollbarThickness/this.workspace_.scale,o<s?e=s-this.anchorXY_.x:i>t&&(e=t-this.anchorXY_.x-this.width_)}return e},W.Bubble.prototype.getOptimalRelativeTop_=function(t){var e=-this.height_/4;if(this.height_>t.height)return e;var o=this.anchorXY_.y+e,i=o+this.height_,s=t.top;t=t.top+t.height-Z.Scrollbar.scrollbarThickness/this.workspace_.scale;var l=this.anchorXY_.y;return o<s?e=s-l:i>t&&(e=t-l-this.height_),e},W.Bubble.prototype.positionBubble_=function(){var t=this.anchorXY_.x;t=this.workspace_.RTL?t-(this.relativeLeft_+this.width_):t+this.relativeLeft_,this.moveTo(t,this.relativeTop_+this.anchorXY_.y)},W.Bubble.prototype.moveTo=function(t,e){this.bubbleGroup_.setAttribute("transform","translate("+t+","+e+")")},W.Bubble.prototype.setDragging=function(t){!t&&this.moveCallback_&&this.moveCallback_()},W.Bubble.prototype.getBubbleSize=function(){return new jt.Size(this.width_,this.height_)},W.Bubble.prototype.setBubbleSize=function(t,e){var o=2*W.Bubble.BORDER_WIDTH;t=Math.max(t,o+45),e=Math.max(e,o+20),this.width_=t,this.height_=e,this.bubbleBack_.setAttribute("width",t),this.bubbleBack_.setAttribute("height",e),this.resizeGroup_&&(this.workspace_.RTL?this.resizeGroup_.setAttribute("transform","translate("+2*W.Bubble.BORDER_WIDTH+","+(e-o)+") scale(-1 1)"):this.resizeGroup_.setAttribute("transform","translate("+(t-o)+","+(e-o)+")")),this.autoLayout_&&this.layoutBubble_(),this.positionBubble_(),this.renderArrow_(),this.resizeCallback_&&this.resizeCallback_()},W.Bubble.prototype.renderArrow_=function(){var t=[],e=this.width_/2,o=this.height_/2,i=-this.relativeLeft_,s=-this.relativeTop_;if(e===i&&o===s)t.push("M "+e+","+o);else{s-=o,i-=e,this.workspace_.RTL&&(i*=-1);var l=Math.sqrt(s*s+i*i),h=Math.acos(i/l);0>s&&(h=2*Math.PI-h);var S=h+Math.PI/2;S>2*Math.PI&&(S-=2*Math.PI);var C=Math.sin(S),x=Math.cos(S),F=this.getBubbleSize();S=(F.width+F.height)/W.Bubble.ARROW_THICKNESS,S=Math.min(S,F.width,F.height)/4,F=1-W.Bubble.ANCHOR_RADIUS/l,i=e+F*i,s=o+F*s,F=e+S*x;var it=o+S*C;e-=S*x,o-=S*C,C=h+this.arrow_radians_,C>2*Math.PI&&(C-=2*Math.PI),h=Math.sin(C)*l/W.Bubble.ARROW_BEND,l=Math.cos(C)*l/W.Bubble.ARROW_BEND,t.push("M"+F+","+it),t.push("C"+(F+l)+","+(it+h)+" "+i+","+s+" "+i+","+s),t.push("C"+i+","+s+" "+(e+l)+","+(o+h)+" "+e+","+o)}t.push("z"),this.bubbleArrow_.setAttribute("d",t.join(" "))},W.Bubble.prototype.setColour=function(t){this.bubbleBack_.setAttribute("fill",t),this.bubbleArrow_.setAttribute("fill",t)},W.Bubble.prototype.dispose=function(){this.onMouseDownBubbleWrapper_&&(0,$.unbind)(this.onMouseDownBubbleWrapper_),this.onMouseDownResizeWrapper_&&(0,$.unbind)(this.onMouseDownResizeWrapper_),W.Bubble.unbindDragEvents_(),(0,_.removeNode)(this.bubbleGroup_),this.disposed=!0},W.Bubble.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):this.moveTo(e.x,e.y),this.relativeLeft_=this.workspace_.RTL?this.anchorXY_.x-e.x-this.width_:e.x-this.anchorXY_.x,this.relativeTop_=e.y-this.anchorXY_.y,this.renderArrow_()},W.Bubble.prototype.getRelativeToSurfaceXY=function(){return new H.Coordinate(this.workspace_.RTL?-this.relativeLeft_+this.anchorXY_.x-this.width_:this.anchorXY_.x+this.relativeLeft_,this.anchorXY_.y+this.relativeTop_)},W.Bubble.prototype.setAutoLayout=function(t){this.autoLayout_=t},W.Bubble.unbindDragEvents_=function(){W.Bubble.onMouseUpWrapper_&&((0,$.unbind)(W.Bubble.onMouseUpWrapper_),W.Bubble.onMouseUpWrapper_=null),W.Bubble.onMouseMoveWrapper_&&((0,$.unbind)(W.Bubble.onMouseMoveWrapper_),W.Bubble.onMouseMoveWrapper_=null)},W.Bubble.bubbleMouseUp_=function(t){(0,g.clearTouchIdentifier)(),W.Bubble.unbindDragEvents_()},W.Bubble.textToDom=function(t){var e=(0,_.createSvgElement)(R.Svg.TEXT,{class:"blocklyText blocklyBubbleText blocklyNoPointerEvents",y:W.Bubble.BORDER_WIDTH},null);t=t.split(`
`);for(var o=0;o<t.length;o++){var i=(0,_.createSvgElement)(R.Svg.TSPAN,{dy:"1em",x:W.Bubble.BORDER_WIDTH},e),s=document.createTextNode(t[o]);i.appendChild(s)}return e},W.Bubble.createNonEditableBubble=function(t,e,o){if(o=new W.Bubble(e.workspace,t,e.pathObject.svgPath,o,null,null),o.setSvgId(e.id),e.RTL){e=t.getBBox().width;for(var i=0,s;s=t.childNodes[i];i++)s.setAttribute("text-anchor","end"),s.setAttribute("x",e+W.Bubble.BORDER_WIDTH)}return o},W.Bubble.BORDER_WIDTH=6,W.Bubble.ARROW_THICKNESS=5,W.Bubble.ARROW_ANGLE=20,W.Bubble.ARROW_BEND=4,W.Bubble.ANCHOR_RADIUS=8,W.Bubble.onMouseUpWrapper_=null,W.Bubble.onMouseMoveWrapper_=null;var Gt={CommentBase:function(t){Ht.Abstract.call(this),this.commentId=(this.isBlank=typeof t>"u")?"":t.id,this.workspaceId=this.isBlank?"":t.workspace.id,this.group=(0,p.getGroup)(),this.recordUndo=(0,p.getRecordUndo)()}};n.$jscomp.inherits(Gt.CommentBase,Ht.Abstract),Gt.CommentBase.prototype.toJson=function(){var t=Ht.Abstract.prototype.toJson.call(this);return this.commentId&&(t.commentId=this.commentId),t},Gt.CommentBase.prototype.fromJson=function(t){Ht.Abstract.prototype.fromJson.call(this,t),this.commentId=t.commentId},Gt.CommentBase.CommentCreateDeleteHelper=function(t,e){var o=t.getEventWorkspace_();e?(e=(0,n.module$exports$Blockly$utils$xml.createElement)("xml"),e.appendChild(t.xml),(0,n.module$exports$Blockly$Xml.domToWorkspace)(e,o)):(o=o.getCommentById(t.commentId))?o.dispose():console.warn("Can't uncreate non-existent comment: "+t.commentId)};var ko={CommentMove:function(t){Gt.CommentBase.call(this,t),this.type=p.COMMENT_MOVE,t&&(this.comment_=t,this.oldCoordinate_=t.getXY(),this.newCoordinate_=null)}};n.$jscomp.inherits(ko.CommentMove,Gt.CommentBase),ko.CommentMove.prototype.recordNew=function(){if(!this.comment_)throw Error("Tried to record the new position of a comment on the same event twice.");this.newCoordinate_=this.comment_.getXY(),this.comment_=null},ko.CommentMove.prototype.setOldCoordinate=function(t){this.oldCoordinate_=t},ko.CommentMove.prototype.toJson=function(){var t=Gt.CommentBase.prototype.toJson.call(this);return this.oldCoordinate_&&(t.oldCoordinate=Math.round(this.oldCoordinate_.x)+","+Math.round(this.oldCoordinate_.y)),this.newCoordinate_&&(t.newCoordinate=Math.round(this.newCoordinate_.x)+","+Math.round(this.newCoordinate_.y)),t},ko.CommentMove.prototype.fromJson=function(t){if(Gt.CommentBase.prototype.fromJson.call(this,t),t.oldCoordinate){var e=t.oldCoordinate.split(",");this.oldCoordinate_=new H.Coordinate(Number(e[0]),Number(e[1]))}t.newCoordinate&&(t=t.newCoordinate.split(","),this.newCoordinate_=new H.Coordinate(Number(t[0]),Number(t[1])))},ko.CommentMove.prototype.isNull=function(){return H.Coordinate.equals(this.oldCoordinate_,this.newCoordinate_)},ko.CommentMove.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);if(e){t=t?this.newCoordinate_:this.oldCoordinate_;var o=e.getXY();e.moveBy(t.x-o.x,t.y-o.y)}else console.warn("Can't move non-existent comment: "+this.commentId)},(0,b.register)(b.Type.EVENT,p.COMMENT_MOVE,ko.CommentMove);var ze={BubbleDragger:function(t,e){this.draggingBubble_=t,this.workspace_=e,this.dragTarget_=null,this.wouldDeleteBubble_=!1,this.startXY_=this.draggingBubble_.getRelativeToSurfaceXY(),this.dragSurface_=(0,yt.is3dSupported)()&&e.getBlockDragSurface()?e.getBlockDragSurface():null}};ze.BubbleDragger.prototype.dispose=function(){this.dragSurface_=this.workspace_=this.draggingBubble_=null},ze.BubbleDragger.prototype.startBubbleDrag=function(){(0,p.getGroup)()||(0,p.setGroup)(!0),this.workspace_.setResizesEnabled(!1),this.draggingBubble_.setAutoLayout(!1),this.dragSurface_&&this.moveToDragSurface_(),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!0)},ze.BubbleDragger.prototype.dragBubble=function(t,e){e=this.pixelsToWorkspaceUnits_(e),e=H.Coordinate.sum(this.startXY_,e),this.draggingBubble_.moveDuringDrag(this.dragSurface_,e),e=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),t=this.wouldDeleteBubble_,this.wouldDeleteBubble_=this.shouldDelete_(this.dragTarget_),t!==this.wouldDeleteBubble_&&this.updateCursorDuringBubbleDrag_(),this.dragTarget_!==e&&(e&&e.onDragExit(this.draggingBubble_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBubble_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBubble_)},ze.BubbleDragger.prototype.shouldDelete_=function(t){return t&&this.workspace_.getComponentManager().hasCapability(t.id,It.ComponentManager.Capability.DELETE_AREA)?t.wouldDelete(this.draggingBubble_,!1):!1},ze.BubbleDragger.prototype.updateCursorDuringBubbleDrag_=function(){this.draggingBubble_.setDeleteStyle(this.wouldDeleteBubble_)},ze.BubbleDragger.prototype.endBubbleDrag=function(t,e){this.dragBubble(t,e),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBubble_)?t=this.startXY_:(t=this.pixelsToWorkspaceUnits_(e),t=H.Coordinate.sum(this.startXY_,t)),this.draggingBubble_.moveTo(t.x,t.y),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBubble_),this.wouldDeleteBubble_?(this.fireMoveEvent_(),this.draggingBubble_.dispose(!1,!0)):(this.dragSurface_&&this.dragSurface_.clearAndHide(this.workspace_.getBubbleCanvas()),this.draggingBubble_.setDragging&&this.draggingBubble_.setDragging(!1),this.fireMoveEvent_()),this.workspace_.setResizesEnabled(!0),(0,p.setGroup)(!1)},ze.BubbleDragger.prototype.fireMoveEvent_=function(){if(this.draggingBubble_.isComment){var t=new((0,p.get)(p.COMMENT_MOVE))(this.draggingBubble_);t.setOldCoordinate(this.startXY_),t.recordNew(),(0,p.fire)(t)}},ze.BubbleDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new H.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},ze.BubbleDragger.prototype.moveToDragSurface_=function(){this.draggingBubble_.moveTo(0,0),this.dragSurface_.translateSurface(this.startXY_.x,this.startXY_.y),this.dragSurface_.setBlocksAndShow(this.draggingBubble_.getSvgRoot())};var qo={WorkspaceDragger:function(t){this.workspace_=t,this.horizontalScrollEnabled_=this.workspace_.isMovableHorizontally(),this.verticalScrollEnabled_=this.workspace_.isMovableVertically(),this.startScrollXY_=new H.Coordinate(t.scrollX,t.scrollY)}};qo.WorkspaceDragger.prototype.dispose=function(){this.workspace_=null},qo.WorkspaceDragger.prototype.startDrag=function(){(0,n.module$exports$Blockly$common.getSelected)()&&(0,n.module$exports$Blockly$common.getSelected)().unselect(),this.workspace_.setupDragSurface()},qo.WorkspaceDragger.prototype.endDrag=function(t){this.drag(t),this.workspace_.resetDragSurface()},qo.WorkspaceDragger.prototype.drag=function(t){if(t=H.Coordinate.sum(this.startScrollXY_,t),this.horizontalScrollEnabled_&&this.verticalScrollEnabled_)this.workspace_.scroll(t.x,t.y);else if(this.horizontalScrollEnabled_)this.workspace_.scroll(t.x,this.workspace_.scrollY);else if(this.verticalScrollEnabled_)this.workspace_.scroll(this.workspace_.scrollX,t.y);else throw new TypeError("Invalid state.")};var xs={IBlockDragger:function(){}},vt={},yr="The insertion marker manager tried to create a marker but the result is missing %1. If you are using a mutator, make sure your domToMutation method is properly defined.";vt.InsertionMarkerManager=function(t){(0,n.module$exports$Blockly$common.setSelected)(t),this.topBlock_=t,this.workspace_=t.workspace,this.lastMarker_=this.lastOnStack_=null,this.firstMarker_=this.createMarkerBlock_(this.topBlock_),this.localConnection_=this.closestConnection_=null,this.wouldDeleteBlock_=!1,this.fadedBlock_=this.highlightedBlock_=this.markerConnection_=null,this.availableConnections_=this.initAvailableConnections_()},vt.InsertionMarkerManager.prototype.dispose=function(){this.availableConnections_.length=0,(0,p.disable)();try{this.firstMarker_&&this.firstMarker_.dispose(),this.lastMarker_&&this.lastMarker_.dispose()}finally{(0,p.enable)()}},vt.InsertionMarkerManager.prototype.updateAvailableConnections=function(){this.availableConnections_=this.initAvailableConnections_()},vt.InsertionMarkerManager.prototype.wouldDeleteBlock=function(){return this.wouldDeleteBlock_},vt.InsertionMarkerManager.prototype.wouldConnectBlock=function(){return!!this.closestConnection_},vt.InsertionMarkerManager.prototype.applyConnections=function(){if(this.closestConnection_&&((0,p.disable)(),this.hidePreview_(),(0,p.enable)(),this.localConnection_.connect(this.closestConnection_),this.topBlock_.rendered)){var t=this.localConnection_.isSuperior()?this.closestConnection_:this.localConnection_;(0,Je.connectionUiEffect)(t.getSourceBlock()),this.topBlock_.getRootBlock().bringToFront()}},vt.InsertionMarkerManager.prototype.update=function(t,e){var o=this.getCandidate_(t);((this.wouldDeleteBlock_=this.shouldDelete_(o,e))||this.shouldUpdatePreviews_(o,t))&&((0,p.disable)(),this.maybeHidePreview_(o),this.maybeShowPreview_(o),(0,p.enable)())},vt.InsertionMarkerManager.prototype.createMarkerBlock_=function(t){var e=t.type;(0,p.disable)();try{var o=this.workspace_.newBlock(e);if(o.setInsertionMarker(!0),t.saveExtraState){var i=t.saveExtraState();i&&o.loadExtraState(i)}else if(t.mutationToDom){var s=t.mutationToDom();s&&o.domToMutation(s)}for(e=0;e<t.inputList.length;e++){var l=t.inputList[e];if(l.name!==To.COLLAPSED_INPUT_NAME){var h=o.inputList[e];if(!h)throw Error(yr.replace("%1","an input"));for(i=0;i<l.fieldRow.length;i++){var S=l.fieldRow[i],C=h.fieldRow[i];if(!C)throw Error(yr.replace("%1","a field"));C.setValue(S.getValue())}}}o.setCollapsed(t.isCollapsed()),o.setInputsInline(t.getInputsInline()),o.initSvg(),o.getSvgRoot().setAttribute("visibility","hidden")}finally{(0,p.enable)()}return o},vt.InsertionMarkerManager.prototype.initAvailableConnections_=function(){var t=this.topBlock_.getConnections_(!1),e=this.topBlock_.lastConnectionInStack(!0);if(e&&e!==this.topBlock_.nextConnection){if(t.push(e),this.lastOnStack_=e,this.lastMarker_){(0,p.disable)();try{this.lastMarker_.dispose()}finally{(0,p.enable)()}}this.lastMarker_=this.createMarkerBlock_(e.getSourceBlock())}return t},vt.InsertionMarkerManager.prototype.shouldUpdatePreviews_=function(t,e){var o=t.local,i=t.closest;if(t=t.radius,o&&i){if(this.localConnection_&&this.closestConnection_)return this.closestConnection_===i&&this.localConnection_===o?!1:(o=this.localConnection_.x+e.x-this.closestConnection_.x,e=this.localConnection_.y+e.y-this.closestConnection_.y,e=Math.sqrt(o*o+e*e),!(i&&t>e-n.module$exports$Blockly$config.config.currentConnectionPreference));if(this.localConnection_||this.closestConnection_)console.error("Only one of localConnection_ and closestConnection_ was set.");else return!0}else return!(!this.localConnection_||!this.closestConnection_);return console.error("Returning true from shouldUpdatePreviews, but it's not clear why."),!0},vt.InsertionMarkerManager.prototype.getCandidate_=function(t){var e=this.getStartRadius_(),o=null,i=null;this.markerConnection_&&this.markerConnection_.isConnected()||this.updateAvailableConnections();for(var s=0;s<this.availableConnections_.length;s++){var l=this.availableConnections_[s],h=l.closest(e,t);h.connection&&(o=h.connection,i=l,e=h.radius)}return{closest:o,local:i,radius:e}},vt.InsertionMarkerManager.prototype.getStartRadius_=function(){return this.closestConnection_&&this.localConnection_?n.module$exports$Blockly$config.config.connectingSnapRadius:n.module$exports$Blockly$config.config.snapRadius},vt.InsertionMarkerManager.prototype.shouldDelete_=function(t,e){return e&&this.workspace_.getComponentManager().hasCapability(e.id,It.ComponentManager.Capability.DELETE_AREA)?e.wouldDelete(this.topBlock_,t&&!!t.closest):!1},vt.InsertionMarkerManager.prototype.maybeShowPreview_=function(t){if(!this.wouldDeleteBlock_){var e=t.closest;t=t.local,e&&(e===this.closestConnection_||e.getSourceBlock().isInsertionMarker()?console.log("Trying to connect to an insertion marker"):(this.closestConnection_=e,this.localConnection_=t,this.showPreview_()))}},vt.InsertionMarkerManager.prototype.showPreview_=function(){var t=this.closestConnection_,e=this.workspace_.getRenderer();switch(e.getConnectionPreviewMethod(t,this.localConnection_,this.topBlock_)){case vt.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:this.showInsertionInputOutline_();break;case vt.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:this.showInsertionMarker_();break;case vt.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:this.showReplacementFade_()}t&&e.shouldHighlightConnection(t)&&t.highlight()},vt.InsertionMarkerManager.prototype.maybeHidePreview_=function(t){if(t.closest){var e=this.closestConnection_!==t.closest;t=this.localConnection_!==t.local,this.closestConnection_&&this.localConnection_&&(e||t||this.wouldDeleteBlock_)&&this.hidePreview_()}else this.hidePreview_();this.localConnection_=this.closestConnection_=this.markerConnection_=null},vt.InsertionMarkerManager.prototype.hidePreview_=function(){this.closestConnection_&&this.closestConnection_.targetBlock()&&this.workspace_.getRenderer().shouldHighlightConnection(this.closestConnection_)&&this.closestConnection_.unhighlight(),this.fadedBlock_?this.hideReplacementFade_():this.highlightedBlock_?this.hideInsertionInputOutline_():this.markerConnection_&&this.hideInsertionMarker_()},vt.InsertionMarkerManager.prototype.showInsertionMarker_=function(){var t=this.localConnection_,e=this.closestConnection_,o=this.lastOnStack_&&t===this.lastOnStack_,i=o?this.lastMarker_:this.firstMarker_;try{var s=i.getMatchingConnection(t.getSourceBlock(),t)}catch{this.firstMarker_=this.createMarkerBlock_(this.topBlock_),i=o?this.lastMarker_:this.firstMarker_,s=i.getMatchingConnection(t.getSourceBlock(),t)}if(s===this.markerConnection_)throw Error("Made it to showInsertionMarker_ even though the marker isn't changing");i.render(),i.rendered=!0,i.getSvgRoot().setAttribute("visibility","visible"),s&&e&&i.positionNearConnection(s,e),e&&s.connect(e),this.markerConnection_=s},vt.InsertionMarkerManager.prototype.hideInsertionMarker_=function(){if(this.markerConnection_){var t=this.markerConnection_,e=t.getSourceBlock(),o=e.nextConnection,i=e.previousConnection,s=e.outputConnection;if(s=t.type===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&!(s&&s.targetConnection),!(t!==o||i&&i.targetConnection)||s?t.targetBlock().unplug(!1):t.type===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&t!==o?(o=t.targetConnection,o.getSourceBlock().unplug(!1),i=i?i.targetConnection:null,e.unplug(!0),i&&i.connect(o)):e.unplug(!0),t.targetConnection)throw Error("markerConnection_ still connected at the end of disconnectInsertionMarker");this.markerConnection_=null,(t=e.getSvgRoot())&&t.setAttribute("visibility","hidden")}else console.log("No insertion marker connection to disconnect")},vt.InsertionMarkerManager.prototype.showInsertionInputOutline_=function(){var t=this.closestConnection_;this.highlightedBlock_=t.getSourceBlock(),this.highlightedBlock_.highlightShapeForInput(t,!0)},vt.InsertionMarkerManager.prototype.hideInsertionInputOutline_=function(){this.highlightedBlock_.highlightShapeForInput(this.closestConnection_,!1),this.highlightedBlock_=null},vt.InsertionMarkerManager.prototype.showReplacementFade_=function(){this.fadedBlock_=this.closestConnection_.targetBlock(),this.fadedBlock_.fadeForReplacement(!0)},vt.InsertionMarkerManager.prototype.hideReplacementFade_=function(){this.fadedBlock_.fadeForReplacement(!1),this.fadedBlock_=null},vt.InsertionMarkerManager.prototype.getInsertionMarkers=function(){var t=[];return this.firstMarker_&&t.push(this.firstMarker_),this.lastMarker_&&t.push(this.lastMarker_),t},vt.InsertionMarkerManager.PREVIEW_TYPE={INSERTION_MARKER:0,INPUT_OUTLINE:1,REPLACEMENT_FADE:2};var pt={UiBase:function(t){Ht.Abstract.call(this),this.isBlank=typeof t>"u",this.workspaceId=t||"",this.recordUndo=!1,this.isUiEvent=!0}};n.$jscomp.inherits(pt.UiBase,Ht.Abstract);var kn={BlockDrag:function(t,e,o){pt.UiBase.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isStart=e,this.blocks=o,this.type=p.BLOCK_DRAG}};n.$jscomp.inherits(kn.BlockDrag,pt.UiBase),kn.BlockDrag.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.isStart=this.isStart,t.blockId=this.blockId,t.blocks=this.blocks,t},kn.BlockDrag.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.isStart=t.isStart,this.blockId=t.blockId,this.blocks=t.blocks},(0,b.register)(b.Type.EVENT,p.BLOCK_DRAG,kn.BlockDrag);var te={BlockDragger:function(t,e){this.draggingBlock_=t,this.workspace_=e,this.draggedConnectionManager_=new vt.InsertionMarkerManager(this.draggingBlock_),this.dragTarget_=null,this.wouldDeleteBlock_=!1,this.startXY_=this.draggingBlock_.getRelativeToSurfaceXY(),this.dragIconData_=Ms(t)}};te.BlockDragger.prototype.dispose=function(){this.dragIconData_.length=0,this.draggedConnectionManager_&&this.draggedConnectionManager_.dispose()},te.BlockDragger.prototype.startDrag=function(t,e){(0,p.getGroup)()||(0,p.setGroup)(!0),this.fireDragStartEvent_(),this.workspace_.isMutator&&this.draggingBlock_.bringToFront(),(0,_.startTextWidthCache)(),this.workspace_.setResizesEnabled(!1),(0,Je.disconnectUiStop)(),this.shouldDisconnect_(e)&&this.disconnectBlock_(e,t),this.draggingBlock_.setDragging(!0),this.draggingBlock_.moveToDragSurface()},te.BlockDragger.prototype.shouldDisconnect_=function(t){return!!(this.draggingBlock_.getParent()||t&&this.draggingBlock_.nextConnection&&this.draggingBlock_.nextConnection.targetBlock())},te.BlockDragger.prototype.disconnectBlock_=function(t,e){this.draggingBlock_.unplug(t),t=this.pixelsToWorkspaceUnits_(e),t=H.Coordinate.sum(this.startXY_,t),this.draggingBlock_.translate(t.x,t.y),(0,Je.disconnectUiEffect)(this.draggingBlock_),this.draggedConnectionManager_.updateAvailableConnections()},te.BlockDragger.prototype.fireDragStartEvent_=function(){var t=new((0,p.get)(p.BLOCK_DRAG))(this.draggingBlock_,!0,this.draggingBlock_.getDescendants(!1));(0,p.fire)(t)},te.BlockDragger.prototype.drag=function(t,e){e=this.pixelsToWorkspaceUnits_(e);var o=H.Coordinate.sum(this.startXY_,e);this.draggingBlock_.moveDuringDrag(o),this.dragIcons_(e),o=this.dragTarget_,this.dragTarget_=this.workspace_.getDragTarget(t),this.draggedConnectionManager_.update(e,this.dragTarget_),t=this.wouldDeleteBlock_,this.wouldDeleteBlock_=this.draggedConnectionManager_.wouldDeleteBlock(),t!==this.wouldDeleteBlock_&&this.updateCursorDuringBlockDrag_(),this.dragTarget_!==o&&(o&&o.onDragExit(this.draggingBlock_),this.dragTarget_&&this.dragTarget_.onDragEnter(this.draggingBlock_)),this.dragTarget_&&this.dragTarget_.onDragOver(this.draggingBlock_)},te.BlockDragger.prototype.endDrag=function(t,e){if(this.drag(t,e),this.dragIconData_=[],this.fireDragEndEvent_(),(0,_.stopTextWidthCache)(),(0,Je.disconnectUiStop)(),this.dragTarget_&&this.dragTarget_.shouldPreventMove(this.draggingBlock_))t=this.startXY_;else{t=this.getNewLocationAfterDrag_(e);var o=t.delta;t=t.newLocation}this.draggingBlock_.moveOffDragSurface(t),this.dragTarget_&&this.dragTarget_.onDrop(this.draggingBlock_),this.maybeDeleteBlock_()||(this.draggingBlock_.setDragging(!1),o?this.updateBlockAfterMove_(o):(0,Co.bumpIntoBounds)(this.draggingBlock_.workspace,this.workspace_.getMetricsManager().getScrollMetrics(!0),this.draggingBlock_)),this.workspace_.setResizesEnabled(!0),(0,p.setGroup)(!1)},te.BlockDragger.prototype.getNewLocationAfterDrag_=function(t){var e={};return e.delta=this.pixelsToWorkspaceUnits_(t),e.newLocation=H.Coordinate.sum(this.startXY_,e.delta),e},te.BlockDragger.prototype.maybeDeleteBlock_=function(){return this.wouldDeleteBlock_?(this.fireMoveEvent_(),this.draggingBlock_.dispose(!1,!0),n.module$exports$Blockly$common.draggingConnections.length=0,!0):!1},te.BlockDragger.prototype.updateBlockAfterMove_=function(t){this.draggingBlock_.moveConnections(t.x,t.y),this.fireMoveEvent_(),this.draggedConnectionManager_.wouldConnectBlock()?this.draggedConnectionManager_.applyConnections():this.draggingBlock_.render(),this.draggingBlock_.scheduleSnapAndBump()},te.BlockDragger.prototype.fireDragEndEvent_=function(){var t=new((0,p.get)(p.BLOCK_DRAG))(this.draggingBlock_,!1,this.draggingBlock_.getDescendants(!1));(0,p.fire)(t)},te.BlockDragger.prototype.updateToolboxStyle_=function(t){var e=this.workspace_.getToolbox();if(e){var o=this.draggingBlock_.isDeletable()?"blocklyToolboxDelete":"blocklyToolboxGrab";t&&typeof e.removeStyle=="function"?e.removeStyle(o):t||typeof e.addStyle!="function"||e.addStyle(o)}},te.BlockDragger.prototype.fireMoveEvent_=function(){var t=new((0,p.get)(p.MOVE))(this.draggingBlock_);t.oldCoordinate=this.startXY_,t.recordNew(),(0,p.fire)(t)},te.BlockDragger.prototype.updateCursorDuringBlockDrag_=function(){this.draggingBlock_.setDeleteStyle(this.wouldDeleteBlock_)},te.BlockDragger.prototype.pixelsToWorkspaceUnits_=function(t){return t=new H.Coordinate(t.x/this.workspace_.scale,t.y/this.workspace_.scale),this.workspace_.isMutator&&t.scale(1/this.workspace_.options.parentWorkspace.scale),t},te.BlockDragger.prototype.dragIcons_=function(t){for(var e=0;e<this.dragIconData_.length;e++){var o=this.dragIconData_[e];o.icon.setIconLocation(H.Coordinate.sum(o.location,t))}},te.BlockDragger.prototype.getInsertionMarkers=function(){return this.draggedConnectionManager_&&this.draggedConnectionManager_.getInsertionMarkers?this.draggedConnectionManager_.getInsertionMarkers():[]};var Ms=function(t){var e=[];t=t.getDescendants(!1);for(var o=0,i;i=t[o];o++){i=i.getIcons();for(var s=0;s<i.length;s++){var l={location:i[s].getIconLocation(),icon:i[s]};e.push(l)}}return e};(0,b.register)(b.Type.BLOCK_DRAGGER,b.DEFAULT,te.BlockDragger);var En={Click:function(t,e,o){e=t?t.workspace.id:e,e===null&&(e=void 0),pt.UiBase.call(this,e),this.blockId=t?t.id:null,this.targetType=o,this.type=p.CLICK}};n.$jscomp.inherits(En.Click,pt.UiBase),En.Click.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.targetType=this.targetType,this.blockId&&(t.blockId=this.blockId),t},En.Click.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.targetType=t.targetType,this.blockId=t.blockId},(0,b.register)(b.Type.EVENT,p.CLICK,En.Click);var et={Gesture:function(t,e){this.mouseDownXY_=null,this.currentDragDeltaXY_=new H.Coordinate(0,0),this.startWorkspace_=this.targetBlock_=this.startBlock_=this.startField_=this.startBubble_=null,this.creatorWorkspace_=e,this.isDraggingBubble_=this.isDraggingBlock_=this.isDraggingWorkspace_=this.hasExceededDragRadius_=!1,this.mostRecentEvent_=t,this.flyout_=this.workspaceDragger_=this.blockDragger_=this.bubbleDragger_=this.onUpWrapper_=this.onMoveWrapper_=null,this.isEnding_=this.hasStarted_=this.calledUpdateIsDragging_=!1,this.healStack_=!Zt.DRAG_STACK}};et.Gesture.prototype.dispose=function(){(0,g.clearTouchIdentifier)(),(0,Q.unblock)(),this.creatorWorkspace_.clearGesture(),this.onMoveWrapper_&&(0,$.unbind)(this.onMoveWrapper_),this.onUpWrapper_&&(0,$.unbind)(this.onUpWrapper_),this.blockDragger_&&this.blockDragger_.dispose(),this.workspaceDragger_&&this.workspaceDragger_.dispose(),this.bubbleDragger_&&this.bubbleDragger_.dispose()},et.Gesture.prototype.updateFromEvent_=function(t){var e=new H.Coordinate(t.clientX,t.clientY);this.updateDragDelta_(e)&&(this.updateIsDragging_(),(0,g.longStop)()),this.mostRecentEvent_=t},et.Gesture.prototype.updateDragDelta_=function(t){return this.currentDragDeltaXY_=H.Coordinate.difference(t,this.mouseDownXY_),this.hasExceededDragRadius_?!1:this.hasExceededDragRadius_=H.Coordinate.magnitude(this.currentDragDeltaXY_)>(this.flyout_?n.module$exports$Blockly$config.config.flyoutDragRadius:n.module$exports$Blockly$config.config.dragRadius)},et.Gesture.prototype.updateIsDraggingFromFlyout_=function(){return this.targetBlock_&&this.flyout_.isBlockCreatable_(this.targetBlock_)&&(!this.flyout_.isScrollable()||this.flyout_.isDragTowardWorkspace(this.currentDragDeltaXY_))?(this.startWorkspace_=this.flyout_.targetWorkspace,this.startWorkspace_.updateScreenCalculationsIfScrolled(),(0,p.getGroup)()||(0,p.setGroup)(!0),this.startBlock_=null,this.targetBlock_=this.flyout_.createBlock(this.targetBlock_),this.targetBlock_.select(),!0):!1},et.Gesture.prototype.updateIsDraggingBubble_=function(){return this.startBubble_?(this.isDraggingBubble_=!0,this.startDraggingBubble_(),!0):!1},et.Gesture.prototype.updateIsDraggingBlock_=function(){return this.targetBlock_?(this.flyout_?this.isDraggingBlock_=this.updateIsDraggingFromFlyout_():this.targetBlock_.isMovable()&&(this.isDraggingBlock_=!0),this.isDraggingBlock_?(this.startDraggingBlock_(),!0):!1):!1},et.Gesture.prototype.updateIsDraggingWorkspace_=function(){(this.flyout_?this.flyout_.isScrollable():this.startWorkspace_&&this.startWorkspace_.isDraggable())&&(this.workspaceDragger_=new qo.WorkspaceDragger(this.startWorkspace_),this.isDraggingWorkspace_=!0,this.workspaceDragger_.startDrag())},et.Gesture.prototype.updateIsDragging_=function(){if(this.calledUpdateIsDragging_)throw Error("updateIsDragging_ should only be called once per gesture.");this.calledUpdateIsDragging_=!0,this.updateIsDraggingBubble_()||this.updateIsDraggingBlock_()||this.updateIsDraggingWorkspace_()},et.Gesture.prototype.startDraggingBlock_=function(){this.blockDragger_=new((0,b.getClassFromOptions)(b.Type.BLOCK_DRAGGER,this.creatorWorkspace_.options,!0))(this.targetBlock_,this.startWorkspace_),this.blockDragger_.startDrag(this.currentDragDeltaXY_,this.healStack_),this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_)},et.Gesture.prototype.startDraggingBubble_=function(){this.bubbleDragger_=new ze.BubbleDragger(this.startBubble_,this.startWorkspace_),this.bubbleDragger_.startBubbleDrag(),this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_)},et.Gesture.prototype.doStart=function(t){(0,$.isTargetInput)(t)?this.cancel():(this.hasStarted_=!0,(0,Je.disconnectUiStop)(),this.startWorkspace_.updateScreenCalculationsIfScrolled(),this.startWorkspace_.isMutator&&this.startWorkspace_.resize(),this.startWorkspace_.hideChaff(!!this.flyout_),this.startWorkspace_.markFocused(),this.mostRecentEvent_=t,(0,Q.block)(),this.targetBlock_&&this.targetBlock_.select(),(0,$.isRightButton)(t)?this.handleRightClick(t):(t.type.toLowerCase()!=="touchstart"&&t.type.toLowerCase()!=="pointerdown"||t.pointerType==="mouse"||(0,g.longStart)(t,this),this.mouseDownXY_=new H.Coordinate(t.clientX,t.clientY),this.healStack_=t.altKey||t.ctrlKey||t.metaKey,this.bindMouseEvents(t)))},et.Gesture.prototype.bindMouseEvents=function(t){this.onMoveWrapper_=(0,$.conditionalBind)(document,"mousemove",null,this.handleMove.bind(this)),this.onUpWrapper_=(0,$.conditionalBind)(document,"mouseup",null,this.handleUp.bind(this)),t.preventDefault(),t.stopPropagation()},et.Gesture.prototype.handleMove=function(t){this.updateFromEvent_(t),this.isDraggingWorkspace_?this.workspaceDragger_.drag(this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.drag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBubble_&&this.bubbleDragger_.dragBubble(this.mostRecentEvent_,this.currentDragDeltaXY_),t.preventDefault(),t.stopPropagation()},et.Gesture.prototype.handleUp=function(t){this.updateFromEvent_(t),(0,g.longStop)(),this.isEnding_?console.log("Trying to end a gesture recursively."):(this.isEnding_=!0,this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(t,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(t,this.currentDragDeltaXY_):this.isDraggingWorkspace_?this.workspaceDragger_.endDrag(this.currentDragDeltaXY_):this.isBubbleClick_()?this.doBubbleClick_():this.isFieldClick_()?this.doFieldClick_():this.isBlockClick_()?this.doBlockClick_():this.isWorkspaceClick_()&&this.doWorkspaceClick_(t),t.preventDefault(),t.stopPropagation(),this.dispose())},et.Gesture.prototype.cancel=function(){this.isEnding_||((0,g.longStop)(),this.isDraggingBubble_?this.bubbleDragger_.endBubbleDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingBlock_?this.blockDragger_.endDrag(this.mostRecentEvent_,this.currentDragDeltaXY_):this.isDraggingWorkspace_&&this.workspaceDragger_.endDrag(this.currentDragDeltaXY_),this.dispose())},et.Gesture.prototype.handleRightClick=function(t){this.targetBlock_?(this.bringBlockToFront_(),this.targetBlock_.workspace.hideChaff(!!this.flyout_),this.targetBlock_.showContextMenu(t)):this.startBubble_?this.startBubble_.showContextMenu(t):this.startWorkspace_&&!this.flyout_&&(this.startWorkspace_.hideChaff(),this.startWorkspace_.showContextMenu(t)),t.preventDefault(),t.stopPropagation(),this.dispose()},et.Gesture.prototype.handleWsStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleWsStart, but the gesture had already been started.");this.setStartWorkspace_(e),this.mostRecentEvent_=t,this.doStart(t)},et.Gesture.prototype.fireWorkspaceClick_=function(t){(0,p.fire)(new((0,p.get)(p.CLICK))(null,t.id,"workspace"))},et.Gesture.prototype.handleFlyoutStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleFlyoutStart, but the gesture had already been started.");this.setStartFlyout_(e),this.handleWsStart(t,e.getWorkspace())},et.Gesture.prototype.handleBlockStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBlockStart, but the gesture had already been started.");this.setStartBlock(e),this.mostRecentEvent_=t},et.Gesture.prototype.handleBubbleStart=function(t,e){if(this.hasStarted_)throw Error("Tried to call gesture.handleBubbleStart, but the gesture had already been started.");this.setStartBubble(e),this.mostRecentEvent_=t},et.Gesture.prototype.doBubbleClick_=function(){this.startBubble_.setFocus&&this.startBubble_.setFocus(),this.startBubble_.select&&this.startBubble_.select()},et.Gesture.prototype.doFieldClick_=function(){this.startField_.showEditor(this.mostRecentEvent_),this.bringBlockToFront_()},et.Gesture.prototype.doBlockClick_=function(){if(this.flyout_&&this.flyout_.autoClose)this.targetBlock_.isEnabled()&&((0,p.getGroup)()||(0,p.setGroup)(!0),this.flyout_.createBlock(this.targetBlock_).scheduleSnapAndBump());else{var t=new((0,p.get)(p.CLICK))(this.startBlock_,this.startWorkspace_.id,"block");(0,p.fire)(t)}this.bringBlockToFront_(),(0,p.setGroup)(!1)},et.Gesture.prototype.doWorkspaceClick_=function(t){t=this.creatorWorkspace_,(0,n.module$exports$Blockly$common.getSelected)()&&(0,n.module$exports$Blockly$common.getSelected)().unselect(),this.fireWorkspaceClick_(this.startWorkspace_||t)},et.Gesture.prototype.bringBlockToFront_=function(){this.targetBlock_&&!this.flyout_&&this.targetBlock_.bringToFront()},et.Gesture.prototype.setStartField=function(t){if(this.hasStarted_)throw Error("Tried to call gesture.setStartField, but the gesture had already been started.");this.startField_||(this.startField_=t)},et.Gesture.prototype.setStartBubble=function(t){this.startBubble_||(this.startBubble_=t)},et.Gesture.prototype.setStartBlock=function(t){this.startBlock_||this.startBubble_||(this.startBlock_=t,t.isInFlyout&&t!==t.getRootBlock()?this.setTargetBlock_(t.getRootBlock()):this.setTargetBlock_(t))},et.Gesture.prototype.setTargetBlock_=function(t){t.isShadow()?this.setTargetBlock_(t.getParent()):this.targetBlock_=t},et.Gesture.prototype.setStartWorkspace_=function(t){this.startWorkspace_||(this.startWorkspace_=t)},et.Gesture.prototype.setStartFlyout_=function(t){this.flyout_||(this.flyout_=t)},et.Gesture.prototype.isBubbleClick_=function(){return!!this.startBubble_&&!this.hasExceededDragRadius_},et.Gesture.prototype.isBlockClick_=function(){return!!this.startBlock_&&!this.hasExceededDragRadius_&&!this.isFieldClick_()},et.Gesture.prototype.isFieldClick_=function(){return(this.startField_?this.startField_.isClickable():!1)&&!this.hasExceededDragRadius_&&(!this.flyout_||!this.flyout_.autoClose)},et.Gesture.prototype.isWorkspaceClick_=function(){return!this.startBlock_&&!this.startBubble_&&!this.startField_&&!this.hasExceededDragRadius_},et.Gesture.prototype.isDragging=function(){return this.isDraggingWorkspace_||this.isDraggingBlock_||this.isDraggingBubble_},et.Gesture.prototype.hasStarted=function(){return this.hasStarted_},et.Gesture.prototype.getInsertionMarkers=function(){return this.blockDragger_?this.blockDragger_.getInsertionMarkers():[]},et.Gesture.prototype.getCurrentDragger=function(){return this.isDraggingBlock_?this.blockDragger_:this.isDraggingWorkspace_?this.workspaceDragger_:this.isDraggingBubble_?this.bubbleDragger_:null},et.Gesture.inProgress=function(){for(var t=X.Workspace.getAll(),e=0,o;o=t[e];e++)if(o.currentGesture_)return!0;return!1};var w={Field:function(t,e,o){this.name=void 0,this.value_=this.constructor.prototype.DEFAULT_VALUE,this.tooltip_=this.validator_=null,this.size_=new jt.Size(0,0),this.constants_=this.mouseDownWrapper_=this.textContent_=this.textElement_=this.borderRect_=this.fieldGroup_=this.markerSvg_=this.cursorSvg_=null,this.disposed=!1,this.maxDisplayLength=50,this.sourceBlock_=null,this.enabled_=this.visible_=this.isDirty_=!0,this.suffixField=this.prefixField=this.clickTarget_=null,this.EDITABLE=!0,this.SERIALIZABLE=!1,this.CURSOR="",t!==w.Field.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(t),e&&this.setValidator(e))}};w.Field.prototype.configure_=function(t){var e=t.tooltip;typeof e=="string"&&(e=(0,mt.replaceMessageReferences)(t.tooltip)),e&&this.setTooltip(e)},w.Field.prototype.setSourceBlock=function(t){if(this.sourceBlock_)throw Error("Field already bound to a block");this.sourceBlock_=t},w.Field.prototype.getConstants=function(){return!this.constants_&&this.sourceBlock_&&this.sourceBlock_.workspace&&this.sourceBlock_.workspace.rendered&&(this.constants_=this.sourceBlock_.workspace.getRenderer().getConstants()),this.constants_},w.Field.prototype.getSourceBlock=function(){return this.sourceBlock_},w.Field.prototype.init=function(){this.fieldGroup_||(this.fieldGroup_=(0,_.createSvgElement)(R.Svg.G,{},null),this.isVisible()||(this.fieldGroup_.style.display="none"),this.sourceBlock_.getSvgRoot().appendChild(this.fieldGroup_),this.initView(),this.updateEditable(),this.setTooltip(this.tooltip_),this.bindEvents_(),this.initModel())},w.Field.prototype.initView=function(){this.createBorderRect_(),this.createTextElement_()},w.Field.prototype.initModel=function(){},w.Field.prototype.createBorderRect_=function(){this.borderRect_=(0,_.createSvgElement)(R.Svg.RECT,{rx:this.getConstants().FIELD_BORDER_RECT_RADIUS,ry:this.getConstants().FIELD_BORDER_RECT_RADIUS,x:0,y:0,height:this.size_.height,width:this.size_.width,class:"blocklyFieldRect"},this.fieldGroup_)},w.Field.prototype.createTextElement_=function(){this.textElement_=(0,_.createSvgElement)(R.Svg.TEXT,{class:"blocklyText"},this.fieldGroup_),this.getConstants().FIELD_TEXT_BASELINE_CENTER&&this.textElement_.setAttribute("dominant-baseline","central"),this.textContent_=document.createTextNode(""),this.textElement_.appendChild(this.textContent_)},w.Field.prototype.bindEvents_=function(){(0,Q.bindMouseEvents)(this.getClickTarget_()),this.mouseDownWrapper_=(0,$.conditionalBind)(this.getClickTarget_(),"mousedown",this,this.onMouseDown_)},w.Field.prototype.fromXml=function(t){this.setValue(t.textContent)},w.Field.prototype.toXml=function(t){return t.textContent=this.getValue(),t},w.Field.prototype.saveState=function(t){return t=this.saveLegacyState(w.Field),t!==null?t:this.getValue()},w.Field.prototype.loadState=function(t){this.loadLegacyState(w.Field,t)||this.setValue(t)},w.Field.prototype.saveLegacyState=function(t){return t.prototype.saveState===this.saveState&&t.prototype.toXml!==this.toXml?(t=(0,n.module$exports$Blockly$utils$xml.createElement)("field"),t.setAttribute("name",this.name||""),(0,n.module$exports$Blockly$Xml.domToText)(this.toXml(t)).replace(' xmlns="https://developers.google.com/blockly/xml"',"")):null},w.Field.prototype.loadLegacyState=function(t,e){return t.prototype.loadState===this.loadState&&t.prototype.fromXml!==this.fromXml?(this.fromXml((0,n.module$exports$Blockly$Xml.textToDom)(e)),!0):!1},w.Field.prototype.dispose=function(){(0,z.hideIfOwner)(this),(0,v.hideIfOwner)(this),(0,Q.unbindMouseEvents)(this.getClickTarget_()),this.mouseDownWrapper_&&(0,$.unbind)(this.mouseDownWrapper_),(0,_.removeNode)(this.fieldGroup_),this.disposed=!0},w.Field.prototype.updateEditable=function(){var t=this.fieldGroup_;this.EDITABLE&&t&&(this.enabled_&&this.sourceBlock_.isEditable()?((0,_.addClass)(t,"blocklyEditableText"),(0,_.removeClass)(t,"blocklyNonEditableText"),t.style.cursor=this.CURSOR):((0,_.addClass)(t,"blocklyNonEditableText"),(0,_.removeClass)(t,"blocklyEditableText"),t.style.cursor=""))},w.Field.prototype.setEnabled=function(t){this.enabled_=t,this.updateEditable()},w.Field.prototype.isEnabled=function(){return this.enabled_},w.Field.prototype.isClickable=function(){return this.enabled_&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()&&this.showEditor_!==w.Field.prototype.showEditor_},w.Field.prototype.isCurrentlyEditable=function(){return this.enabled_&&this.EDITABLE&&!!this.sourceBlock_&&this.sourceBlock_.isEditable()},w.Field.prototype.isSerializable=function(){var t=!1;return this.name&&(this.SERIALIZABLE?t=!0:this.EDITABLE&&(console.warn("Detected an editable field that was not serializable. Please define SERIALIZABLE property as true on all editable custom fields. Proceeding with serialization."),t=!0)),t},w.Field.prototype.isVisible=function(){return this.visible_},w.Field.prototype.setVisible=function(t){if(this.visible_!==t){this.visible_=t;var e=this.getSvgRoot();e&&(e.style.display=t?"block":"none")}},w.Field.prototype.setValidator=function(t){this.validator_=t},w.Field.prototype.getValidator=function(){return this.validator_},w.Field.prototype.getSvgRoot=function(){return this.fieldGroup_},w.Field.prototype.applyColour=function(){},w.Field.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_()},w.Field.prototype.showEditor=function(t){this.isClickable()&&this.showEditor_(t)},w.Field.prototype.showEditor_=function(t){},w.Field.prototype.updateSize_=function(t){var e=this.getConstants();t=t!==void 0?t:this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var o=2*t,i=e.FIELD_TEXT_HEIGHT,s=0;this.textElement_&&(s=(0,_.getFastTextWidth)(this.textElement_,e.FIELD_TEXT_FONTSIZE,e.FIELD_TEXT_FONTWEIGHT,e.FIELD_TEXT_FONTFAMILY),o+=s),this.borderRect_&&(i=Math.max(i,e.FIELD_BORDER_RECT_HEIGHT)),this.size_.height=i,this.size_.width=o,this.positionTextElement_(t,s),this.positionBorderRect_()},w.Field.prototype.positionTextElement_=function(t,e){if(this.textElement_){var o=this.getConstants(),i=this.size_.height/2;this.textElement_.setAttribute("x",this.sourceBlock_.RTL?this.size_.width-e-t:t),this.textElement_.setAttribute("y",o.FIELD_TEXT_BASELINE_CENTER?i:i-o.FIELD_TEXT_HEIGHT/2+o.FIELD_TEXT_BASELINE)}},w.Field.prototype.positionBorderRect_=function(){this.borderRect_&&(this.borderRect_.setAttribute("width",this.size_.width),this.borderRect_.setAttribute("height",this.size_.height),this.borderRect_.setAttribute("rx",this.getConstants().FIELD_BORDER_RECT_RADIUS),this.borderRect_.setAttribute("ry",this.getConstants().FIELD_BORDER_RECT_RADIUS))},w.Field.prototype.getSize=function(){return this.isVisible()?(this.isDirty_?(this.render_(),this.isDirty_=!1):this.visible_&&this.size_.width===0&&(console.warn("Deprecated use of setting size_.width to 0 to rerender a field. Set field.isDirty_ to true instead."),this.render_()),this.size_):new jt.Size(0,0)},w.Field.prototype.getScaledBBox=function(){if(this.borderRect_)var t=this.borderRect_.getBoundingClientRect(),e=(0,Ct.getPageOffset)(this.borderRect_),o=t.width,i=t.height;else i=this.sourceBlock_.getHeightWidth(),t=this.sourceBlock_.workspace.scale,e=this.getAbsoluteXY_(),o=i.width*t,i=i.height*t,G.GECKO?(e.x+=1.5*t,e.y+=1.5*t):G.EDGE||G.IE||(e.x-=.5*t,e.y-=.5*t),o+=1*t,i+=1*t;return new wt.Rect(e.y,e.y+i,e.x,e.x+o)},w.Field.prototype.getDisplayText_=function(){var t=this.getText();return t?(t.length>this.maxDisplayLength&&(t=t.substring(0,this.maxDisplayLength-2)+"\u2026"),t=t.replace(/\s/g,w.Field.NBSP),this.sourceBlock_&&this.sourceBlock_.RTL&&(t+="\u200F"),t):w.Field.NBSP},w.Field.prototype.getText=function(){var t=this.getText_();return String(t!==null?t:this.getValue())},w.Field.prototype.getText_=function(){return null},w.Field.prototype.markDirty=function(){this.isDirty_=!0,this.constants_=null},w.Field.prototype.forceRerender=function(){this.isDirty_=!0,this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours(),this.updateMarkers_())},w.Field.prototype.setValue=function(t){if(t!==null){var e=this.doClassValidation_(t);if(t=this.processValidation_(t,e),!(t instanceof Error)){if((e=this.getValidator())&&(e=e.call(this,t),t=this.processValidation_(t,e),t instanceof Error))return;if(e=this.sourceBlock_,!e||!e.disposed){var o=this.getValue();o===t?this.doValueUpdate_(t):(this.doValueUpdate_(t),e&&(0,p.isEnabled)()&&(0,p.fire)(new((0,p.get)(p.CHANGE))(e,"field",this.name||null,o,t)),this.isDirty_&&this.forceRerender())}}}},w.Field.prototype.processValidation_=function(t,e){return e===null?(this.doValueInvalid_(t),this.isDirty_&&this.forceRerender(),Error()):(e!==void 0&&(t=e),t)},w.Field.prototype.getValue=function(){return this.value_},w.Field.prototype.doClassValidation_=function(t){return t==null?null:t},w.Field.prototype.doValueUpdate_=function(t){this.value_=t,this.isDirty_=!0},w.Field.prototype.doValueInvalid_=function(t){},w.Field.prototype.onMouseDown_=function(t){this.sourceBlock_&&this.sourceBlock_.workspace&&(t=this.sourceBlock_.workspace.getGesture(t))&&t.setStartField(this)},w.Field.prototype.setTooltip=function(t){t||t===""||(t=this.sourceBlock_);var e=this.getClickTarget_();e?e.tooltip=t:this.tooltip_=t},w.Field.prototype.getTooltip=function(){var t=this.getClickTarget_();return t?(0,Q.getTooltipOfObject)(t):(0,Q.getTooltipOfObject)({tooltip:this.tooltip_})},w.Field.prototype.getClickTarget_=function(){return this.clickTarget_||this.getSvgRoot()},w.Field.prototype.getAbsoluteXY_=function(){return(0,Ct.getPageOffset)(this.getClickTarget_())},w.Field.prototype.referencesVariables=function(){return!1},w.Field.prototype.refreshVariableName=function(){},w.Field.prototype.getParentInput=function(){for(var t=null,e=this.sourceBlock_,o=e.inputList,i=0;i<e.inputList.length;i++)for(var s=o[i],l=s.fieldRow,h=0;h<l.length;h++)if(l[h]===this){t=s;break}return t},w.Field.prototype.getFlipRtl=function(){return!1},w.Field.prototype.isTabNavigable=function(){return!1},w.Field.prototype.onShortcut=function(t){return!1},w.Field.prototype.setCursorSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.cursorSvg_=t):this.cursorSvg_=null},w.Field.prototype.setMarkerSvg=function(t){t?(this.fieldGroup_.appendChild(t),this.markerSvg_=t):this.markerSvg_=null},w.Field.prototype.updateMarkers_=function(){var t=this.sourceBlock_.workspace;t.keyboardAccessibilityMode&&this.cursorSvg_&&t.getCursor().draw(),t.keyboardAccessibilityMode&&this.markerSvg_&&t.getMarker(be.MarkerManager.LOCAL_MARKER).draw()},w.Field.prototype.DEFAULT_VALUE=null,w.Field.NBSP="\xA0",w.Field.SKIP_SETUP=new Es.Sentinel,n.module$exports$Blockly$FieldLabel={FieldLabel:function(t,e,o){w.Field.call(this,w.Field.SKIP_SETUP),this.class_=null,this.EDITABLE=!1,t!==w.Field.SKIP_SETUP&&(o?this.configure_(o):this.class_=e||null,this.setValue(t))}},n.$jscomp.inherits(n.module$exports$Blockly$FieldLabel.FieldLabel,w.Field),n.module$exports$Blockly$FieldLabel.FieldLabel.prototype.configure_=function(t){w.Field.prototype.configure_.call(this,t),this.class_=t.class},n.module$exports$Blockly$FieldLabel.FieldLabel.prototype.initView=function(){this.createTextElement_(),this.class_&&(0,_.addClass)(this.textElement_,this.class_)},n.module$exports$Blockly$FieldLabel.FieldLabel.prototype.doClassValidation_=function(t){return t==null?null:String(t)},n.module$exports$Blockly$FieldLabel.FieldLabel.prototype.setClass=function(t){this.textElement_&&(this.class_&&(0,_.removeClass)(this.textElement_,this.class_),t&&(0,_.addClass)(this.textElement_,t)),this.class_=t},n.module$exports$Blockly$FieldLabel.FieldLabel.fromJson=function(t){return new this((0,mt.replaceMessageReferences)(t.text),void 0,t)},n.module$exports$Blockly$FieldLabel.FieldLabel.prototype.DEFAULT_VALUE="",(0,$e.register)("field_label",n.module$exports$Blockly$FieldLabel.FieldLabel);var Pe={InputConnection:function(t,e){We.Connection.call(this,t,e.connection),this.type|=E.Types.INPUT,this.input=e,this.align=e.align,(this.connectedBlock=e.connection&&e.connection.targetBlock()?e.connection.targetBlock():null)?(t=this.connectedBlock.getHeightWidth(),this.connectedBlockWidth=t.width,this.connectedBlockHeight=t.height):this.connectedBlockHeight=this.connectedBlockWidth=0,this.connectionOffsetY=this.connectionOffsetX=0}};n.$jscomp.inherits(Pe.InputConnection,We.Connection);var Vt={Debug:function(t){this.debugElements_=[],this.svgRoot_=null,this.constants_=t,this.randomColour_=""}};Vt.Debug.prototype.clearElems=function(){for(var t=0;t<this.debugElements_.length;t++)(0,_.removeNode)(this.debugElements_[t]);this.debugElements_=[]},Vt.Debug.prototype.drawSpacerRow=function(t,e,o){if(Vt.Debug.config.rowSpacers){var i=Math.abs(t.height),s=0>t.height;s&&(e-=i),this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"rowSpacerRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:e,width:t.width,height:i,stroke:s?"black":"blue",fill:"blue","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},Vt.Debug.prototype.drawSpacerElem=function(t,e,o){if(Vt.Debug.config.elemSpacers){e=Math.abs(t.width);var i=0>t.width,s=i?t.xPos-e:t.xPos;o&&(s=-(s+e)),this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"elemSpacerRect blockRenderDebug",x:s,y:t.centerline-t.height/2,width:e,height:t.height,stroke:"pink",fill:i?"black":"pink","fill-opacity":"0.5","stroke-width":"1px"},this.svgRoot_))}},Vt.Debug.prototype.drawRenderedElem=function(t,e){if(Vt.Debug.config.elems){var o=t.xPos;e&&(o=-(o+t.width)),e=t.centerline-t.height/2,this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:e,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px"},this.svgRoot_)),E.Types.isField(t)&&t instanceof $o.Field&&t.field instanceof n.module$exports$Blockly$FieldLabel.FieldLabel&&this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"rowRenderingRect blockRenderDebug",x:o,y:e+this.constants_.FIELD_TEXT_BASELINE,width:t.width,height:"0.1px",stroke:"red",fill:"none","stroke-width":"0.5px"},this.svgRoot_))}E.Types.isInput(t)&&t instanceof Pe.InputConnection&&Vt.Debug.config.connections&&this.drawConnection(t.connectionModel)},Vt.Debug.prototype.drawConnection=function(t){if(Vt.Debug.config.connections){if(t.type===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE)var e=4,o="magenta",i="none";else t.type===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?(e=2,i=o="magenta"):t.type===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?(e=4,o="goldenrod",i="none"):t.type===n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT&&(e=2,i=o="goldenrod");this.debugElements_.push((0,_.createSvgElement)(R.Svg.CIRCLE,{class:"blockRenderDebug",cx:t.offsetInBlock_.x,cy:t.offsetInBlock_.y,r:e,fill:i,stroke:o},this.svgRoot_))}},Vt.Debug.prototype.drawRenderedRow=function(t,e,o){Vt.Debug.config.rows&&(this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"elemRenderingRect blockRenderDebug",x:o?-(t.xPos+t.width):t.xPos,y:t.yPos,width:t.width,height:t.height,stroke:"red",fill:"none","stroke-width":"1px"},this.svgRoot_)),E.Types.isTopOrBottomRow(t)||Vt.Debug.config.connectedBlockBounds&&this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"connectedBlockWidth blockRenderDebug",x:o?-(t.xPos+t.widthWithConnectedBlocks):t.xPos,y:t.yPos,width:t.widthWithConnectedBlocks,height:t.height,stroke:this.randomColour_,fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))},Vt.Debug.prototype.drawRowWithElements=function(t,e,o){for(var i=0;i<t.elements.length;i++){var s=t.elements[i];s?E.Types.isSpacer(s)?this.drawSpacerElem(s,t.height,o):this.drawRenderedElem(s,o):console.warn("A row has an undefined or null element.",t,s)}this.drawRenderedRow(t,e,o)},Vt.Debug.prototype.drawBoundingBox=function(t){if(Vt.Debug.config.blockBounds){var e=t.RTL?-t.width:0;this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"blockBoundingBox blockRenderDebug",x:e,y:0,width:t.width,height:t.height,stroke:"black",fill:"none","stroke-width":"1px","stroke-dasharray":"5,5"},this.svgRoot_)),Vt.Debug.config.connectedBlockBounds&&(e=t.RTL?-t.widthWithChildren:0,this.debugElements_.push((0,_.createSvgElement)(R.Svg.RECT,{class:"blockRenderDebug",x:e,y:0,width:t.widthWithChildren,height:t.height,stroke:"#DF57BC",fill:"none","stroke-width":"1px","stroke-dasharray":"3,3"},this.svgRoot_)))}},Vt.Debug.prototype.drawDebug=function(t,e){this.clearElems(),this.svgRoot_=t.getSvgRoot(),this.randomColour_="#"+Math.floor(16777215*Math.random()).toString(16);for(var o=0,i=0;i<e.rows.length;i++){var s=e.rows[i];E.Types.isBetweenRowSpacer(s)?this.drawSpacerRow(s,o,e.RTL):this.drawRowWithElements(s,o,e.RTL),o+=s.height}t.previousConnection&&this.drawConnection(t.previousConnection),t.nextConnection&&this.drawConnection(t.nextConnection),t.outputConnection&&this.drawConnection(t.outputConnection),e.rightSide&&this.drawRenderedElem(e.rightSide,e.RTL),this.drawBoundingBox(e),this.drawRender(t.pathObject.svgPath)},Vt.Debug.prototype.drawRender=function(t){Vt.Debug.config.render&&(t.setAttribute("filter","url(#"+this.constants_.debugFilterId+")"),setTimeout(function(){t.setAttribute("filter","")},100))},Vt.Debug.config={rowSpacers:!0,elemSpacers:!0,rows:!0,elems:!0,connections:!0,blockBounds:!0,connectedBlockBounds:!0,render:!0};var ft={Drawer:function(t,e){this.block_=t,this.info_=e,this.topLeft_=t.getRelativeToSurfaceXY(),this.inlinePath_=this.outlinePath_="",this.constants_=e.getRenderer().getConstants()}};ft.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),this.block_.pathObject.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&this.block_.pathObject.flipRTL(),(0,Ke.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},ft.Drawer.prototype.recordSizeOnBlock_=function(){this.block_.height=this.info_.height,this.block_.width=this.info_.widthWithChildren},ft.Drawer.prototype.hideHiddenIcons_=function(){for(var t=0,e;e=this.info_.hiddenIcons[t];t++)e.icon.iconGroup_.setAttribute("display","none")},ft.Drawer.prototype.drawOutline_=function(){this.drawTop_();for(var t=1;t<this.info_.rows.length-1;t++){var e=this.info_.rows[t];e.hasJaggedEdge?this.drawJaggedEdge_(e):e.hasStatement?this.drawStatementInput_(e):e.hasExternalInput?this.drawValueInput_(e):this.drawRightSideRow_(e)}this.drawBottom_(),this.drawLeft_()},ft.Drawer.prototype.drawTop_=function(){var t=this.info_.topRow,e=t.elements;this.positionPreviousConnection_(),this.outlinePath_+=(0,B.moveBy)(t.xPos,this.info_.startY);for(var o=0,i;i=e[o];o++)E.Types.isLeftRoundedCorner(i)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topLeft:E.Types.isRightRoundedCorner(i)?this.outlinePath_+=this.constants_.OUTSIDE_CORNERS.topRight:E.Types.isPreviousConnection(i)&&i instanceof We.Connection?this.outlinePath_+=i.shape.pathLeft:E.Types.isHat(i)?this.outlinePath_+=this.constants_.START_HAT.path:E.Types.isSpacer(i)&&(this.outlinePath_+=(0,B.lineOnAxis)("h",i.width));this.outlinePath_+=(0,B.lineOnAxis)("v",t.height)},ft.Drawer.prototype.drawJaggedEdge_=function(t){this.outlinePath_+=this.constants_.JAGGED_TEETH.path+(0,B.lineOnAxis)("v",t.height-this.constants_.JAGGED_TEETH.height)},ft.Drawer.prototype.drawValueInput_=function(t){var e=t.getLastInput();this.positionExternalValueConnection_(t);var o=typeof e.shape.pathDown=="function"?e.shape.pathDown(e.height):e.shape.pathDown;this.outlinePath_+=(0,B.lineOnAxis)("H",e.xPos+e.width)+o+(0,B.lineOnAxis)("v",t.height-e.connectionHeight)},ft.Drawer.prototype.drawStatementInput_=function(t){var e=t.getLastInput(),o=e.xPos+e.notchOffset+e.shape.width;e=e.shape.pathRight+(0,B.lineOnAxis)("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop;var i=t.height-2*this.constants_.INSIDE_CORNERS.height;this.outlinePath_+=(0,B.lineOnAxis)("H",o)+e+(0,B.lineOnAxis)("v",i)+this.constants_.INSIDE_CORNERS.pathBottom+(0,B.lineOnAxis)("H",t.xPos+t.width),this.positionStatementInputConnection_(t)},ft.Drawer.prototype.drawRightSideRow_=function(t){this.outlinePath_+=(0,B.lineOnAxis)("V",t.yPos+t.height)},ft.Drawer.prototype.drawBottom_=function(){var t=this.info_.bottomRow,e=t.elements;this.positionNextConnection_();for(var o=0,i="",s=e.length-1,l;l=e[s];s--)E.Types.isNextConnection(l)&&l instanceof We.Connection?i+=l.shape.pathRight:E.Types.isLeftSquareCorner(l)?i+=(0,B.lineOnAxis)("H",t.xPos):E.Types.isLeftRoundedCorner(l)?i+=this.constants_.OUTSIDE_CORNERS.bottomLeft:E.Types.isRightRoundedCorner(l)?(i+=this.constants_.OUTSIDE_CORNERS.bottomRight,o=this.constants_.OUTSIDE_CORNERS.rightHeight):E.Types.isSpacer(l)&&(i+=(0,B.lineOnAxis)("h",-1*l.width));this.outlinePath_+=(0,B.lineOnAxis)("V",t.baseline-o),this.outlinePath_+=i},ft.Drawer.prototype.drawLeft_=function(){var t=this.info_.outputConnection;if(this.positionOutputConnection_(),t){var e=t.connectionOffsetY+t.height;t=typeof t.shape.pathUp=="function"?t.shape.pathUp(t.height):t.shape.pathUp,this.outlinePath_+=(0,B.lineOnAxis)("V",e)+t}this.outlinePath_+="z"},ft.Drawer.prototype.drawInternals_=function(){for(var t=0,e;e=this.info_.rows[t];t++)for(var o=0,i;i=e.elements[o];o++)E.Types.isInlineInput(i)?this.drawInlineInput_(i):(E.Types.isIcon(i)||E.Types.isField(i))&&this.layoutField_(i)},ft.Drawer.prototype.layoutField_=function(t){if(E.Types.isField(t))var e=t.field.getSvgRoot();else E.Types.isIcon(t)&&(e=t.icon.iconGroup_);var o=t.centerline-t.height/2,i=t.xPos,s="";this.info_.RTL&&(i=-(i+t.width),t.flipRtl&&(i+=t.width,s="scale(-1 1)")),E.Types.isIcon(t)?(e.setAttribute("display","block"),e.setAttribute("transform","translate("+i+","+o+")"),t.icon.computeIconLocation()):e.setAttribute("transform","translate("+i+","+o+")"+s),this.info_.isInsertionMarker&&e.setAttribute("display","none")},ft.Drawer.prototype.drawInlineInput_=function(t){var e=t.width,o=t.height,i=t.connectionOffsetY,s=t.connectionHeight+i;this.inlinePath_+=(0,B.moveTo)(t.xPos+t.connectionWidth,t.centerline-o/2)+(0,B.lineOnAxis)("v",i)+t.shape.pathDown+(0,B.lineOnAxis)("v",o-s)+(0,B.lineOnAxis)("h",e-t.connectionWidth)+(0,B.lineOnAxis)("v",-o)+"z",this.positionInlineInputConnection_(t)},ft.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var o=t.xPos+t.connectionWidth+t.connectionOffsetX;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e+t.connectionOffsetY)}},ft.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.statementEdge+e.notchOffset;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t.yPos)}},ft.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.width;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t.yPos)}},ft.Drawer.prototype.positionPreviousConnection_=function(){var t=this.info_.topRow;if(t.connection){var e=t.xPos+t.notchOffset;t.connection.connectionModel.setOffsetInBlock(this.info_.RTL?-e:e,0)}},ft.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,o=e.xPos;e.connectionModel.setOffsetInBlock(this.info_.RTL?-o:o,t.baseline)}},ft.Drawer.prototype.positionOutputConnection_=function(){if(this.info_.outputConnection){var t=this.info_.startX+this.info_.outputConnection.connectionOffsetX;this.block_.outputConnection.setOffsetInBlock(this.info_.RTL?-t:t,this.info_.outputConnection.connectionOffsetY)}};var vn={ExternalValueInput:function(t,e){Pe.InputConnection.call(this,t,e),this.type|=E.Types.EXTERNAL_VALUE_INPUT,this.height=0,this.height=this.connectedBlock?this.connectedBlockHeight-this.constants_.TAB_OFFSET_FROM_TOP-this.constants_.MEDIUM_PADDING:this.shape.height,this.width=this.shape.width+this.constants_.EXTERNAL_VALUE_INPUT_PADDING,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionHeight=this.shape.height,this.connectionWidth=this.shape.width}};n.$jscomp.inherits(vn.ExternalValueInput,Pe.InputConnection);var Gn={Hat:function(t){qt.Measurable.call(this,t),this.type|=E.Types.HAT,this.height=this.constants_.START_HAT.height,this.width=this.constants_.START_HAT.width,this.ascenderHeight=this.height}};n.$jscomp.inherits(Gn.Hat,qt.Measurable);var Ns={IPathObject:function(t,e){}},fi={Icon:function(t,e){qt.Measurable.call(this,t),this.icon=e,this.isVisible=e.isVisible(),this.type|=E.Types.ICON,t=e.getCorrectedSize(),this.height=t.height,this.width=t.width}};n.$jscomp.inherits(fi.Icon,qt.Measurable);var Oe={InRowSpacer:function(t,e){qt.Measurable.call(this,t),this.type=this.type|E.Types.SPACER|E.Types.IN_ROW_SPACER,this.width=e,this.height=this.constants_.SPACER_DEFAULT_HEIGHT}};n.$jscomp.inherits(Oe.InRowSpacer,qt.Measurable);var Sn={InlineInput:function(t,e){Pe.InputConnection.call(this,t,e),this.type|=E.Types.INLINE_INPUT,this.connectedBlock?(this.width=this.connectedBlockWidth,this.height=this.connectedBlockHeight):(this.height=this.constants_.EMPTY_INLINE_INPUT_HEIGHT,this.width=this.constants_.EMPTY_INLINE_INPUT_PADDING),this.connectionHeight=this.isDynamicShape?this.shape.height(this.height):this.shape.height,this.connectionWidth=this.isDynamicShape?this.shape.width(this.height):this.shape.width,this.connectedBlock||(this.width+=this.connectionWidth*(this.isDynamicShape?2:1)),this.connectionOffsetY=this.isDynamicShape?this.shape.connectionOffsetY(this.connectionHeight):this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=this.isDynamicShape?this.shape.connectionOffsetX(this.connectionWidth):0}};n.$jscomp.inherits(Sn.InlineInput,Pe.InputConnection);var bo={StatementInput:function(t,e){Pe.InputConnection.call(this,t,e),this.type|=E.Types.STATEMENT_INPUT,this.height=this.connectedBlock?this.connectedBlockHeight+this.constants_.STATEMENT_BOTTOM_SPACER:this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT,this.width=this.constants_.STATEMENT_INPUT_NOTCH_OFFSET+this.shape.width}};n.$jscomp.inherits(bo.StatementInput,Pe.InputConnection);var Zo={InputRow:function(t){Se.Row.call(this,t),this.type|=E.Types.INPUT_ROW,this.connectedBlockWidths=0}};n.$jscomp.inherits(Zo.InputRow,Se.Row),Zo.InputRow.prototype.measure=function(){this.width=this.minWidth,this.height=this.minHeight;for(var t=0,e=0;e<this.elements.length;e++){var o=this.elements[e];this.width+=o.width,E.Types.isInput(o)&&o instanceof Pe.InputConnection&&(E.Types.isStatementInput(o)&&o instanceof bo.StatementInput?t+=o.connectedBlockWidth:E.Types.isExternalInput(o)&&o instanceof vn.ExternalValueInput&&o.connectedBlockWidth!==0&&(t+=o.connectedBlockWidth-o.connectionWidth)),E.Types.isSpacer(o)||(this.height=Math.max(this.height,o.height))}this.connectedBlockWidths=t,this.widthWithConnectedBlocks=this.width+t},Zo.InputRow.prototype.endsWithElemSpacer=function(){return!this.hasExternalInput&&!this.hasStatement};var ki={JaggedEdge:function(t){qt.Measurable.call(this,t),this.type|=E.Types.JAGGED_EDGE,this.height=this.constants_.JAGGED_TEETH.height,this.width=this.constants_.JAGGED_TEETH.width}};n.$jscomp.inherits(ki.JaggedEdge,qt.Measurable);var A={ASTNode:function(t,e,o){if(!e)throw Error("Cannot create a node without a location.");this.type_=t,this.isConnection_=A.ASTNode.isConnectionType_(t),this.location_=e,this.wsCoordinate_=null,this.processParams_(o||null)}};A.ASTNode.prototype.processParams_=function(t){t&&t.wsCoordinate&&(this.wsCoordinate_=t.wsCoordinate)},A.ASTNode.prototype.getLocation=function(){return this.location_},A.ASTNode.prototype.getType=function(){return this.type_},A.ASTNode.prototype.getWsCoordinate=function(){return this.wsCoordinate_},A.ASTNode.prototype.isConnection=function(){return this.isConnection_},A.ASTNode.prototype.findNextForInput_=function(){var t=this.location_.getParentInput(),e=t.getSourceBlock();for(t=e.inputList.indexOf(t)+1;t<e.inputList.length;t++){for(var o=e.inputList[t],i=o.fieldRow,s=0;s<i.length;s++){var l=i[s];if(l.isClickable()||A.ASTNode.NAVIGATE_ALL_FIELDS)return A.ASTNode.createFieldNode(l)}if(o.connection)return A.ASTNode.createInputNode(o)}return null},A.ASTNode.prototype.findNextForField_=function(){var t=this.location_,e=t.getParentInput(),o=t.getSourceBlock(),i=o.inputList.indexOf(e);for(t=e.fieldRow.indexOf(t)+1;i<o.inputList.length;i++){e=o.inputList[i];for(var s=e.fieldRow;t<s.length;){if(s[t].isClickable()||A.ASTNode.NAVIGATE_ALL_FIELDS)return A.ASTNode.createFieldNode(s[t]);t++}if(t=0,e.connection)return A.ASTNode.createInputNode(e)}return null},A.ASTNode.prototype.findPrevForInput_=function(){for(var t=this.location_.getParentInput(),e=t.getSourceBlock(),o=e.inputList.indexOf(t);0<=o;o--){var i=e.inputList[o];if(i.connection&&i!==t)return A.ASTNode.createInputNode(i);i=i.fieldRow;for(var s=i.length-1;0<=s;s--){var l=i[s];if(l.isClickable()||A.ASTNode.NAVIGATE_ALL_FIELDS)return A.ASTNode.createFieldNode(l)}}return null},A.ASTNode.prototype.findPrevForField_=function(){var t=this.location_,e=t.getParentInput(),o=t.getSourceBlock(),i=o.inputList.indexOf(e);for(t=e.fieldRow.indexOf(t)-1;0<=i;i--){var s=o.inputList[i];if(s.connection&&s!==e)return A.ASTNode.createInputNode(s);for(s=s.fieldRow;-1<t;){if(s[t].isClickable()||A.ASTNode.NAVIGATE_ALL_FIELDS)return A.ASTNode.createFieldNode(s[t]);t--}0<=i-1&&(t=o.inputList[i-1].fieldRow.length-1)}return null},A.ASTNode.prototype.navigateBetweenStacks_=function(t){var e=this.getLocation();if(e.getSourceBlock&&(e=e.getSourceBlock()),!e||!e.workspace)return null;var o=e.getRootBlock();e=o.workspace.getTopBlocks(!0);for(var i=0;i<e.length;i++)if(o.id===e[i].id)return t=i+(t?1:-1),t===-1||t===e.length?null:A.ASTNode.createStackNode(e[t]);throw Error("Couldn't find "+(t?"next":"previous")+" stack?!")},A.ASTNode.prototype.findTopASTNodeForBlock_=function(t){var e=Vn(t);return e?A.ASTNode.createConnectionNode(e):A.ASTNode.createBlockNode(t)},A.ASTNode.prototype.getOutAstNodeForBlock_=function(t){if(!t)return null;t=t.getTopStackBlock();var e=Vn(t);return e&&e.targetConnection&&e.targetConnection.getParentInput()?A.ASTNode.createInputNode(e.targetConnection.getParentInput()):A.ASTNode.createStackNode(t)},A.ASTNode.prototype.findFirstFieldOrInput_=function(t){t=t.inputList;for(var e=0;e<t.length;e++){for(var o=t[e],i=o.fieldRow,s=0;s<i.length;s++){var l=i[s];if(l.isClickable()||A.ASTNode.NAVIGATE_ALL_FIELDS)return A.ASTNode.createFieldNode(l)}if(o.connection)return A.ASTNode.createInputNode(o)}return null},A.ASTNode.prototype.getSourceBlock=function(){return this.getType()===A.ASTNode.types.BLOCK?this.getLocation():this.getType()===A.ASTNode.types.STACK?this.getLocation():this.getType()===A.ASTNode.types.WORKSPACE?null:this.getLocation().getSourceBlock()},A.ASTNode.prototype.next=function(){switch(this.type_){case A.ASTNode.types.STACK:return this.navigateBetweenStacks_(!0);case A.ASTNode.types.OUTPUT:return A.ASTNode.createBlockNode(this.location_.getSourceBlock());case A.ASTNode.types.FIELD:return this.findNextForField_();case A.ASTNode.types.INPUT:return this.findNextForInput_();case A.ASTNode.types.BLOCK:return A.ASTNode.createConnectionNode(this.location_.nextConnection);case A.ASTNode.types.PREVIOUS:return A.ASTNode.createBlockNode(this.location_.getSourceBlock());case A.ASTNode.types.NEXT:return A.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},A.ASTNode.prototype.in=function(){switch(this.type_){case A.ASTNode.types.WORKSPACE:var t=this.location_.getTopBlocks(!0);if(0<t.length)return A.ASTNode.createStackNode(t[0]);break;case A.ASTNode.types.STACK:return this.findTopASTNodeForBlock_(this.location_);case A.ASTNode.types.BLOCK:return this.findFirstFieldOrInput_(this.location_);case A.ASTNode.types.INPUT:return A.ASTNode.createConnectionNode(this.location_.targetConnection)}return null},A.ASTNode.prototype.prev=function(){switch(this.type_){case A.ASTNode.types.STACK:return this.navigateBetweenStacks_(!1);case A.ASTNode.types.FIELD:return this.findPrevForField_();case A.ASTNode.types.INPUT:return this.findPrevForInput_();case A.ASTNode.types.BLOCK:var t=Vn(this.location_);return A.ASTNode.createConnectionNode(t);case A.ASTNode.types.PREVIOUS:if((t=this.location_.targetConnection)&&!t.getParentInput())return A.ASTNode.createConnectionNode(t);break;case A.ASTNode.types.NEXT:return A.ASTNode.createBlockNode(this.location_.getSourceBlock())}return null},A.ASTNode.prototype.out=function(){switch(this.type_){case A.ASTNode.types.STACK:var t=this.location_,e=t.getRelativeToSurfaceXY();return e=new H.Coordinate(e.x,e.y+A.ASTNode.DEFAULT_OFFSET_Y),A.ASTNode.createWorkspaceNode(t.workspace,e);case A.ASTNode.types.OUTPUT:return t=this.location_,(e=t.targetConnection)?A.ASTNode.createConnectionNode(e):A.ASTNode.createStackNode(t.getSourceBlock());case A.ASTNode.types.FIELD:return A.ASTNode.createBlockNode(this.location_.getSourceBlock());case A.ASTNode.types.INPUT:return A.ASTNode.createBlockNode(this.location_.getSourceBlock());case A.ASTNode.types.BLOCK:return this.getOutAstNodeForBlock_(this.location_);case A.ASTNode.types.PREVIOUS:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock());case A.ASTNode.types.NEXT:return this.getOutAstNodeForBlock_(this.location_.getSourceBlock())}return null},A.ASTNode.isConnectionType_=function(t){switch(t){case A.ASTNode.types.PREVIOUS:case A.ASTNode.types.NEXT:case A.ASTNode.types.INPUT:case A.ASTNode.types.OUTPUT:return!0}return!1},A.ASTNode.createFieldNode=function(t){return t?new A.ASTNode(A.ASTNode.types.FIELD,t):null},A.ASTNode.createConnectionNode=function(t){if(!t)return null;var e=t.type;return e===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||e===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&t.getParentInput()?A.ASTNode.createInputNode(t.getParentInput()):e===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?new A.ASTNode(A.ASTNode.types.NEXT,t):e===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?new A.ASTNode(A.ASTNode.types.OUTPUT,t):e===n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?new A.ASTNode(A.ASTNode.types.PREVIOUS,t):null},A.ASTNode.createInputNode=function(t){return t&&t.connection?new A.ASTNode(A.ASTNode.types.INPUT,t.connection):null},A.ASTNode.createBlockNode=function(t){return t?new A.ASTNode(A.ASTNode.types.BLOCK,t):null},A.ASTNode.createStackNode=function(t){return t?new A.ASTNode(A.ASTNode.types.STACK,t):null},A.ASTNode.createWorkspaceNode=function(t,e){return e&&t?new A.ASTNode(A.ASTNode.types.WORKSPACE,t,{wsCoordinate:e}):null},A.ASTNode.createTopNode=function(t){var e=Vn(t);return e?A.ASTNode.createConnectionNode(e):A.ASTNode.createBlockNode(t)},A.ASTNode.types={FIELD:"field",BLOCK:"block",INPUT:"input",OUTPUT:"output",NEXT:"next",PREVIOUS:"previous",STACK:"stack",WORKSPACE:"workspace"},A.ASTNode.NAVIGATE_ALL_FIELDS=!1,A.ASTNode.DEFAULT_OFFSET_Y=-20;var Vn=function(t){var e=t.outputConnection;return(!e||t.previousConnection&&t.previousConnection.isConnected())&&(e=t.previousConnection),e},Bn={MarkerMove:function(t,e,o,i){var s=t?t.workspace.id:void 0;i&&i.getType()===A.ASTNode.types.WORKSPACE&&(s=i.getLocation().id),pt.UiBase.call(this,s),this.blockId=t?t.id:null,this.oldNode=o,this.newNode=i,this.isCursor=e,this.type=p.MARKER_MOVE}};n.$jscomp.inherits(Bn.MarkerMove,pt.UiBase),Bn.MarkerMove.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.isCursor=this.isCursor,t.blockId=this.blockId,t.oldNode=this.oldNode,t.newNode=this.newNode,t},Bn.MarkerMove.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.isCursor=t.isCursor,this.blockId=t.blockId,this.oldNode=t.oldNode,this.newNode=t.newNode},(0,b.register)(b.Type.EVENT,p.MARKER_MOVE,Bn.MarkerMove);var _t={},Ds="blocklyCursor",Ls="blocklyMarker",ws=.75;_t.MarkerSvg=function(t,e,o){this.workspace_=t,this.marker_=o,this.parent_=null,this.constants_=e,this.currentMarkerSvg=null,t=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR,this.colour_=o.colour||t,this.markerSvgRect_=this.markerSvgLine_=this.markerInput_=this.markerBlock_=this.svgGroup_=this.markerSvg_=null},_t.MarkerSvg.prototype.getSvgRoot=function(){return this.svgGroup_},_t.MarkerSvg.prototype.getMarker=function(){return this.marker_},_t.MarkerSvg.prototype.isCursor=function(){return this.marker_.type==="cursor"},_t.MarkerSvg.prototype.createDom=function(){var t=this.isCursor()?Ds:Ls;return this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{class:t},null),this.createDomInternal_(),this.svgGroup_},_t.MarkerSvg.prototype.setParent_=function(t){this.isCursor()?(this.parent_&&this.parent_.setCursorSvg(null),t.setCursorSvg(this.getSvgRoot())):(this.parent_&&this.parent_.setMarkerSvg(null),t.setMarkerSvg(this.getSvgRoot())),this.parent_=t},_t.MarkerSvg.prototype.draw=function(t,e){if(e){this.constants_=this.workspace_.getRenderer().getConstants();var o=this.isCursor()?this.constants_.CURSOR_COLOUR:this.constants_.MARKER_COLOUR;this.colour_=this.marker_.colour||o,this.applyColour_(e),this.showAtLocation_(e),this.fireMarkerEvent_(t,e),t=this.currentMarkerSvg.childNodes[0],t!==void 0&&t.beginElement&&t.beginElement()}else this.hide()},_t.MarkerSvg.prototype.showAtLocation_=function(t){var e=t.getLocation().type;t.getType()===A.ASTNode.types.BLOCK?this.showWithBlock_(t):t.getType()===A.ASTNode.types.OUTPUT?this.showWithOutput_(t):e===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE?this.showWithInput_(t):e===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT?this.showWithNext_(t):t.getType()===A.ASTNode.types.PREVIOUS?this.showWithPrevious_(t):t.getType()===A.ASTNode.types.FIELD?this.showWithField_(t):t.getType()===A.ASTNode.types.WORKSPACE?this.showWithCoordinates_(t):t.getType()===A.ASTNode.types.STACK&&this.showWithStack_(t)},_t.MarkerSvg.prototype.showWithBlockPrevOutput_=function(t){t=t.getSourceBlock();var e=t.width,o=t.height,i=o*ws,s=this.constants_.CURSOR_BLOCK_PADDING;t.previousConnection?(o=this.constants_.shapeFor(t.previousConnection),this.positionPrevious_(e,s,i,o)):t.outputConnection?(i=this.constants_.shapeFor(t.outputConnection),this.positionOutput_(e,o,i)):this.positionBlock_(e,s,i),this.setParent_(t),this.showCurrent_()},_t.MarkerSvg.prototype.showWithBlock_=function(t){this.showWithBlockPrevOutput_(t)},_t.MarkerSvg.prototype.showWithPrevious_=function(t){this.showWithBlockPrevOutput_(t)},_t.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithBlockPrevOutput_(t)},_t.MarkerSvg.prototype.showWithCoordinates_=function(t){var e=t.getWsCoordinate();t=e.x,e=e.y,this.workspace_.RTL&&(t-=this.constants_.CURSOR_WS_WIDTH),this.positionLine_(t,e,this.constants_.CURSOR_WS_WIDTH),this.setParent_(this.workspace_),this.showCurrent_()},_t.MarkerSvg.prototype.showWithField_=function(t){t=t.getLocation();var e=t.getSize().width,o=t.getSize().height;this.positionRect_(0,0,e,o),this.setParent_(t),this.showCurrent_()},_t.MarkerSvg.prototype.showWithInput_=function(t){t=t.getLocation();var e=t.getSourceBlock();this.positionInput_(t),this.setParent_(e),this.showCurrent_()},_t.MarkerSvg.prototype.showWithNext_=function(t){var e=t.getLocation();t=e.getSourceBlock();var o=0;e=e.getOffsetInBlock().y;var i=t.getHeightWidth().width;this.workspace_.RTL&&(o=-i),this.positionLine_(o,e,i),this.setParent_(t),this.showCurrent_()},_t.MarkerSvg.prototype.showWithStack_=function(t){t=t.getLocation();var e=t.getHeightWidth(),o=e.width+this.constants_.CURSOR_STACK_PADDING;e=e.height+this.constants_.CURSOR_STACK_PADDING;var i=-this.constants_.CURSOR_STACK_PADDING/2,s=-this.constants_.CURSOR_STACK_PADDING/2,l=i;this.workspace_.RTL&&(l=-(o+i)),this.positionRect_(l,s,o,e),this.setParent_(t),this.showCurrent_()},_t.MarkerSvg.prototype.showCurrent_=function(){this.hide(),this.currentMarkerSvg.style.display=""},_t.MarkerSvg.prototype.positionBlock_=function(t,e,o){t=(0,B.moveBy)(-e,o)+(0,B.lineOnAxis)("V",-e)+(0,B.lineOnAxis)("H",t+2*e)+(0,B.lineOnAxis)("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},_t.MarkerSvg.prototype.positionInput_=function(t){var e=t.getOffsetInBlock().x,o=t.getOffsetInBlock().y;t=(0,B.moveTo)(0,0)+this.constants_.shapeFor(t).pathDown,this.markerInput_.setAttribute("d",t),this.markerInput_.setAttribute("transform","translate("+e+","+o+")"+(this.workspace_.RTL?" scale(-1 1)":"")),this.currentMarkerSvg=this.markerInput_},_t.MarkerSvg.prototype.positionLine_=function(t,e,o){this.markerSvgLine_.setAttribute("x",t),this.markerSvgLine_.setAttribute("y",e),this.markerSvgLine_.setAttribute("width",o),this.currentMarkerSvg=this.markerSvgLine_},_t.MarkerSvg.prototype.positionOutput_=function(t,e,o){t=(0,B.moveBy)(t,0)+(0,B.lineOnAxis)("h",-(t-o.width))+(0,B.lineOnAxis)("v",this.constants_.TAB_OFFSET_FROM_TOP)+o.pathDown+(0,B.lineOnAxis)("V",e)+(0,B.lineOnAxis)("H",t),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},_t.MarkerSvg.prototype.positionPrevious_=function(t,e,o,i){t=(0,B.moveBy)(-e,o)+(0,B.lineOnAxis)("V",-e)+(0,B.lineOnAxis)("H",this.constants_.NOTCH_OFFSET_LEFT)+i.pathLeft+(0,B.lineOnAxis)("H",t+2*e)+(0,B.lineOnAxis)("V",o),this.markerBlock_.setAttribute("d",t),this.workspace_.RTL&&this.flipRtl_(this.markerBlock_),this.currentMarkerSvg=this.markerBlock_},_t.MarkerSvg.prototype.positionRect_=function(t,e,o,i){this.markerSvgRect_.setAttribute("x",t),this.markerSvgRect_.setAttribute("y",e),this.markerSvgRect_.setAttribute("width",o),this.markerSvgRect_.setAttribute("height",i),this.currentMarkerSvg=this.markerSvgRect_},_t.MarkerSvg.prototype.flipRtl_=function(t){t.setAttribute("transform","scale(-1 1)")},_t.MarkerSvg.prototype.hide=function(){this.markerSvgLine_.style.display="none",this.markerSvgRect_.style.display="none",this.markerInput_.style.display="none",this.markerBlock_.style.display="none"},_t.MarkerSvg.prototype.fireMarkerEvent_=function(t,e){var o=e.getSourceBlock();t=new((0,p.get)(p.MARKER_MOVE))(o,this.isCursor(),t,e),(0,p.fire)(t)},_t.MarkerSvg.prototype.getBlinkProperties_=function(){return{attributeType:"XML",attributeName:"fill",dur:"1s",values:this.colour_+";transparent;transparent;",repeatCount:"indefinite"}},_t.MarkerSvg.prototype.createDomInternal_=function(){if(this.markerSvg_=(0,_.createSvgElement)(R.Svg.G,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT},this.svgGroup_),this.markerSvgLine_=(0,_.createSvgElement)(R.Svg.RECT,{width:this.constants_.CURSOR_WS_WIDTH,height:this.constants_.WS_CURSOR_HEIGHT,style:"display: none"},this.markerSvg_),this.markerSvgRect_=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyVerticalMarker",rx:10,ry:10,style:"display: none"},this.markerSvg_),this.markerInput_=(0,_.createSvgElement)(R.Svg.PATH,{transform:"",style:"display: none"},this.markerSvg_),this.markerBlock_=(0,_.createSvgElement)(R.Svg.PATH,{transform:"",style:"display: none",fill:"none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();(0,_.createSvgElement)(R.Svg.ANIMATE,t,this.markerSvgLine_),(0,_.createSvgElement)(R.Svg.ANIMATE,t,this.markerInput_),t.attributeName="stroke",(0,_.createSvgElement)(R.Svg.ANIMATE,t,this.markerBlock_)}return this.markerSvg_},_t.MarkerSvg.prototype.applyColour_=function(t){this.markerSvgLine_.setAttribute("fill",this.colour_),this.markerSvgRect_.setAttribute("stroke",this.colour_),this.markerInput_.setAttribute("fill",this.colour_),this.markerBlock_.setAttribute("stroke",this.colour_),this.isCursor()&&(t=this.colour_+";transparent;transparent;",this.markerSvgLine_.firstChild.setAttribute("values",t),this.markerInput_.firstChild.setAttribute("values",t),this.markerBlock_.firstChild.setAttribute("values",t))},_t.MarkerSvg.prototype.dispose=function(){this.svgGroup_&&(0,_.removeNode)(this.svgGroup_)};var Ei={NextConnection:function(t,e){We.Connection.call(this,t,e),this.type|=E.Types.NEXT_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}};n.$jscomp.inherits(Ei.NextConnection,We.Connection);var vi={OutputConnection:function(t,e){We.Connection.call(this,t,e),this.type|=E.Types.OUTPUT_CONNECTION,this.height=this.isDynamicShape?0:this.shape.height,this.startX=this.width=this.isDynamicShape?0:this.shape.width,this.connectionOffsetY=this.constants_.TAB_OFFSET_FROM_TOP,this.connectionOffsetX=0}};n.$jscomp.inherits(vi.OutputConnection,We.Connection);var At={PathObject:function(t,e,o){this.constants=o,this.svgRoot=t,this.svgPath=(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyPath"},this.svgRoot),this.style=e,this.markerSvg=this.cursorSvg=null}};At.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t)},At.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)")},At.PathObject.prototype.setCursorSvg=function(t){t?(this.svgRoot.appendChild(t),this.cursorSvg=t):this.cursorSvg=null},At.PathObject.prototype.setMarkerSvg=function(t){t?(this.cursorSvg?this.svgRoot.insertBefore(t,this.cursorSvg):this.svgRoot.appendChild(t),this.markerSvg=t):this.markerSvg=null},At.PathObject.prototype.applyColour=function(t){this.svgPath.setAttribute("stroke",this.style.colourTertiary),this.svgPath.setAttribute("fill",this.style.colourPrimary),this.updateShadow_(t.isShadow()),this.updateDisabled_(!t.isEnabled()||t.getInheritedDisabled())},At.PathObject.prototype.setStyle=function(t){this.style=t},At.PathObject.prototype.setClass_=function(t,e){e?(0,_.addClass)(this.svgRoot,t):(0,_.removeClass)(this.svgRoot,t)},At.PathObject.prototype.updateHighlighted=function(t){t?this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"):this.svgPath.setAttribute("filter","none")},At.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},At.PathObject.prototype.updateDisabled_=function(t){this.setClass_("blocklyDisabled",t),t&&this.svgPath.setAttribute("fill","url(#"+this.constants.disabledPatternId+")")},At.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t)},At.PathObject.prototype.updateDraggingDelete=function(t){this.setClass_("blocklyDraggingDelete",t)},At.PathObject.prototype.updateInsertionMarker=function(t){this.setClass_("blocklyInsertionMarker",t)},At.PathObject.prototype.updateMovable=function(t){this.setClass_("blocklyDraggable",t)},At.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t)},At.PathObject.prototype.updateShapeForInputHighlight=function(t,e){};var Si={PreviousConnection:function(t,e){We.Connection.call(this,t,e),this.type|=E.Types.PREVIOUS_CONNECTION,this.height=this.shape.height,this.width=this.shape.width}};n.$jscomp.inherits(Si.PreviousConnection,We.Connection),n.module$exports$Blockly$Input={Input:function(t,e,o,i){if(t!==n.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&!e)throw Error("Value inputs and statement inputs must have non-empty name.");this.type=t,this.name=e,this.sourceBlock_=o,this.connection=i,this.fieldRow=[],this.align=n.module$exports$Blockly$Input.Align.LEFT,this.visible_=!0}},n.module$exports$Blockly$Input.Input.prototype.getSourceBlock=function(){return this.sourceBlock_},n.module$exports$Blockly$Input.Input.prototype.appendField=function(t,e){return this.insertFieldAt(this.fieldRow.length,t,e),this},n.module$exports$Blockly$Input.Input.prototype.insertFieldAt=function(t,e,o){if(0>t||t>this.fieldRow.length)throw Error("index "+t+" out of bounds.");return(e||e===""&&o)&&(typeof e=="string"&&(e=(0,$e.fromJson)({type:"field_label",text:e})),e.setSourceBlock(this.sourceBlock_),this.sourceBlock_.rendered&&(e.init(),e.applyColour()),e.name=o,e.setVisible(this.isVisible()),e.prefixField&&(t=this.insertFieldAt(t,e.prefixField)),this.fieldRow.splice(t,0,e),t++,e.suffixField&&(t=this.insertFieldAt(t,e.suffixField)),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours())),t},n.module$exports$Blockly$Input.Input.prototype.removeField=function(t,e){for(var o=0,i;i=this.fieldRow[o];o++)if(i.name===t)return i.dispose(),this.fieldRow.splice(o,1),this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render(),this.sourceBlock_.bumpNeighbours()),!0;if(e)return!1;throw Error('Field "'+t+'" not found.')},n.module$exports$Blockly$Input.Input.prototype.isVisible=function(){return this.visible_},n.module$exports$Blockly$Input.Input.prototype.setVisible=function(t){var e=[];if(this.visible_===t)return e;this.visible_=t;for(var o=0,i;i=this.fieldRow[o];o++)i.setVisible(t);return this.connection&&(this.connection=this.connection,t?e=this.connection.startTrackingAll():this.connection.stopTrackingAll(),o=this.connection.targetBlock())&&(o.getSvgRoot().style.display=t?"block":"none"),e},n.module$exports$Blockly$Input.Input.prototype.markDirty=function(){for(var t=0,e;e=this.fieldRow[t];t++)e.markDirty()},n.module$exports$Blockly$Input.Input.prototype.setCheck=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setCheck(t),this},n.module$exports$Blockly$Input.Input.prototype.setAlign=function(t){return this.align=t,this.sourceBlock_.rendered&&(this.sourceBlock_=this.sourceBlock_,this.sourceBlock_.render()),this},n.module$exports$Blockly$Input.Input.prototype.setShadowDom=function(t){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.setShadowDom(t),this},n.module$exports$Blockly$Input.Input.prototype.getShadowDom=function(){if(!this.connection)throw Error("This input does not have a connection.");return this.connection.getShadowDom()},n.module$exports$Blockly$Input.Input.prototype.init=function(){if(this.sourceBlock_.workspace.rendered)for(var t=0;t<this.fieldRow.length;t++)this.fieldRow[t].init()},n.module$exports$Blockly$Input.Input.prototype.dispose=function(){for(var t=0,e;e=this.fieldRow[t];t++)e.dispose();this.connection&&this.connection.dispose(),this.sourceBlock_=null},n.module$exports$Blockly$Input.Align={LEFT:-1,CENTRE:0,RIGHT:1},n.module$exports$Blockly$Input.Input.Align=n.module$exports$Blockly$Input.Align;var Qo={RoundCorner:function(t,e){qt.Measurable.call(this,t),this.type=(e&&e!=="left"?E.Types.RIGHT_ROUND_CORNER:E.Types.LEFT_ROUND_CORNER)|E.Types.CORNER,this.width=this.constants_.CORNER_RADIUS,this.height=this.constants_.CORNER_RADIUS/2}};n.$jscomp.inherits(Qo.RoundCorner,qt.Measurable);var In={SpacerRow:function(t,e,o){Se.Row.call(this,t),this.type=this.type|E.Types.SPACER|E.Types.BETWEEN_ROW_SPACER,this.width=o,this.height=e,this.precedesStatement=this.followsStatement=!1,this.widthWithConnectedBlocks=0,this.elements=[new Oe.InRowSpacer(this.constants_,o)]}};n.$jscomp.inherits(In.SpacerRow,Se.Row),In.SpacerRow.prototype.measure=function(){};var tn={SquareCorner:function(t,e){qt.Measurable.call(this,t),this.type=(e&&e!=="left"?E.Types.RIGHT_SQUARE_CORNER:E.Types.LEFT_SQUARE_CORNER)|E.Types.CORNER,this.width=this.height=this.constants_.NO_PADDING}};n.$jscomp.inherits(tn.SquareCorner,qt.Measurable);var ro={TopRow:function(t){Se.Row.call(this,t),this.type|=E.Types.TOP_ROW,this.ascenderHeight=this.capline=0,this.hasPreviousConnection=!1,this.connection=null}};n.$jscomp.inherits(ro.TopRow,Se.Row),ro.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?t.hat==="cap":this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection,o=t.getPreviousBlock();return!!t.outputConnection||e||(o?o.getNextBlock()===t:!1)},ro.TopRow.prototype.hasRightSquareCorner=function(t){return!0},ro.TopRow.prototype.measure=function(){for(var t=0,e=0,o=0,i=0;i<this.elements.length;i++){var s=this.elements[i];e+=s.width,E.Types.isSpacer(s)||(E.Types.isHat(s)&&s instanceof Gn.Hat?o=Math.max(o,s.ascenderHeight):t=Math.max(t,s.height))}this.width=Math.max(this.minWidth,e),this.height=Math.max(this.minHeight,t)+o,this.capline=this.ascenderHeight=o,this.widthWithConnectedBlocks=this.width},ro.TopRow.prototype.startsWithElemSpacer=function(){return!1},ro.TopRow.prototype.endsWithElemSpacer=function(){return!1};var ht={RenderInfo:function(t,e){this.block_=e,this.renderer_=t,this.constants_=this.renderer_.getConstants(),this.outputConnection=e.outputConnection?new vi.OutputConnection(this.constants_,e.outputConnection):null,this.isInline=e.getInputsInline()&&!e.isCollapsed(),this.isCollapsed=e.isCollapsed(),this.isInsertionMarker=e.isInsertionMarker(),this.RTL=e.RTL,this.statementEdge=this.width=this.widthWithChildren=this.height=0,this.rows=[],this.inputRows=[],this.hiddenIcons=[],this.topRow=new ro.TopRow(this.constants_),this.bottomRow=new io.BottomRow(this.constants_),this.startY=this.startX=0}};ht.RenderInfo.prototype.getRenderer=function(){return this.renderer_},ht.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},ht.RenderInfo.prototype.createRows_=function(){this.populateTopRow_(),this.rows.push(this.topRow);var t=new Zo.InputRow(this.constants_);this.inputRows.push(t);for(var e=this.block_.getIcons(),o=0,i;i=e[o];o++){var s=new fi.Icon(this.constants_,i);this.isCollapsed&&i.collapseHidden?this.hiddenIcons.push(s):t.elements.push(s)}for(i=null,e=0;o=this.block_.inputList[e];e++)if(o.isVisible()){for(this.shouldStartNewRow_(o,i)&&(this.rows.push(t),t=new Zo.InputRow(this.constants_),this.inputRows.push(t)),i=0;s=o.fieldRow[i];i++)t.elements.push(new $o.Field(this.constants_,s,o));this.addInput_(o,t),i=o}this.isCollapsed&&(t.hasJaggedEdge=!0,t.elements.push(new ki.JaggedEdge(this.constants_))),(t.elements.length||t.hasDummyInput)&&this.rows.push(t),this.populateBottomRow_(),this.rows.push(this.bottomRow)},ht.RenderInfo.prototype.populateTopRow_=function(){var t=!!this.block_.previousConnection,e=(this.block_.hat?this.block_.hat==="cap":this.constants_.ADD_START_HATS)&&!this.outputConnection&&!t,o=this.topRow.hasLeftSquareCorner(this.block_)?tn.SquareCorner:Qo.RoundCorner;this.topRow.elements.push(new o(this.constants_)),e?(t=new Gn.Hat(this.constants_),this.topRow.elements.push(t),this.topRow.capline=t.ascenderHeight):t&&(this.topRow.hasPreviousConnection=!0,this.topRow.connection=new Si.PreviousConnection(this.constants_,this.block_.previousConnection),this.topRow.elements.push(this.topRow.connection)),this.block_.inputList.length&&this.block_.inputList[0].type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&!this.block_.isCollapsed()?this.topRow.minHeight=this.constants_.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT:this.topRow.minHeight=this.constants_.TOP_ROW_MIN_HEIGHT,o=this.topRow.hasRightSquareCorner(this.block_)?tn.SquareCorner:Qo.RoundCorner,this.topRow.elements.push(new o(this.constants_,"right"))},ht.RenderInfo.prototype.populateBottomRow_=function(){this.bottomRow.hasNextConnection=!!this.block_.nextConnection,this.bottomRow.minHeight=this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?this.constants_.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT:this.constants_.BOTTOM_ROW_MIN_HEIGHT,this.bottomRow.hasLeftSquareCorner(this.block_)?this.bottomRow.elements.push(new tn.SquareCorner(this.constants_)):this.bottomRow.elements.push(new Qo.RoundCorner(this.constants_)),this.bottomRow.hasNextConnection&&(this.bottomRow.connection=new Ei.NextConnection(this.constants_,this.block_.nextConnection),this.bottomRow.elements.push(this.bottomRow.connection)),this.bottomRow.hasRightSquareCorner(this.block_)?this.bottomRow.elements.push(new tn.SquareCorner(this.constants_,"right")):this.bottomRow.elements.push(new Qo.RoundCorner(this.constants_,"right"))},ht.RenderInfo.prototype.addInput_=function(t,e){this.isInline&&t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new Sn.InlineInput(this.constants_,t)),e.hasInlineInput=!0):t.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?(e.elements.push(new bo.StatementInput(this.constants_,t)),e.hasStatement=!0):t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new vn.ExternalValueInput(this.constants_,t)),e.hasExternalInput=!0):t.type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&(e.minHeight=Math.max(e.minHeight,t.getSourceBlock()&&t.getSourceBlock().isShadow()?this.constants_.DUMMY_INPUT_SHADOW_MIN_HEIGHT:this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),e.align===null&&(e.align=t.align)},ht.RenderInfo.prototype.shouldStartNewRow_=function(t,e){return e?t.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||e.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?!0:t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE||t.type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY?!this.isInline:!1:!1},ht.RenderInfo.prototype.addElemSpacing_=function(){for(var t=0,e;e=this.rows[t];t++){var o=e.elements;if(e.elements=[],e.startsWithElemSpacer()&&e.elements.push(new Oe.InRowSpacer(this.constants_,this.getInRowSpacing_(null,o[0]))),o.length){for(var i=0;i<o.length-1;i++){e.elements.push(o[i]);var s=this.getInRowSpacing_(o[i],o[i+1]);e.elements.push(new Oe.InRowSpacer(this.constants_,s))}e.elements.push(o[o.length-1]),e.endsWithElemSpacer()&&e.elements.push(new Oe.InRowSpacer(this.constants_,this.getInRowSpacing_(o[o.length-1],null)))}}},ht.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t&&e&&E.Types.isStatementInput(e))return this.constants_.STATEMENT_INPUT_PADDING_LEFT;if(t&&E.Types.isInput(t)&&!e){if(E.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(E.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(E.Types.isStatementInput(t))return this.constants_.NO_PADDING}return t&&E.Types.isLeftSquareCorner(t)&&e&&(E.Types.isPreviousConnection(e)||E.Types.isNextConnection(e))?e.notchOffset:t&&E.Types.isLeftRoundedCorner(t)&&e&&(E.Types.isPreviousConnection(e)||E.Types.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},ht.RenderInfo.prototype.computeBounds_=function(){for(var t=0,e=0,o=0,i=0,s;s=this.rows[i];i++){if(s.measure(),e=Math.max(e,s.width),s.hasStatement){var l=s.getLastInput();t=Math.max(t,s.width-l.width)}o=Math.max(o,s.widthWithConnectedBlocks)}for(this.statementEdge=t,this.width=e,t=0;i=this.rows[t];t++)i.hasStatement&&(i.statementEdge=this.statementEdge);this.widthWithChildren=Math.max(e,o),this.outputConnection&&(this.startX=this.outputConnection.width,this.width+=this.outputConnection.width,this.widthWithChildren+=this.outputConnection.width)},ht.RenderInfo.prototype.alignRowElements_=function(){for(var t=0,e;e=this.rows[t];t++)if(e.hasStatement)this.alignStatementRow_(e);else{var o=e.width;o=this.getDesiredRowWidth_(e)-o,0<o&&this.addAlignmentPadding_(e,o),E.Types.isTopOrBottomRow(e)&&(e.widthWithConnectedBlocks=e.width)}},ht.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.width-this.startX},ht.RenderInfo.prototype.addAlignmentPadding_=function(t,e){var o=t.getFirstSpacer(),i=t.getLastSpacer();(t.hasExternalInput||t.hasStatement)&&(t.widthWithConnectedBlocks+=e),t.align===n.module$exports$Blockly$Input.Align.LEFT?i.width+=e:t.align===n.module$exports$Blockly$Input.Align.CENTRE?(o.width+=e/2,i.width+=e/2):t.align===n.module$exports$Blockly$Input.Align.RIGHT?o.width+=e:i.width+=e,t.width+=e},ht.RenderInfo.prototype.alignStatementRow_=function(t){var e=t.getLastInput(),o=t.width-e.width,i=this.statementEdge;o=i-o,0<o&&this.addAlignmentPadding_(t,o),o=t.width,i=this.getDesiredRowWidth_(t),e.width+=i-o,e.height=Math.max(e.height,t.height),t.width+=i-o,t.widthWithConnectedBlocks=Math.max(t.width,this.statementEdge+t.connectedBlockWidths)},ht.RenderInfo.prototype.addRowSpacing_=function(){var t=this.rows;this.rows=[];for(var e=0;e<t.length;e++)this.rows.push(t[e]),e!==t.length-1&&this.rows.push(this.makeSpacerRow_(t[e],t[e+1]))},ht.RenderInfo.prototype.makeSpacerRow_=function(t,e){var o=this.getSpacerRowHeight_(t,e),i=this.getSpacerRowWidth_(t,e);return o=new In.SpacerRow(this.constants_,o,i),t.hasStatement&&(o.followsStatement=!0),e.hasStatement&&(o.precedesStatement=!0),o},ht.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){return this.width-this.startX},ht.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return this.constants_.MEDIUM_PADDING},ht.RenderInfo.prototype.getElemCenterline_=function(t,e){return E.Types.isSpacer(e)?t.yPos+e.height/2:E.Types.isBottomRow(t)?(t=t.yPos+t.height-t.descenderHeight,E.Types.isNextConnection(e)?t+e.height/2:t-e.height/2):E.Types.isTopRow(t)?E.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2:t.yPos+t.height/2},ht.RenderInfo.prototype.recordElemPositions_=function(t){for(var e=t.xPos,o=0,i;i=t.elements[o];o++)E.Types.isSpacer(i)&&(i.height=t.height),i.xPos=e,i.centerline=this.getElemCenterline_(t,i),e+=i.width},ht.RenderInfo.prototype.finalize_=function(){for(var t=0,e=0,o=0,i;i=this.rows[o];o++)i.yPos=e,i.xPos=this.startX,e+=i.height,t=Math.max(t,i.widthWithConnectedBlocks),this.recordElemPositions_(i);this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.widthWithChildren=t+this.startX,this.height=e,this.startY=this.topRow.capline,this.bottomRow.baseline=e-this.bottomRow.descenderHeight};var bt={Renderer:function(t){this.name=t,this.overrides=this.constants_=null}};bt.Renderer.prototype.getClassName=function(){return this.name+"-renderer"},bt.Renderer.prototype.init=function(t,e){this.constants_=this.makeConstants_(),e&&(this.overrides=e,(0,n.module$exports$Blockly$utils$object.mixin)(this.constants_,e)),this.constants_.setTheme(t),this.constants_.init()},bt.Renderer.prototype.createDom=function(t,e){this.constants_.createDom(t,this.name+"-"+e.name,"."+this.getClassName()+"."+e.getClassName())},bt.Renderer.prototype.refreshDom=function(t,e){var o=this.getConstants();o.dispose(),this.constants_=this.makeConstants_(),this.overrides&&(0,n.module$exports$Blockly$utils$object.mixin)(this.constants_,this.overrides),this.constants_.randomIdentifier=o.randomIdentifier,this.constants_.setTheme(e),this.constants_.init(),this.createDom(t,e)},bt.Renderer.prototype.dispose=function(){this.constants_&&this.constants_.dispose()},bt.Renderer.prototype.makeConstants_=function(){return new Tt.ConstantProvider},bt.Renderer.prototype.makeRenderInfo_=function(t){return new ht.RenderInfo(this,t)},bt.Renderer.prototype.makeDrawer_=function(t,e){return new ft.Drawer(t,e)},bt.Renderer.prototype.makeDebugger_=function(){var t=Vt.Debug;if(!t)throw Error("Missing require for Blockly.blockRendering.Debug");return new t(this.getConstants())},bt.Renderer.prototype.makeMarkerDrawer=function(t,e){return new _t.MarkerSvg(t,this.getConstants(),e)},bt.Renderer.prototype.makePathObject=function(t,e){return new At.PathObject(t,e,this.constants_)},bt.Renderer.prototype.getConstants=function(){return this.constants_},bt.Renderer.prototype.shouldHighlightConnection=function(t){return!0},bt.Renderer.prototype.orphanCanConnectAtEnd=function(t,e,o){return!!j.Connection.getConnectionForOrphanedConnection(t,o===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?e.outputConnection:e.previousConnection)},bt.Renderer.prototype.getConnectionPreviewMethod=function(t,e,o){return e.type===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE||e.type===n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?!t.isConnected()||this.orphanCanConnectAtEnd(o,t.targetBlock(),e.type)?vt.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER:vt.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:vt.InsertionMarkerManager.PREVIEW_TYPE.INSERTION_MARKER},bt.Renderer.prototype.render=function(t){(0,Ke.isDebuggerEnabled)()&&!t.renderingDebugger&&(t.renderingDebugger=this.makeDebugger_());var e=this.makeRenderInfo_(t);e.measure(),this.makeDrawer_(t,e).draw()};var kt={isDebuggerEnabled:function(){return(0,y.warn)("Blockly.blockRendering.isDebuggerEnabled()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),(0,Ke.isDebuggerEnabled)()},register:function(t,e){(0,b.register)(b.Type.RENDERER,t,e)},unregister:function(t){(0,b.unregister)(b.Type.RENDERER,t)},startDebugger:function(){(0,y.warn)("Blockly.blockRendering.startDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),(0,Ke.startDebugger)()},stopDebugger:function(){(0,y.warn)("Blockly.blockRendering.stopDebugger()","September 2021","September 2022","the debug renderer in @blockly/dev-tools (See https://www.npmjs.com/package/@blockly/dev-tools.)"),(0,Ke.stopDebugger)()},init:function(t,e,o){return t=new((0,b.getClass)(b.Type.RENDERER,t))(t),t.init(e,o),t}};kt.BottomRow=io.BottomRow,kt.Connection=We.Connection,kt.ConstantProvider=Tt.ConstantProvider,kt.Debug=Vt.Debug,kt.Drawer=ft.Drawer,kt.ExternalValueInput=vn.ExternalValueInput,kt.Field=$o.Field,kt.Hat=Gn.Hat,kt.Icon=fi.Icon,kt.InRowSpacer=Oe.InRowSpacer,kt.InlineInput=Sn.InlineInput,kt.InputConnection=Pe.InputConnection,kt.InputRow=Zo.InputRow,kt.IPathObject=Ns.IPathObject,kt.JaggedEdge=ki.JaggedEdge,kt.MarkerSvg=_t.MarkerSvg,kt.Measurable=qt.Measurable,kt.NextConnection=Ei.NextConnection,kt.OutputConnection=vi.OutputConnection,kt.PathObject=At.PathObject,kt.PreviousConnection=Si.PreviousConnection,kt.Renderer=bt.Renderer,kt.RenderInfo=ht.RenderInfo,kt.RoundCorner=Qo.RoundCorner,kt.Row=Se.Row,kt.SpacerRow=In.SpacerRow,kt.SquareCorner=tn.SquareCorner,kt.StatementInput=bo.StatementInput,kt.TopRow=ro.TopRow,kt.Types=E.Types,kt.debug=Ke,n.module$exports$Blockly$FieldDropdown={FieldDropdown:function(t,e,o){w.Field.call(this,w.Field.SKIP_SETUP),this.svgArrow_=this.arrow_=this.imageElement_=this.menu_=this.selectedMenuItem_=null,this.SERIALIZABLE=!0,this.CURSOR="default",t!==w.Field.SKIP_SETUP&&(Array.isArray(t)&&mr(t),this.menuGenerator_=t,this.suffixField=this.prefixField=this.generatedOptions_=null,this.trimOptions_(),this.selectedOption_=this.getOptions(!1)[0],o&&this.configure_(o),this.setValue(this.selectedOption_[1]),e&&this.setValidator(e))}},n.$jscomp.inherits(n.module$exports$Blockly$FieldDropdown.FieldDropdown,w.Field),n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.fromXml=function(t){this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t.textContent)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.loadState=function(t){this.loadLegacyState(n.module$exports$Blockly$FieldDropdown.FieldDropdown,t)||(this.isOptionListDynamic()&&this.getOptions(!1),this.setValue(t))},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.initView=function(){this.shouldAddBorderRect_()?this.createBorderRect_():this.clickTarget_=this.sourceBlock_.getSvgRoot(),this.createTextElement_(),this.imageElement_=(0,_.createSvgElement)(R.Svg.IMAGE,{},this.fieldGroup_),this.getConstants().FIELD_DROPDOWN_SVG_ARROW?this.createSVGArrow_():this.createTextArrow_(),this.borderRect_&&(0,_.addClass)(this.borderRect_,"blocklyDropdownRect")},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.shouldAddBorderRect_=function(){return!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW&&!this.sourceBlock_.isShadow()},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.createTextArrow_=function(){this.arrow_=(0,_.createSvgElement)(R.Svg.TSPAN,{},this.textElement_),this.arrow_.appendChild(document.createTextNode(this.sourceBlock_.RTL?n.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR+" ":" "+n.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR)),this.sourceBlock_.RTL?this.textElement_.insertBefore(this.arrow_,this.textContent_):this.textElement_.appendChild(this.arrow_)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.createSVGArrow_=function(){this.svgArrow_=(0,_.createSvgElement)(R.Svg.IMAGE,{height:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px",width:this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE+"px"},this.fieldGroup_),this.svgArrow_.setAttributeNS(_.XLINK_NS,"xlink:href",this.getConstants().FIELD_DROPDOWN_SVG_ARROW_DATAURI)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.showEditor_=function(t){if(this.dropdownCreate_(),this.menu_.openingCoords=t&&typeof t.clientX=="number"?new H.Coordinate(t.clientX,t.clientY):null,(0,z.clearContent)(),this.menu_.render((0,z.getContentDiv)()),t=this.menu_.getElement(),(0,_.addClass)(t,"blocklyDropdownMenu"),this.getConstants().FIELD_DROPDOWN_COLOURED_DIV){t=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().getColour():this.sourceBlock_.getColour();var e=this.sourceBlock_.isShadow()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;(0,z.setColour)(t,e)}(0,z.showPositionedByField)(this,this.dropdownDispose_.bind(this)),this.menu_.focus(),this.selectedMenuItem_&&this.menu_.setHighlighted(this.selectedMenuItem_),this.applyColour()},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.dropdownCreate_=function(){var t=new Ut.Menu;t.setRole(Y.Role.LISTBOX),this.menu_=t;var e=this.getOptions(!1);this.selectedMenuItem_=null;for(var o=0;o<e.length;o++){var i=e[o][0],s=e[o][1];if(typeof i=="object"){var l=new Image(i.width,i.height);l.src=i.src,l.alt=i.alt||"",i=l}i=new ae.MenuItem(i,s),i.setRole(Y.Role.OPTION),i.setRightToLeft(this.sourceBlock_.RTL),i.setCheckable(!0),t.addChild(i),i.setChecked(s===this.value_),s===this.value_&&(this.selectedMenuItem_=i),i.onAction(this.handleMenuActionEvent_,this)}},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.dropdownDispose_=function(){this.menu_&&this.menu_.dispose(),this.selectedMenuItem_=this.menu_=null,this.applyColour()},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.handleMenuActionEvent_=function(t){(0,z.hideIfOwner)(this,!0),this.onItemSelected_(this.menu_,t)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.onItemSelected_=function(t,e){this.setValue(e.getValue())},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.trimOptions_=function(){var t=this.menuGenerator_;if(Array.isArray(t)){for(var e=!1,o=0;o<t.length;o++){var i=t[o][0];typeof i=="string"?t[o][0]=(0,mt.replaceMessageReferences)(i):(i.alt!==null&&(t[o][0].alt=(0,mt.replaceMessageReferences)(i.alt)),e=!0)}if(!(e||2>t.length)){for(e=[],o=0;o<t.length;o++)e.push(t[o][0]);o=(0,n.module$exports$Blockly$utils$string.shortestStringLength)(e),i=(0,n.module$exports$Blockly$utils$string.commonWordPrefix)(e,o);var s=(0,n.module$exports$Blockly$utils$string.commonWordSuffix)(e,o);!i&&!s||o<=i+s||(i&&(this.prefixField=e[0].substring(0,i-1)),s&&(this.suffixField=e[0].substr(1-s)),this.menuGenerator_=n.module$exports$Blockly$FieldDropdown.FieldDropdown.applyTrim_(t,i,s))}}},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.isOptionListDynamic=function(){return typeof this.menuGenerator_=="function"},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.getOptions=function(t){return this.isOptionListDynamic()?(this.generatedOptions_&&t||(this.generatedOptions_=this.menuGenerator_.call(this),mr(this.generatedOptions_)),this.generatedOptions_):this.menuGenerator_},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.doClassValidation_=function(t){for(var e=!1,o=this.getOptions(!0),i=0,s;s=o[i];i++)if(s[1]===t){e=!0;break}return e?t:(this.sourceBlock_&&console.warn("Cannot set the dropdown's value to an unavailable option. Block type: "+this.sourceBlock_.type+", Field name: "+this.name+", Value: "+t),null)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.doValueUpdate_=function(t){w.Field.prototype.doValueUpdate_.call(this,t),t=this.getOptions(!0);for(var e=0,o;o=t[e];e++)o[1]===this.value_&&(this.selectedOption_=o)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.applyColour=function(){this.borderRect_&&(this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary),this.menu_?this.borderRect_.setAttribute("fill",this.sourceBlock_.style.colourTertiary):this.borderRect_.setAttribute("fill","transparent")),this.sourceBlock_&&this.arrow_&&(this.sourceBlock_.isShadow()?this.arrow_.style.fill=this.sourceBlock_.style.colourSecondary:this.arrow_.style.fill=this.sourceBlock_.style.colourPrimary)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.render_=function(){this.textContent_.nodeValue="",this.imageElement_.style.display="none";var t=this.selectedOption_&&this.selectedOption_[0];t&&typeof t=="object"?this.renderSelectedImage_(t):this.renderSelectedText_(),this.positionBorderRect_()},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.renderSelectedImage_=function(t){this.imageElement_.style.display="",this.imageElement_.setAttributeNS(_.XLINK_NS,"xlink:href",t.src),this.imageElement_.setAttribute("height",t.height),this.imageElement_.setAttribute("width",t.width);var e=Number(t.height);t=Number(t.width);var o=!!this.borderRect_,i=Math.max(o?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,e+Fs);o=o?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var s=this.svgArrow_?this.positionSVGArrow_(t+o,i/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2):(0,_.getFastTextWidth)(this.arrow_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);this.size_.width=t+s+2*o,this.size_.height=i;var l=0;this.sourceBlock_.RTL?this.imageElement_.setAttribute("x",o+s):(l=t+s,this.textElement_.setAttribute("text-anchor","end"),this.imageElement_.setAttribute("x",o)),this.imageElement_.setAttribute("y",i/2-e/2),this.positionTextElement_(l+o,t+s)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.renderSelectedText_=function(){this.textContent_.nodeValue=this.getDisplayText_(),(0,_.addClass)(this.textElement_,"blocklyDropdownText"),this.textElement_.setAttribute("text-anchor","start");var t=!!this.borderRect_,e=Math.max(t?this.getConstants().FIELD_DROPDOWN_BORDER_RECT_HEIGHT:0,this.getConstants().FIELD_TEXT_HEIGHT),o=(0,_.getFastTextWidth)(this.textElement_,this.getConstants().FIELD_TEXT_FONTSIZE,this.getConstants().FIELD_TEXT_FONTWEIGHT,this.getConstants().FIELD_TEXT_FONTFAMILY);t=t?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0;var i=0;this.svgArrow_&&(i=this.positionSVGArrow_(o+t,e/2-this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE/2)),this.size_.width=o+i+2*t,this.size_.height=e,this.positionTextElement_(t,o)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.positionSVGArrow_=function(t,e){if(!this.svgArrow_)return 0;var o=this.borderRect_?this.getConstants().FIELD_BORDER_RECT_X_PADDING:0,i=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_PADDING,s=this.getConstants().FIELD_DROPDOWN_SVG_ARROW_SIZE;return this.svgArrow_.setAttribute("transform","translate("+(this.sourceBlock_.RTL?o:t+i)+","+e+")"),s+i},n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.getText_=function(){if(!this.selectedOption_)return null;var t=this.selectedOption_[0];return typeof t=="object"?t.alt:t},n.module$exports$Blockly$FieldDropdown.FieldDropdown.fromJson=function(t){return new this(t.options,void 0,t)},n.module$exports$Blockly$FieldDropdown.FieldDropdown.applyTrim_=function(t,e,o){for(var i=[],s=0;s<t.length;s++){var l=t[s][0],h=t[s][1];l=l.substring(e,l.length-o),i[s]=[l,h]}return i},n.module$exports$Blockly$FieldDropdown.FieldDropdown.CHECKMARK_OVERHANG=25,n.module$exports$Blockly$FieldDropdown.FieldDropdown.MAX_MENU_HEIGHT_VH=.45;var Ps=5,Fs=2*Ps;n.module$exports$Blockly$FieldDropdown.FieldDropdown.ARROW_CHAR=G.ANDROID?"\u25BC":"\u25BE";var mr=function(t){if(!Array.isArray(t))throw TypeError("FieldDropdown options must be an array.");if(!t.length)throw TypeError("FieldDropdown options must not be an empty array.");for(var e=!1,o=0;o<t.length;o++){var i=t[o];Array.isArray(i)?typeof i[1]!="string"?(e=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option id must be a string. Found "+i[1]+" in: ",i)):i[0]&&typeof i[0]!="string"&&typeof i[0].src!="string"&&(e=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must have a string label or image description. Found"+i[0]+" in: ",i)):(e=!0,console.error("Invalid option["+o+"]: Each FieldDropdown option must be an array. Found: ",i))}if(e)throw TypeError("Found invalid FieldDropdown options.")};(0,$e.register)("field_dropdown",n.module$exports$Blockly$FieldDropdown.FieldDropdown);var Fo;n.module$exports$Blockly$Extensions={},Fo=Object.create(null),n.module$exports$Blockly$Extensions.TEST_ONLY={allExtensions:Fo},n.module$exports$Blockly$Extensions.register=function(t,e){if(typeof t!="string"||t.trim()==="")throw Error('Error: Invalid extension name "'+t+'"');if(Fo[t])throw Error('Error: Extension "'+t+'" is already registered.');if(typeof e!="function")throw Error('Error: Extension "'+t+'" must be a function');Fo[t]=e},n.module$exports$Blockly$Extensions.registerMixin=function(t,e){if(!e||typeof e!="object")throw Error('Error: Mixin "'+t+'" must be a object');(0,n.module$exports$Blockly$Extensions.register)(t,function(){this.mixin(e)})},n.module$exports$Blockly$Extensions.registerMutator=function(t,e,o,i){var s='Error when registering mutator "'+t+'": ';fr(s,e);var l=Tr(e,s);if(o&&typeof o!="function")throw Error(s+'Extension "'+t+'" is not a function');(0,n.module$exports$Blockly$Extensions.register)(t,function(){if(l){var h=n.module$exports$Blockly$Mutator.Mutator;if(!h)throw Error(s+"Missing require for Blockly.Mutator");this.setMutator(new h(i||[]))}this.mixin(e),o&&o.apply(this)})},n.module$exports$Blockly$Extensions.unregister=function(t){(0,n.module$exports$Blockly$Extensions.isRegistered)(t)?delete Fo[t]:console.warn('No extension mapping for name "'+t+'" found to unregister')},n.module$exports$Blockly$Extensions.isRegistered=function(t){return!!Fo[t]},n.module$exports$Blockly$Extensions.apply=function(t,e,o){var i=Fo[t];if(typeof i!="function")throw Error('Error: Extension "'+t+'" not found.');var s;if(o?Us(t,e):s=Ii(e),i.apply(e),o)fr('Error after applying mutator "'+t+'": ',e);else if(!Hs(s,e))throw Error('Error when applying extension "'+t+'": mutation properties changed when applying a non-mutator extension.')};var Us=function(t,e){if(Ii(e).length)throw Error('Error: tried to apply mutation "'+t+'" to a block that already has mutator functions.  Block id: '+e.id)},Gs=function(t,e){return Bi(t.mutationToDom,t.domToMutation,e+" mutationToDom/domToMutation")},Vs=function(t,e){return Bi(t.saveExtraState,t.loadExtraState,e+" saveExtraState/loadExtraState")},Tr=function(t,e){return Bi(t.compose,t.decompose,e+" compose/decompose")},Bi=function(t,e,o){if(t&&e){if(typeof t!="function"||typeof e!="function")throw Error(o+" must be a function");return!0}if(!t&&!e)return!1;throw Error(o+"Must have both or neither functions")},fr=function(t,e){var o=Gs(e,t),i=Vs(e,t);if(!o&&!i)throw Error(t+"Mutations must contain either XML hooks, or JSON hooks, or both");Tr(e,t)},Ii=function(t){var e=[];return t.domToMutation!==void 0&&e.push(t.domToMutation),t.mutationToDom!==void 0&&e.push(t.mutationToDom),t.saveExtraState!==void 0&&e.push(t.saveExtraState),t.loadExtraState!==void 0&&e.push(t.loadExtraState),t.compose!==void 0&&e.push(t.compose),t.decompose!==void 0&&e.push(t.decompose),e},Hs=function(t,e){if(e=Ii(e),e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(t[o]!==e[o])return!1;return!0};n.module$exports$Blockly$Extensions.runAfterPageLoad=function(t){if(typeof document!="object")throw Error("runAfterPageLoad() requires browser document.");if(document.readyState==="complete")t();else var e=setInterval(function(){document.readyState==="complete"&&(clearInterval(e),t())},10)},n.module$exports$Blockly$Extensions.buildTooltipForDropdown=function(t,e){var o=[];return typeof document=="object"&&(0,n.module$exports$Blockly$Extensions.runAfterPageLoad)(function(){for(var i in e)(0,mt.checkMessageReferences)(e[i])}),function(){this.type&&o.indexOf(this.type)===-1&&(Ws(this,t,e),o.push(this.type)),this.setTooltip(function(){var i=String(this.getFieldValue(t)),s=e[i];return s===null?o.indexOf(this.type)===-1&&(i="No tooltip mapping for value "+i+" of field "+t,this.type!==null&&(i+=" of block type "+this.type),console.warn(i+".")):s=(0,mt.replaceMessageReferences)(s),s}.bind(this))}};var Ws=function(t,e,o){var i=t.getField(e);if(i instanceof n.module$exports$Blockly$FieldDropdown.FieldDropdown&&!i.isOptionListDynamic()){i=i.getOptions();for(var s=0;s<i.length;s++){var l=i[s][1];o[l]===null&&console.warn("No tooltip mapping for value "+l+" of field "+e+" of block type "+t.type)}}};n.module$exports$Blockly$Extensions.buildTooltipWithFieldText=function(t,e){return typeof document=="object"&&(0,n.module$exports$Blockly$Extensions.runAfterPageLoad)(function(){(0,mt.checkMessageReferences)(t)}),function(){this.setTooltip(function(){var o=this.getField(e);return(0,mt.replaceMessageReferences)(t).replace("%1",o?o.getText():"")}.bind(this))}};var Xs=function(){var t=this.tooltip;this.setTooltip(function(){var e=this.getParent();return e&&e.getInputsInline()&&e.tooltip||t}.bind(this))};(0,n.module$exports$Blockly$Extensions.register)("parent_tooltip_when_inline",Xs);var js={Metrics:function(){}},at={aria:Y,colour:Et};at.Coordinate=H.Coordinate,at.deprecation=y,at.dom=_,at.global=n.module$exports$Blockly$utils$global.globalThis,at.idGenerator=re,at.KeyCodes=K.KeyCodes,at.math=He,at.Metrics=js.Metrics,at.object=n.module$exports$Blockly$utils$object,at.parsing=mt,at.Rect=wt.Rect,at.Size=jt.Size,at.string=n.module$exports$Blockly$utils$string,at.style=Ct,at.Svg=R.Svg,at.svgPaths=B,at.svgMath=yt,at.toolbox=q,at.userAgent=G,at.xml=n.module$exports$Blockly$utils$xml,at.noEvent=function(t){(0,y.warn)("Blockly.utils.noEvent","September 2021","September 2022"),t.preventDefault(),t.stopPropagation()},at.isTargetInput=function(t){return(0,y.warn)("Blockly.utils.isTargetInput","September 2021","September 2022","Blockly.browserEvents.isTargetInput"),(0,$.isTargetInput)(t)},at.getRelativeXY=function(t){return(0,y.warn)("Blockly.utils.getRelativeXY","December 2021","December 2022","Blockly.utils.svgMath.getRelativeXY"),(0,yt.getRelativeXY)(t)},at.getInjectionDivXY_=function(t){return(0,y.warn)("Blockly.utils.getInjectionDivXY_","December 2021","December 2022","Blockly.utils.svgMath.getInjectionDivXY"),(0,yt.getInjectionDivXY)(t)},at.isRightButton=function(t){return(0,y.warn)("Blockly.utils.isRightButton","September 2021","September 2022","Blockly.browserEvents.isRightButton"),(0,$.isRightButton)(t)},at.mouseToSvg=function(t,e,o){return(0,y.warn)("Blockly.utils.mouseToSvg","September 2021","September 2022","Blockly.browserEvents.mouseToSvg"),(0,$.mouseToSvg)(t,e,o)},at.getScrollDeltaPixels=function(t){return(0,y.warn)("Blockly.utils.getScrollDeltaPixels","September 2021","September 2022","Blockly.browserEvents.getScrollDeltaPixels"),(0,$.getScrollDeltaPixels)(t)},at.tokenizeInterpolation=function(t){return(0,y.warn)("Blockly.utils.tokenizeInterpolation","December 2021","December 2022","Blockly.utils.parsing.tokenizeInterpolation"),(0,mt.tokenizeInterpolation)(t)},at.replaceMessageReferences=function(t){return(0,y.warn)("Blockly.utils.replaceMessageReferences","December 2021","December 2022","Blockly.utils.parsing.replaceMessageReferences"),(0,mt.replaceMessageReferences)(t)},at.checkMessageReferences=function(t){return(0,y.warn)("Blockly.utils.checkMessageReferences","December 2021","December 2022","Blockly.utils.parsing.checkMessageReferences"),(0,mt.checkMessageReferences)(t)},at.genUid=function(){return(0,y.warn)("Blockly.utils.genUid","September 2021","September 2022","Blockly.utils.idGenerator.genUid"),(0,re.genUid)()},at.is3dSupported=function(){return(0,y.warn)("Blockly.utils.is3dSupported","December 2021","December 2022","Blockly.utils.svgMath.is3dSupported"),(0,yt.is3dSupported)()},at.getViewportBBox=function(){return(0,y.warn)("Blockly.utils.getViewportBBox","December 2021","December 2022","Blockly.utils.svgMath.getViewportBBox"),(0,yt.getViewportBBox)()},at.arrayRemove=function(t,e){return(0,y.warn)("Blockly.utils.arrayRemove","December 2021","December 2022"),(0,we.removeElem)(t,e)},at.getDocumentScroll=function(){return(0,y.warn)("Blockly.utils.getDocumentScroll","December 2021","December 2022","Blockly.utils.svgMath.getDocumentScroll"),(0,yt.getDocumentScroll)()},at.getBlockTypeCounts=function(t,e){return(0,y.warn)("Blockly.utils.getBlockTypeCounts","December 2021","December 2022","Blockly.common.getBlockTypeCounts"),(0,n.module$exports$Blockly$common.getBlockTypeCounts)(t,e)},at.screenToWsCoordinates=function(t,e){return(0,y.warn)("Blockly.utils.screenToWsCoordinates","December 2021","December 2022","Blockly.utils.svgMath.screenToWsCoordinates"),(0,yt.screenToWsCoordinates)(t,e)},at.parseBlockColour=function(t){return(0,y.warn)("Blockly.utils.parseBlockColour","December 2021","December 2022","Blockly.utils.parsing.parseBlockColour"),(0,mt.parseBlockColour)(t)},at.runAfterPageLoad=function(t){(0,y.warn)("Blockly.utils.runAfterPageLoad","December 2021","December 2022"),(0,n.module$exports$Blockly$Extensions.runAfterPageLoad)(t)};var on={BlockDelete:function(t){if(Yt.BlockBase.call(this,t),this.type=p.DELETE,t){if(t.getParent())throw Error("Connected blocks cannot be deleted.");t.isShadow()&&(this.recordUndo=!1),this.oldXml=(0,n.module$exports$Blockly$Xml.blockToDomWithXY)(t),this.ids=(0,p.getDescendantIds)(t),this.wasShadow=t.isShadow(),this.oldJson=(0,zt.save)(t,{addCoordinates:!0})}}};n.$jscomp.inherits(on.BlockDelete,Yt.BlockBase),on.BlockDelete.prototype.toJson=function(){var t=Yt.BlockBase.prototype.toJson.call(this);return t.oldXml=(0,n.module$exports$Blockly$Xml.domToText)(this.oldXml),t.ids=this.ids,t.wasShadow=this.wasShadow,t.oldJson=this.oldJson,this.recordUndo||(t.recordUndo=this.recordUndo),t},on.BlockDelete.prototype.fromJson=function(t){Yt.BlockBase.prototype.fromJson.call(this,t),this.oldXml=(0,n.module$exports$Blockly$Xml.textToDom)(t.oldXml),this.ids=t.ids,this.wasShadow=t.wasShadow||this.oldXml.tagName.toLowerCase()==="shadow",this.oldJson=t.oldJson,t.recordUndo!==void 0&&(this.recordUndo=t.recordUndo)},on.BlockDelete.prototype.run=function(t){var e=this.getEventWorkspace_();if(t)for(t=0;t<this.ids.length;t++){var o=this.ids[t],i=e.getBlockById(o);i?i.dispose(!1):o===this.blockId&&console.warn("Can't delete non-existent block: "+o)}else(0,zt.append)(this.oldJson,e)},(0,b.register)(b.Type.EVENT,p.DELETE,on.BlockDelete);var D={Block:function(t,e,o){var i=n.module$exports$Blockly$Generator.Generator;if(i&&typeof i.prototype[e]<"u")throw Error('Block prototypeName "'+e+'" conflicts with Blockly.Generator members.');if(this.data=null,this.disposed=!1,this.hue_=null,this.colour_="#000000",this.styleName_="",this.loadExtraState=this.saveExtraState=this.domToMutation=this.mutationToDom=this.init=void 0,this.suppressPrefixSuffix=!1,this.getDeveloperVariables=void 0,this.id=o&&!t.getBlockById(o)?o:(0,re.genUid)(),t.setBlockById(this.id,this),this.previousConnection=this.nextConnection=this.outputConnection=null,this.inputList=[],this.inputsInline=void 0,this.disabled=!1,this.tooltip="",this.contextMenu=!0,this.parentBlock_=null,this.childBlocks_=[],this.editable_=this.movable_=this.deletable_=!0,this.collapsed_=this.isShadow_=!1,this.comment=this.outputShape_=null,this.commentModel={text:null,pinned:!1,size:new jt.Size(160,80)},this.xy_=new H.Coordinate(0,0),this.workspace=t,this.isInFlyout=t.isFlyout,this.isInMutator=t.isMutator,this.RTL=t.RTL,this.isInsertionMarker_=!1,this.hat=void 0,this.onchangeWrapper_=this.helpUrl=this.rendered=null,this.statementInputCount=0,e){if(this.type=e,o=Lt.Blocks[e],!o||typeof o!="object")throw TypeError("Invalid block definition for type: "+e);(0,n.module$exports$Blockly$utils$object.mixin)(this,o)}t.addTopBlock(this),t.addTypedBlock(this),this.constructor===D.Block&&this.doInit_()}};D.Block.prototype.doInit_=function(){var t=(0,p.getGroup)();t||(0,p.setGroup)(!0);var e=(0,p.getRecordUndo)();try{typeof this.init=="function"&&((0,p.setRecordUndo)(!1),this.init(),(0,p.setRecordUndo)(e)),(0,p.isEnabled)()&&(0,p.fire)(new((0,p.get)(p.CREATE))(this))}finally{t||(0,p.setGroup)(!1),(0,p.setRecordUndo)(e)}this.inputsInlineDefault=this.inputsInline,typeof this.onchange=="function"&&this.setOnChange(this.onchange)},D.Block.prototype.dispose=function(t){if(this.workspace){this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),this.unplug(t),(0,p.isEnabled)()&&(0,p.fire)(new((0,p.get)(p.DELETE))(this)),(0,p.disable)();try{this.workspace&&(this.workspace.removeTopBlock(this),this.workspace.removeTypedBlock(this),this.workspace.removeBlockById(this.id),this.workspace=null),(0,n.module$exports$Blockly$common.getSelected)()===this&&(0,n.module$exports$Blockly$common.setSelected)(null);for(var e=this.childBlocks_.length-1;0<=e;e--)this.childBlocks_[e].dispose(!1);for(t=0,e=void 0;e=this.inputList[t];t++)e.dispose();this.inputList.length=0;var o=this.getConnections_(!0);for(t=0,e=void 0;e=o[t];t++)e.dispose()}finally{(0,p.enable)(),this.disposed=!0}}},D.Block.prototype.initModel=function(){for(var t=0,e;e=this.inputList[t];t++)for(var o=0,i;i=e.fieldRow[o];o++)i.initModel&&i.initModel()},D.Block.prototype.unplug=function(t){this.outputConnection&&this.unplugFromRow_(t),this.previousConnection&&this.unplugFromStack_(t)},D.Block.prototype.unplugFromRow_=function(t){var e=null;this.outputConnection.isConnected()&&(e=this.outputConnection.targetConnection,this.outputConnection.disconnect()),e&&t&&(t=this.getOnlyValueConnection_())&&t.isConnected()&&!t.targetBlock().isShadow()&&(t=t.targetConnection,t.disconnect(),this.workspace.connectionChecker.canConnect(t,e,!1)?e.connect(t):t.onFailedConnect(e))},D.Block.prototype.getOnlyValueConnection_=function(){for(var t=null,e=0;e<this.inputList.length;e++){var o=this.inputList[e].connection;if(o&&o.type===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&o.targetConnection){if(t)return null;t=o}}return t},D.Block.prototype.unplugFromStack_=function(t){var e=null;this.previousConnection.isConnected()&&(e=this.previousConnection.targetConnection,this.previousConnection.disconnect());var o=this.getNextBlock();t&&o&&!o.isShadow()&&(t=this.nextConnection.targetConnection,t.disconnect(),e&&this.workspace.connectionChecker.canConnect(e,t,!1)&&e.connect(t))},D.Block.prototype.getConnections_=function(t){t=[],this.outputConnection&&t.push(this.outputConnection),this.previousConnection&&t.push(this.previousConnection),this.nextConnection&&t.push(this.nextConnection);for(var e=0,o;o=this.inputList[e];e++)o.connection&&t.push(o.connection);return t},D.Block.prototype.lastConnectionInStack=function(t){for(var e=this.nextConnection;e;){var o=e.targetBlock();if(!o||t&&o.isShadow())return e;e=o.nextConnection}return null},D.Block.prototype.bumpNeighbours=function(){},D.Block.prototype.getParent=function(){return this.parentBlock_},D.Block.prototype.getInputWithBlock=function(t){for(var e=0,o;o=this.inputList[e];e++)if(o.connection&&o.connection.targetBlock()===t)return o;return null},D.Block.prototype.getSurroundParent=function(){var t=this;do{var e=t;if(t=t.getParent(),!t)return null}while(t.getNextBlock()===e);return t},D.Block.prototype.getNextBlock=function(){return this.nextConnection&&this.nextConnection.targetBlock()},D.Block.prototype.getPreviousBlock=function(){return this.previousConnection&&this.previousConnection.targetBlock()},D.Block.prototype.getFirstStatementConnection=function(){for(var t=0,e;e=this.inputList[t];t++)if(e.connection&&e.connection.type===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)return e.connection;return null},D.Block.prototype.getRootBlock=function(){var t=this;do{var e=t;t=e.parentBlock_}while(t);return e},D.Block.prototype.getTopStackBlock=function(){var t=this;do var e=t.getPreviousBlock();while(e&&e.getNextBlock()===t&&(t=e));return t},D.Block.prototype.getChildren=function(t){if(!t)return this.childBlocks_;t=[];for(var e=0,o;o=this.inputList[e];e++)o.connection&&(o=o.connection.targetBlock())&&t.push(o);return(e=this.getNextBlock())&&t.push(e),t},D.Block.prototype.setParent=function(t){if(t!==this.parentBlock_){var e=this.previousConnection&&this.previousConnection.targetBlock()||this.outputConnection&&this.outputConnection.targetBlock(),o=!!e;if(o&&t&&e!==t)throw Error("Block connected to superior one that is not new parent.");if(!o&&t)throw Error("Block not connected to new parent.");if(o&&!t)throw Error("Cannot set parent to null while block is still connected to superior block.");this.parentBlock_?(0,we.removeElem)(this.parentBlock_.childBlocks_,this):this.workspace.removeTopBlock(this),(this.parentBlock_=t)?t.childBlocks_.push(this):this.workspace.addTopBlock(this)}},D.Block.prototype.getDescendants=function(t){for(var e=[this],o=this.getChildren(t),i,s=0;i=o[s];s++)e.push.apply(e,i.getDescendants(t));return e},D.Block.prototype.isDeletable=function(){return this.deletable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},D.Block.prototype.setDeletable=function(t){this.deletable_=t},D.Block.prototype.isMovable=function(){return this.movable_&&!this.isShadow_&&!(this.workspace&&this.workspace.options.readOnly)},D.Block.prototype.setMovable=function(t){this.movable_=t},D.Block.prototype.isDuplicatable=function(){return this.workspace.hasBlockLimits()?this.workspace.isCapacityAvailable((0,n.module$exports$Blockly$common.getBlockTypeCounts)(this,!0)):!0},D.Block.prototype.isShadow=function(){return this.isShadow_},D.Block.prototype.setShadow=function(t){this.isShadow_=t},D.Block.prototype.isInsertionMarker=function(){return this.isInsertionMarker_},D.Block.prototype.setInsertionMarker=function(t){this.isInsertionMarker_=t},D.Block.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},D.Block.prototype.setEditable=function(t){this.editable_=t,t=0;for(var e;e=this.inputList[t];t++)for(var o=0,i;i=e.fieldRow[o];o++)i.updateEditable()},D.Block.prototype.isDisposed=function(){return this.disposed},D.Block.prototype.getMatchingConnection=function(t,e){var o=this.getConnections_(!0);if(t=t.getConnections_(!0),o.length!==t.length)throw Error("Connection lists did not match in length.");for(var i=0;i<t.length;i++)if(t[i]===e)return o[i];return null},D.Block.prototype.setHelpUrl=function(t){this.helpUrl=t},D.Block.prototype.setTooltip=function(t){this.tooltip=t},D.Block.prototype.getTooltip=function(){return(0,Q.getTooltipOfObject)(this)},D.Block.prototype.getColour=function(){return this.colour_},D.Block.prototype.getStyleName=function(){return this.styleName_},D.Block.prototype.getHue=function(){return this.hue_},D.Block.prototype.setColour=function(t){t=(0,mt.parseBlockColour)(t),this.hue_=t.hue,this.colour_=t.hex},D.Block.prototype.setStyle=function(t){this.styleName_=t},D.Block.prototype.setOnChange=function(t){if(t&&typeof t!="function")throw Error("onchange must be a function.");this.onchangeWrapper_&&this.workspace.removeChangeListener(this.onchangeWrapper_),(this.onchange=t)&&(this.onchangeWrapper_=t.bind(this),this.workspace.addChangeListener(this.onchangeWrapper_))},D.Block.prototype.getField=function(t){if(typeof t!="string")throw TypeError("Block.prototype.getField expects a string with the field name but received "+(t===void 0?"nothing":t+" of type "+typeof t)+" instead");for(var e=0,o;o=this.inputList[e];e++)for(var i=0,s;s=o.fieldRow[i];i++)if(s.name===t)return s;return null},D.Block.prototype.getVars=function(){for(var t=[],e=0,o;o=this.inputList[e];e++)for(var i=0,s;s=o.fieldRow[i];i++)s.referencesVariables()&&t.push(s.getValue());return t},D.Block.prototype.getVarModels=function(){for(var t=[],e=0,o;o=this.inputList[e];e++)for(var i=0,s;s=o.fieldRow[i];i++)s.referencesVariables()&&(s=this.workspace.getVariableById(s.getValue()))&&t.push(s);return t},D.Block.prototype.updateVarName=function(t){for(var e=0,o;o=this.inputList[e];e++)for(var i=0,s;s=o.fieldRow[i];i++)s.referencesVariables()&&t.getId()===s.getValue()&&s.refreshVariableName()},D.Block.prototype.renameVarById=function(t,e){for(var o=0,i;i=this.inputList[o];o++)for(var s=0,l;l=i.fieldRow[s];s++)l.referencesVariables()&&t===l.getValue()&&l.setValue(e)},D.Block.prototype.getFieldValue=function(t){return(t=this.getField(t))?t.getValue():null},D.Block.prototype.setFieldValue=function(t,e){var o=this.getField(e);if(!o)throw Error('Field "'+e+'" not found.');o.setValue(t)},D.Block.prototype.setPreviousStatement=function(t,e){if(t)e===void 0&&(e=null),this.previousConnection||(this.previousConnection=this.makeConnection_(n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT)),this.previousConnection.setCheck(e);else if(this.previousConnection){if(this.previousConnection.isConnected())throw Error("Must disconnect previous statement before removing connection.");this.previousConnection.dispose(),this.previousConnection=null}},D.Block.prototype.setNextStatement=function(t,e){if(t)e===void 0&&(e=null),this.nextConnection||(this.nextConnection=this.makeConnection_(n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)),this.nextConnection.setCheck(e);else if(this.nextConnection){if(this.nextConnection.isConnected())throw Error("Must disconnect next statement before removing connection.");this.nextConnection.dispose(),this.nextConnection=null}},D.Block.prototype.setOutput=function(t,e){if(t)e===void 0&&(e=null),this.outputConnection||(this.outputConnection=this.makeConnection_(n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE)),this.outputConnection.setCheck(e);else if(this.outputConnection){if(this.outputConnection.isConnected())throw Error("Must disconnect output value before removing connection.");this.outputConnection.dispose(),this.outputConnection=null}},D.Block.prototype.setInputsInline=function(t){this.inputsInline!==t&&((0,p.fire)(new((0,p.get)(p.CHANGE))(this,"inline",null,this.inputsInline,t)),this.inputsInline=t)},D.Block.prototype.getInputsInline=function(){if(this.inputsInline!==void 0)return this.inputsInline;for(var t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&this.inputList[t].type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY)return!1;for(t=1;t<this.inputList.length;t++)if(this.inputList[t-1].type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE&&this.inputList[t].type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY)return!0;return!1},D.Block.prototype.setOutputShape=function(t){this.outputShape_=t},D.Block.prototype.getOutputShape=function(){return this.outputShape_},D.Block.prototype.isEnabled=function(){return!this.disabled},D.Block.prototype.setEnabled=function(t){if(this.isEnabled()!==t){var e=this.disabled;this.disabled=!t,(0,p.fire)(new((0,p.get)(p.CHANGE))(this,"disabled",null,e,!t))}},D.Block.prototype.getInheritedDisabled=function(){for(var t=this.getSurroundParent();t;){if(t.disabled)return!0;t=t.getSurroundParent()}return!1},D.Block.prototype.isCollapsed=function(){return this.collapsed_},D.Block.prototype.setCollapsed=function(t){this.collapsed_!==t&&((0,p.fire)(new((0,p.get)(p.CHANGE))(this,"collapsed",null,this.collapsed_,t)),this.collapsed_=t)},D.Block.prototype.toString=function(t,e){function o(x){var F=x.getCheck();return!F&&x.targetConnection&&(F=x.targetConnection.getCheck()),!!F&&(F.indexOf("Boolean")!==-1||F.indexOf("Number")!==-1)}function i(){h&&h.getType()===S.getType()&&h.getLocation()===S.getLocation()&&(h=null)}var s=[];e=e||"?";var l=A.ASTNode.NAVIGATE_ALL_FIELDS;A.ASTNode.NAVIGATE_ALL_FIELDS=!0;for(var h=A.ASTNode.createBlockNode(this),S=h;h;){switch(h.getType()){case A.ASTNode.types.INPUT:var C=h.getLocation();h.in()?o(C)&&s.push("("):s.push(e);break;case A.ASTNode.types.FIELD:C=h.getLocation(),C.name!==To.COLLAPSED_FIELD_NAME&&s.push(C.getText())}if(C=h,h=C.in()||C.next(),!h){for(h=C.out(),i();h&&!h.next();)h=h.out(),i(),h&&h.getType()===A.ASTNode.types.INPUT&&o(h.getLocation())&&s.push(")");h&&(h=h.next())}}for(A.ASTNode.NAVIGATE_ALL_FIELDS=l,e=2;e<s.length;e++)s[e-2]==="("&&s[e]===")"&&(s[e-2]=s[e-1],s.splice(e-1,2));return s=s.reduce(function(x,F){return x+(x.substr(-1)==="("||F===")"?"":" ")+F},""),s=s.trim()||"???",t&&s.length>t&&(s=s.substring(0,t-3)+"..."),s},D.Block.prototype.appendValueInput=function(t){return this.appendInput_(n.module$exports$Blockly$inputTypes.inputTypes.VALUE,t)},D.Block.prototype.appendStatementInput=function(t){return this.appendInput_(n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT,t)},D.Block.prototype.appendDummyInput=function(t){return this.appendInput_(n.module$exports$Blockly$inputTypes.inputTypes.DUMMY,t||"")},D.Block.prototype.jsonInit=function(t){var e=t.type?'Block "'+t.type+'": ':"";if(t.output&&t.previousStatement)throw Error(e+"Must not have both an output and a previousStatement.");if(t.style&&t.style.hat&&(this.hat=t.style.hat,t.style=null),t.style&&t.colour)throw Error(e+"Must not have both a colour and a style.");t.style?this.jsonInitStyle_(t,e):this.jsonInitColour_(t,e);for(var o=0;t["message"+o]!==void 0;)this.interpolate_(t["message"+o],t["args"+o]||[],t["lastDummyAlign"+o],e),o++;if(t.inputsInline!==void 0&&this.setInputsInline(t.inputsInline),t.output!==void 0&&this.setOutput(!0,t.output),t.outputShape!==void 0&&this.setOutputShape(t.outputShape),t.previousStatement!==void 0&&this.setPreviousStatement(!0,t.previousStatement),t.nextStatement!==void 0&&this.setNextStatement(!0,t.nextStatement),t.tooltip!==void 0&&(o=(0,mt.replaceMessageReferences)(t.tooltip),this.setTooltip(o)),t.enableContextMenu!==void 0&&(this.contextMenu=!!t.enableContextMenu),t.suppressPrefixSuffix!==void 0&&(this.suppressPrefixSuffix=!!t.suppressPrefixSuffix),t.helpUrl!==void 0&&(o=(0,mt.replaceMessageReferences)(t.helpUrl),this.setHelpUrl(o)),typeof t.extensions=="string"&&(console.warn(e+"JSON attribute 'extensions' should be an array of strings. Found raw string in JSON for '"+t.type+"' block."),t.extensions=[t.extensions]),t.mutator!==void 0&&(0,n.module$exports$Blockly$Extensions.apply)(t.mutator,this,!0),t=t.extensions,Array.isArray(t))for(e=0;e<t.length;e++)(0,n.module$exports$Blockly$Extensions.apply)(t[e],this,!1)},D.Block.prototype.jsonInitColour_=function(t,e){if("colour"in t)if(t.colour===void 0)console.warn(e+"Undefined colour value.");else{t=t.colour;try{this.setColour(t)}catch{console.warn(e+"Illegal colour value: ",t)}}},D.Block.prototype.jsonInitStyle_=function(t,e){t=t.style;try{this.setStyle(t)}catch{console.warn(e+"Style does not exist: ",t)}},D.Block.prototype.mixin=function(t,e){if(e!==void 0&&typeof e!="boolean")throw Error("opt_disableCheck must be a boolean if provided");if(!e){e=[];for(var o in t)this[o]!==void 0&&e.push(o);if(e.length)throw Error("Mixin will overwrite block members: "+JSON.stringify(e))}(0,n.module$exports$Blockly$utils$object.mixin)(this,t)},D.Block.prototype.interpolate_=function(t,e,o,i){t=(0,mt.tokenizeInterpolation)(t),this.validateTokens_(t,e.length),e=this.interpolateArguments_(t,e,o),o=[],t=0;for(var s;s=e[t];t++)if(this.isInputKeyword_(s.type)){if(s=this.inputFromJson_(s,i)){for(var l=0,h;h=o[l];l++)s.appendField(h[0],h[1]);o.length=0}}else(l=this.fieldFromJson_(s))&&o.push([l,s.name])},D.Block.prototype.validateTokens_=function(t,e){for(var o=[],i=0,s=0;s<t.length;s++){var l=t[s];if(typeof l=="number"){if(1>l||l>e)throw Error('Block "'+this.type+'": Message index %'+l+" out of range.");if(o[l])throw Error('Block "'+this.type+'": Message index %'+l+" duplicated.");o[l]=!0,i++}}if(i!==e)throw Error('Block "'+this.type+'": Message does not reference all '+e+" arg(s).")},D.Block.prototype.interpolateArguments_=function(t,e,o){for(var i=[],s=0;s<t.length;s++){var l=t[s];typeof l=="number"&&(l=e[l-1]),!(typeof l=="string"&&(l=this.stringToFieldJson_(l),!l))&&i.push(l)}return(t=i.length)&&!this.isInputKeyword_(i[t-1].type)&&(t={type:"input_dummy"},o&&(t.align=o),i.push(t)),i},D.Block.prototype.fieldFromJson_=function(t){var e=(0,$e.fromJson)(t);return!e&&t.alt?typeof t.alt=="string"?(t=this.stringToFieldJson_(t.alt))?this.fieldFromJson_(t):null:this.fieldFromJson_(t.alt):e},D.Block.prototype.inputFromJson_=function(t,e){var o={LEFT:n.module$exports$Blockly$Input.Align.LEFT,RIGHT:n.module$exports$Blockly$Input.Align.RIGHT,CENTRE:n.module$exports$Blockly$Input.Align.CENTRE,CENTER:n.module$exports$Blockly$Input.Align.CENTRE},i=null;switch(t.type){case"input_value":i=this.appendValueInput(t.name);break;case"input_statement":i=this.appendStatementInput(t.name);break;case"input_dummy":i=this.appendDummyInput(t.name)}return i?(t.check&&i.setCheck(t.check),t.align&&(o=o[t.align.toUpperCase()],o===void 0?console.warn(e+"Illegal align value: ",t.align):i.setAlign(o)),i):null},D.Block.prototype.isInputKeyword_=function(t){return t==="input_value"||t==="input_statement"||t==="input_dummy"},D.Block.prototype.stringToFieldJson_=function(t){return(t=t.trim())?{type:"field_label",text:t}:null},D.Block.prototype.appendInput_=function(t,e){var o=null;return(t===n.module$exports$Blockly$inputTypes.inputTypes.VALUE||t===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT)&&(o=this.makeConnection_(t)),t===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&this.statementInputCount++,t=new n.module$exports$Blockly$Input.Input(t,e,this,o),this.inputList.push(t),t},D.Block.prototype.moveInputBefore=function(t,e){if(t!==e){for(var o=-1,i=e?-1:this.inputList.length,s=0,l;l=this.inputList[s];s++)if(l.name===t){if(o=s,i!==-1)break}else if(e&&l.name===e&&(i=s,o!==-1))break;if(o===-1)throw Error('Named input "'+t+'" not found.');if(i===-1)throw Error('Reference input "'+e+'" not found.');this.moveNumberedInputBefore(o,i)}},D.Block.prototype.moveNumberedInputBefore=function(t,e){if(t===e)throw Error("Can't move input to itself.");if(t>=this.inputList.length)throw RangeError("Input index "+t+" out of bounds.");if(e>this.inputList.length)throw RangeError("Reference input "+e+" out of bounds.");var o=this.inputList[t];this.inputList.splice(t,1),t<e&&e--,this.inputList.splice(e,0,o)},D.Block.prototype.removeInput=function(t,e){for(var o=0,i;i=this.inputList[o];o++)if(i.name===t)return i.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&this.statementInputCount--,i.dispose(),this.inputList.splice(o,1),!0;if(e)return!1;throw Error("Input not found: "+t)},D.Block.prototype.getInput=function(t){for(var e=0,o;o=this.inputList[e];e++)if(o.name===t)return o;return null},D.Block.prototype.getInputTargetBlock=function(t){return(t=this.getInput(t))&&t.connection&&t.connection.targetBlock()},D.Block.prototype.getCommentText=function(){return this.commentModel.text},D.Block.prototype.setCommentText=function(t){this.commentModel.text!==t&&((0,p.fire)(new((0,p.get)(p.CHANGE))(this,"comment",null,this.commentModel.text,t)),this.comment=this.commentModel.text=t)},D.Block.prototype.setWarningText=function(t,e){},D.Block.prototype.setMutator=function(t){},D.Block.prototype.getRelativeToSurfaceXY=function(){return this.xy_},D.Block.prototype.moveBy=function(t,e){if(this.parentBlock_)throw Error("Block has parent.");var o=new((0,p.get)(p.MOVE))(this);this.xy_.translate(t,e),o.recordNew(),(0,p.fire)(o)},D.Block.prototype.makeConnection_=function(t){return new j.Connection(this,t)},D.Block.prototype.allInputsFilled=function(t){if(t===void 0&&(t=!0),!t&&this.isShadow())return!1;for(var e=0,o;o=this.inputList[e];e++)if(o.connection&&(o=o.connection.targetBlock(),!o||!o.allInputsFilled(t)))return!1;return(e=this.getNextBlock())?e.allInputsFilled(t):!0},D.Block.prototype.toDevString=function(){var t=this.type?'"'+this.type+'" block':"Block";return this.id&&(t+=' (id="'+this.id+'")'),t},D.Block.COLLAPSED_INPUT_NAME=To.COLLAPSED_INPUT_NAME,D.Block.COLLAPSED_FIELD_NAME=To.COLLAPSED_FIELD_NAME;var dt={ContextMenuRegistry:function(){this.reset()}};dt.ContextMenuRegistry.prototype.reset=function(){this.registry_=Object.create(null)},dt.ContextMenuRegistry.prototype.register=function(t){if(this.registry_[t.id])throw Error('Menu item with ID "'+t.id+'" is already registered.');this.registry_[t.id]=t},dt.ContextMenuRegistry.prototype.unregister=function(t){if(!this.registry_[t])throw Error('Menu item with ID "'+t+'" not found.');delete this.registry_[t]},dt.ContextMenuRegistry.prototype.getItem=function(t){return this.registry_[t]||null},dt.ContextMenuRegistry.prototype.getContextMenuOptions=function(t,e){var o=[],i=this.registry_;return Object.keys(i).forEach(function(s){if(s=i[s],t===s.scopeType){var l=s.preconditionFn(e);l!=="hidden"&&(s={text:typeof s.displayText=="function"?s.displayText(e):s.displayText,enabled:l==="enabled",callback:s.callback,scope:e,weight:s.weight},o.push(s))}}),o.sort(function(s,l){return s.weight-l.weight}),o},dt.ContextMenuRegistry.ScopeType={BLOCK:"block",WORKSPACE:"workspace"},dt.ContextMenuRegistry.registry=new dt.ContextMenuRegistry;var Ys={IBoundedElement:function(){}},Ks={IMovable:function(){}},Js={ISelectable:function(){}},zs={ICopyable:function(){}},gt={},Ri=10;gt.RenderedConnection=function(t,e){j.Connection.call(this,t,e),this.db_=t.workspace.connectionDBList[e],this.dbOpposite_=t.workspace.connectionDBList[Zt.OPPOSITE_TYPE[e]],this.offsetInBlock_=new H.Coordinate(0,0),this.trackedState_=gt.RenderedConnection.TrackedState.WILL_TRACK,this.targetConnection=null},n.$jscomp.inherits(gt.RenderedConnection,j.Connection),gt.RenderedConnection.prototype.dispose=function(){j.Connection.prototype.dispose.call(this),this.trackedState_===gt.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y)},gt.RenderedConnection.prototype.getSourceBlock=function(){return j.Connection.prototype.getSourceBlock.call(this)},gt.RenderedConnection.prototype.targetBlock=function(){return j.Connection.prototype.targetBlock.call(this)},gt.RenderedConnection.prototype.distanceFrom=function(t){var e=this.x-t.x;return t=this.y-t.y,Math.sqrt(e*e+t*t)},gt.RenderedConnection.prototype.bumpAwayFrom=function(t){if(!this.sourceBlock_.workspace.isDragging()){var e=this.sourceBlock_.getRootBlock();if(!e.isInFlyout){var o=!1;if(!e.isMovable()){if(e=t.getSourceBlock().getRootBlock(),!e.isMovable())return;t=this,o=!0}var i=(0,n.module$exports$Blockly$common.getSelected)()==e;i||e.addSelect();var s=t.x+n.module$exports$Blockly$config.config.snapRadius+Math.floor(Math.random()*Ri)-this.x,l=t.y+n.module$exports$Blockly$config.config.snapRadius+Math.floor(Math.random()*Ri)-this.y;o&&(l=-l),e.RTL&&(s=t.x-n.module$exports$Blockly$config.config.snapRadius-Math.floor(Math.random()*Ri)-this.x),e.moveBy(s,l),i||e.removeSelect()}}},gt.RenderedConnection.prototype.moveTo=function(t,e){this.trackedState_===gt.RenderedConnection.TrackedState.WILL_TRACK?(this.db_.addConnection(this,e),this.trackedState_=gt.RenderedConnection.TrackedState.TRACKED):this.trackedState_===gt.RenderedConnection.TrackedState.TRACKED&&(this.db_.removeConnection(this,this.y),this.db_.addConnection(this,e)),this.x=t,this.y=e},gt.RenderedConnection.prototype.moveBy=function(t,e){this.moveTo(this.x+t,this.y+e)},gt.RenderedConnection.prototype.moveToOffset=function(t){this.moveTo(t.x+this.offsetInBlock_.x,t.y+this.offsetInBlock_.y)},gt.RenderedConnection.prototype.setOffsetInBlock=function(t,e){this.offsetInBlock_.x=t,this.offsetInBlock_.y=e},gt.RenderedConnection.prototype.getOffsetInBlock=function(){return this.offsetInBlock_},gt.RenderedConnection.prototype.tighten=function(){var t=this.targetConnection.x-this.x,e=this.targetConnection.y-this.y;if(t!==0||e!==0){var o=this.targetBlock(),i=o.getSvgRoot();if(!i)throw Error("block is not rendered.");i=(0,yt.getRelativeXY)(i),o.getSvgRoot().setAttribute("transform","translate("+(i.x-t)+","+(i.y-e)+")"),o.moveConnections(-t,-e)}},gt.RenderedConnection.prototype.closest=function(t,e){return this.dbOpposite_.searchForClosest(this,t,e)},gt.RenderedConnection.prototype.highlight=function(){var t=this.sourceBlock_.workspace.getRenderer().getConstants(),e=t.shapeFor(this);this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?(t=t.TAB_OFFSET_FROM_TOP,e=(0,B.moveBy)(0,-t)+(0,B.lineOnAxis)("v",t)+e.pathDown+(0,B.lineOnAxis)("v",t)):(t=t.NOTCH_OFFSET_LEFT-t.CORNER_RADIUS,e=(0,B.moveBy)(-t,0)+(0,B.lineOnAxis)("h",t)+e.pathLeft+(0,B.lineOnAxis)("h",t)),t=this.sourceBlock_.getRelativeToSurfaceXY(),j.Connection.highlightedPath_=(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyHighlightedConnectionPath",d:e,transform:"translate("+(this.x-t.x)+","+(this.y-t.y)+")"+(this.sourceBlock_.RTL?" scale(-1 1)":"")},this.sourceBlock_.getSvgRoot())},gt.RenderedConnection.prototype.unhighlight=function(){(0,_.removeNode)(j.Connection.highlightedPath_),delete j.Connection.highlightedPath_},gt.RenderedConnection.prototype.setTracking=function(t){t&&this.trackedState_===gt.RenderedConnection.TrackedState.TRACKED||!t&&this.trackedState_===gt.RenderedConnection.TrackedState.UNTRACKED||this.sourceBlock_.isInFlyout||(t?(this.db_.addConnection(this,this.y),this.trackedState_=gt.RenderedConnection.TrackedState.TRACKED):(this.trackedState_===gt.RenderedConnection.TrackedState.TRACKED&&this.db_.removeConnection(this,this.y),this.trackedState_=gt.RenderedConnection.TrackedState.UNTRACKED))},gt.RenderedConnection.prototype.stopTrackingAll=function(){if(this.setTracking(!1),this.targetConnection)for(var t=this.targetBlock().getDescendants(!1),e=0;e<t.length;e++){for(var o=t[e],i=o.getConnections_(!0),s=0;s<i.length;s++)i[s].setTracking(!1);for(o=o.getIcons(),i=0;i<o.length;i++)o[i].setVisible(!1)}},gt.RenderedConnection.prototype.startTrackingAll=function(){this.setTracking(!0);var t=[];if(this.type!==n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&this.type!==n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT)return t;var e=this.targetBlock();if(e){if(e.isCollapsed()){var o=[];e.outputConnection&&o.push(e.outputConnection),e.nextConnection&&o.push(e.nextConnection),e.previousConnection&&o.push(e.previousConnection)}else o=e.getConnections_(!0);for(var i=0;i<o.length;i++)t.push.apply(t,o[i].startTrackingAll());t.length||(t=[e])}return t},gt.RenderedConnection.prototype.onFailedConnect=function(t){var e=this.getSourceBlock();if((0,p.getRecordUndo)()){var o=(0,p.getGroup)();setTimeout(function(){e.isDisposed()||e.getParent()||((0,p.setGroup)(o),this.bumpAwayFrom(t),(0,p.setGroup)(!1))}.bind(this),n.module$exports$Blockly$config.config.bumpDelay)}},gt.RenderedConnection.prototype.disconnectInternal_=function(t,e){j.Connection.prototype.disconnectInternal_.call(this,t,e),t.rendered&&t.render(),e.rendered&&(e.updateDisabled(),e.render(),e.getSvgRoot().style.display="block")},gt.RenderedConnection.prototype.respawnShadow_=function(){j.Connection.prototype.respawnShadow_.call(this);var t=this.targetBlock();t&&(t.initSvg(),t.render(!1),t=this.getSourceBlock(),t.rendered&&t.render())},gt.RenderedConnection.prototype.neighbours=function(t){return this.dbOpposite_.getNeighbours(this,t)},gt.RenderedConnection.prototype.connect_=function(t){j.Connection.prototype.connect_.call(this,t);var e=this.getSourceBlock();t=t.getSourceBlock();var o=e.rendered,i=t.rendered;o&&e.updateDisabled(),i&&t.updateDisabled(),o&&i&&(this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT||this.type===n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT?t.render():e.render()),(e=e.getInputWithBlock(t))&&(e=e.isVisible(),t.getSvgRoot().style.display=e?"block":"none")},gt.RenderedConnection.prototype.onCheckChanged_=function(){!this.isConnected()||this.targetConnection&&this.getConnectionChecker().canConnect(this,this.targetConnection,!1)||((this.isSuperior()?this.targetBlock():this.sourceBlock_).unplug(),this.sourceBlock_.bumpNeighbours())},gt.RenderedConnection.TrackedState={WILL_TRACK:-1,UNTRACKED:0,TRACKED:1};var so={Marker:function(){this.drawer_=this.curNode_=this.colour=null,this.type="marker"}};so.Marker.prototype.setDrawer=function(t){this.drawer_=t},so.Marker.prototype.getDrawer=function(){return this.drawer_},so.Marker.prototype.getCurNode=function(){return this.curNode_},so.Marker.prototype.setCurNode=function(t){var e=this.curNode_;this.curNode_=t,this.drawer_&&this.drawer_.draw(e,this.curNode_)},so.Marker.prototype.draw=function(){this.drawer_&&this.drawer_.draw(this.curNode_,this.curNode_)},so.Marker.prototype.hide=function(){this.drawer_&&this.drawer_.hide()},so.Marker.prototype.dispose=function(){this.getDrawer()&&this.getDrawer().dispose()};var Eo={Cursor:function(){so.Marker.call(this),this.type="cursor"}};n.$jscomp.inherits(Eo.Cursor,so.Marker),Eo.Cursor.prototype.next=function(){var t=this.getCurNode();if(!t)return null;for(t=t.next();t&&t.next()&&(t.getType()===A.ASTNode.types.NEXT||t.getType()===A.ASTNode.types.BLOCK);)t=t.next();return t&&this.setCurNode(t),t},Eo.Cursor.prototype.in=function(){var t=this.getCurNode();return t?((t.getType()===A.ASTNode.types.PREVIOUS||t.getType()===A.ASTNode.types.OUTPUT)&&(t=t.next()),(t=t.in())&&this.setCurNode(t),t):null},Eo.Cursor.prototype.prev=function(){var t=this.getCurNode();if(!t)return null;for(t=t.prev();t&&t.prev()&&(t.getType()===A.ASTNode.types.NEXT||t.getType()===A.ASTNode.types.BLOCK);)t=t.prev();return t&&this.setCurNode(t),t},Eo.Cursor.prototype.out=function(){var t=this.getCurNode();return t?((t=t.out())&&t.getType()===A.ASTNode.types.BLOCK&&(t=t.prev()||t),t&&this.setCurNode(t),t):null},(0,b.register)(b.Type.CURSOR,b.DEFAULT,Eo.Cursor);var de={BasicCursor:function(){Eo.Cursor.call(this)}};n.$jscomp.inherits(de.BasicCursor,Eo.Cursor),de.BasicCursor.prototype.next=function(){var t=this.getCurNode();return t?((t=this.getNextNode_(t,this.validNode_))&&this.setCurNode(t),t):null},de.BasicCursor.prototype.in=function(){return this.next()},de.BasicCursor.prototype.prev=function(){var t=this.getCurNode();return t?((t=this.getPreviousNode_(t,this.validNode_))&&this.setCurNode(t),t):null},de.BasicCursor.prototype.out=function(){return this.prev()},de.BasicCursor.prototype.getNextNode_=function(t,e){if(!t)return null;var o=t.in()||t.next();return e(o)?o:o?this.getNextNode_(o,e):(t=this.findSiblingOrParent_(t.out()),e(t)?t:t?this.getNextNode_(t,e):null)},de.BasicCursor.prototype.getPreviousNode_=function(t,e){if(!t)return null;var o=t.prev();return o=o?this.getRightMostChild_(o):t.out(),e(o)?o:o?this.getPreviousNode_(o,e):null},de.BasicCursor.prototype.validNode_=function(t){var e=!1;return t=t&&t.getType(),(t===A.ASTNode.types.OUTPUT||t===A.ASTNode.types.INPUT||t===A.ASTNode.types.FIELD||t===A.ASTNode.types.NEXT||t===A.ASTNode.types.PREVIOUS||t===A.ASTNode.types.WORKSPACE)&&(e=!0),e},de.BasicCursor.prototype.findSiblingOrParent_=function(t){if(!t)return null;var e=t.next();return e||this.findSiblingOrParent_(t.out())},de.BasicCursor.prototype.getRightMostChild_=function(t){if(!t.in())return t;for(t=t.in();t.next();)t=t.next();return this.getRightMostChild_(t)},de.BasicCursor.registrationName="basicCursor",(0,b.register)(b.Type.CURSOR,de.BasicCursor.registrationName,de.BasicCursor);var Hn={TabNavigateCursor:function(){de.BasicCursor.apply(this,arguments)}};n.$jscomp.inherits(Hn.TabNavigateCursor,de.BasicCursor),Hn.TabNavigateCursor.prototype.validNode_=function(t){var e=!1,o=t&&t.getType();return t&&(t=t.getLocation(),o===A.ASTNode.types.FIELD&&t&&t.isTabNavigable()&&t.isClickable()&&(e=!0)),e};var Rn={Selected:function(t,e,o){pt.UiBase.call(this,o),this.oldElementId=t,this.newElementId=e,this.type=p.SELECTED}};n.$jscomp.inherits(Rn.Selected,pt.UiBase),Rn.Selected.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.oldElementId=this.oldElementId,t.newElementId=this.newElementId,t},Rn.Selected.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.oldElementId=t.oldElementId,this.newElementId=t.newElementId},(0,b.register)(b.Type.EVENT,p.SELECTED,Rn.Selected);var V={BlockSvg:function(t,e,o){D.Block.call(this,t,e,o),this.decompose=this.decompose,this.compose=this.compose,this.saveConnections=this.saveConnections,this.customContextMenu=this.customContextMenu,this.renderingDebugger=null,this.width=this.height=0,this.warning=this.commentIcon_=this.comment=this.mutator=this.warningTextDb_=null,this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{},null),this.svgGroup_.translate_="",this.style=t.getRenderer().getConstants().getBlockStyle(null),this.pathObject=t.getRenderer().makePathObject(this.svgGroup_,this.style),this.eventsInit_=this.renderIsInProgress_=this.rendered=!1,this.useDragSurface_=(0,yt.is3dSupported)()&&!!t.getBlockDragSurface(),t=this.pathObject.svgPath,t.tooltip=this,(0,Q.bindMouseEvents)(t),this.svgGroup_.dataset?this.svgGroup_.dataset.id=this.id:G.IE&&this.svgGroup_.setAttribute("data-id",this.id),this.doInit_()}};n.$jscomp.inherits(V.BlockSvg,D.Block),V.BlockSvg.prototype.initSvg=function(){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");for(var t=0,e;e=this.inputList[t];t++)e.init();for(t=this.getIcons(),e=0;e<t.length;e++)t[e].createIcon();this.applyColour(),this.pathObject.updateMovable(this.isMovable()),t=this.getSvgRoot(),this.workspace.options.readOnly||this.eventsInit_||!t||(0,$.conditionalBind)(t,"mousedown",this,this.onMouseDown_),this.eventsInit_=!0,t.parentNode||this.workspace.getCanvas().appendChild(t)},V.BlockSvg.prototype.getColourSecondary=function(){return this.style.colourSecondary},V.BlockSvg.prototype.getColourTertiary=function(){return this.style.colourTertiary},V.BlockSvg.prototype.select=function(){if(this.isShadow()&&this.getParent())this.getParent().select();else if((0,n.module$exports$Blockly$common.getSelected)()!==this){var t=null;if((0,n.module$exports$Blockly$common.getSelected)()){t=(0,n.module$exports$Blockly$common.getSelected)().id,(0,p.disable)();try{(0,n.module$exports$Blockly$common.getSelected)().unselect()}finally{(0,p.enable)()}}t=new((0,p.get)(p.SELECTED))(t,this.id,this.workspace.id),(0,p.fire)(t),(0,n.module$exports$Blockly$common.setSelected)(this),this.addSelect()}},V.BlockSvg.prototype.unselect=function(){if((0,n.module$exports$Blockly$common.getSelected)()===this){var t=new((0,p.get)(p.SELECTED))(this.id,null,this.workspace.id);t.workspaceId=this.workspace.id,(0,p.fire)(t),(0,n.module$exports$Blockly$common.setSelected)(null),this.removeSelect()}},V.BlockSvg.prototype.getIcons=function(){var t=[];return this.mutator&&t.push(this.mutator),this.commentIcon_&&t.push(this.commentIcon_),this.warning&&t.push(this.warning),t},V.BlockSvg.prototype.setParent=function(t){var e=this.parentBlock_;if(t!==e){(0,_.startTextWidthCache)(),D.Block.prototype.setParent.call(this,t),(0,_.stopTextWidthCache)();var o=this.getSvgRoot();if(!this.workspace.isClearing&&o){var i=this.getRelativeToSurfaceXY();t?(t.getSvgRoot().appendChild(o),t=this.getRelativeToSurfaceXY(),this.moveConnections(t.x-i.x,t.y-i.y)):e&&(this.workspace.getCanvas().appendChild(o),this.translate(i.x,i.y)),this.applyColour()}}},V.BlockSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,e=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,i=this.getSvgRoot();if(i)do{var s=(0,yt.getRelativeXY)(i);t+=s.x,e+=s.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===i&&(s=this.workspace.getBlockDragSurface().getSurfaceTranslation(),t+=s.x,e+=s.y),i=i.parentNode}while(i&&i!==this.workspace.getCanvas()&&i!==o);return new H.Coordinate(t,e)},V.BlockSvg.prototype.moveBy=function(t,e){if(this.parentBlock_)throw Error("Block has parent.");var o=(0,p.isEnabled)(),i;o&&(i=new((0,p.get)(p.MOVE))(this));var s=this.getRelativeToSurfaceXY();this.translate(s.x+t,s.y+e),this.moveConnections(t,e),o&&(i.recordNew(),(0,p.fire)(i)),this.workspace.resizeContents()},V.BlockSvg.prototype.translate=function(t,e){this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},V.BlockSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),(t=this.getSvgRoot())&&this.workspace.getBlockDragSurface().setBlocksAndShow(t)}},V.BlockSvg.prototype.moveTo=function(t){var e=this.getRelativeToSurfaceXY();this.moveBy(t.x-e.x,t.y-e.y)},V.BlockSvg.prototype.moveOffDragSurface=function(t){this.useDragSurface_&&(this.translate(t.x,t.y),this.workspace.getBlockDragSurface().clearAndHide(this.workspace.getCanvas()))},V.BlockSvg.prototype.moveDuringDrag=function(t){this.useDragSurface_?this.workspace.getBlockDragSurface().translateSurface(t.x,t.y):(this.svgGroup_.translate_="translate("+t.x+","+t.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},V.BlockSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},V.BlockSvg.prototype.snapToGrid=function(){if(this.workspace&&!this.workspace.isDragging()&&!this.getParent()&&!this.isInFlyout){var t=this.workspace.getGrid();if(t&&t.shouldSnap()){var e=t.getSpacing(),o=e/2,i=this.getRelativeToSurfaceXY();t=Math.round(Math.round((i.x-o)/e)*e+o-i.x),e=Math.round(Math.round((i.y-o)/e)*e+o-i.y),(t||e)&&this.moveBy(t,e)}}},V.BlockSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),e=this.getHeightWidth();if(this.RTL)var o=t.x-e.width,i=t.x;else o=t.x,i=t.x+e.width;return new wt.Rect(t.y,t.y+e.height,o,i)},V.BlockSvg.prototype.markDirty=function(){this.pathObject.constants=this.workspace.getRenderer().getConstants();for(var t=0,e;e=this.inputList[t];t++)e.markDirty()},V.BlockSvg.prototype.setCollapsed=function(t){this.collapsed_!==t&&(D.Block.prototype.setCollapsed.call(this,t),t?this.rendered&&this.render():this.updateCollapsed_())},V.BlockSvg.prototype.updateCollapsed_=function(){for(var t=this.isCollapsed(),e=To.COLLAPSED_INPUT_NAME,o=To.COLLAPSED_FIELD_NAME,i=0,s;s=this.inputList[i];i++)s.name!==e&&s.setVisible(!t);if(t){for(t=this.getIcons(),i=0;s=t[i];i++)s.setVisible(!1);t=this.toString(Zt.COLLAPSE_CHARS),(i=this.getField(o))?i.setValue(t):(this.getInput(e)||this.appendDummyInput(e)).appendField(new n.module$exports$Blockly$FieldLabel.FieldLabel(t),o)}else this.updateDisabled(),this.removeInput(e)},V.BlockSvg.prototype.tab=function(t,e){var o=new Hn.TabNavigateCursor;o.setCurNode(A.ASTNode.createFieldNode(t)),t=o.getCurNode(),e?o.next():o.prev(),(e=o.getCurNode())&&e!==t&&(e.getLocation().showEditor(),this.workspace.keyboardAccessibilityMode&&this.workspace.getCursor().setCurNode(e))},V.BlockSvg.prototype.onMouseDown_=function(t){var e=this.workspace&&this.workspace.getGesture(t);e&&e.handleBlockStart(t,this)},V.BlockSvg.prototype.showHelp=function(){var t=typeof this.helpUrl=="function"?this.helpUrl():this.helpUrl;t&&window.open(t)},V.BlockSvg.prototype.generateContextMenu=function(){if(this.workspace.options.readOnly||!this.contextMenu)return null;var t=dt.ContextMenuRegistry.registry.getContextMenuOptions(dt.ContextMenuRegistry.ScopeType.BLOCK,{block:this});return this.customContextMenu&&this.customContextMenu(t),t},V.BlockSvg.prototype.showContextMenu=function(t){var e=this.generateContextMenu();e&&e.length&&((0,n.module$exports$Blockly$ContextMenu.show)(t,e,this.RTL),(0,n.module$exports$Blockly$ContextMenu.setCurrentBlock)(this))},V.BlockSvg.prototype.moveConnections=function(t,e){if(this.rendered){for(var o=this.getConnections_(!1),i=0;i<o.length;i++)o[i].moveBy(t,e);for(o=this.getIcons(),i=0;i<o.length;i++)o[i].computeIconLocation();for(o=0;o<this.childBlocks_.length;o++)this.childBlocks_[o].moveConnections(t,e)}},V.BlockSvg.prototype.setDragging=function(t){if(t){var e=this.getSvgRoot();e.translate_="",e.skew_="",n.module$exports$Blockly$common.draggingConnections.push.apply(n.module$exports$Blockly$common.draggingConnections,n.$jscomp.arrayFromIterable(this.getConnections_(!0))),(0,_.addClass)(this.svgGroup_,"blocklyDragging")}else n.module$exports$Blockly$common.draggingConnections.length=0,(0,_.removeClass)(this.svgGroup_,"blocklyDragging");for(e=0;e<this.childBlocks_.length;e++)this.childBlocks_[e].setDragging(t)},V.BlockSvg.prototype.setMovable=function(t){D.Block.prototype.setMovable.call(this,t),this.pathObject.updateMovable(t)},V.BlockSvg.prototype.setEditable=function(t){D.Block.prototype.setEditable.call(this,t),t=this.getIcons();for(var e=0;e<t.length;e++)t[e].updateEditable()},V.BlockSvg.prototype.setShadow=function(t){D.Block.prototype.setShadow.call(this,t),this.applyColour()},V.BlockSvg.prototype.setInsertionMarker=function(t){this.isInsertionMarker_!==t&&(this.isInsertionMarker_=t)&&(this.setColour(this.workspace.getRenderer().getConstants().INSERTION_MARKER_COLOUR),this.pathObject.updateInsertionMarker(!0))},V.BlockSvg.prototype.getSvgRoot=function(){return this.svgGroup_},V.BlockSvg.prototype.dispose=function(t,e){if(this.workspace){(0,Q.dispose)(),(0,Q.unbindMouseEvents)(this.pathObject.svgPath),(0,_.startTextWidthCache)();var o=this.workspace;if((0,n.module$exports$Blockly$common.getSelected)()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),(0,n.module$exports$Blockly$ContextMenu.getCurrentBlock)()===this&&(0,n.module$exports$Blockly$ContextMenu.hide)(),e&&this.rendered&&(this.unplug(t),(0,Je.disposeUiEffect)(this)),this.rendered=!1,this.warningTextDb_){for(var i in this.warningTextDb_)clearTimeout(this.warningTextDb_[i]);this.warningTextDb_=null}for(e=this.getIcons(),i=0;i<e.length;i++)e[i].dispose();D.Block.prototype.dispose.call(this,!!t),(0,_.removeNode)(this.svgGroup_),o.resizeContents(),this.svgGroup_=null,(0,_.stopTextWidthCache)()}},V.BlockSvg.prototype.checkAndDelete=function(){this.workspace.isFlyout||((0,p.setGroup)(!0),this.workspace.hideChaff(),this.outputConnection?this.dispose(!1,!0):this.dispose(!0,!0),(0,p.setGroup)(!1))},V.BlockSvg.prototype.toCopyData=function(){return this.isInsertionMarker_?null:{saveInfo:(0,zt.save)(this,{addCoordinates:!0,addNextBlocks:!1}),source:this.workspace,typeCounts:(0,n.module$exports$Blockly$common.getBlockTypeCounts)(this,!0)}},V.BlockSvg.prototype.applyColour=function(){this.pathObject.applyColour(this);for(var t=this.getIcons(),e=0;e<t.length;e++)t[e].applyColour();for(t=0;e=this.inputList[t];t++)for(var o=0,i;i=e.fieldRow[o];o++)i.applyColour()},V.BlockSvg.prototype.updateDisabled=function(){var t=this.getChildren(!1);if(this.applyColour(),!this.isCollapsed())for(var e=0,o;o=t[e];e++)o.rendered&&o.updateDisabled()},V.BlockSvg.prototype.getCommentIcon=function(){return this.commentIcon_},V.BlockSvg.prototype.setCommentText=function(t){var e=oe.Comment;if(!e)throw Error("Missing require for Blockly.Comment");this.commentModel.text!==t&&(D.Block.prototype.setCommentText.call(this,t),t=t!==null,!!this.commentIcon_===t?this.commentIcon_.updateText():(t?this.comment=this.commentIcon_=new e(this):(this.commentIcon_.dispose(),this.comment=this.commentIcon_=null),this.rendered&&(this.render(),this.bumpNeighbours())))},V.BlockSvg.prototype.setWarningText=function(t,e){var o=po.Warning;if(!o)throw Error("Missing require for Blockly.Warning");this.warningTextDb_||(this.warningTextDb_=Object.create(null));var i=e||"";if(i)this.warningTextDb_[i]&&(clearTimeout(this.warningTextDb_[i]),delete this.warningTextDb_[i]);else{e=n.$jscomp.makeIterator(Object.keys(this.warningTextDb_));for(var s=e.next();!s.done;s=e.next())s=s.value,clearTimeout(this.warningTextDb_[s]),delete this.warningTextDb_[s]}if(this.workspace.isDragging()){var l=this;this.warningTextDb_[i]=setTimeout(function(){l.workspace&&(delete l.warningTextDb_[i],l.setWarningText(t,i))},100)}else{if(this.isInFlyout&&(t=null),e=!1,typeof t=="string"){s=this.getSurroundParent();for(var h=null;s;)s.isCollapsed()&&(h=s),s=s.getSurroundParent();h&&h.setWarningText(n.module$exports$Blockly$Msg.Msg.COLLAPSED_WARNINGS_WARNING,V.BlockSvg.COLLAPSED_WARNING_ID),this.warning||(this.warning=new o(this),e=!0),this.warning.setText(t,i)}else this.warning&&!i?(this.warning.dispose(),e=!0):this.warning&&(o=this.warning.getText(),this.warning.setText("",i),(e=this.warning.getText())||this.warning.dispose(),e=o!==e);e&&this.rendered&&(this.render(),this.bumpNeighbours())}},V.BlockSvg.prototype.setMutator=function(t){this.mutator&&this.mutator!==t&&this.mutator.dispose(),t&&(t.setBlock(this),this.mutator=t,t.createIcon()),this.rendered&&(this.render(),this.bumpNeighbours())},V.BlockSvg.prototype.setEnabled=function(t){this.isEnabled()!==t&&(D.Block.prototype.setEnabled.call(this,t),this.rendered&&!this.getInheritedDisabled()&&this.updateDisabled())},V.BlockSvg.prototype.setHighlighted=function(t){this.rendered&&this.pathObject.updateHighlighted(t)},V.BlockSvg.prototype.addSelect=function(){this.pathObject.updateSelected(!0)},V.BlockSvg.prototype.removeSelect=function(){this.pathObject.updateSelected(!1)},V.BlockSvg.prototype.setDeleteStyle=function(t){this.pathObject.updateDraggingDelete(t)},V.BlockSvg.prototype.getColour=function(){return this.style.colourPrimary},V.BlockSvg.prototype.setColour=function(t){D.Block.prototype.setColour.call(this,t),t=this.workspace.getRenderer().getConstants().getBlockStyleForColour(this.colour_),this.pathObject.setStyle(t.style),this.style=t.style,this.styleName_=t.name,this.applyColour()},V.BlockSvg.prototype.setStyle=function(t){var e=this.workspace.getRenderer().getConstants().getBlockStyle(t);if(this.styleName_=t,e)this.hat=e.hat,this.pathObject.setStyle(e),this.colour_=e.colourPrimary,this.style=e,this.applyColour();else throw Error("Invalid style name: "+t)},V.BlockSvg.prototype.bringToFront=function(){var t=this;do{var e=t.getSvgRoot(),o=e.parentNode,i=o.childNodes;i[i.length-1]!==e&&o.appendChild(e),t=t.getParent()}while(t)},V.BlockSvg.prototype.setPreviousStatement=function(t,e){D.Block.prototype.setPreviousStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},V.BlockSvg.prototype.setNextStatement=function(t,e){D.Block.prototype.setNextStatement.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},V.BlockSvg.prototype.setOutput=function(t,e){D.Block.prototype.setOutput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},V.BlockSvg.prototype.setInputsInline=function(t){D.Block.prototype.setInputsInline.call(this,t),this.rendered&&(this.render(),this.bumpNeighbours())},V.BlockSvg.prototype.removeInput=function(t,e){return t=D.Block.prototype.removeInput.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours()),t},V.BlockSvg.prototype.moveNumberedInputBefore=function(t,e){D.Block.prototype.moveNumberedInputBefore.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours())},V.BlockSvg.prototype.appendInput_=function(t,e){return t=D.Block.prototype.appendInput_.call(this,t,e),this.rendered&&(this.render(),this.bumpNeighbours()),t},V.BlockSvg.prototype.setConnectionTracking=function(t){if(this.previousConnection&&this.previousConnection.setTracking(t),this.outputConnection&&this.outputConnection.setTracking(t),this.nextConnection){this.nextConnection.setTracking(t);var e=this.nextConnection.targetBlock();e&&e.setConnectionTracking(t)}if(!this.collapsed_)for(e=0;e<this.inputList.length;e++){var o=this.inputList[e].connection;o&&(o.setTracking(t),(o=o.targetBlock())&&o.setConnectionTracking(t))}},V.BlockSvg.prototype.getConnections_=function(t){var e=[];if((t||this.rendered)&&(this.outputConnection&&e.push(this.outputConnection),this.previousConnection&&e.push(this.previousConnection),this.nextConnection&&e.push(this.nextConnection),t||!this.collapsed_)){t=0;for(var o;o=this.inputList[t];t++)o.connection&&e.push(o.connection)}return e},V.BlockSvg.prototype.lastConnectionInStack=function(t){return D.Block.prototype.lastConnectionInStack.call(this,t)},V.BlockSvg.prototype.getMatchingConnection=function(t,e){return D.Block.prototype.getMatchingConnection.call(this,t,e)},V.BlockSvg.prototype.makeConnection_=function(t){return new gt.RenderedConnection(this,t)},V.BlockSvg.prototype.bumpNeighbours=function(){if(this.workspace&&!this.workspace.isDragging()){var t=this.getRootBlock();if(!t.isInFlyout)for(var e=this.getConnections_(!1),o=0,i;i=e[o];o++){var s=i;s.isConnected()&&s.isSuperior()&&s.targetBlock().bumpNeighbours(),i=i.neighbours(n.module$exports$Blockly$config.config.snapRadius);for(var l=0,h;h=i[l];l++)s.isConnected()&&h.isConnected()||h.getSourceBlock().getRootBlock()!==t&&(s.isSuperior()?h.bumpAwayFrom(s):s.bumpAwayFrom(h))}}},V.BlockSvg.prototype.scheduleSnapAndBump=function(){var t=this,e=(0,p.getGroup)();setTimeout(function(){(0,p.setGroup)(e),t.snapToGrid(),(0,p.setGroup)(!1)},n.module$exports$Blockly$config.config.bumpDelay/2),setTimeout(function(){(0,p.setGroup)(e),t.bumpNeighbours(),(0,p.setGroup)(!1)},n.module$exports$Blockly$config.config.bumpDelay)},V.BlockSvg.prototype.positionNearConnection=function(t,e){t.type!==n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT&&t.type!==n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE||this.moveBy(e.x-t.x,e.y-t.y)},V.BlockSvg.prototype.getParent=function(){return D.Block.prototype.getParent.call(this)},V.BlockSvg.prototype.getSurroundParent=function(){return D.Block.prototype.getSurroundParent.call(this)},V.BlockSvg.prototype.getNextBlock=function(){return D.Block.prototype.getNextBlock.call(this)},V.BlockSvg.prototype.getPreviousBlock=function(){return D.Block.prototype.getPreviousBlock.call(this)},V.BlockSvg.prototype.getFirstStatementConnection=function(){return D.Block.prototype.getFirstStatementConnection.call(this)},V.BlockSvg.prototype.getTopStackBlock=function(){return D.Block.prototype.getTopStackBlock.call(this)},V.BlockSvg.prototype.getChildren=function(t){return D.Block.prototype.getChildren.call(this,t)},V.BlockSvg.prototype.getDescendants=function(t){return D.Block.prototype.getDescendants.call(this,t)},V.BlockSvg.prototype.getInputTargetBlock=function(t){return D.Block.prototype.getInputTargetBlock.call(this,t)},V.BlockSvg.prototype.getRootBlock=function(){return D.Block.prototype.getRootBlock.call(this)},V.BlockSvg.prototype.render=function(t){if(!this.renderIsInProgress_){this.renderIsInProgress_=!0;try{if(this.rendered=!0,(0,_.startTextWidthCache)(),this.isCollapsed()&&this.updateCollapsed_(),this.workspace.getRenderer().render(this),this.updateConnectionLocations_(),t!==!1){var e=this.getParent();e?e.render(!0):this.workspace.resizeContents()}(0,_.stopTextWidthCache)(),this.updateMarkers_()}finally{this.renderIsInProgress_=!1}}},V.BlockSvg.prototype.updateMarkers_=function(){this.workspace.keyboardAccessibilityMode&&this.pathObject.cursorSvg&&this.workspace.getCursor().draw(),this.workspace.keyboardAccessibilityMode&&this.pathObject.markerSvg&&this.workspace.getMarker(be.MarkerManager.LOCAL_MARKER).draw()},V.BlockSvg.prototype.updateConnectionLocations_=function(){var t=this.getRelativeToSurfaceXY();this.previousConnection&&this.previousConnection.moveToOffset(t),this.outputConnection&&this.outputConnection.moveToOffset(t);for(var e=0;e<this.inputList.length;e++){var o=this.inputList[e].connection;o&&(o.moveToOffset(t),o.isConnected()&&o.tighten())}this.nextConnection&&(this.nextConnection.moveToOffset(t),this.nextConnection.isConnected()&&this.nextConnection.tighten())},V.BlockSvg.prototype.setCursorSvg=function(t){this.pathObject.setCursorSvg(t)},V.BlockSvg.prototype.setMarkerSvg=function(t){this.pathObject.setMarkerSvg(t)},V.BlockSvg.prototype.getHeightWidth=function(){var t=this.height,e=this.width,o=this.getNextBlock();if(o){o=o.getHeightWidth();var i=this.workspace.getRenderer().getConstants().NOTCH_HEIGHT;t+=o.height-i,e=Math.max(e,o.width)}return{height:t,width:e}},V.BlockSvg.prototype.fadeForReplacement=function(t){this.pathObject.updateReplacementFade(t)},V.BlockSvg.prototype.highlightShapeForInput=function(t,e){this.pathObject.updateShapeForInputHighlight(t,e)},V.BlockSvg.INLINE=-1,V.BlockSvg.COLLAPSED_WARNING_ID="TEMP_COLLAPSED_WARNING_";var Ae={ConnectionDB:function(t){this.connections_=[],this.connectionChecker_=t}};Ae.ConnectionDB.prototype.addConnection=function(t,e){e=this.calculateIndexForYPos_(e),this.connections_.splice(e,0,t)},Ae.ConnectionDB.prototype.findIndexOfConnection_=function(t,e){if(!this.connections_.length)return-1;var o=this.calculateIndexForYPos_(e);if(o>=this.connections_.length)return-1;e=t.y;for(var i=o;0<=i&&this.connections_[i].y===e;){if(this.connections_[i]===t)return i;i--}for(i=o;i<this.connections_.length&&this.connections_[i].y===e;){if(this.connections_[i]===t)return i;i++}return-1},Ae.ConnectionDB.prototype.calculateIndexForYPos_=function(t){if(!this.connections_.length)return 0;for(var e=0,o=this.connections_.length;e<o;){var i=Math.floor((e+o)/2);if(this.connections_[i].y<t)e=i+1;else if(this.connections_[i].y>t)o=i;else{e=i;break}}return e},Ae.ConnectionDB.prototype.removeConnection=function(t,e){if(t=this.findIndexOfConnection_(t,e),t===-1)throw Error("Unable to find connection in connectionDB.");this.connections_.splice(t,1)},Ae.ConnectionDB.prototype.getNeighbours=function(t,e){function o(x){var F=s-i[x].x,it=l-i[x].y;return Math.sqrt(F*F+it*it)<=e&&C.push(i[x]),it<e}var i=this.connections_,s=t.x,l=t.y;t=0;for(var h=i.length-2,S=h;t<S;)i[S].y<l?t=S:h=S,S=Math.floor((t+h)/2);var C=[];if(h=t=S,i.length){for(;0<=t&&o(t);)t--;do h++;while(h<i.length&&o(h))}return C},Ae.ConnectionDB.prototype.isInYRange_=function(t,e,o){return Math.abs(this.connections_[t].y-e)<=o},Ae.ConnectionDB.prototype.searchForClosest=function(t,e,o){if(!this.connections_.length)return{connection:null,radius:e};var i=t.y,s=t.x;t.x=s+o.x,t.y=i+o.y;var l=this.calculateIndexForYPos_(t.y);o=null;for(var h=e,S,C=l-1;0<=C&&this.isInYRange_(C,t.y,e);)S=this.connections_[C],this.connectionChecker_.canConnect(t,S,!0,h)&&(o=S,h=S.distanceFrom(t)),C--;for(;l<this.connections_.length&&this.isInYRange_(l,t.y,e);)S=this.connections_[l],this.connectionChecker_.canConnect(t,S,!0,h)&&(o=S,h=S.distanceFrom(t)),l++;return t.x=s,t.y=i,{connection:o,radius:h}},Ae.ConnectionDB.init=function(t){var e=[];return e[n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE]=new Ae.ConnectionDB(t),e[n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE]=new Ae.ConnectionDB(t),e[n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT]=new Ae.ConnectionDB(t),e[n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT]=new Ae.ConnectionDB(t),e};var vo={ThemeManager:function(t,e){this.workspace_=t,this.theme_=e,this.subscribedWorkspaces_=[],this.componentDB_=Object.create(null)}};vo.ThemeManager.prototype.getTheme=function(){return this.theme_},vo.ThemeManager.prototype.setTheme=function(t){var e=this.theme_;for(this.theme_=t,(t=this.workspace_.getInjectionDiv())&&(e&&(0,_.removeClass)(t,e.getClassName()),(0,_.addClass)(t,this.theme_.getClassName())),e=0;t=this.subscribedWorkspaces_[e];e++)t.refreshTheme();e=0,t=Object.keys(this.componentDB_);for(var o;o=t[e];e++)for(var i=0,s;s=this.componentDB_[o][i];i++){var l=s.element;s=s.propertyName;var h=this.theme_&&this.theme_.getComponentStyle(o);l.style[s]=h||""}for(e=n.$jscomp.makeIterator(this.subscribedWorkspaces_),t=e.next();!t.done;t=e.next())t.value.hideChaff()},vo.ThemeManager.prototype.subscribeWorkspace=function(t){this.subscribedWorkspaces_.push(t)},vo.ThemeManager.prototype.unsubscribeWorkspace=function(t){if(!(0,we.removeElem)(this.subscribedWorkspaces_,t))throw Error("Cannot unsubscribe a workspace that hasn't been subscribed.")},vo.ThemeManager.prototype.subscribe=function(t,e,o){this.componentDB_[e]||(this.componentDB_[e]=[]),this.componentDB_[e].push({element:t,propertyName:o}),e=this.theme_&&this.theme_.getComponentStyle(e),t.style[o]=e||""},vo.ThemeManager.prototype.unsubscribe=function(t){if(t)for(var e=Object.keys(this.componentDB_),o=0,i;i=e[o];o++){for(var s=this.componentDB_[i],l=s.length-1;0<=l;l--)s[l].element===t&&s.splice(l,1);this.componentDB_[i].length||delete this.componentDB_[i]}},vo.ThemeManager.prototype.dispose=function(){this.componentDB_=this.subscribedWorkspaces_=this.theme_=this.owner_=null};var _e={},qs=5,Zs=6;_e.TouchGesture=function(t,e){et.Gesture.call(this,t,e),this.isMultiTouch_=!1,this.cachedPoints_=Object.create(null),this.startDistance_=this.previousScale_=0,this.isPinchZoomEnabled_=this.onStartWrapper_=null},n.$jscomp.inherits(_e.TouchGesture,et.Gesture),_e.TouchGesture.prototype.doStart=function(t){this.isPinchZoomEnabled_=this.startWorkspace_.options.zoomOptions&&this.startWorkspace_.options.zoomOptions.pinch,et.Gesture.prototype.doStart.call(this,t),!this.isEnding_&&(0,g.isTouchEvent)(t)&&this.handleTouchStart(t)},_e.TouchGesture.prototype.bindMouseEvents=function(t){this.onStartWrapper_=(0,$.conditionalBind)(document,"mousedown",null,this.handleStart.bind(this),!0),this.onMoveWrapper_=(0,$.conditionalBind)(document,"mousemove",null,this.handleMove.bind(this),!0),this.onUpWrapper_=(0,$.conditionalBind)(document,"mouseup",null,this.handleUp.bind(this),!0),t.preventDefault(),t.stopPropagation()},_e.TouchGesture.prototype.handleStart=function(t){!this.isDragging()&&(0,g.isTouchEvent)(t)&&(this.handleTouchStart(t),this.isMultiTouch()&&(0,g.longStop)())},_e.TouchGesture.prototype.handleMove=function(t){this.isDragging()?(0,g.shouldHandleEvent)(t)&&et.Gesture.prototype.handleMove.call(this,t):this.isMultiTouch()?((0,g.isTouchEvent)(t)&&this.handleTouchMove(t),(0,g.longStop)()):et.Gesture.prototype.handleMove.call(this,t)},_e.TouchGesture.prototype.handleUp=function(t){(0,g.isTouchEvent)(t)&&!this.isDragging()&&this.handleTouchEnd(t),!this.isMultiTouch()||this.isDragging()?(0,g.shouldHandleEvent)(t)&&et.Gesture.prototype.handleUp.call(this,t):(t.preventDefault(),t.stopPropagation(),this.dispose())},_e.TouchGesture.prototype.isMultiTouch=function(){return this.isMultiTouch_},_e.TouchGesture.prototype.dispose=function(){et.Gesture.prototype.dispose.call(this),this.onStartWrapper_&&(0,$.unbind)(this.onStartWrapper_)},_e.TouchGesture.prototype.handleTouchStart=function(t){var e=(0,g.getTouchIdentifierFromEvent)(t);this.cachedPoints_[e]=this.getTouchPoint(t),e=Object.keys(this.cachedPoints_),e.length===2&&(this.startDistance_=H.Coordinate.distance(this.cachedPoints_[e[0]],this.cachedPoints_[e[1]]),this.isMultiTouch_=!0,t.preventDefault())},_e.TouchGesture.prototype.handleTouchMove=function(t){var e=(0,g.getTouchIdentifierFromEvent)(t);this.cachedPoints_[e]=this.getTouchPoint(t),e=Object.keys(this.cachedPoints_),this.isPinchZoomEnabled_&&e.length===2?this.handlePinch_(t):et.Gesture.prototype.handleMove.call(this,t)},_e.TouchGesture.prototype.handlePinch_=function(t){var e=Object.keys(this.cachedPoints_);if(e=H.Coordinate.distance(this.cachedPoints_[e[0]],this.cachedPoints_[e[1]])/this.startDistance_,0<this.previousScale_&&1/0>this.previousScale_){var o=e-this.previousScale_;o=0<o?o*qs:o*Zs;var i=this.startWorkspace_,s=(0,$.mouseToSvg)(t,i.getParentSvg(),i.getInverseScreenCTM());i.zoom(s.x,s.y,o)}this.previousScale_=e,t.preventDefault()},_e.TouchGesture.prototype.handleTouchEnd=function(t){t=(0,g.getTouchIdentifierFromEvent)(t),this.cachedPoints_[t]&&delete this.cachedPoints_[t],2>Object.keys(this.cachedPoints_).length&&(this.cachedPoints_=Object.create(null),this.previousScale_=0)},_e.TouchGesture.prototype.getTouchPoint=function(t){return this.startWorkspace_?new H.Coordinate(t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY):null};var Uo={},Qs=100;Uo.WorkspaceAudio=function(t){this.parentWorkspace_=t,this.SOUNDS_=Object.create(null),this.lastSound_=null},Uo.WorkspaceAudio.prototype.dispose=function(){this.SOUNDS_=this.parentWorkspace_=null},Uo.WorkspaceAudio.prototype.load=function(t,e){if(t.length){try{var o=new n.module$exports$Blockly$utils$global.globalThis.Audio}catch{return}for(var i,s=0;s<t.length;s++){var l=t[s],h=l.match(/\.(\w+)$/);if(h&&o.canPlayType("audio/"+h[1])){i=new n.module$exports$Blockly$utils$global.globalThis.Audio(l);break}}i&&i.play&&(this.SOUNDS_[e]=i)}},Uo.WorkspaceAudio.prototype.preload=function(){for(var t in this.SOUNDS_){var e=this.SOUNDS_[t];e.volume=.01;var o=e.play();if(o!==void 0?o.then(e.pause).catch(function(){}):e.pause(),G.IPAD||G.IPHONE)break}},Uo.WorkspaceAudio.prototype.play=function(t,e){var o=this.SOUNDS_[t];o?(t=new Date,this.lastSound_!==null&&t-this.lastSound_<Qs||(this.lastSound_=t,o=G.IPAD||G.ANDROID?o:o.cloneNode(),o.volume=e===void 0?1:e,o.play())):this.parentWorkspace_&&this.parentWorkspace_.getAudioManager().play(t,e)};var Cn={ThemeChange:function(t,e){pt.UiBase.call(this,e),this.themeName=t,this.type=p.THEME_CHANGE}};n.$jscomp.inherits(Cn.ThemeChange,pt.UiBase),Cn.ThemeChange.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.themeName=this.themeName,t},Cn.ThemeChange.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.themeName=t.themeName},(0,b.register)(b.Type.EVENT,p.THEME_CHANGE,Cn.ThemeChange);var $n={ViewportChange:function(t,e,o,i,s){pt.UiBase.call(this,i),this.viewTop=t,this.viewLeft=e,this.scale=o,this.oldScale=s,this.type=p.VIEWPORT_CHANGE}};n.$jscomp.inherits($n.ViewportChange,pt.UiBase),$n.ViewportChange.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.viewTop=this.viewTop,t.viewLeft=this.viewLeft,t.scale=this.scale,t.oldScale=this.oldScale,t},$n.ViewportChange.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.viewTop=t.viewTop,this.viewLeft=t.viewLeft,this.scale=t.scale,this.oldScale=t.oldScale},(0,b.register)(b.Type.EVENT,p.VIEWPORT_CHANGE,$n.ViewportChange);var tl={IMetricsManager:function(){}},ce={MetricsManager:function(t){this.workspace_=t}};ce.MetricsManager.prototype.getDimensionsPx_=function(t){var e=0,o=0;return t&&(e=t.getWidth(),o=t.getHeight()),new jt.Size(e,o)},ce.MetricsManager.prototype.getFlyoutMetrics=function(t){return t=this.getDimensionsPx_(this.workspace_.getFlyout(t)),{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},ce.MetricsManager.prototype.getToolboxMetrics=function(){var t=this.getDimensionsPx_(this.workspace_.getToolbox());return{width:t.width,height:t.height,position:this.workspace_.toolboxPosition}},ce.MetricsManager.prototype.getSvgMetrics=function(){return this.workspace_.getCachedParentSvgSize()},ce.MetricsManager.prototype.getAbsoluteMetrics=function(){var t=0,e=this.getToolboxMetrics(),o=this.getFlyoutMetrics(!0),i=!!this.workspace_.getToolbox(),s=!!this.workspace_.getFlyout(!0),l=i?e.position:o.position,h=l===q.Position.LEFT;return l=l===q.Position.TOP,i&&h?t=e.width:s&&h&&(t=o.width),h=0,i&&l?h=e.height:s&&l&&(h=o.height),{top:h,left:t}},ce.MetricsManager.prototype.getViewMetrics=function(t){t=t?this.workspace_.scale:1;var e=this.getSvgMetrics(),o=this.getToolboxMetrics(),i=this.getFlyoutMetrics(!0),s=this.workspace_.getToolbox()?o.position:i.position;return this.workspace_.getToolbox()?s===q.Position.TOP||s===q.Position.BOTTOM?e.height-=o.height:(s===q.Position.LEFT||s===q.Position.RIGHT)&&(e.width-=o.width):this.workspace_.getFlyout(!0)&&(s===q.Position.TOP||s===q.Position.BOTTOM?e.height-=i.height:(s===q.Position.LEFT||s===q.Position.RIGHT)&&(e.width-=i.width)),{height:e.height/t,width:e.width/t,top:-this.workspace_.scrollY/t,left:-this.workspace_.scrollX/t}},ce.MetricsManager.prototype.getContentMetrics=function(t){t=t?1:this.workspace_.scale;var e=this.workspace_.getBlocksBoundingBox();return{height:(e.bottom-e.top)*t,width:(e.right-e.left)*t,top:e.top*t,left:e.left*t}},ce.MetricsManager.prototype.hasFixedEdges=function(){return!this.workspace_.isMovableHorizontally()||!this.workspace_.isMovableVertically()},ce.MetricsManager.prototype.getComputedFixedEdges_=function(t){if(!this.hasFixedEdges())return{};var e=this.workspace_.isMovableHorizontally(),o=this.workspace_.isMovableVertically();t=t||this.getViewMetrics(!1);var i={};return o||(i.top=t.top,i.bottom=t.top+t.height),e||(i.left=t.left,i.right=t.left+t.width),i},ce.MetricsManager.prototype.getPaddedContent_=function(t,e){var o=e.top+e.height,i=e.left+e.width,s=t.width;t=t.height;var l=s/2,h=t/2;return{top:Math.min(e.top-h,o-t),bottom:Math.max(o+h,e.top+t),left:Math.min(e.left-l,i-s),right:Math.max(i+l,e.left+s)}},ce.MetricsManager.prototype.getScrollMetrics=function(t,e,o){t=t?this.workspace_.scale:1,e=e||this.getViewMetrics(!1);var i=o||this.getContentMetrics();o=this.getComputedFixedEdges_(e),e=this.getPaddedContent_(e,i),i=o.top!==void 0?o.top:e.top;var s=o.left!==void 0?o.left:e.left;return{top:i/t,left:s/t,width:((o.right!==void 0?o.right:e.right)-s)/t,height:((o.bottom!==void 0?o.bottom:e.bottom)-i)/t}},ce.MetricsManager.prototype.getUiMetrics=function(){return{viewMetrics:this.getViewMetrics(),absoluteMetrics:this.getAbsoluteMetrics(),toolboxMetrics:this.getToolboxMetrics()}},ce.MetricsManager.prototype.getMetrics=function(){var t=this.getToolboxMetrics(),e=this.getFlyoutMetrics(!0),o=this.getSvgMetrics(),i=this.getAbsoluteMetrics(),s=this.getViewMetrics(),l=this.getContentMetrics(),h=this.getScrollMetrics(!1,s,l);return{contentHeight:l.height,contentWidth:l.width,contentTop:l.top,contentLeft:l.left,scrollHeight:h.height,scrollWidth:h.width,scrollTop:h.top,scrollLeft:h.left,viewHeight:s.height,viewWidth:s.width,viewTop:s.top,viewLeft:s.left,absoluteTop:i.top,absoluteLeft:i.left,svgHeight:o.height,svgWidth:o.width,toolboxWidth:t.width,toolboxHeight:t.height,toolboxPosition:t.position,flyoutWidth:e.width,flyoutHeight:e.height}},(0,b.register)(b.Type.METRICS_MANAGER,b.DEFAULT,ce.MetricsManager);var L={WorkspaceSvg:function(t,e,o){X.Workspace.call(this,t),this.resizeHandlerWrapper_=null,this.resizesEnabled_=this.isVisible_=this.rendered=!0,this.startScrollY=this.startScrollX=this.scrollY=this.scrollX=0,this.dragDeltaXY_=null,this.oldScale_=this.scale=1,this.oldLeft_=this.oldTop_=0,this.workspaceDragSurface_=this.blockDragSurface_=this.currentGesture_=this.toolbox_=this.flyout_=this.scrollbar=this.trashcan=null,this.isDragSurfaceActive_=this.useWorkspaceDragSurface_=!1,this.inverseScreenCTM_=this.targetWorkspace=this.lastRecordedPageScroll_=this.injectionDiv_=null,this.inverseScreenCTMDirty_=!0,this.metricsManager_=new((0,b.getClassFromOptions)(b.Type.METRICS_MANAGER,t,!0))(this),this.getMetrics=t.getMetrics||this.metricsManager_.getMetrics.bind(this.metricsManager_),this.setMetrics=t.setMetrics||L.WorkspaceSvg.setTopLevelWorkspaceMetrics_,this.componentManager_=new It.ComponentManager,this.connectionDBList=Ae.ConnectionDB.init(this.connectionChecker),e&&(this.blockDragSurface_=e),o&&(this.workspaceDragSurface_=o),this.useWorkspaceDragSurface_=!!this.workspaceDragSurface_&&(0,yt.is3dSupported)(),this.highlightedBlocks_=[],this.audioManager_=new Uo.WorkspaceAudio(t.parentWorkspace),this.grid_=this.options.gridPattern?new Ye.Grid(this.options.gridPattern,t.gridOptions):null,this.markerManager_=new be.MarkerManager(this),this.toolboxCategoryCallbacks_=Object.create(null),this.flyoutButtonCallbacks_=Object.create(null),(t=n.module$exports$Blockly$Variables)&&t.flyoutCategory&&this.registerToolboxCategoryCallback(t.CATEGORY_NAME,t.flyoutCategory),(t=Vo)&&t.flyoutCategory&&this.registerToolboxCategoryCallback(t.CATEGORY_NAME,t.flyoutCategory),(t=n.module$exports$Blockly$Procedures)&&t.flyoutCategory&&(this.registerToolboxCategoryCallback(t.CATEGORY_NAME,t.flyoutCategory),this.addChangeListener(t.mutatorOpenListener)),this.themeManager_=this.options.parentWorkspace?this.options.parentWorkspace.getThemeManager():new vo.ThemeManager(this,this.options.theme||mn.Classic),this.themeManager_.subscribeWorkspace(this),this.renderer_=(0,kt.init)(this.options.renderer||"geras",this.getTheme(),this.options.rendererOverrides),this.cachedParentSvg_=null,this.keyboardAccessibilityMode=!1,this.topBoundedElements_=[],this.dragTargetAreas_=[],this.cachedParentSvgSize_=new jt.Size(0,0)}};n.$jscomp.inherits(L.WorkspaceSvg,X.Workspace),L.WorkspaceSvg.prototype.getMarkerManager=function(){return this.markerManager_},L.WorkspaceSvg.prototype.getMetricsManager=function(){return this.metricsManager_},L.WorkspaceSvg.prototype.setMetricsManager=function(t){this.metricsManager_=t,this.getMetrics=this.metricsManager_.getMetrics.bind(this.metricsManager_)},L.WorkspaceSvg.prototype.getComponentManager=function(){return this.componentManager_},L.WorkspaceSvg.prototype.setCursorSvg=function(t){this.markerManager_.setCursorSvg(t)},L.WorkspaceSvg.prototype.setMarkerSvg=function(t){this.markerManager_.setMarkerSvg(t)},L.WorkspaceSvg.prototype.getMarker=function(t){return this.markerManager_?this.markerManager_.getMarker(t):null},L.WorkspaceSvg.prototype.getCursor=function(){return this.markerManager_?this.markerManager_.getCursor():null},L.WorkspaceSvg.prototype.getRenderer=function(){return this.renderer_},L.WorkspaceSvg.prototype.getThemeManager=function(){return this.themeManager_},L.WorkspaceSvg.prototype.getTheme=function(){return this.themeManager_.getTheme()},L.WorkspaceSvg.prototype.setTheme=function(t){t||(t=mn.Classic),this.themeManager_.setTheme(t)},L.WorkspaceSvg.prototype.refreshTheme=function(){this.svgGroup_&&this.renderer_.refreshDom(this.svgGroup_,this.getTheme()),this.updateBlockStyles_(this.getAllBlocks(!1).filter(function(e){return!!e.getStyleName()})),this.refreshToolboxSelection(),this.toolbox_&&this.toolbox_.refreshTheme(),this.isVisible()&&this.setVisible(!0);var t=new((0,p.get)(p.THEME_CHANGE))(this.getTheme().name,this.id);(0,p.fire)(t)},L.WorkspaceSvg.prototype.updateBlockStyles_=function(t){for(var e=0,o;o=t[e];e++){var i=o.getStyleName();i&&(o.setStyle(i),o.mutator&&o.mutator.updateBlockStyle())}},L.WorkspaceSvg.prototype.getInverseScreenCTM=function(){if(this.inverseScreenCTMDirty_){var t=this.getParentSvg().getScreenCTM();t&&(this.inverseScreenCTM_=t.inverse(),this.inverseScreenCTMDirty_=!1)}return this.inverseScreenCTM_},L.WorkspaceSvg.prototype.updateInverseScreenCTM=function(){this.inverseScreenCTMDirty_=!0},L.WorkspaceSvg.prototype.isVisible=function(){return this.isVisible_},L.WorkspaceSvg.prototype.getSvgXY=function(t){var e=0,o=0,i=1;((0,_.containsNode)(this.getCanvas(),t)||(0,_.containsNode)(this.getBubbleCanvas(),t))&&(i=this.scale);do{var s=(0,yt.getRelativeXY)(t);(t===this.getCanvas()||t===this.getBubbleCanvas())&&(i=1),e+=s.x*i,o+=s.y*i,t=t.parentNode}while(t&&t!==this.getParentSvg());return new H.Coordinate(e,o)},L.WorkspaceSvg.prototype.getCachedParentSvgSize=function(){var t=this.cachedParentSvgSize_;return new jt.Size(t.width,t.height)},L.WorkspaceSvg.prototype.getOriginOffsetInPixels=function(){return(0,yt.getInjectionDivXY)(this.getCanvas())},L.WorkspaceSvg.prototype.getInjectionDiv=function(){if(!this.injectionDiv_)for(var t=this.svgGroup_;t;){if((" "+(t.getAttribute("class")||"")+" ").indexOf(" injectionDiv ")!==-1){this.injectionDiv_=t;break}t=t.parentNode}return this.injectionDiv_},L.WorkspaceSvg.prototype.getBlockCanvas=function(){return this.svgBlockCanvas_},L.WorkspaceSvg.prototype.setResizeHandlerWrapper=function(t){this.resizeHandlerWrapper_=t},L.WorkspaceSvg.prototype.createDom=function(t){return this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyWorkspace"},null),t&&(this.svgBackground_=(0,_.createSvgElement)(R.Svg.RECT,{height:"100%",width:"100%",class:t},this.svgGroup_),t==="blocklyMainBackground"&&this.grid_?this.svgBackground_.style.fill="url(#"+this.grid_.getPatternId()+")":this.themeManager_.subscribe(this.svgBackground_,"workspaceBackgroundColour","fill")),this.svgBlockCanvas_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyBlockCanvas"},this.svgGroup_),this.svgBubbleCanvas_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyBubbleCanvas"},this.svgGroup_),this.isFlyout||((0,$.conditionalBind)(this.svgGroup_,"mousedown",this,this.onMouseDown_,!1,!0),document.body.addEventListener("wheel",function(){}),(0,$.conditionalBind)(this.svgGroup_,"wheel",this,this.onMouseWheel_)),this.options.hasCategories&&(this.toolbox_=new((0,b.getClassFromOptions)(b.Type.TOOLBOX,this.options,!0))(this)),this.grid_&&this.grid_.update(this.scale),this.recordDragTargets(),(t=(0,b.getClassFromOptions)(b.Type.CURSOR,this.options))&&this.markerManager_.setCursor(new t),this.renderer_.createDom(this.svgGroup_,this.getTheme()),this.svgGroup_},L.WorkspaceSvg.prototype.dispose=function(){if(this.rendered=!1,this.currentGesture_&&this.currentGesture_.cancel(),this.svgGroup_&&((0,_.removeNode)(this.svgGroup_),this.svgGroup_=null),this.svgBubbleCanvas_=this.svgBlockCanvas_=null,this.toolbox_&&(this.toolbox_.dispose(),this.toolbox_=null),this.flyout_&&(this.flyout_.dispose(),this.flyout_=null),this.trashcan&&(this.trashcan.dispose(),this.trashcan=null),this.scrollbar&&(this.scrollbar.dispose(),this.scrollbar=null),this.zoomControls_&&(this.zoomControls_.dispose(),this.zoomControls_=null),this.audioManager_&&(this.audioManager_.dispose(),this.audioManager_=null),this.grid_&&(this.grid_.dispose(),this.grid_=null),this.renderer_.dispose(),this.markerManager_&&(this.markerManager_.dispose(),this.markerManager_=null),X.Workspace.prototype.dispose.call(this),this.themeManager_&&(this.themeManager_.unsubscribeWorkspace(this),this.themeManager_.unsubscribe(this.svgBackground_),this.options.parentWorkspace||(this.themeManager_.dispose(),this.themeManager_=null)),this.flyoutButtonCallbacks_=this.toolboxCategoryCallbacks_=this.connectionDBList=null,!this.options.parentWorkspace){var t=this.getParentSvg();t&&t.parentNode&&(0,_.removeNode)(t.parentNode)}this.resizeHandlerWrapper_&&((0,$.unbind)(this.resizeHandlerWrapper_),this.resizeHandlerWrapper_=null)},L.WorkspaceSvg.prototype.newBlock=function(t,e){return new V.BlockSvg(this,t,e)},L.WorkspaceSvg.prototype.addTrashcan=function(){var t=$t.Trashcan;if(!t)throw Error("Missing require for Blockly.Trashcan");this.trashcan=new t(this),t=this.trashcan.createDom(),this.svgGroup_.insertBefore(t,this.svgBlockCanvas_)},L.WorkspaceSvg.prototype.addZoomControls=function(){var t=Ge.ZoomControls;if(!t)throw Error("Missing require for Blockly.ZoomControls");this.zoomControls_=new t(this),t=this.zoomControls_.createDom(),this.svgGroup_.appendChild(t)},L.WorkspaceSvg.prototype.addFlyout=function(t){var e=new Ee.Options({parentWorkspace:this,rtl:this.RTL,oneBasedIndex:this.options.oneBasedIndex,horizontalLayout:this.horizontalLayout,renderer:this.options.renderer,rendererOverrides:this.options.rendererOverrides,move:{scrollbars:!0}});return e.toolboxPosition=this.options.toolboxPosition,this.flyout_=this.horizontalLayout?new((0,b.getClassFromOptions)(b.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.options,!0))(e):new((0,b.getClassFromOptions)(b.Type.FLYOUTS_VERTICAL_TOOLBOX,this.options,!0))(e),this.flyout_.autoClose=!1,this.flyout_.getWorkspace().setVisible(!0),this.flyout_.createDom(t)},L.WorkspaceSvg.prototype.getFlyout=function(t){return this.flyout_||t?this.flyout_:this.toolbox_?this.toolbox_.getFlyout():null},L.WorkspaceSvg.prototype.getToolbox=function(){return this.toolbox_},L.WorkspaceSvg.prototype.updateScreenCalculations_=function(){this.updateInverseScreenCTM(),this.recordDragTargets()},L.WorkspaceSvg.prototype.resizeContents=function(){this.resizesEnabled_&&this.rendered&&(this.scrollbar&&this.scrollbar.resize(),this.updateInverseScreenCTM())},L.WorkspaceSvg.prototype.resize=function(){this.toolbox_&&this.toolbox_.position(),this.flyout_&&this.flyout_.position();for(var t=this.componentManager_.getComponents(It.ComponentManager.Capability.POSITIONABLE,!0),e=this.getMetricsManager().getUiMetrics(),o=[],i=0,s;s=t[i];i++)s.position(e,o),(s=s.getBoundingRectangle())&&o.push(s);this.scrollbar&&this.scrollbar.resize(),this.updateScreenCalculations_()},L.WorkspaceSvg.prototype.updateScreenCalculationsIfScrolled=function(){var t=(0,yt.getDocumentScroll)();H.Coordinate.equals(this.lastRecordedPageScroll_,t)||(this.lastRecordedPageScroll_=t,this.updateScreenCalculations_())},L.WorkspaceSvg.prototype.getCanvas=function(){return this.svgBlockCanvas_},L.WorkspaceSvg.prototype.setCachedParentSvgSize=function(t,e){var o=this.getParentSvg();t!=null&&(this.cachedParentSvgSize_.width=t,o.cachedWidth_=t),e!=null&&(this.cachedParentSvgSize_.height=e,o.cachedHeight_=e)},L.WorkspaceSvg.prototype.getBubbleCanvas=function(){return this.svgBubbleCanvas_},L.WorkspaceSvg.prototype.getParentSvg=function(){if(!this.cachedParentSvg_)for(var t=this.svgGroup_;t;){if(t.tagName==="svg"){this.cachedParentSvg_=t;break}t=t.parentNode}return this.cachedParentSvg_},L.WorkspaceSvg.prototype.maybeFireViewportChangeEvent=function(){if((0,p.isEnabled)()){var t=this.scale,e=-this.scrollY,o=-this.scrollX;if(!(t===this.oldScale_&&1>Math.abs(e-this.oldTop_)&&1>Math.abs(o-this.oldLeft_))){var i=new((0,p.get)(p.VIEWPORT_CHANGE))(e,o,t,this.id,this.oldScale_);this.oldScale_=t,this.oldTop_=e,this.oldLeft_=o,(0,p.fire)(i)}}},L.WorkspaceSvg.prototype.translate=function(t,e){if(this.useWorkspaceDragSurface_&&this.isDragSurfaceActive_)this.workspaceDragSurface_.translateSurface(t,e);else{var o="translate("+t+","+e+") scale("+this.scale+")";this.svgBlockCanvas_.setAttribute("transform",o),this.svgBubbleCanvas_.setAttribute("transform",o)}this.blockDragSurface_&&this.blockDragSurface_.translateAndScaleGroup(t,e,this.scale),this.grid_&&this.grid_.moveTo(t,e),this.maybeFireViewportChangeEvent()},L.WorkspaceSvg.prototype.resetDragSurface=function(){if(this.useWorkspaceDragSurface_){this.isDragSurfaceActive_=!1;var t=this.workspaceDragSurface_.getSurfaceTranslation();this.workspaceDragSurface_.clearAndHide(this.svgGroup_),t="translate("+t.x+","+t.y+") scale("+this.scale+")",this.svgBlockCanvas_.setAttribute("transform",t),this.svgBubbleCanvas_.setAttribute("transform",t)}},L.WorkspaceSvg.prototype.setupDragSurface=function(){if(this.useWorkspaceDragSurface_&&!this.isDragSurfaceActive_){this.isDragSurfaceActive_=!0;var t=this.svgBlockCanvas_.previousSibling,e=parseInt(this.getParentSvg().getAttribute("width"),10),o=parseInt(this.getParentSvg().getAttribute("height"),10),i=(0,yt.getRelativeXY)(this.getCanvas());this.workspaceDragSurface_.setContentsAndShow(this.getCanvas(),this.getBubbleCanvas(),t,e,o,this.scale),this.workspaceDragSurface_.translateSurface(i.x,i.y)}},L.WorkspaceSvg.prototype.getBlockDragSurface=function(){return this.blockDragSurface_},L.WorkspaceSvg.prototype.getWidth=function(){var t=this.getMetrics();return t?t.viewWidth/this.scale:0},L.WorkspaceSvg.prototype.setVisible=function(t){if(this.isVisible_=t,this.svgGroup_)if(this.scrollbar&&this.scrollbar.setContainerVisible(t),this.getFlyout()&&this.getFlyout().setContainerVisible(t),this.getParentSvg().style.display=t?"block":"none",this.toolbox_&&this.toolbox_.setVisible(t),t){t=this.getAllBlocks(!1);for(var e=t.length-1;0<=e;e--)t[e].markDirty();this.render(),this.toolbox_&&this.toolbox_.position()}else this.hideChaff(!0)},L.WorkspaceSvg.prototype.render=function(){for(var t=this.getAllBlocks(!1),e=t.length-1;0<=e;e--)t[e].render(!1);if(this.currentGesture_)for(t=this.currentGesture_.getInsertionMarkers(),e=0;e<t.length;e++)t[e].render(!1);this.markerManager_.updateMarkers()},L.WorkspaceSvg.prototype.highlightBlock=function(t,e){if(e===void 0){for(var o=0,i;i=this.highlightedBlocks_[o];o++)i.setHighlighted(!1);this.highlightedBlocks_.length=0}(t=t?this.getBlockById(t):null)&&((e=e===void 0||e)?this.highlightedBlocks_.indexOf(t)===-1&&this.highlightedBlocks_.push(t):(0,we.removeElem)(this.highlightedBlocks_,t),t.setHighlighted(e))},L.WorkspaceSvg.prototype.paste=function(t){if(!this.rendered||!t.type&&!t.tagName)return null;this.currentGesture_&&this.currentGesture_.cancel();var e=(0,p.getGroup)();return e||(0,p.setGroup)(!0),t=t.type?this.pasteBlock_(null,t):t.tagName.toLowerCase()==="comment"?this.pasteWorkspaceComment_(t):this.pasteBlock_(t,null),(0,p.setGroup)(e),t},L.WorkspaceSvg.prototype.pasteBlock_=function(t,e){(0,p.disable)();try{var o=0,i=0;if(t){var s=(0,n.module$exports$Blockly$Xml.domToBlock)(t,this);o=parseInt(t.getAttribute("x"),10),this.RTL&&(o=-o),i=parseInt(t.getAttribute("y"),10)}else e&&(s=(0,zt.append)(e,this),o=e.x||10,this.RTL&&(o=this.getWidth()-o),i=e.y||10);if(!isNaN(o)&&!isNaN(i)){do{var l=!1,h=this.getAllBlocks(!1);for(t=0,e=void 0;e=h[t];t++){var S=e.getRelativeToSurfaceXY();if(1>=Math.abs(o-S.x)&&1>=Math.abs(i-S.y)){l=!0;break}}if(!l){var C=s.getConnections_(!1);for(t=0,e=void 0;e=C[t];t++)if(e.closest(n.module$exports$Blockly$config.config.snapRadius,new H.Coordinate(o,i)).connection){l=!0;break}}l&&(o=this.RTL?o-n.module$exports$Blockly$config.config.snapRadius:o+n.module$exports$Blockly$config.config.snapRadius,i+=2*n.module$exports$Blockly$config.config.snapRadius)}while(l);s.moveTo(new H.Coordinate(o,i))}}finally{(0,p.enable)()}return(0,p.isEnabled)()&&!s.isShadow()&&(0,p.fire)(new((0,p.get)(p.CREATE))(s)),s.select(),s},L.WorkspaceSvg.prototype.pasteWorkspaceComment_=function(t){(0,p.disable)();try{var e=tt.fromXml(t,this),o=parseInt(t.getAttribute("x"),10),i=parseInt(t.getAttribute("y"),10);isNaN(o)||isNaN(i)||(this.RTL&&(o=-o),e.moveBy(o+50,i+50))}finally{(0,p.enable)()}return(0,p.isEnabled)()&&St.fireCreateEvent(e),e.select(),e},L.WorkspaceSvg.prototype.refreshToolboxSelection=function(){var t=this.isFlyout?this.targetWorkspace:this;t&&!t.currentGesture_&&t.toolbox_&&t.toolbox_.getFlyout()&&t.toolbox_.refreshSelection()},L.WorkspaceSvg.prototype.renameVariableById=function(t,e){X.Workspace.prototype.renameVariableById.call(this,t,e),this.refreshToolboxSelection()},L.WorkspaceSvg.prototype.deleteVariableById=function(t){X.Workspace.prototype.deleteVariableById.call(this,t),this.refreshToolboxSelection()},L.WorkspaceSvg.prototype.createVariable=function(t,e,o){return t=X.Workspace.prototype.createVariable.call(this,t,e,o),this.refreshToolboxSelection(),t},L.WorkspaceSvg.prototype.recordDeleteAreas=function(){at.deprecation.warn("WorkspaceSvg.prototype.recordDeleteAreas","June 2021","June 2022","WorkspaceSvg.prototype.recordDragTargets"),this.recordDragTargets()},L.WorkspaceSvg.prototype.recordDragTargets=function(){var t=this.componentManager_.getComponents(It.ComponentManager.Capability.DRAG_TARGET,!0);this.dragTargetAreas_=[];for(var e=0,o;o=t[e];e++){var i=o.getClientRect();i&&this.dragTargetAreas_.push({component:o,clientRect:i})}},L.WorkspaceSvg.prototype.getDragTarget=function(t){for(var e=0,o;o=this.dragTargetAreas_[e];e++)if(o.clientRect.contains(t.clientX,t.clientY))return o.component;return null},L.WorkspaceSvg.prototype.onMouseDown_=function(t){var e=this.getGesture(t);e&&e.handleWsStart(t,this)},L.WorkspaceSvg.prototype.startDrag=function(t,e){t=(0,$.mouseToSvg)(t,this.getParentSvg(),this.getInverseScreenCTM()),t.x/=this.scale,t.y/=this.scale,this.dragDeltaXY_=H.Coordinate.difference(e,t)},L.WorkspaceSvg.prototype.moveDrag=function(t){return t=(0,$.mouseToSvg)(t,this.getParentSvg(),this.getInverseScreenCTM()),t.x/=this.scale,t.y/=this.scale,H.Coordinate.sum(this.dragDeltaXY_,t)},L.WorkspaceSvg.prototype.isDragging=function(){return this.currentGesture_!==null&&this.currentGesture_.isDragging()},L.WorkspaceSvg.prototype.isDraggable=function(){return this.options.moveOptions&&this.options.moveOptions.drag},L.WorkspaceSvg.prototype.isMovable=function(){return this.options.moveOptions&&!!this.options.moveOptions.scrollbars||this.options.moveOptions&&this.options.moveOptions.wheel||this.options.moveOptions&&this.options.moveOptions.drag||this.options.zoomOptions&&this.options.zoomOptions.wheel||this.options.zoomOptions&&this.options.zoomOptions.pinch},L.WorkspaceSvg.prototype.isMovableHorizontally=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollHorizontally())},L.WorkspaceSvg.prototype.isMovableVertically=function(){var t=!!this.scrollbar;return this.isMovable()&&(!t||t&&this.scrollbar.canScrollVertically())},L.WorkspaceSvg.prototype.onMouseWheel_=function(t){if(et.Gesture.inProgress())t.preventDefault(),t.stopPropagation();else{var e=this.options.zoomOptions&&this.options.zoomOptions.wheel,o=this.options.moveOptions&&this.options.moveOptions.wheel;if(e||o){var i=(0,$.getScrollDeltaPixels)(t);if(G.MAC)var s=t.metaKey;e&&(t.ctrlKey||s||!o)?(i=-i.y/50,e=(0,$.mouseToSvg)(t,this.getParentSvg(),this.getInverseScreenCTM()),this.zoom(e.x,e.y,i)):(e=this.scrollX-i.x,o=this.scrollY-i.y,t.shiftKey&&!i.x&&(e=this.scrollX-i.y,o=this.scrollY),this.scroll(e,o)),t.preventDefault()}}},L.WorkspaceSvg.prototype.getBlocksBoundingBox=function(){var t=this.getTopBoundedElements();if(!t.length)return new wt.Rect(0,0,0,0);for(var e=t[0].getBoundingRectangle(),o=1;o<t.length;o++){var i=t[o];i.isInsertionMarker&&i.isInsertionMarker()||(i=i.getBoundingRectangle(),i.top<e.top&&(e.top=i.top),i.bottom>e.bottom&&(e.bottom=i.bottom),i.left<e.left&&(e.left=i.left),i.right>e.right&&(e.right=i.right))}return e},L.WorkspaceSvg.prototype.cleanUp=function(){this.setResizesEnabled(!1),(0,p.setGroup)(!0);for(var t=this.getTopBlocks(!0),e=0,o=0,i;i=t[o];o++)if(i.isMovable()){var s=i.getRelativeToSurfaceXY();i.moveBy(-s.x,e-s.y),i.snapToGrid(),e=i.getRelativeToSurfaceXY().y+i.getHeightWidth().height+this.renderer_.getConstants().MIN_BLOCK_HEIGHT}(0,p.setGroup)(!1),this.setResizesEnabled(!0)},L.WorkspaceSvg.prototype.showContextMenu=function(t){if(!this.options.readOnly&&!this.isFlyout){var e=dt.ContextMenuRegistry.registry.getContextMenuOptions(dt.ContextMenuRegistry.ScopeType.WORKSPACE,{workspace:this});this.configureContextMenu&&this.configureContextMenu(e,t),(0,n.module$exports$Blockly$ContextMenu.show)(t,e,this.RTL)}},L.WorkspaceSvg.prototype.updateToolbox=function(t){if(t=(0,q.convertToolboxDefToJson)(t)){if(!this.options.languageTree)throw Error("Existing toolbox is null.  Can't create new toolbox.");if((0,q.hasCategories)(t)){if(!this.toolbox_)throw Error("Existing toolbox has no categories.  Can't change mode.");this.options.languageTree=t,this.toolbox_.render(t)}else{if(!this.flyout_)throw Error("Existing toolbox has categories.  Can't change mode.");this.options.languageTree=t,this.flyout_.show(t)}}else if(this.options.languageTree)throw Error("Can't nullify an existing toolbox.")},L.WorkspaceSvg.prototype.markFocused=function(){this.options.parentWorkspace?this.options.parentWorkspace.markFocused():((0,n.module$exports$Blockly$common.setMainWorkspace)(this),this.setBrowserFocus())},L.WorkspaceSvg.prototype.setBrowserFocus=function(){document.activeElement&&document.activeElement.blur&&document.activeElement.blur();try{this.getParentSvg().focus({preventScroll:!0})}catch{try{this.getParentSvg().parentNode.setActive()}catch{this.getParentSvg().parentNode.focus({preventScroll:!0})}}},L.WorkspaceSvg.prototype.zoom=function(t,e,o){o=Math.pow(this.options.zoomOptions.scaleSpeed,o);var i=this.scale*o;if(this.scale!==i){i>this.options.zoomOptions.maxScale?o=this.options.zoomOptions.maxScale/this.scale:i<this.options.zoomOptions.minScale&&(o=this.options.zoomOptions.minScale/this.scale);var s=this.getCanvas().getCTM(),l=this.getParentSvg().createSVGPoint();l.x=t,l.y=e,l=l.matrixTransform(s.inverse()),t=l.x,e=l.y,s=s.translate(t*(1-o),e*(1-o)).scale(o),this.scrollX=s.e,this.scrollY=s.f,this.setScale(i)}},L.WorkspaceSvg.prototype.zoomCenter=function(t){var e=this.getMetrics();if(this.flyout_){var o=e.svgWidth?e.svgWidth/2:0;e=e.svgHeight?e.svgHeight/2:0}else o=e.viewWidth/2+e.absoluteLeft,e=e.viewHeight/2+e.absoluteTop;this.zoom(o,e,t)},L.WorkspaceSvg.prototype.zoomToFit=function(){if(this.isMovable()){var t=this.getMetrics(),e=t.viewWidth;t=t.viewHeight;var o=this.getBlocksBoundingBox(),i=o.right-o.left;if(o=o.bottom-o.top,i){this.flyout_&&(this.horizontalLayout?(t+=this.flyout_.getHeight(),o+=this.flyout_.getHeight()/this.scale):(e+=this.flyout_.getWidth(),i+=this.flyout_.getWidth()/this.scale)),e/=i,t/=o,(0,p.disable)();try{this.setScale(Math.min(e,t)),this.scrollCenter()}finally{(0,p.enable)()}this.maybeFireViewportChangeEvent()}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},L.WorkspaceSvg.prototype.beginCanvasTransition=function(){(0,_.addClass)(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),(0,_.addClass)(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},L.WorkspaceSvg.prototype.endCanvasTransition=function(){(0,_.removeClass)(this.svgBlockCanvas_,"blocklyCanvasTransitioning"),(0,_.removeClass)(this.svgBubbleCanvas_,"blocklyCanvasTransitioning")},L.WorkspaceSvg.prototype.scrollCenter=function(){if(this.isMovable()){var t=this.getMetrics(),e=(t.scrollWidth-t.viewWidth)/2,o=(t.scrollHeight-t.viewHeight)/2;e=-e-t.scrollLeft,o=-o-t.scrollTop,this.scroll(e,o)}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},L.WorkspaceSvg.prototype.centerOnBlock=function(t){if(this.isMovable()){if(t=t?this.getBlockById(t):null){var e=t.getRelativeToSurfaceXY(),o=t.getHeightWidth(),i=this.scale;t=(e.x+(this.RTL?-1:1)*o.width/2)*i,e=(e.y+o.height/2)*i,o=this.getMetrics(),this.scroll(-(t-o.viewWidth/2),-(e-o.viewHeight/2))}}else console.warn("Tried to move a non-movable workspace. This could result in blocks becoming inaccessible.")},L.WorkspaceSvg.prototype.setScale=function(t){this.options.zoomOptions.maxScale&&t>this.options.zoomOptions.maxScale?t=this.options.zoomOptions.maxScale:this.options.zoomOptions.minScale&&t<this.options.zoomOptions.minScale&&(t=this.options.zoomOptions.minScale),this.scale=t,this.hideChaff(!1),(t=this.getFlyout(!1))&&t.isVisible()&&(t.reflow(),this.recordDragTargets()),this.grid_&&this.grid_.update(this.scale),t=this.getMetrics(),this.scrollX-=t.absoluteLeft,this.scrollY-=t.absoluteTop,t.viewLeft+=t.absoluteLeft,t.viewTop+=t.absoluteTop,this.scroll(this.scrollX,this.scrollY),this.scrollbar&&(this.flyout_?this.scrollbar.resizeView(t):this.scrollbar.resizeContent(t))},L.WorkspaceSvg.prototype.getScale=function(){return this.options.parentWorkspace?this.options.parentWorkspace.getScale():this.scale},L.WorkspaceSvg.prototype.scroll=function(t,e){this.hideChaff(!0);var o=this.getMetrics();t=Math.min(t,-o.scrollLeft),e=Math.min(e,-o.scrollTop);var i=o.scrollTop+Math.max(0,o.scrollHeight-o.viewHeight);t=Math.max(t,-(o.scrollLeft+Math.max(0,o.scrollWidth-o.viewWidth))),e=Math.max(e,-i),this.scrollX=t,this.scrollY=e,this.scrollbar&&this.scrollbar.set(-(t+o.scrollLeft),-(e+o.scrollTop),!1),t+=o.absoluteLeft,e+=o.absoluteTop,this.translate(t,e)},L.WorkspaceSvg.prototype.getBlockById=function(t){return X.Workspace.prototype.getBlockById.call(this,t)},L.WorkspaceSvg.prototype.getAllBlocks=function(t){return X.Workspace.prototype.getAllBlocks.call(this,t)},L.WorkspaceSvg.prototype.getTopBlocks=function(t){return X.Workspace.prototype.getTopBlocks.call(this,t)},L.WorkspaceSvg.prototype.addTopBlock=function(t){this.addTopBoundedElement(t),X.Workspace.prototype.addTopBlock.call(this,t)},L.WorkspaceSvg.prototype.removeTopBlock=function(t){this.removeTopBoundedElement(t),X.Workspace.prototype.removeTopBlock.call(this,t)},L.WorkspaceSvg.prototype.addTopComment=function(t){this.addTopBoundedElement(t),X.Workspace.prototype.addTopComment.call(this,t)},L.WorkspaceSvg.prototype.removeTopComment=function(t){this.removeTopBoundedElement(t),X.Workspace.prototype.removeTopComment.call(this,t)},L.WorkspaceSvg.prototype.addTopBoundedElement=function(t){this.topBoundedElements_.push(t)},L.WorkspaceSvg.prototype.removeTopBoundedElement=function(t){(0,we.removeElem)(this.topBoundedElements_,t)},L.WorkspaceSvg.prototype.getTopBoundedElements=function(){return[].concat(this.topBoundedElements_)},L.WorkspaceSvg.prototype.setResizesEnabled=function(t){var e=!this.resizesEnabled_&&t;this.resizesEnabled_=t,e&&this.resizeContents()},L.WorkspaceSvg.prototype.clear=function(){this.setResizesEnabled(!1),X.Workspace.prototype.clear.call(this),this.topBoundedElements_=[],this.setResizesEnabled(!0)},L.WorkspaceSvg.prototype.registerButtonCallback=function(t,e){if(typeof e!="function")throw TypeError("Button callbacks must be functions.");this.flyoutButtonCallbacks_[t]=e},L.WorkspaceSvg.prototype.getButtonCallback=function(t){return(t=this.flyoutButtonCallbacks_[t])?t:null},L.WorkspaceSvg.prototype.removeButtonCallback=function(t){this.flyoutButtonCallbacks_[t]=null},L.WorkspaceSvg.prototype.registerToolboxCategoryCallback=function(t,e){if(typeof e!="function")throw TypeError("Toolbox category callbacks must be functions.");this.toolboxCategoryCallbacks_[t]=e},L.WorkspaceSvg.prototype.getToolboxCategoryCallback=function(t){return this.toolboxCategoryCallbacks_[t]||null},L.WorkspaceSvg.prototype.removeToolboxCategoryCallback=function(t){this.toolboxCategoryCallbacks_[t]=null},L.WorkspaceSvg.prototype.getGesture=function(t){var e=t.type==="mousedown"||t.type==="touchstart"||t.type==="pointerdown",o=this.currentGesture_;return o?e&&o.hasStarted()?(console.warn("Tried to start the same gesture twice."),o.cancel(),null):o:e?this.currentGesture_=new _e.TouchGesture(t,this):null},L.WorkspaceSvg.prototype.clearGesture=function(){this.currentGesture_=null},L.WorkspaceSvg.prototype.cancelCurrentGesture=function(){this.currentGesture_&&this.currentGesture_.cancel()},L.WorkspaceSvg.prototype.getAudioManager=function(){return this.audioManager_},L.WorkspaceSvg.prototype.getGrid=function(){return this.grid_},L.WorkspaceSvg.prototype.hideChaff=function(t){(0,Q.hide)(),(0,v.hide)(),(0,z.hideWithoutAnimation)();var e=!!t;this.getComponentManager().getComponents(It.ComponentManager.Capability.AUTOHIDEABLE,!0).forEach(function(o){return o.autoHide(e)})},L.WorkspaceSvg.setTopLevelWorkspaceMetrics_=function(t){var e=this.getMetrics();typeof t.x=="number"&&(this.scrollX=-(e.scrollLeft+(e.scrollWidth-e.viewWidth)*t.x)),typeof t.y=="number"&&(this.scrollY=-(e.scrollTop+(e.scrollHeight-e.viewHeight)*t.y)),this.translate(this.scrollX+e.absoluteLeft,this.scrollY+e.absoluteTop)},L.resizeSvgContents=function(t){t.resizeContents()};var el={inject:function(t,e){if(typeof t=="string"&&(t=document.getElementById(t)||document.querySelector(t)),!t||!(0,_.containsNode)(document,t))throw Error("Error: container is not in current document.");e=new Ee.Options(e||{});var o=document.createElement("div");o.className="injectionDiv",o.tabIndex=0,(0,Y.setState)(o,Y.State.LABEL,n.module$exports$Blockly$Msg.Msg.WORKSPACE_ARIA_LABEL),t.appendChild(o),t=ol(o,e);var i=new Ce.BlockDragSurfaceSvg(o),s=new wo.WorkspaceDragSurfaceSvg(o),l=nl(t,e,i,s);return il(l),(0,n.module$exports$Blockly$common.setMainWorkspace)(l),(0,n.module$exports$Blockly$common.svgResize)(l),o.addEventListener("focusin",function(){(0,n.module$exports$Blockly$common.setMainWorkspace)(l)}),l}},ol=function(t,e){t.setAttribute("dir","LTR"),(0,O.inject)(e.hasCss,e.pathToMedia),t=(0,_.createSvgElement)(R.Svg.SVG,{xmlns:_.SVG_NS,"xmlns:html":_.HTML_NS,"xmlns:xlink":_.XLINK_NS,version:"1.1",class:"blocklySvg",tabindex:"0"},t);var o=(0,_.createSvgElement)(R.Svg.DEFS,{},t),i=String(Math.random()).substring(2);return e.gridPattern=Ye.Grid.createDom(i,e.gridOptions,o),t},nl=function(t,e,o,i){return e.parentWorkspace=null,e=new L.WorkspaceSvg(e,o,i),o=e.options,e.scale=o.zoomOptions.startScale,t.appendChild(e.createDom("blocklyMainBackground")),(0,_.addClass)(e.getInjectionDiv(),e.getRenderer().getClassName()),(0,_.addClass)(e.getInjectionDiv(),e.getTheme().getClassName()),!o.hasCategories&&o.languageTree&&(i=e.addFlyout(R.Svg.SVG),(0,_.insertAfter)(i,t)),o.hasTrashcan&&e.addTrashcan(),o.zoomOptions&&o.zoomOptions.controls&&e.addZoomControls(),e.getThemeManager().subscribe(t,"workspaceBackgroundColour","background-color"),e.translate(0,0),e.addChangeListener((0,Co.bumpIntoBoundsHandler)(e)),(0,n.module$exports$Blockly$common.svgResize)(e),(0,v.createDom)(),(0,z.createDom)(),(0,Q.createDom)(),e},il=function(t){var e=t.options,o=t.getParentSvg();if((0,$.conditionalBind)(o.parentNode,"contextmenu",null,function(s){(0,$.isTargetInput)(s)||s.preventDefault()}),o=(0,$.conditionalBind)(window,"resize",null,function(){t.hideChaff(!0),(0,n.module$exports$Blockly$common.svgResize)(t),Co.bumpTopObjectsIntoBounds(t)}),t.setResizeHandlerWrapper(o),sl(),e.languageTree){o=t.getToolbox();var i=t.getFlyout(!0);o?o.init():i&&(i.init(t),i.show(e.languageTree),typeof i.scrollToStart=="function"&&i.scrollToStart())}e.hasTrashcan&&t.trashcan.init(),e.zoomOptions&&e.zoomOptions.controls&&t.zoomControls_.init(),e.moveOptions&&e.moveOptions.scrollbars?(t.scrollbar=new ve.ScrollbarPair(t,e.moveOptions.scrollbars===!0||!!e.moveOptions.scrollbars.horizontal,e.moveOptions.scrollbars===!0||!!e.moveOptions.scrollbars.vertical,"blocklyMainWorkspaceScrollbar"),t.scrollbar.resize()):t.setMetrics({x:.5,y:.5}),e.hasSounds&&ll(e.pathToMedia,t)},rl=function(t){var e=(0,n.module$exports$Blockly$common.getMainWorkspace)();e&&!((0,$.isTargetInput)(t)||e.rendered&&!e.isVisible())&&J.ShortcutRegistry.registry.onKeyDown(e,t)},kr=!1,sl=function(){kr||((0,$.conditionalBind)(document,"scroll",null,function(){for(var t=X.Workspace.getAll(),e=0,o;o=t[e];e++)o.updateInverseScreenCTM&&o.updateInverseScreenCTM()}),(0,$.conditionalBind)(document,"keydown",null,rl),(0,$.bind)(document,"touchend",null,g.longStop),(0,$.bind)(document,"touchcancel",null,g.longStop),G.IPAD&&(0,$.conditionalBind)(window,"orientationchange",document,function(){(0,n.module$exports$Blockly$common.svgResize)((0,n.module$exports$Blockly$common.getMainWorkspace)())})),kr=!0},ll=function(t,e){var o=e.getAudioManager();o.load([t+"click.mp3",t+"click.wav",t+"click.ogg"],"click"),o.load([t+"disconnect.wav",t+"disconnect.mp3",t+"disconnect.ogg"],"disconnect"),o.load([t+"delete.mp3",t+"delete.ogg",t+"delete.wav"],"delete");var i=[];t=function(){for(;i.length;)(0,$.unbind)(i.pop());o.preload()},i.push((0,$.conditionalBind)(document,"mousemove",null,t,!0)),i.push((0,$.conditionalBind)(document,"touchstart",null,t,!0))},al={IComponent:function(){}},cl={IDragTarget:function(){}},So={DragTarget:function(){}};So.DragTarget.prototype.onDragEnter=function(t){},So.DragTarget.prototype.onDragOver=function(t){},So.DragTarget.prototype.onDragExit=function(t){},So.DragTarget.prototype.onDrop=function(t){},So.DragTarget.prototype.getClientRect=function(){return null},So.DragTarget.prototype.shouldPreventMove=function(t){return!1};var ul={IDeleteArea:function(){}},lo={DeleteArea:function(){So.DragTarget.call(this),this.wouldDelete_=!1}};n.$jscomp.inherits(lo.DeleteArea,So.DragTarget),lo.DeleteArea.prototype.wouldDelete=function(t,e){return t instanceof V.BlockSvg?(t=!t.getParent()&&t.isDeletable(),this.updateWouldDelete_(t&&!e)):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},lo.DeleteArea.prototype.updateWouldDelete_=function(t){this.wouldDelete_=t};var nn={FlyoutMetricsManager:function(t,e){ce.MetricsManager.call(this,t),this.flyout_=e}};n.$jscomp.inherits(nn.FlyoutMetricsManager,ce.MetricsManager),nn.FlyoutMetricsManager.prototype.getBoundingBox_=function(){try{var t=this.workspace_.getCanvas().getBBox()}catch{t={height:0,y:0,width:0,x:0}}return t},nn.FlyoutMetricsManager.prototype.getContentMetrics=function(t){var e=this.getBoundingBox_();return t=t?1:this.workspace_.scale,{height:e.height*t,width:e.width*t,top:e.y*t,left:e.x*t}},nn.FlyoutMetricsManager.prototype.getScrollMetrics=function(t,e,o){return e=o||this.getContentMetrics(),o=this.flyout_.MARGIN*this.workspace_.scale,t=t?this.workspace_.scale:1,{height:(e.height+2*o)/t,width:(e.width+e.left+o)/t,top:0,left:0}};var pl={IFlyout:function(){}},ct={Flyout:function(t){lo.DeleteArea.call(this),t.setMetrics=this.setMetrics_.bind(this),this.workspace_=new L.WorkspaceSvg(t),this.workspace_.setMetricsManager(new nn.FlyoutMetricsManager(this.workspace_,this)),this.workspace_.isFlyout=!0,this.workspace_.setVisible(this.isVisible_),this.id=(0,re.genUid)(),this.RTL=!!t.RTL,this.horizontalLayout=!1,this.toolboxPosition_=t.toolboxPosition,this.eventWrappers_=[],this.filterWrapper_=this.reflowWrapper_=null,this.mats_=[],this.buttons_=[],this.listeners_=[],this.permanentlyDisabled_=[],this.tabWidth_=this.workspace_.getRenderer().getConstants().TAB_WIDTH,this.targetWorkspace=null,this.recycledBlocks_=[],this.autoClose=!0,this.isVisible_=!1,this.containerVisible_=!0,this.rectMap_=new WeakMap,this.MARGIN=this.CORNER_RADIUS=8,this.GAP_X=3*this.MARGIN,this.GAP_Y=3*this.MARGIN,this.SCROLLBAR_MARGIN=2.5,this.height_=this.width_=0,this.dragAngleRange_=70,this.svgGroup_=this.svgBackground_=null}};n.$jscomp.inherits(ct.Flyout,lo.DeleteArea),ct.Flyout.prototype.createDom=function(t){return this.svgGroup_=(0,_.createSvgElement)(t,{class:"blocklyFlyout",style:"display: none"},null),this.svgBackground_=(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyFlyoutBackground"},this.svgGroup_),this.svgGroup_.appendChild(this.workspace_.createDom()),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutBackgroundColour","fill"),this.workspace_.getThemeManager().subscribe(this.svgBackground_,"flyoutOpacity","fill-opacity"),this.svgGroup_},ct.Flyout.prototype.init=function(t){this.targetWorkspace=t,this.workspace_.targetWorkspace=t,this.workspace_.scrollbar=new ve.ScrollbarPair(this.workspace_,this.horizontalLayout,!this.horizontalLayout,"blocklyFlyoutScrollbar",this.SCROLLBAR_MARGIN),this.hide(),Array.prototype.push.apply(this.eventWrappers_,(0,$.conditionalBind)(this.svgGroup_,"wheel",this,this.wheel_)),this.autoClose||(this.filterWrapper_=this.filterForCapacity_.bind(this),this.targetWorkspace.addChangeListener(this.filterWrapper_)),Array.prototype.push.apply(this.eventWrappers_,(0,$.conditionalBind)(this.svgBackground_,"mousedown",this,this.onMouseDown_)),this.workspace_.getGesture=this.targetWorkspace.getGesture.bind(this.targetWorkspace),this.workspace_.setVariableMap(this.targetWorkspace.getVariableMap()),this.workspace_.createPotentialVariableMap(),t.getComponentManager().addComponent({component:this,weight:1,capabilities:[It.ComponentManager.Capability.DELETE_AREA,It.ComponentManager.Capability.DRAG_TARGET]})},ct.Flyout.prototype.dispose=function(){this.hide(),this.workspace_.getComponentManager().removeComponent(this.id),(0,$.unbind)(this.eventWrappers_),this.filterWrapper_&&(this.targetWorkspace.removeChangeListener(this.filterWrapper_),this.filterWrapper_=null),this.workspace_&&(this.workspace_.getThemeManager().unsubscribe(this.svgBackground_),this.workspace_.targetWorkspace=null,this.workspace_.dispose(),this.workspace_=null),this.svgGroup_&&((0,_.removeNode)(this.svgGroup_),this.svgGroup_=null),this.targetWorkspace=this.svgBackground_=null},ct.Flyout.prototype.getWidth=function(){return this.width_},ct.Flyout.prototype.getHeight=function(){return this.height_},ct.Flyout.prototype.getFlyoutScale=function(){return this.targetWorkspace.scale},ct.Flyout.prototype.getWorkspace=function(){return this.workspace_},ct.Flyout.prototype.isVisible=function(){return this.isVisible_},ct.Flyout.prototype.setVisible=function(t){var e=t!==this.isVisible();this.isVisible_=t,e&&(this.autoClose||this.workspace_.recordDragTargets(),this.updateDisplay_())},ct.Flyout.prototype.setContainerVisible=function(t){var e=t!==this.containerVisible_;this.containerVisible_=t,e&&this.updateDisplay_()},ct.Flyout.prototype.updateDisplay_=function(){var t=this.containerVisible_?this.isVisible():!1;this.svgGroup_.style.display=t?"block":"none",this.workspace_.scrollbar.setContainerVisible(t)},ct.Flyout.prototype.positionAt_=function(t,e,o,i){this.svgGroup_.setAttribute("width",t),this.svgGroup_.setAttribute("height",e),this.workspace_.setCachedParentSvgSize(t,e),this.svgGroup_.tagName==="svg"?(0,_.setCssTransform)(this.svgGroup_,"translate("+o+"px,"+i+"px)"):this.svgGroup_.setAttribute("transform","translate("+o+","+i+")"),(t=this.workspace_.scrollbar)&&(t.setOrigin(o,i),t.resize(),t.hScroll&&t.hScroll.setPosition(t.hScroll.position.x,t.hScroll.position.y),t.vScroll&&t.vScroll.setPosition(t.vScroll.position.x,t.vScroll.position.y))},ct.Flyout.prototype.hide=function(){if(this.isVisible()){this.setVisible(!1);for(var t=0,e;e=this.listeners_[t];t++)(0,$.unbind)(e);this.listeners_.length=0,this.reflowWrapper_&&(this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowWrapper_=null)}},ct.Flyout.prototype.show=function(t){this.workspace_.setResizesEnabled(!1),this.hide(),this.clearOldBlocks_(),typeof t=="string"&&(t=this.getDynamicCategoryContents_(t)),this.setVisible(!0),t=(0,q.convertFlyoutDefToJsonArray)(t),t=this.createFlyoutInfo_(t),this.layout_(t.contents,t.gaps),this.listeners_.push((0,$.conditionalBind)(this.svgBackground_,"mouseover",this,function(){for(var e=this.workspace_.getTopBlocks(!1),o=0,i;i=e[o];o++)i.removeSelect()})),this.horizontalLayout?this.height_=0:this.width_=0,this.workspace_.setResizesEnabled(!0),this.reflow(),this.filterForCapacity_(),this.position(),this.reflowWrapper_=this.reflow.bind(this),this.workspace_.addChangeListener(this.reflowWrapper_),this.emptyRecycledBlocks_()},ct.Flyout.prototype.createFlyoutInfo_=function(t){var e=[],o=[];this.permanentlyDisabled_.length=0;for(var i=this.horizontalLayout?this.GAP_X:this.GAP_Y,s=0,l;l=t[s];s++)switch(l.custom&&(l=this.getDynamicCategoryContents_(l.custom),l=(0,q.convertFlyoutDefToJsonArray)(l),t.splice.apply(t,[s,1].concat(l)),l=t[s]),l.kind.toUpperCase()){case"BLOCK":var h=this.createFlyoutBlock_(l);e.push({type:"block",block:h}),this.addBlockGap_(l,o,i);break;case"SEP":this.addSeparatorGap_(l,o,i);break;case"LABEL":l=this.createButton_(l,!0),e.push({type:"button",button:l}),o.push(i);break;case"BUTTON":l=this.createButton_(l,!1),e.push({type:"button",button:l}),o.push(i)}return{contents:e,gaps:o}},ct.Flyout.prototype.getDynamicCategoryContents_=function(t){if(t=this.workspace_.targetWorkspace.getToolboxCategoryCallback(t),typeof t!="function")throw TypeError("Couldn't find a callback function when opening a toolbox category.");return t(this.workspace_.targetWorkspace)},ct.Flyout.prototype.createButton_=function(t,e){var o=me.FlyoutButton;if(!o)throw Error("Missing require for Blockly.FlyoutButton");return new o(this.workspace_,this.targetWorkspace,t,e)},ct.Flyout.prototype.createFlyoutBlock_=function(t){var e;return t.blockxml?(t=typeof t.blockxml=="string"?(0,n.module$exports$Blockly$Xml.textToDom)(t.blockxml):t.blockxml,(e=this.getRecycledBlock_(t.getAttribute("type")))||(e=(0,n.module$exports$Blockly$Xml.domToBlock)(t,this.workspace_))):(e=this.getRecycledBlock_(t.type),e||(t.enabled===void 0&&(t.enabled=t.disabled!=="true"&&t.disabled!==!0),e=(0,zt.append)(t,this.workspace_))),e.isEnabled()||this.permanentlyDisabled_.push(e),e},ct.Flyout.prototype.getRecycledBlock_=function(t){for(var e=-1,o=0;o<this.recycledBlocks_.length;o++)if(this.recycledBlocks_[o].type===t){e=o;break}return e===-1?void 0:this.recycledBlocks_.splice(e,1)[0]},ct.Flyout.prototype.addBlockGap_=function(t,e,o){if(t.gap)var i=parseInt(t.gap,10);else t.blockxml&&(t=typeof t.blockxml=="string"?(0,n.module$exports$Blockly$Xml.textToDom)(t.blockxml):t.blockxml,i=parseInt(t.getAttribute("gap"),10));e.push(isNaN(i)?o:i)},ct.Flyout.prototype.addSeparatorGap_=function(t,e,o){t=parseInt(t.gap,10),!isNaN(t)&&0<e.length?e[e.length-1]=t:e.push(o)},ct.Flyout.prototype.clearOldBlocks_=function(){for(var t=this.workspace_.getTopBlocks(!1),e=0,o;o=t[e];e++)this.blockIsRecyclable_(o)?this.recycleBlock_(o):o.dispose(!1,!1);for(t=0;t<this.mats_.length;t++)(e=this.mats_[t])&&((0,Q.unbindMouseEvents)(e),(0,_.removeNode)(e));for(t=this.mats_.length=0;e=this.buttons_[t];t++)e.dispose();this.buttons_.length=0,this.workspace_.getPotentialVariableMap().clear()},ct.Flyout.prototype.emptyRecycledBlocks_=function(){for(var t=0;t<this.recycledBlocks_.length;t++)this.recycledBlocks_[t].dispose();this.recycledBlocks_=[]},ct.Flyout.prototype.blockIsRecyclable_=function(t){return!1},ct.Flyout.prototype.recycleBlock_=function(t){var e=t.getRelativeToSurfaceXY();t.moveBy(-e.x,-e.y),this.recycledBlocks_.push(t)},ct.Flyout.prototype.addBlockListeners_=function(t,e,o){this.listeners_.push((0,$.conditionalBind)(t,"mousedown",null,this.blockMouseDown_(e))),this.listeners_.push((0,$.conditionalBind)(o,"mousedown",null,this.blockMouseDown_(e))),this.listeners_.push((0,$.bind)(t,"mouseenter",e,e.addSelect)),this.listeners_.push((0,$.bind)(t,"mouseleave",e,e.removeSelect)),this.listeners_.push((0,$.bind)(o,"mouseenter",e,e.addSelect)),this.listeners_.push((0,$.bind)(o,"mouseleave",e,e.removeSelect))},ct.Flyout.prototype.blockMouseDown_=function(t){var e=this;return function(o){var i=e.targetWorkspace.getGesture(o);i&&(i.setStartBlock(t),i.handleFlyoutStart(o,e))}},ct.Flyout.prototype.onMouseDown_=function(t){var e=this.targetWorkspace.getGesture(t);e&&e.handleFlyoutStart(t,this)},ct.Flyout.prototype.isBlockCreatable_=function(t){return t.isEnabled()},ct.Flyout.prototype.createBlock=function(t){var e=null;(0,p.disable)();var o=this.targetWorkspace.getAllVariables();this.targetWorkspace.setResizesEnabled(!1);try{e=this.placeNewBlock_(t)}finally{(0,p.enable)()}if(this.targetWorkspace.hideChaff(),t=(0,n.module$exports$Blockly$Variables.getAddedVariables)(this.targetWorkspace,o),(0,p.isEnabled)()){for((0,p.setGroup)(!0),o=0;o<t.length;o++){var i=t[o];(0,p.fire)(new((0,p.get)(p.VAR_CREATE))(i))}(0,p.fire)(new((0,p.get)(p.CREATE))(e))}return this.autoClose?this.hide():this.filterForCapacity_(),e},ct.Flyout.prototype.initFlyoutButton_=function(t,e,o){var i=t.createDom();t.moveTo(e,o),t.show(),this.listeners_.push((0,$.conditionalBind)(i,"mousedown",this,this.onMouseDown_)),this.buttons_.push(t)},ct.Flyout.prototype.createRect_=function(t,e,o,i,s){return e=(0,_.createSvgElement)(R.Svg.RECT,{"fill-opacity":0,x:e,y:o,height:i.height,width:i.width},null),e.tooltip=t,(0,Q.bindMouseEvents)(e),this.workspace_.getCanvas().insertBefore(e,t.getSvgRoot()),this.rectMap_.set(t,e),this.mats_[s]=e},ct.Flyout.prototype.moveRectToBlock_=function(t,e){var o=e.getHeightWidth();t.setAttribute("width",o.width),t.setAttribute("height",o.height),e=e.getRelativeToSurfaceXY(),t.setAttribute("y",e.y),t.setAttribute("x",this.RTL?e.x-o.width:e.x)},ct.Flyout.prototype.filterForCapacity_=function(){for(var t=this.workspace_.getTopBlocks(!1),e=0,o;o=t[e];e++)if(this.permanentlyDisabled_.indexOf(o)===-1)for(var i=this.targetWorkspace.isCapacityAvailable((0,n.module$exports$Blockly$common.getBlockTypeCounts)(o));o;)o.setEnabled(i),o=o.getNextBlock()},ct.Flyout.prototype.reflow=function(){this.reflowWrapper_&&this.workspace_.removeChangeListener(this.reflowWrapper_),this.reflowInternal_(),this.reflowWrapper_&&this.workspace_.addChangeListener(this.reflowWrapper_)},ct.Flyout.prototype.isScrollable=function(){return this.workspace_.scrollbar?this.workspace_.scrollbar.isVisible():!1},ct.Flyout.prototype.placeNewBlock_=function(t){var e=this.targetWorkspace;if(!t.getSvgRoot())throw Error("oldBlock is not rendered.");var o=(0,zt.save)(t);return e.setResizesEnabled(!1),e=(0,zt.append)(o,e),this.positionNewBlock_(t,e),e},ct.Flyout.prototype.positionNewBlock_=function(t,e){var o=this.targetWorkspace,i=o.getOriginOffsetInPixels(),s=this.workspace_.getOriginOffsetInPixels();t=t.getRelativeToSurfaceXY(),t.scale(this.workspace_.scale),s=H.Coordinate.sum(s,t),i=H.Coordinate.difference(s,i),i.scale(1/o.scale),e.moveTo(new H.Coordinate(i.x,i.y))};var Be={VerticalFlyout:function(t){ct.Flyout.call(this,t)}};n.$jscomp.inherits(Be.VerticalFlyout,ct.Flyout),Be.VerticalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),o=e.getScrollMetrics(),i=e.getViewMetrics();e=e.getAbsoluteMetrics(),typeof t.y=="number"&&(this.workspace_.scrollY=-(o.top+(o.height-i.height)*t.y)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},Be.VerticalFlyout.prototype.getX=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),e=t.getAbsoluteMetrics(),o=t.getViewMetrics();return t=t.getToolboxMetrics(),this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?this.toolboxPosition_===q.Position.LEFT?t.width:o.width-this.width_:this.toolboxPosition_===q.Position.LEFT?0:o.width:this.toolboxPosition_===q.Position.LEFT?0:o.width+e.left-this.width_},Be.VerticalFlyout.prototype.getY=function(){return 0},Be.VerticalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.height_=t.height,this.setBackgroundPath_(this.width_-this.CORNER_RADIUS,t.height-2*this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},Be.VerticalFlyout.prototype.setBackgroundPath_=function(t,e){var o=this.toolboxPosition_===q.Position.RIGHT,i=t+this.CORNER_RADIUS;i=["M "+(o?i:0)+",0"],i.push("h",o?-t:t),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?-this.CORNER_RADIUS:this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("v",Math.max(0,e)),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,o?0:1,o?this.CORNER_RADIUS:-this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("h",o?t:-t),i.push("z"),this.svgBackground_.setAttribute("d",i.join(" "))},Be.VerticalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setY(0)},Be.VerticalFlyout.prototype.wheel_=function(t){var e=(0,$.getScrollDeltaPixels)(t);if(e.y){var o=this.workspace_.getMetricsManager(),i=o.getScrollMetrics();e=o.getViewMetrics().top-i.top+e.y,this.workspace_.scrollbar.setY(e),(0,v.hide)(),(0,z.hideWithoutAnimation)()}t.preventDefault(),t.stopPropagation()},Be.VerticalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;for(var o=this.MARGIN,i=this.RTL?o:o+this.tabWidth_,s=0,l;l=t[s];s++)if(l.type==="block"){l=l.block;for(var h=l.getDescendants(!1),S=0,C;C=h[S];S++)C.isInFlyout=!0;l.render(),h=l.getSvgRoot(),S=l.getHeightWidth(),C=l.outputConnection?i-this.tabWidth_:i,l.moveBy(C,o),C=this.createRect_(l,this.RTL?C-S.width:C,o,S,s),this.addBlockListeners_(h,l,C),o+=S.height+e[s]}else l.type==="button"&&(this.initFlyoutButton_(l.button,i,o),o+=l.button.height+e[s])},Be.VerticalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<e&&t>-e||t<-180+e||t>180-e},Be.VerticalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.left;return this.toolboxPosition_===q.Position.LEFT?new wt.Rect(-1e9,1e9,-1e9,e+t.width):new wt.Rect(-1e9,1e9,e,1e9)},Be.VerticalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var t=0,e=this.workspace_.getTopBlocks(!1),o=0,i;i=e[o];o++){var s=i.getHeightWidth().width;i.outputConnection&&(s-=this.tabWidth_),t=Math.max(t,s)}for(o=0;i=this.buttons_[o];o++)t=Math.max(t,i.width);if(t+=1.5*this.MARGIN+this.tabWidth_,t*=this.workspace_.scale,t+=Z.Scrollbar.scrollbarThickness,this.width_!==t){for(o=0;i=e[o];o++){if(this.RTL){s=i.getRelativeToSurfaceXY().x;var l=t/this.workspace_.scale-this.MARGIN;i.outputConnection||(l-=this.tabWidth_),i.moveBy(l-s,0)}this.rectMap_.has(i)&&this.moveRectToBlock_(this.rectMap_.get(i),i)}if(this.RTL)for(e=0;o=this.buttons_[e];e++)i=o.getPosition().y,o.moveTo(t/this.workspace_.scale-o.width-this.MARGIN-this.tabWidth_,i);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==q.Position.LEFT||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX+t,this.targetWorkspace.scrollY),this.width_=t,this.position(),this.targetWorkspace.recordDragTargets()}},Be.VerticalFlyout.registryName="verticalFlyout",(0,b.register)(b.Type.FLYOUTS_VERTICAL_TOOLBOX,b.DEFAULT,Be.VerticalFlyout);var hl={IToolboxItem:function(){}},dl={ISelectableToolboxItem:function(){}},_l={ICollapsibleToolboxItem:function(){}},xe={ToolboxItem:function(t,e,o){this.id_=t.toolboxitemid||(0,re.getNextUniqueId)(),this.level_=(this.parent_=o||null)?this.parent_.getLevel()+1:0,this.toolboxItemDef_=t,this.parentToolbox_=e,this.workspace_=this.parentToolbox_.getWorkspace()}};xe.ToolboxItem.prototype.init=function(){},xe.ToolboxItem.prototype.getDiv=function(){return null},xe.ToolboxItem.prototype.getClickTarget=function(){return null},xe.ToolboxItem.prototype.getId=function(){return this.id_},xe.ToolboxItem.prototype.getParent=function(){return null},xe.ToolboxItem.prototype.getLevel=function(){return this.level_},xe.ToolboxItem.prototype.isSelectable=function(){return!1},xe.ToolboxItem.prototype.isCollapsible=function(){return!1},xe.ToolboxItem.prototype.dispose=function(){};var lt={ToolboxCategory:function(t,e,o){xe.ToolboxItem.call(this,t,e,o),this.colour_=this.name_="",this.labelDom_=this.iconDom_=this.rowContents_=this.rowDiv_=this.htmlDiv_=null,this.cssConfig_=this.makeDefaultCssConfig_(),this.isDisabled_=this.isHidden_=!1,this.flyoutItems_=[]}};n.$jscomp.inherits(lt.ToolboxCategory,xe.ToolboxItem),lt.ToolboxCategory.prototype.init=function(){this.parseCategoryDef_(this.toolboxItemDef_),this.parseContents_(this.toolboxItemDef_),this.createDom_(),this.toolboxItemDef_.hidden==="true"&&this.hide()},lt.ToolboxCategory.prototype.makeDefaultCssConfig_=function(){return{container:"blocklyToolboxCategory",row:"blocklyTreeRow",rowcontentcontainer:"blocklyTreeRowContentContainer",icon:"blocklyTreeIcon",label:"blocklyTreeLabel",contents:"blocklyToolboxContents",selected:"blocklyTreeSelected",openicon:"blocklyTreeIconOpen",closedicon:"blocklyTreeIconClosed"}},lt.ToolboxCategory.prototype.parseContents_=function(t){var e=t.contents;if(t.custom)this.flyoutItems_=t.custom;else if(e)for(t=0;t<e.length;t++)this.flyoutItems_.push(e[t])},lt.ToolboxCategory.prototype.parseCategoryDef_=function(t){this.name_=(0,mt.replaceMessageReferences)(t.name),this.colour_=this.getColour_(t),(0,n.module$exports$Blockly$utils$object.mixin)(this.cssConfig_,t.cssconfig||t.cssConfig)},lt.ToolboxCategory.prototype.createDom_=function(){return this.htmlDiv_=this.createContainer_(),(0,Y.setRole)(this.htmlDiv_,Y.Role.TREEITEM),(0,Y.setState)(this.htmlDiv_,Y.State.SELECTED,!1),(0,Y.setState)(this.htmlDiv_,Y.State.LEVEL,this.level_),this.rowDiv_=this.createRowContainer_(),this.rowDiv_.style.pointerEvents="auto",this.htmlDiv_.appendChild(this.rowDiv_),this.rowContents_=this.createRowContentsContainer_(),this.rowContents_.style.pointerEvents="none",this.rowDiv_.appendChild(this.rowContents_),this.iconDom_=this.createIconDom_(),(0,Y.setRole)(this.iconDom_,Y.Role.PRESENTATION),this.rowContents_.appendChild(this.iconDom_),this.labelDom_=this.createLabelDom_(this.name_),this.rowContents_.appendChild(this.labelDom_),(0,Y.setState)(this.htmlDiv_,Y.State.LABELLEDBY,this.labelDom_.getAttribute("id")),this.addColourBorder_(this.colour_),this.htmlDiv_},lt.ToolboxCategory.prototype.createContainer_=function(){var t=document.createElement("div");return(0,_.addClass)(t,this.cssConfig_.container),t},lt.ToolboxCategory.prototype.createRowContainer_=function(){var t=document.createElement("div");(0,_.addClass)(t,this.cssConfig_.row);var e=lt.ToolboxCategory.nestedPadding*this.getLevel();return e=e.toString()+"px",this.workspace_.RTL?t.style.paddingRight=e:t.style.paddingLeft=e,t},lt.ToolboxCategory.prototype.createRowContentsContainer_=function(){var t=document.createElement("div");return(0,_.addClass)(t,this.cssConfig_.rowcontentcontainer),t},lt.ToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||(0,_.addClass)(t,this.cssConfig_.icon),t.style.display="inline-block",t},lt.ToolboxCategory.prototype.createLabelDom_=function(t){var e=document.createElement("span");return e.setAttribute("id",this.getId()+".label"),e.textContent=t,(0,_.addClass)(e,this.cssConfig_.label),e},lt.ToolboxCategory.prototype.refreshTheme=function(){this.colour_=this.getColour_(this.toolboxItemDef_),this.addColourBorder_(this.colour_)},lt.ToolboxCategory.prototype.addColourBorder_=function(t){t&&(t=lt.ToolboxCategory.borderWidth+"px solid "+(t||"#ddd"),this.workspace_.RTL?this.rowDiv_.style.borderRight=t:this.rowDiv_.style.borderLeft=t)},lt.ToolboxCategory.prototype.getColour_=function(t){var e=t.categorystyle||t.categoryStyle;if((t=t.colour)&&e)console.warn('Toolbox category "'+this.name_+'" must not have both a style and a colour');else return e?this.getColourfromStyle_(e):this.parseColour_(t);return""},lt.ToolboxCategory.prototype.getColourfromStyle_=function(t){var e=this.workspace_.getTheme();if(t&&e){if((e=e.categoryStyles[t])&&e.colour)return this.parseColour_(e.colour);console.warn('Style "'+t+'" must exist and contain a colour value')}return""},lt.ToolboxCategory.prototype.getClickTarget=function(){return this.rowDiv_},lt.ToolboxCategory.prototype.parseColour_=function(t){if(t=(0,mt.replaceMessageReferences)(t),t==null||t==="")return"";var e=Number(t);return isNaN(e)?(e=(0,Et.parse)(t))?e:(console.warn('Toolbox category "'+this.name_+'" has unrecognized colour attribute: '+t),""):(0,Et.hueToHex)(e)},lt.ToolboxCategory.prototype.openIcon_=function(t){t&&((0,_.removeClasses)(t,this.cssConfig_.closedicon),(0,_.addClass)(t,this.cssConfig_.openicon))},lt.ToolboxCategory.prototype.closeIcon_=function(t){t&&((0,_.removeClasses)(t,this.cssConfig_.openicon),(0,_.addClass)(t,this.cssConfig_.closedicon))},lt.ToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none",this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()},lt.ToolboxCategory.prototype.hide=function(){this.setVisible_(!1)},lt.ToolboxCategory.prototype.show=function(){this.setVisible_(!0)},lt.ToolboxCategory.prototype.isVisible=function(){return!this.isHidden_&&this.allAncestorsExpanded_()},lt.ToolboxCategory.prototype.allAncestorsExpanded_=function(){for(var t=this;t.getParent();)if(t=t.getParent(),!t.isExpanded())return!1;return!0},lt.ToolboxCategory.prototype.isSelectable=function(){return this.isVisible()&&!this.isDisabled_},lt.ToolboxCategory.prototype.onClick=function(t){},lt.ToolboxCategory.prototype.setSelected=function(t){if(t){var e=this.parseColour_(lt.ToolboxCategory.defaultBackgroundColour);this.rowDiv_.style.backgroundColor=this.colour_||e,(0,_.addClass)(this.rowDiv_,this.cssConfig_.selected)}else this.rowDiv_.style.backgroundColor="",(0,_.removeClass)(this.rowDiv_,this.cssConfig_.selected);(0,Y.setState)(this.htmlDiv_,Y.State.SELECTED,t)},lt.ToolboxCategory.prototype.setDisabled=function(t){this.isDisabled_=t,this.getDiv().setAttribute("disabled",t),t?this.getDiv().setAttribute("disabled","true"):this.getDiv().removeAttribute("disabled")},lt.ToolboxCategory.prototype.getName=function(){return this.name_},lt.ToolboxCategory.prototype.getParent=function(){return this.parent_},lt.ToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},lt.ToolboxCategory.prototype.getContents=function(){return this.flyoutItems_},lt.ToolboxCategory.prototype.updateFlyoutContents=function(t){this.flyoutItems_=[],typeof t=="string"?this.toolboxItemDef_.custom=t:(delete this.toolboxItemDef_.custom,this.toolboxItemDef_.contents=(0,q.convertFlyoutDefToJsonArray)(t)),this.parseContents_(this.toolboxItemDef_)},lt.ToolboxCategory.prototype.dispose=function(){(0,_.removeNode)(this.htmlDiv_)},lt.ToolboxCategory.registrationName="category",lt.ToolboxCategory.nestedPadding=19,lt.ToolboxCategory.borderWidth=8,lt.ToolboxCategory.defaultBackgroundColour="#57e",(0,O.register)(`
.blocklyTreeRow:not(.blocklyTreeSelected):hover {
  background-color: rgba(255, 255, 255, .2);
}

.blocklyToolboxDiv[layout="h"] .blocklyToolboxCategory {
  margin: 1px 5px 1px 0;
}

.blocklyToolboxDiv[dir="RTL"][layout="h"] .blocklyToolboxCategory {
  margin: 1px 0 1px 5px;
}

.blocklyTreeRow {
  height: 22px;
  line-height: 22px;
  margin-bottom: 3px;
  padding-right: 8px;
  white-space: nowrap;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeRow {
  margin-left: 8px;
  padding-right: 0;
}

.blocklyTreeIcon {
  background-image: url(<<<PATH>>>/sprites.png);
  height: 16px;
  vertical-align: middle;
  visibility: hidden;
  width: 16px;
}

.blocklyTreeIconClosed {
  background-position: -32px -1px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeIconClosed {
  background-position: 0 -1px;
}

.blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: -32px -17px;
}

.blocklyToolboxDiv[dir="RTL"] .blocklyTreeSelected>.blocklyTreeIconClosed {
  background-position: 0 -17px;
}

.blocklyTreeIconOpen {
  background-position: -16px -1px;
}

.blocklyTreeSelected>.blocklyTreeIconOpen {
  background-position: -16px -17px;
}

.blocklyTreeLabel {
  cursor: default;
  font: 16px sans-serif;
  padding: 0 3px;
  vertical-align: middle;
}

.blocklyToolboxDelete .blocklyTreeLabel {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyTreeSelected .blocklyTreeLabel {
  color: #fff;
}
`),(0,b.register)(b.Type.TOOLBOX_ITEM,lt.ToolboxCategory.registrationName,lt.ToolboxCategory);var ao={ToolboxSeparator:function(t,e){xe.ToolboxItem.call(this,t,e),this.cssConfig_={container:"blocklyTreeSeparator"},this.htmlDiv_=null,(0,n.module$exports$Blockly$utils$object.mixin)(this.cssConfig_,t.cssconfig||t.cssConfig)}};n.$jscomp.inherits(ao.ToolboxSeparator,xe.ToolboxItem),ao.ToolboxSeparator.prototype.init=function(){this.createDom_()},ao.ToolboxSeparator.prototype.createDom_=function(){var t=document.createElement("div");return(0,_.addClass)(t,this.cssConfig_.container),this.htmlDiv_=t},ao.ToolboxSeparator.prototype.getDiv=function(){return this.htmlDiv_},ao.ToolboxSeparator.prototype.dispose=function(){(0,_.removeNode)(this.htmlDiv_)},ao.ToolboxSeparator.registrationName="sep",(0,O.register)(`
.blocklyTreeSeparator {
  border-bottom: solid #e5e5e5 1px;
  height: 0;
  margin: 5px 0;
}

.blocklyToolboxDiv[layout="h"] .blocklyTreeSeparator {
  border-right: solid #e5e5e5 1px;
  border-bottom: none;
  height: auto;
  margin: 0 5px 0 5px;
  padding: 5px 0;
  width: 0;
}
`),(0,b.register)(b.Type.TOOLBOX_ITEM,ao.ToolboxSeparator.registrationName,ao.ToolboxSeparator);var Wt={CollapsibleToolboxCategory:function(t,e,o){lt.ToolboxCategory.call(this,t,e,o),this.subcategoriesDiv_=null,this.expanded_=!1,this.toolboxItems_=[]}};n.$jscomp.inherits(Wt.CollapsibleToolboxCategory,lt.ToolboxCategory),Wt.CollapsibleToolboxCategory.prototype.makeDefaultCssConfig_=function(){var t=lt.ToolboxCategory.prototype.makeDefaultCssConfig_.call(this);return t.contents="blocklyToolboxContents",t},Wt.CollapsibleToolboxCategory.prototype.parseContents_=function(t){var e=t.contents,o=!0;if(t.custom)this.flyoutItems_=t.custom;else if(e)for(t=0;t<e.length;t++){var i=e[t];!(0,b.hasItem)(b.Type.TOOLBOX_ITEM,i.kind)||i.kind.toLowerCase()===ao.ToolboxSeparator.registrationName&&o?(this.flyoutItems_.push(i),o=!0):(this.createToolboxItem_(i),o=!1)}},Wt.CollapsibleToolboxCategory.prototype.createToolboxItem_=function(t){var e=t.kind;e.toUpperCase()=="CATEGORY"&&(0,q.isCategoryCollapsible)(t)&&(e=Wt.CollapsibleToolboxCategory.registrationName),t=new((0,b.getClass)(b.Type.TOOLBOX_ITEM,e))(t,this.parentToolbox_,this),this.toolboxItems_.push(t)},Wt.CollapsibleToolboxCategory.prototype.init=function(){lt.ToolboxCategory.prototype.init.call(this),this.setExpanded(this.toolboxItemDef_.expanded==="true"||this.toolboxItemDef_.expanded)},Wt.CollapsibleToolboxCategory.prototype.createDom_=function(){lt.ToolboxCategory.prototype.createDom_.call(this);var t=this.getChildToolboxItems();return this.subcategoriesDiv_=this.createSubCategoriesDom_(t),(0,Y.setRole)(this.subcategoriesDiv_,Y.Role.GROUP),this.htmlDiv_.appendChild(this.subcategoriesDiv_),this.htmlDiv_},Wt.CollapsibleToolboxCategory.prototype.createIconDom_=function(){var t=document.createElement("span");return this.parentToolbox_.isHorizontal()||((0,_.addClass)(t,this.cssConfig_.icon),t.style.visibility="visible"),t.style.display="inline-block",t},Wt.CollapsibleToolboxCategory.prototype.createSubCategoriesDom_=function(t){var e=document.createElement("div");(0,_.addClass)(e,this.cssConfig_.contents);for(var o=0;o<t.length;o++){var i=t[o];i.init();var s=i.getDiv();e.appendChild(s),i.getClickTarget&&i.getClickTarget().setAttribute("id",i.getId())}return e},Wt.CollapsibleToolboxCategory.prototype.setExpanded=function(t){this.expanded_!==t&&((this.expanded_=t)?(this.subcategoriesDiv_.style.display="block",this.openIcon_(this.iconDom_)):(this.subcategoriesDiv_.style.display="none",this.closeIcon_(this.iconDom_)),(0,Y.setState)(this.htmlDiv_,Y.State.EXPANDED,t),this.parentToolbox_.handleToolboxItemResize())},Wt.CollapsibleToolboxCategory.prototype.setVisible_=function(t){this.htmlDiv_.style.display=t?"block":"none";for(var e=this.getChildToolboxItems(),o=0;o<e.length;o++)e[o].setVisible_(t);this.isHidden_=!t,this.parentToolbox_.getSelectedItem()===this&&this.parentToolbox_.clearSelection()},Wt.CollapsibleToolboxCategory.prototype.isExpanded=function(){return this.expanded_},Wt.CollapsibleToolboxCategory.prototype.isCollapsible=function(){return!0},Wt.CollapsibleToolboxCategory.prototype.onClick=function(t){this.toggleExpanded()},Wt.CollapsibleToolboxCategory.prototype.toggleExpanded=function(){this.setExpanded(!this.expanded_)},Wt.CollapsibleToolboxCategory.prototype.getDiv=function(){return this.htmlDiv_},Wt.CollapsibleToolboxCategory.prototype.getChildToolboxItems=function(){return this.toolboxItems_},Wt.CollapsibleToolboxCategory.registrationName="collapsibleCategory",(0,b.register)(b.Type.TOOLBOX_ITEM,Wt.CollapsibleToolboxCategory.registrationName,Wt.CollapsibleToolboxCategory);var gl={IAutoHideable:function(){}},yl={IStyleable:function(){}},ml={IToolbox:function(){}},bn={ToolboxItemSelect:function(t,e,o){pt.UiBase.call(this,o),this.oldItem=t,this.newItem=e,this.type=p.TOOLBOX_ITEM_SELECT}};n.$jscomp.inherits(bn.ToolboxItemSelect,pt.UiBase),bn.ToolboxItemSelect.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.oldItem=this.oldItem,t.newItem=this.newItem,t},bn.ToolboxItemSelect.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.oldItem=t.oldItem,this.newItem=t.newItem},(0,b.register)(b.Type.EVENT,p.TOOLBOX_ITEM_SELECT,bn.ToolboxItemSelect);var rt={Toolbox:function(t){lo.DeleteArea.call(this),this.workspace_=t,this.id="toolbox",this.toolboxDef_=t.options.languageTree||{contents:[]},this.horizontalLayout_=t.options.horizontalLayout,this.contentsDiv_=this.HtmlDiv=null,this.isVisible_=!1,this.contents_=[],this.height_=this.width_=0,this.RTL=t.options.RTL,this.flyout_=null,this.contentMap_=Object.create(null),this.toolboxPosition=t.options.toolboxPosition,this.previouslySelectedItem_=this.selectedItem_=null,this.boundEvents_=[]}};n.$jscomp.inherits(rt.Toolbox,lo.DeleteArea),rt.Toolbox.prototype.onShortcut=function(t){return!1},rt.Toolbox.prototype.init=function(){var t=this.workspace_,e=t.getParentSvg();this.flyout_=this.createFlyout_(),this.HtmlDiv=this.createDom_(this.workspace_),(0,_.insertAfter)(this.flyout_.createDom("svg"),e),this.setVisible(!0),this.flyout_.init(t),this.render(this.toolboxDef_),t=t.getThemeManager(),t.subscribe(this.HtmlDiv,"toolboxBackgroundColour","background-color"),t.subscribe(this.HtmlDiv,"toolboxForegroundColour","color"),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[It.ComponentManager.Capability.AUTOHIDEABLE,It.ComponentManager.Capability.DELETE_AREA,It.ComponentManager.Capability.DRAG_TARGET]})},rt.Toolbox.prototype.createDom_=function(t){t=t.getParentSvg();var e=this.createContainer_();return this.contentsDiv_=this.createContentsContainer_(),this.contentsDiv_.tabIndex=0,(0,Y.setRole)(this.contentsDiv_,Y.Role.TREE),e.appendChild(this.contentsDiv_),t.parentNode.insertBefore(e,t),this.attachEvents_(e,this.contentsDiv_),e},rt.Toolbox.prototype.createContainer_=function(){var t=document.createElement("div");return t.setAttribute("layout",this.isHorizontal()?"h":"v"),(0,_.addClass)(t,"blocklyToolboxDiv"),(0,_.addClass)(t,"blocklyNonSelectable"),t.setAttribute("dir",this.RTL?"RTL":"LTR"),t},rt.Toolbox.prototype.createContentsContainer_=function(){var t=document.createElement("div");return(0,_.addClass)(t,"blocklyToolboxContents"),this.isHorizontal()&&(t.style.flexDirection="row"),t},rt.Toolbox.prototype.attachEvents_=function(t,e){t=(0,$.conditionalBind)(t,"click",this,this.onClick_,!1,!0),this.boundEvents_.push(t),e=(0,$.conditionalBind)(e,"keydown",this,this.onKeyDown_,!1,!0),this.boundEvents_.push(e)},rt.Toolbox.prototype.onClick_=function(t){if((0,$.isRightButton)(t)||t.target===this.HtmlDiv)(0,n.module$exports$Blockly$common.getMainWorkspace)().hideChaff(!1);else{var e=t.target.getAttribute("id");e&&(e=this.getToolboxItemById(e),e.isSelectable()&&(this.setSelectedItem(e),e.onClick(t))),(0,n.module$exports$Blockly$common.getMainWorkspace)().hideChaff(!0)}(0,g.clearTouchIdentifier)()},rt.Toolbox.prototype.onKeyDown_=function(t){var e=!1;switch(t.keyCode){case K.KeyCodes.DOWN:e=this.selectNext_();break;case K.KeyCodes.UP:e=this.selectPrevious_();break;case K.KeyCodes.LEFT:e=this.selectParent_();break;case K.KeyCodes.RIGHT:e=this.selectChild_();break;case K.KeyCodes.ENTER:case K.KeyCodes.SPACE:this.selectedItem_&&this.selectedItem_.isCollapsible()&&(this.selectedItem_.toggleExpanded(),e=!0);break;default:e=!1}!e&&this.selectedItem_&&this.selectedItem_.onKeyDown&&(e=this.selectedItem_.onKeyDown(t)),e&&t.preventDefault()},rt.Toolbox.prototype.createFlyout_=function(){var t=this.workspace_,e=new Ee.Options({parentWorkspace:t,rtl:t.RTL,oneBasedIndex:t.options.oneBasedIndex,horizontalLayout:t.horizontalLayout,renderer:t.options.renderer,rendererOverrides:t.options.rendererOverrides,move:{scrollbars:!0}});return e.toolboxPosition=t.options.toolboxPosition,new(t.horizontalLayout?(0,b.getClassFromOptions)(b.Type.FLYOUTS_HORIZONTAL_TOOLBOX,t.options,!0):(0,b.getClassFromOptions)(b.Type.FLYOUTS_VERTICAL_TOOLBOX,t.options,!0))(e)},rt.Toolbox.prototype.render=function(t){this.toolboxDef_=t;for(var e=0;e<this.contents_.length;e++){var o=this.contents_[e];o&&o.dispose()}this.contents_=[],this.contentMap_=Object.create(null),this.renderContents_(t.contents),this.position(),this.handleToolboxItemResize()},rt.Toolbox.prototype.renderContents_=function(t){for(var e=document.createDocumentFragment(),o=0;o<t.length;o++)this.createToolboxItem_(t[o],e);this.contentsDiv_.appendChild(e)},rt.Toolbox.prototype.createToolboxItem_=function(t,e){var o=t.kind;o.toUpperCase()==="CATEGORY"&&(0,q.isCategoryCollapsible)(t)&&(o=Wt.CollapsibleToolboxCategory.registrationName),(o=(0,b.getClass)(b.Type.TOOLBOX_ITEM,o.toLowerCase()))&&(t=new o(t,this),t.init(),this.addToolboxItem_(t),(o=t.getDiv())&&e.appendChild(o),t.getClickTarget()&&t.getClickTarget().setAttribute("id",t.getId()))},rt.Toolbox.prototype.addToolboxItem_=function(t){if(this.contents_.push(t),this.contentMap_[t.getId()]=t,t.isCollapsible()){t=t.getChildToolboxItems();for(var e=0;e<t.length;e++)this.addToolboxItem_(t[e])}},rt.Toolbox.prototype.getToolboxItems=function(){return this.contents_},rt.Toolbox.prototype.addStyle=function(t){(0,_.addClass)(this.HtmlDiv,t)},rt.Toolbox.prototype.removeStyle=function(t){(0,_.removeClass)(this.HtmlDiv,t)},rt.Toolbox.prototype.getClientRect=function(){if(!this.HtmlDiv||!this.isVisible_)return null;var t=this.HtmlDiv.getBoundingClientRect(),e=t.top,o=e+t.height,i=t.left;return t=i+t.width,this.toolboxPosition===q.Position.TOP?new wt.Rect(-1e7,o,-1e7,1e7):this.toolboxPosition===q.Position.BOTTOM?new wt.Rect(e,1e7,-1e7,1e7):this.toolboxPosition===q.Position.LEFT?new wt.Rect(-1e7,1e7,-1e7,t):new wt.Rect(-1e7,1e7,i,1e7)},rt.Toolbox.prototype.wouldDelete=function(t,e){return t instanceof V.BlockSvg?this.updateWouldDelete_(!t.getParent()&&t.isDeletable()):this.updateWouldDelete_(t.isDeletable()),this.wouldDelete_},rt.Toolbox.prototype.onDragEnter=function(t){this.updateCursorDeleteStyle_(!0)},rt.Toolbox.prototype.onDragExit=function(t){this.updateCursorDeleteStyle_(!1)},rt.Toolbox.prototype.onDrop=function(t){this.updateCursorDeleteStyle_(!1)},rt.Toolbox.prototype.updateWouldDelete_=function(t){t!==this.wouldDelete_&&(this.updateCursorDeleteStyle_(!1),this.wouldDelete_=t,this.updateCursorDeleteStyle_(!0))},rt.Toolbox.prototype.updateCursorDeleteStyle_=function(t){var e=this.wouldDelete_?"blocklyToolboxDelete":"blocklyToolboxGrab";t?this.addStyle(e):this.removeStyle(e)},rt.Toolbox.prototype.getToolboxItemById=function(t){return this.contentMap_[t]||null},rt.Toolbox.prototype.getWidth=function(){return this.width_},rt.Toolbox.prototype.getHeight=function(){return this.height_},rt.Toolbox.prototype.getFlyout=function(){return this.flyout_},rt.Toolbox.prototype.getWorkspace=function(){return this.workspace_},rt.Toolbox.prototype.getSelectedItem=function(){return this.selectedItem_},rt.Toolbox.prototype.getPreviouslySelectedItem=function(){return this.previouslySelectedItem_},rt.Toolbox.prototype.isHorizontal=function(){return this.horizontalLayout_},rt.Toolbox.prototype.position=function(){var t=this.workspace_.getMetrics(),e=this.HtmlDiv;e&&(this.horizontalLayout_?(e.style.left="0",e.style.height="auto",e.style.width="100%",this.height_=e.offsetHeight,this.width_=t.viewWidth,this.toolboxPosition===q.Position.TOP?e.style.top="0":e.style.bottom="0"):(this.toolboxPosition===q.Position.RIGHT?e.style.right="0":e.style.left="0",e.style.height="100%",this.width_=e.offsetWidth,this.height_=t.viewHeight),this.flyout_.position())},rt.Toolbox.prototype.handleToolboxItemResize=function(){var t=this.workspace_,e=this.HtmlDiv.getBoundingClientRect();t.translate(this.toolboxPosition===q.Position.LEFT?t.scrollX+e.width:t.scrollX,this.toolboxPosition===q.Position.TOP?t.scrollY+e.height:t.scrollY),(0,n.module$exports$Blockly$common.svgResize)(t)},rt.Toolbox.prototype.clearSelection=function(){this.setSelectedItem(null)},rt.Toolbox.prototype.refreshTheme=function(){for(var t=0;t<this.contents_.length;t++){var e=this.contents_[t];e.refreshTheme&&e.refreshTheme()}},rt.Toolbox.prototype.refreshSelection=function(){this.selectedItem_&&this.selectedItem_.isSelectable()&&this.selectedItem_.getContents().length&&this.flyout_.show(this.selectedItem_.getContents())},rt.Toolbox.prototype.setVisible=function(t){this.isVisible_!==t&&(this.HtmlDiv.style.display=t?"block":"none",this.isVisible_=t,this.workspace_.recordDragTargets())},rt.Toolbox.prototype.autoHide=function(t){!t&&this.flyout_&&this.flyout_.autoClose&&this.clearSelection()},rt.Toolbox.prototype.setSelectedItem=function(t){var e=this.selectedItem_;!t&&!e||t&&!t.isSelectable()||(this.shouldDeselectItem_(e,t)&&e!==null&&this.deselectItem_(e),this.shouldSelectItem_(e,t)&&t!==null&&this.selectItem_(e,t),this.updateFlyout_(e,t),this.fireSelectEvent_(e,t))},rt.Toolbox.prototype.shouldDeselectItem_=function(t,e){return t!==null&&(!t.isCollapsible()||t!==e)},rt.Toolbox.prototype.shouldSelectItem_=function(t,e){return e!==null&&e!==t},rt.Toolbox.prototype.deselectItem_=function(t){this.selectedItem_=null,this.previouslySelectedItem_=t,t.setSelected(!1),(0,Y.setState)(this.contentsDiv_,Y.State.ACTIVEDESCENDANT,"")},rt.Toolbox.prototype.selectItem_=function(t,e){this.selectedItem_=e,this.previouslySelectedItem_=t,e.setSelected(!0),(0,Y.setState)(this.contentsDiv_,Y.State.ACTIVEDESCENDANT,e.getId())},rt.Toolbox.prototype.selectItemByPosition=function(t){-1<t&&t<this.contents_.length&&(t=this.contents_[t],t.isSelectable()&&this.setSelectedItem(t))},rt.Toolbox.prototype.updateFlyout_=function(t,e){e&&(t!==e||e.isCollapsible())&&e.getContents().length?(this.flyout_.show(e.getContents()),this.flyout_.scrollToStart()):this.flyout_.hide()},rt.Toolbox.prototype.fireSelectEvent_=function(t,e){var o=t&&t.getName(),i=e&&e.getName();t===e&&(i=null),t=new((0,p.get)(p.TOOLBOX_ITEM_SELECT))(o,i,this.workspace_.id),(0,p.fire)(t)},rt.Toolbox.prototype.selectParent_=function(){return this.selectedItem_?this.selectedItem_.isCollapsible()&&this.selectedItem_.isExpanded()?(this.selectedItem_.setExpanded(!1),!0):this.selectedItem_.getParent()&&this.selectedItem_.getParent().isSelectable()?(this.setSelectedItem(this.selectedItem_.getParent()),!0):!1:!1},rt.Toolbox.prototype.selectChild_=function(){if(!this.selectedItem_||!this.selectedItem_.isCollapsible())return!1;var t=this.selectedItem_;return t.isExpanded()?this.selectNext_():t.setExpanded(!0),!0},rt.Toolbox.prototype.selectNext_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)+1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[++t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},rt.Toolbox.prototype.selectPrevious_=function(){if(!this.selectedItem_)return!1;var t=this.contents_.indexOf(this.selectedItem_)-1;if(-1<t&&t<this.contents_.length){for(var e=this.contents_[t];e&&!e.isSelectable();)e=this.contents_[--t];if(e&&e.isSelectable())return this.setSelectedItem(e),!0}return!1},rt.Toolbox.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("toolbox"),this.flyout_.dispose();for(var t=0;t<this.contents_.length;t++)this.contents_[t].dispose();for(t=0;t<this.boundEvents_.length;t++)(0,$.unbind)(this.boundEvents_[t]);this.boundEvents_=[],this.contents_=[],this.workspace_.getThemeManager().unsubscribe(this.HtmlDiv),(0,_.removeNode)(this.HtmlDiv)},(0,O.register)(`
.blocklyToolboxDelete {
  cursor: url("<<<PATH>>>/handdelete.cur"), auto;
}

.blocklyToolboxGrab {
  cursor: url("<<<PATH>>>/handclosed.cur"), auto;
  cursor: grabbing;
  cursor: -webkit-grabbing;
}

/* Category tree in Toolbox. */
.blocklyToolboxDiv {
  background-color: #ddd;
  overflow-x: visible;
  overflow-y: auto;
  padding: 4px 0 4px 0;
  position: absolute;
  z-index: 70;  /* so blocks go under toolbox when dragging */
  -webkit-tap-highlight-color: transparent;  /* issue #1345 */
}

.blocklyToolboxContents {
  display: flex;
  flex-wrap: wrap;
  flex-direction: column;
}

.blocklyToolboxContents:focus {
  outline: none;
}
`),(0,b.register)(b.Type.TOOLBOX,b.DEFAULT,rt.Toolbox);var Me={HorizontalFlyout:function(t){ct.Flyout.call(this,t),this.horizontalLayout=!0}};n.$jscomp.inherits(Me.HorizontalFlyout,ct.Flyout),Me.HorizontalFlyout.prototype.setMetrics_=function(t){if(this.isVisible()){var e=this.workspace_.getMetricsManager(),o=e.getScrollMetrics(),i=e.getViewMetrics();e=e.getAbsoluteMetrics(),typeof t.x=="number"&&(this.workspace_.scrollX=-(o.left+(o.width-i.width)*t.x)),this.workspace_.translate(this.workspace_.scrollX+e.left,this.workspace_.scrollY+e.top)}},Me.HorizontalFlyout.prototype.getX=function(){return 0},Me.HorizontalFlyout.prototype.getY=function(){if(!this.isVisible())return 0;var t=this.targetWorkspace.getMetricsManager(),e=t.getAbsoluteMetrics(),o=t.getViewMetrics();t=t.getToolboxMetrics();var i=this.toolboxPosition_===q.Position.TOP;return this.targetWorkspace.toolboxPosition===this.toolboxPosition_?this.targetWorkspace.getToolbox()?i?t.height:o.height-this.height_:i?0:o.height:i?0:o.height+e.top-this.height_},Me.HorizontalFlyout.prototype.position=function(){if(this.isVisible()&&this.targetWorkspace.isVisible()){var t=this.targetWorkspace.getMetricsManager().getViewMetrics();this.width_=t.width,this.setBackgroundPath_(t.width-2*this.CORNER_RADIUS,this.height_-this.CORNER_RADIUS),t=this.getX();var e=this.getY();this.positionAt_(this.width_,this.height_,t,e)}},Me.HorizontalFlyout.prototype.setBackgroundPath_=function(t,e){var o=this.toolboxPosition_===q.Position.TOP,i=["M 0,"+(o?0:this.CORNER_RADIUS)];o?(i.push("h",t+2*this.CORNER_RADIUS),i.push("v",e),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("h",-t),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,-this.CORNER_RADIUS,-this.CORNER_RADIUS)):(i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,-this.CORNER_RADIUS),i.push("h",t),i.push("a",this.CORNER_RADIUS,this.CORNER_RADIUS,0,0,1,this.CORNER_RADIUS,this.CORNER_RADIUS),i.push("v",e),i.push("h",-t-2*this.CORNER_RADIUS)),i.push("z"),this.svgBackground_.setAttribute("d",i.join(" "))},Me.HorizontalFlyout.prototype.scrollToStart=function(){this.workspace_.scrollbar.setX(this.RTL?1/0:0)},Me.HorizontalFlyout.prototype.wheel_=function(t){var e=(0,$.getScrollDeltaPixels)(t);if(e=e.x||e.y){var o=this.workspace_.getMetricsManager(),i=o.getScrollMetrics();e=o.getViewMetrics().left-i.left+e,this.workspace_.scrollbar.setX(e),(0,v.hide)(),(0,z.hideWithoutAnimation)()}t.preventDefault(),t.stopPropagation()},Me.HorizontalFlyout.prototype.layout_=function(t,e){this.workspace_.scale=this.targetWorkspace.scale;var o=this.MARGIN,i=o+this.tabWidth_;this.RTL&&(t=t.reverse());for(var s=0,l;l=t[s];s++)if(l.type==="block"){l=l.block;for(var h=l.getDescendants(!1),S=0,C;C=h[S];S++)C.isInFlyout=!0;l.render(),h=l.getSvgRoot(),S=l.getHeightWidth(),C=l.outputConnection?this.tabWidth_:0,C=this.RTL?i+S.width:i-C,l.moveBy(C,o),C=this.createRect_(l,C,o,S,s),i+=S.width+e[s],this.addBlockListeners_(h,l,C)}else l.type==="button"&&(this.initFlyoutButton_(l.button,i,o),i+=l.button.width+e[s])},Me.HorizontalFlyout.prototype.isDragTowardWorkspace=function(t){t=Math.atan2(t.y,t.x)/Math.PI*180;var e=this.dragAngleRange_;return t<90+e&&t>90-e||t>-90-e&&t<-90+e},Me.HorizontalFlyout.prototype.getClientRect=function(){if(!this.svgGroup_||this.autoClose||!this.isVisible())return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.top;return this.toolboxPosition_===q.Position.TOP?new wt.Rect(-1e9,e+t.height,-1e9,1e9):new wt.Rect(e,1e9,-1e9,1e9)},Me.HorizontalFlyout.prototype.reflowInternal_=function(){this.workspace_.scale=this.getFlyoutScale();for(var t=0,e=this.workspace_.getTopBlocks(!1),o=0,i;i=e[o];o++)t=Math.max(t,i.getHeightWidth().height);o=this.buttons_,i=0;for(var s;s=o[i];i++)t=Math.max(t,s.height);if(t+=1.5*this.MARGIN,t*=this.workspace_.scale,t+=Z.Scrollbar.scrollbarThickness,this.height_!==t){for(o=0;i=e[o];o++)this.rectMap_.has(i)&&this.moveRectToBlock_(this.rectMap_.get(i),i);this.targetWorkspace.toolboxPosition!==this.toolboxPosition_||this.toolboxPosition_!==q.Position.TOP||this.targetWorkspace.getToolbox()||this.targetWorkspace.translate(this.targetWorkspace.scrollX,this.targetWorkspace.scrollY+t),this.height_=t,this.position(),this.targetWorkspace.recordDragTargets()}},(0,b.register)(b.Type.FLYOUTS_HORIZONTAL_TOOLBOX,b.DEFAULT,Me.HorizontalFlyout),n.module$exports$Blockly$Generator={Generator:function(t){this.name_=t,this.FUNCTION_NAME_PLACEHOLDER_="{leCUI8hutHZI4480Dc}",this.FUNCTION_NAME_PLACEHOLDER_REGEXP_=new RegExp(this.FUNCTION_NAME_PLACEHOLDER_,"g"),this.STATEMENT_SUFFIX=this.STATEMENT_PREFIX=this.INFINITE_LOOP_TRAP=null,this.INDENT="  ",this.COMMENT_WRAP=60,this.ORDER_OVERRIDES=[],this.isInitialized=null,this.RESERVED_WORDS_="",this.nameDB_=this.functionNames_=this.definitions_=void 0}},n.module$exports$Blockly$Generator.Generator.prototype.workspaceToCode=function(t){t||(console.warn("No workspace specified in workspaceToCode call.  Guessing."),t=(0,n.module$exports$Blockly$common.getMainWorkspace)());var e=[];this.init(t),t=t.getTopBlocks(!0);for(var o=0,i;i=t[o];o++){var s=this.blockToCode(i);Array.isArray(s)&&(s=s[0]),s&&(i.outputConnection&&(s=this.scrubNakedValue(s),this.STATEMENT_PREFIX&&!i.suppressPrefixSuffix&&(s=this.injectId(this.STATEMENT_PREFIX,i)+s),this.STATEMENT_SUFFIX&&!i.suppressPrefixSuffix&&(s+=this.injectId(this.STATEMENT_SUFFIX,i))),e.push(s))}return e=e.join(`
`),e=this.finish(e),e=e.replace(/^\s+\n/,""),e=e.replace(/\n\s+$/,`
`),e=e.replace(/[ \t]+\n/g,`
`)},n.module$exports$Blockly$Generator.Generator.prototype.prefixLines=function(t,e){return e+t.replace(/(?!\n$)\n/g,`
`+e)},n.module$exports$Blockly$Generator.Generator.prototype.allNestedComments=function(t){var e=[];t=t.getDescendants(!0);for(var o=0;o<t.length;o++){var i=t[o].getCommentText();i&&e.push(i)}return e.length&&e.push(""),e.join(`
`)},n.module$exports$Blockly$Generator.Generator.prototype.blockToCode=function(t,e){if(this.isInitialized===!1&&console.warn("Generator init was not called before blockToCode was called."),!t)return"";if(!t.isEnabled())return e?"":this.blockToCode(t.getNextBlock());if(t.isInsertionMarker())return e?"":this.blockToCode(t.getChildren(!1)[0]);var o=this[t.type];if(typeof o!="function")throw Error('Language "'+this.name_+'" does not know how to generate code for block type "'+t.type+'".');if(o=o.call(t,t),Array.isArray(o)){if(!t.outputConnection)throw TypeError("Expecting string from statement block: "+t.type);return[this.scrub_(t,o[0],e),o[1]]}if(typeof o=="string")return this.STATEMENT_PREFIX&&!t.suppressPrefixSuffix&&(o=this.injectId(this.STATEMENT_PREFIX,t)+o),this.STATEMENT_SUFFIX&&!t.suppressPrefixSuffix&&(o+=this.injectId(this.STATEMENT_SUFFIX,t)),this.scrub_(t,o,e);if(o===null)return"";throw SyntaxError("Invalid code generated: "+o)},n.module$exports$Blockly$Generator.Generator.prototype.valueToCode=function(t,e,o){if(isNaN(o))throw TypeError("Expecting valid order from block: "+t.type);var i=t.getInputTargetBlock(e);if(!i||(e=this.blockToCode(i),e===""))return"";if(!Array.isArray(e))throw TypeError("Expecting tuple from value block: "+i.type);if(t=e[0],e=e[1],isNaN(e))throw TypeError("Expecting valid order from value block: "+i.type);if(!t)return"";i=!1;var s=Math.floor(o),l=Math.floor(e);if(s<=l&&(s!==l||s!==0&&s!==99)){for(i=!0,s=0;s<this.ORDER_OVERRIDES.length;s++)if(this.ORDER_OVERRIDES[s][0]===o&&this.ORDER_OVERRIDES[s][1]===e){i=!1;break}}return i&&(t="("+t+")"),t},n.module$exports$Blockly$Generator.Generator.prototype.statementToCode=function(t,e){if(t=t.getInputTargetBlock(e),e=this.blockToCode(t),typeof e!="string")throw TypeError("Expecting code from statement block: "+(t&&t.type));return e&&(e=this.prefixLines(e,this.INDENT)),e},n.module$exports$Blockly$Generator.Generator.prototype.addLoopTrap=function(t,e){return this.INFINITE_LOOP_TRAP&&(t=this.prefixLines(this.injectId(this.INFINITE_LOOP_TRAP,e),this.INDENT)+t),this.STATEMENT_SUFFIX&&!e.suppressPrefixSuffix&&(t=this.prefixLines(this.injectId(this.STATEMENT_SUFFIX,e),this.INDENT)+t),this.STATEMENT_PREFIX&&!e.suppressPrefixSuffix&&(t+=this.prefixLines(this.injectId(this.STATEMENT_PREFIX,e),this.INDENT)),t},n.module$exports$Blockly$Generator.Generator.prototype.injectId=function(t,e){return e=e.id.replace(/\$/g,"$$$$"),t.replace(/%1/g,"'"+e+"'")},n.module$exports$Blockly$Generator.Generator.prototype.addReservedWords=function(t){this.RESERVED_WORDS_+=t+","},n.module$exports$Blockly$Generator.Generator.prototype.provideFunction_=function(t,e){if(!this.definitions_[t]){var o=this.nameDB_.getDistinctName(t,n.module$exports$Blockly$Names.NameType.PROCEDURE);this.functionNames_[t]=o,Array.isArray(e)&&(e=e.join(`
`)),e=e.trim().replace(this.FUNCTION_NAME_PLACEHOLDER_REGEXP_,o);for(var i;i!==e;)i=e,e=e.replace(/^(( {2})*) {2}/gm,"$1\0");e=e.replace(/\0/g,this.INDENT),this.definitions_[t]=e}return this.functionNames_[t]},n.module$exports$Blockly$Generator.Generator.prototype.init=function(t){this.definitions_=Object.create(null),this.functionNames_=Object.create(null)},n.module$exports$Blockly$Generator.Generator.prototype.scrub_=function(t,e,o){return e},n.module$exports$Blockly$Generator.Generator.prototype.finish=function(t){return delete this.definitions_,delete this.functionNames_,t},n.module$exports$Blockly$Generator.Generator.prototype.scrubNakedValue=function(t){return t},Object.defineProperties(n.module$exports$Blockly$Generator.Generator.prototype,{variableDB_:{get:function(){return(0,y.warn)("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_},set:function(t){(0,y.warn)("variableDB_","May 2021","May 2026","nameDB_"),this.nameDB_=t}}});var Ot={FieldVariable:function(t,e,o,i,s){n.module$exports$Blockly$FieldDropdown.FieldDropdown.call(this,w.Field.SKIP_SETUP),this.menuGenerator_=Ot.FieldVariable.dropdownCreate,this.defaultVariableName=typeof t=="string"?t:"",this.defaultType_="",this.variableTypes=[],this.size_=new jt.Size(0,0),this.variable_=null,this.SERIALIZABLE=!0,t!==w.Field.SKIP_SETUP&&(s?this.configure_(s):this.setTypes_(o,i),e&&this.setValidator(e))}};n.$jscomp.inherits(Ot.FieldVariable,n.module$exports$Blockly$FieldDropdown.FieldDropdown),Ot.FieldVariable.prototype.configure_=function(t){n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.configure_.call(this,t),this.setTypes_(t.variableTypes,t.defaultType)},Ot.FieldVariable.prototype.initModel=function(){if(!this.variable_){var t=(0,n.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,null,this.defaultVariableName,this.defaultType_);this.doValueUpdate_(t.getId())}},Ot.FieldVariable.prototype.shouldAddBorderRect_=function(){return n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.shouldAddBorderRect_.call(this)&&(!this.getConstants().FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW||this.sourceBlock_.type!=="variables_get")},Ot.FieldVariable.prototype.fromXml=function(t){var e=t.getAttribute("id"),o=t.textContent,i=t.getAttribute("variabletype")||t.getAttribute("variableType")||"";if(e=(0,n.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,e,o,i),i!==null&&i!==e.type)throw Error("Serialized variable type with id '"+e.getId()+"' had type "+e.type+", and does not match variable field that references it: "+(0,n.module$exports$Blockly$Xml.domToText)(t)+".");this.setValue(e.getId())},Ot.FieldVariable.prototype.toXml=function(t){return this.initModel(),t.id=this.variable_.getId(),t.textContent=this.variable_.name,this.variable_.type&&t.setAttribute("variabletype",this.variable_.type),t},Ot.FieldVariable.prototype.saveState=function(t){var e=this.saveLegacyState(Ot.FieldVariable);return e!==null||(this.initModel(),e={id:this.variable_.getId()},t&&(e.name=this.variable_.name,e.type=this.variable_.type)),e},Ot.FieldVariable.prototype.loadState=function(t){this.loadLegacyState(Ot.FieldVariable,t)||(t=(0,n.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.sourceBlock_.workspace,t.id||null,t.name,t.type||""),this.setValue(t.getId()))},Ot.FieldVariable.prototype.setSourceBlock=function(t){if(t.isShadow())throw Error("Variable fields are not allowed to exist on shadow blocks.");n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.setSourceBlock.call(this,t)},Ot.FieldVariable.prototype.getValue=function(){return this.variable_?this.variable_.getId():null},Ot.FieldVariable.prototype.getText=function(){return this.variable_?this.variable_.name:""},Ot.FieldVariable.prototype.getVariable=function(){return this.variable_},Ot.FieldVariable.prototype.getValidator=function(){return this.variable_?this.validator_:null},Ot.FieldVariable.prototype.doClassValidation_=function(t){if(t===null)return null;var e=(0,n.module$exports$Blockly$Variables.getVariable)(this.sourceBlock_.workspace,t);return e?(e=e.type,this.typeIsAllowed_(e)?t:(console.warn("Variable type doesn't match this field!  Type was "+e),null)):(console.warn("Variable id doesn't point to a real variable! ID was "+t),null)},Ot.FieldVariable.prototype.doValueUpdate_=function(t){this.variable_=(0,n.module$exports$Blockly$Variables.getVariable)(this.sourceBlock_.workspace,t),n.module$exports$Blockly$FieldDropdown.FieldDropdown.prototype.doValueUpdate_.call(this,t)},Ot.FieldVariable.prototype.typeIsAllowed_=function(t){var e=this.getVariableTypes_();if(!e)return!0;for(var o=0;o<e.length;o++)if(t===e[o])return!0;return!1},Ot.FieldVariable.prototype.getVariableTypes_=function(){var t=this.variableTypes;if(t===null&&this.sourceBlock_&&this.sourceBlock_.workspace)return this.sourceBlock_.workspace.getVariableTypes();if(t=t||[""],t.length===0)throw t=this.getText(),Error("'variableTypes' of field variable "+t+" was an empty list");return t},Ot.FieldVariable.prototype.setTypes_=function(t,e){if(e=e||"",t==null)t=null;else if(Array.isArray(t)){for(var o=!1,i=0;i<t.length;i++)t[i]===e&&(o=!0);if(!o)throw Error("Invalid default type '"+e+"' in the definition of a FieldVariable")}else throw Error("'variableTypes' was not an array in the definition of a FieldVariable");this.defaultType_=e,this.variableTypes=t},Ot.FieldVariable.prototype.refreshVariableName=function(){this.forceRerender()},Ot.FieldVariable.prototype.onItemSelected_=function(t,e){if(t=e.getValue(),this.sourceBlock_&&this.sourceBlock_.workspace){if(t===Zt.RENAME_VARIABLE_ID){(0,n.module$exports$Blockly$Variables.renameVariable)(this.sourceBlock_.workspace,this.variable_);return}if(t===Zt.DELETE_VARIABLE_ID){this.sourceBlock_.workspace.deleteVariableById(this.variable_.getId());return}}this.setValue(t)},Ot.FieldVariable.prototype.referencesVariables=function(){return!0},Ot.FieldVariable.fromJson=function(t){return new this((0,mt.replaceMessageReferences)(t.variable),void 0,void 0,void 0,t)},Ot.FieldVariable.dropdownCreate=function(){if(!this.variable_)throw Error("Tried to call dropdownCreate on a variable field with no variable selected.");var t=this.getText(),e=[];if(this.sourceBlock_&&this.sourceBlock_.workspace)for(var o=this.getVariableTypes_(),i=0;i<o.length;i++){var s=this.sourceBlock_.workspace.getVariablesOfType(o[i]);e=e.concat(s)}for(e.sort(Po.VariableModel.compareByName),o=[],i=0;i<e.length;i++)o[i]=[e[i].name,e[i].getId()];return o.push([n.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,Zt.RENAME_VARIABLE_ID]),n.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE&&o.push([n.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",t),Zt.DELETE_VARIABLE_ID]),o},(0,$e.register)("field_variable",Ot.FieldVariable),n.module$exports$Blockly$FieldTextInput={FieldTextInput:function(t,e,o){w.Field.call(this,w.Field.SKIP_SETUP),this.spellcheck_=!0,this.htmlInput_=null,this.isTextValid_=this.isBeingEdited_=!1,this.onKeyInputWrapper_=this.onKeyDownWrapper_=null,this.fullBlockClickTarget_=!1,this.workspace_=null,this.SERIALIZABLE=!0,this.CURSOR="text",t!==w.Field.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(t),e&&this.setValidator(e))}},n.$jscomp.inherits(n.module$exports$Blockly$FieldTextInput.FieldTextInput,w.Field),n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.configure_=function(t){w.Field.prototype.configure_.call(this,t),typeof t.spellcheck=="boolean"&&(this.spellcheck_=t.spellcheck)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.initView=function(){if(this.getConstants().FULL_BLOCK_FIELDS){for(var t=0,e=0,o=0,i;i=this.sourceBlock_.inputList[o];o++){for(var s=0;i.fieldRow[s];s++)t++;i.connection&&e++}this.fullBlockClickTarget_=1>=t&&this.sourceBlock_.outputConnection&&!e}else this.fullBlockClickTarget_=!1;this.fullBlockClickTarget_?this.clickTarget_=this.sourceBlock_.getSvgRoot():this.createBorderRect_(),this.createTextElement_()},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doClassValidation_=function(t){return t==null?null:String(t)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doValueInvalid_=function(t){this.isBeingEdited_&&(this.isTextValid_=!1,t=this.value_,this.value_=this.htmlInput_.untypedDefaultValue_,this.sourceBlock_&&(0,p.isEnabled)()&&(0,p.fire)(new((0,p.get)(p.CHANGE))(this.sourceBlock_,"field",this.name||null,t,this.value_)))},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doValueUpdate_=function(t){this.isTextValid_=!0,this.value_=t,this.isBeingEdited_||(this.isDirty_=!0)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.applyColour=function(){this.sourceBlock_&&this.getConstants().FULL_BLOCK_FIELDS&&(this.borderRect_?this.borderRect_.setAttribute("stroke",this.sourceBlock_.style.colourTertiary):this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getConstants().FIELD_BORDER_RECT_COLOUR))},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.render_=function(){if(w.Field.prototype.render_.call(this),this.isBeingEdited_){this.resizeEditor_();var t=this.htmlInput_;this.isTextValid_?((0,_.removeClass)(t,"blocklyInvalidInput"),(0,Y.setState)(t,Y.State.INVALID,!1)):((0,_.addClass)(t,"blocklyInvalidInput"),(0,Y.setState)(t,Y.State.INVALID,!0))}},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.setSpellcheck=function(t){t!==this.spellcheck_&&(this.spellcheck_=t,this.htmlInput_&&this.htmlInput_.setAttribute("spellcheck",this.spellcheck_))},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showEditor_=function(t,e){this.workspace_=this.sourceBlock_.workspace,t=e||!1,!t&&(G.MOBILE||G.ANDROID||G.IPAD)?this.showPromptEditor_():this.showInlineEditor_(t)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showPromptEditor_=function(){(0,Kt.prompt)(n.module$exports$Blockly$Msg.Msg.CHANGE_VALUE_TITLE,this.getText(),function(t){t!==null&&this.setValue(this.getValueFromEditorText_(t))}.bind(this))},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showInlineEditor_=function(t){(0,v.show)(this,this.sourceBlock_.RTL,this.widgetDispose_.bind(this)),this.htmlInput_=this.widgetCreate_(),this.isBeingEdited_=!0,t||(this.htmlInput_.focus({preventScroll:!0}),this.htmlInput_.select())},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.widgetCreate_=function(){(0,p.setGroup)(!0);var t=(0,v.getDiv)();(0,_.addClass)(this.getClickTarget_(),"editing");var e=document.createElement("input");e.className="blocklyHtmlInput",e.setAttribute("spellcheck",this.spellcheck_);var o=this.workspace_.getScale(),i=this.getConstants().FIELD_TEXT_FONTSIZE*o+"pt";if(t.style.fontSize=i,e.style.fontSize=i,i=n.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS*o+"px",this.fullBlockClickTarget_){i=this.getScaledBBox(),i=(i.bottom-i.top)/2+"px";var s=this.sourceBlock_.getParent()?this.sourceBlock_.getParent().style.colourTertiary:this.sourceBlock_.style.colourTertiary;e.style.border=1*o+"px solid "+s,t.style.borderRadius=i,t.style.transition="box-shadow 0.25s ease 0s",this.getConstants().FIELD_TEXTINPUT_BOX_SHADOW&&(t.style.boxShadow="rgba(255, 255, 255, 0.3) 0 0 0 "+4*o+"px")}return e.style.borderRadius=i,t.appendChild(e),e.value=e.defaultValue=this.getEditorText_(this.value_),e.untypedDefaultValue_=this.value_,e.oldValue_=null,this.resizeEditor_(),this.bindInputEvents_(e),e},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.widgetDispose_=function(){this.isBeingEdited_=!1,this.isTextValid_=!0,this.forceRerender(),this.onFinishEditing_(this.value_),(0,p.setGroup)(!1),this.unbindInputEvents_();var t=(0,v.getDiv)().style;t.width="auto",t.height="auto",t.fontSize="",t.transition="",t.boxShadow="",this.htmlInput_=null,(0,_.removeClass)(this.getClickTarget_(),"editing")},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onFinishEditing_=function(t){},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.bindInputEvents_=function(t){this.onKeyDownWrapper_=(0,$.conditionalBind)(t,"keydown",this,this.onHtmlInputKeyDown_),this.onKeyInputWrapper_=(0,$.conditionalBind)(t,"input",this,this.onHtmlInputChange_)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.unbindInputEvents_=function(){this.onKeyDownWrapper_&&((0,$.unbind)(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.onKeyInputWrapper_&&((0,$.unbind)(this.onKeyInputWrapper_),this.onKeyInputWrapper_=null)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode===K.KeyCodes.ENTER?((0,v.hide)(),(0,z.hideWithoutAnimation)()):t.keyCode===K.KeyCodes.ESC?(this.setValue(this.htmlInput_.untypedDefaultValue_),(0,v.hide)(),(0,z.hideWithoutAnimation)()):t.keyCode===K.KeyCodes.TAB&&((0,v.hide)(),(0,z.hideWithoutAnimation)(),this.sourceBlock_.tab(this,!t.shiftKey),t.preventDefault())},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputChange_=function(t){t=this.htmlInput_.value,t!==this.htmlInput_.oldValue_&&(this.htmlInput_.oldValue_=t,t=this.getValueFromEditorText_(t),this.setValue(t),this.forceRerender(),this.resizeEditor_())},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.setEditorValue_=function(t){this.isDirty_=!0,this.isBeingEdited_&&(this.htmlInput_.value=this.getEditorText_(t)),this.setValue(t)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.resizeEditor_=function(){var t=(0,v.getDiv)(),e=this.getScaledBBox();t.style.width=e.right-e.left+"px",t.style.height=e.bottom-e.top+"px",e=new H.Coordinate(this.sourceBlock_.RTL?e.right-t.offsetWidth:e.left,e.top),t.style.left=e.x+"px",t.style.top=e.y+"px"},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.isTabNavigable=function(){return!0},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getText_=function(){return this.isBeingEdited_&&this.htmlInput_?this.htmlInput_.value:null},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getEditorText_=function(t){return String(t)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.getValueFromEditorText_=function(t){return t},n.module$exports$Blockly$FieldTextInput.FieldTextInput.fromJson=function(t){return new this((0,mt.replaceMessageReferences)(t.text),void 0,t)},n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.DEFAULT_VALUE="",n.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS=4,(0,$e.register)("field_input",n.module$exports$Blockly$FieldTextInput.FieldTextInput);var se={FieldNumber:function(t,e,o,i,s,l){n.module$exports$Blockly$FieldTextInput.FieldTextInput.call(this,w.Field.SKIP_SETUP),this.min_=-1/0,this.max_=1/0,this.precision_=0,this.decimalPlaces_=null,this.SERIALIZABLE=!0,t!==w.Field.SKIP_SETUP&&(l?this.configure_(l):this.setConstraints(e,o,i),this.setValue(t),s&&this.setValidator(s))}};n.$jscomp.inherits(se.FieldNumber,n.module$exports$Blockly$FieldTextInput.FieldTextInput),se.FieldNumber.prototype.configure_=function(t){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.configure_.call(this,t),this.setMinInternal_(t.min),this.setMaxInternal_(t.max),this.setPrecisionInternal_(t.precision)},se.FieldNumber.prototype.setConstraints=function(t,e,o){this.setMinInternal_(t),this.setMaxInternal_(e),this.setPrecisionInternal_(o),this.setValue(this.getValue())},se.FieldNumber.prototype.setMin=function(t){this.setMinInternal_(t),this.setValue(this.getValue())},se.FieldNumber.prototype.setMinInternal_=function(t){t==null?this.min_=-1/0:(t=Number(t),isNaN(t)||(this.min_=t))},se.FieldNumber.prototype.getMin=function(){return this.min_},se.FieldNumber.prototype.setMax=function(t){this.setMaxInternal_(t),this.setValue(this.getValue())},se.FieldNumber.prototype.setMaxInternal_=function(t){t==null?this.max_=1/0:(t=Number(t),isNaN(t)||(this.max_=t))},se.FieldNumber.prototype.getMax=function(){return this.max_},se.FieldNumber.prototype.setPrecision=function(t){this.setPrecisionInternal_(t),this.setValue(this.getValue())},se.FieldNumber.prototype.setPrecisionInternal_=function(t){this.precision_=Number(t)||0;var e=String(this.precision_);e.indexOf("e")!==-1&&(e=this.precision_.toLocaleString("en-US",{maximumFractionDigits:20}));var o=e.indexOf(".");this.decimalPlaces_=o===-1?t?0:null:e.length-o-1},se.FieldNumber.prototype.getPrecision=function(){return this.precision_},se.FieldNumber.prototype.doClassValidation_=function(t){return t===null||(t=String(t),t=t.replace(/O/ig,"0"),t=t.replace(/,/g,""),t=t.replace(/infinity/i,"Infinity"),t=Number(t||0),isNaN(t))?null:(t=Math.min(Math.max(t,this.min_),this.max_),this.precision_&&isFinite(t)&&(t=Math.round(t/this.precision_)*this.precision_),this.decimalPlaces_!==null&&(t=Number(t.toFixed(this.decimalPlaces_))),t)},se.FieldNumber.prototype.widgetCreate_=function(){var t=n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.widgetCreate_.call(this);return-1/0<this.min_&&(0,Y.setState)(t,Y.State.VALUEMIN,this.min_),1/0>this.max_&&(0,Y.setState)(t,Y.State.VALUEMAX,this.max_),t},se.FieldNumber.fromJson=function(t){return new this(t.value,void 0,void 0,void 0,void 0,t)},se.FieldNumber.prototype.DEFAULT_VALUE=0,(0,$e.register)("field_number",se.FieldNumber);var Jt={FieldMultilineInput:function(t,e,o){n.module$exports$Blockly$FieldTextInput.FieldTextInput.call(this,w.Field.SKIP_SETUP),this.textGroup_=null,this.maxLines_=1/0,this.isOverflowedY_=!1,t!==w.Field.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(t),e&&this.setValidator(e))}};n.$jscomp.inherits(Jt.FieldMultilineInput,n.module$exports$Blockly$FieldTextInput.FieldTextInput),Jt.FieldMultilineInput.prototype.configure_=function(t){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.configure_.call(this,t),t.maxLines&&this.setMaxLines(t.maxLines)},Jt.FieldMultilineInput.prototype.toXml=function(t){return t.textContent=this.getValue().replace(/\n/g,"&#10;"),t},Jt.FieldMultilineInput.prototype.fromXml=function(t){this.setValue(t.textContent.replace(/&#10;/g,`
`))},Jt.FieldMultilineInput.prototype.saveState=function(){var t=this.saveLegacyState(Jt.FieldMultilineInput);return t!==null?t:this.getValue()},Jt.FieldMultilineInput.prototype.loadState=function(t){this.loadLegacyState(w.Field,t)||this.setValue(t)},Jt.FieldMultilineInput.prototype.initView=function(){this.createBorderRect_(),this.textGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyEditableText"},this.fieldGroup_)},Jt.FieldMultilineInput.prototype.getDisplayText_=function(){var t=this.getText();if(!t)return w.Field.NBSP;var e=t.split(`
`);t="";for(var o=this.isOverflowedY_?this.maxLines_:e.length,i=0;i<o;i++){var s=e[i];s.length>this.maxDisplayLength?s=s.substring(0,this.maxDisplayLength-4)+"...":this.isOverflowedY_&&i===o-1&&(s=s.substring(0,s.length-3)+"..."),s=s.replace(/\s/g,w.Field.NBSP),t+=s,i!==o-1&&(t+=`
`)}return this.sourceBlock_.RTL&&(t+="\u200F"),t},Jt.FieldMultilineInput.prototype.doValueUpdate_=function(t){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.doValueUpdate_.call(this,t),this.isOverflowedY_=this.value_.split(`
`).length>this.maxLines_},Jt.FieldMultilineInput.prototype.render_=function(){for(var t;t=this.textGroup_.firstChild;)this.textGroup_.removeChild(t);t=this.getDisplayText_().split(`
`);for(var e=0,o=0;o<t.length;o++){var i=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING;(0,_.createSvgElement)(R.Svg.TEXT,{class:"blocklyText blocklyMultilineText",x:this.getConstants().FIELD_BORDER_RECT_X_PADDING,y:e+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,dy:this.getConstants().FIELD_TEXT_BASELINE},this.textGroup_).appendChild(document.createTextNode(t[o])),e+=i}this.isBeingEdited_&&(t=this.htmlInput_,this.isOverflowedY_?(0,_.addClass)(t,"blocklyHtmlTextAreaInputOverflowedY"):(0,_.removeClass)(t,"blocklyHtmlTextAreaInputOverflowedY")),this.updateSize_(),this.isBeingEdited_&&(this.sourceBlock_.RTL?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),t=this.htmlInput_,this.isTextValid_?((0,_.removeClass)(t,"blocklyInvalidInput"),(0,Y.setState)(t,Y.State.INVALID,!1)):((0,_.addClass)(t,"blocklyInvalidInput"),(0,Y.setState)(t,Y.State.INVALID,!0)))},Jt.FieldMultilineInput.prototype.updateSize_=function(){for(var t=this.textGroup_.childNodes,e=0,o=0,i=0;i<t.length;i++){var s=(0,_.getTextWidth)(t[i]);s>e&&(e=s),o+=this.getConstants().FIELD_TEXT_HEIGHT+(0<i?this.getConstants().FIELD_BORDER_RECT_Y_PADDING:0)}if(this.isBeingEdited_){t=this.value_.split(`
`),i=(0,_.createSvgElement)(R.Svg.TEXT,{class:"blocklyText blocklyMultilineText"}),s=this.getConstants().FIELD_TEXT_FONTSIZE;for(var l=this.getConstants().FIELD_TEXT_FONTWEIGHT,h=this.getConstants().FIELD_TEXT_FONTFAMILY,S=0;S<t.length;S++){t[S].length>this.maxDisplayLength&&(t[S]=t[S].substring(0,this.maxDisplayLength)),i.textContent=t[S];var C=(0,_.getFastTextWidth)(i,s,l,h);C>e&&(e=C)}e+=this.htmlInput_.offsetWidth-this.htmlInput_.clientWidth}this.borderRect_&&(o+=2*this.getConstants().FIELD_BORDER_RECT_Y_PADDING,e+=2*this.getConstants().FIELD_BORDER_RECT_X_PADDING,this.borderRect_.setAttribute("width",e),this.borderRect_.setAttribute("height",o)),this.size_.width=e,this.size_.height=o,this.positionBorderRect_()},Jt.FieldMultilineInput.prototype.showEditor_=function(t,e){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showEditor_.call(this,t,e),this.forceRerender()},Jt.FieldMultilineInput.prototype.widgetCreate_=function(){var t=(0,v.getDiv)(),e=this.workspace_.getScale(),o=document.createElement("textarea");o.className="blocklyHtmlInput blocklyHtmlTextAreaInput",o.setAttribute("spellcheck",this.spellcheck_);var i=this.getConstants().FIELD_TEXT_FONTSIZE*e+"pt";t.style.fontSize=i,o.style.fontSize=i,o.style.borderRadius=n.module$exports$Blockly$FieldTextInput.FieldTextInput.BORDERRADIUS*e+"px",i=this.getConstants().FIELD_BORDER_RECT_X_PADDING*e;var s=this.getConstants().FIELD_BORDER_RECT_Y_PADDING*e/2;return o.style.padding=s+"px "+i+"px "+s+"px "+i+"px",i=this.getConstants().FIELD_TEXT_HEIGHT+this.getConstants().FIELD_BORDER_RECT_Y_PADDING,o.style.lineHeight=i*e+"px",t.appendChild(o),o.value=o.defaultValue=this.getEditorText_(this.value_),o.untypedDefaultValue_=this.value_,o.oldValue_=null,G.GECKO?setTimeout(this.resizeEditor_.bind(this),0):this.resizeEditor_(),this.bindInputEvents_(o),o},Jt.FieldMultilineInput.prototype.setMaxLines=function(t){typeof t=="number"&&0<t&&t!==this.maxLines_&&(this.maxLines_=t,this.forceRerender())},Jt.FieldMultilineInput.prototype.getMaxLines=function(){return this.maxLines_},Jt.FieldMultilineInput.prototype.onHtmlInputKeyDown_=function(t){t.keyCode!==K.KeyCodes.ENTER&&n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputKeyDown_.call(this,t)},Jt.FieldMultilineInput.fromJson=function(t){return new this((0,mt.replaceMessageReferences)(t.text),void 0,t)},(0,O.register)(`
.blocklyHtmlTextAreaInput {
  font-family: monospace;
  resize: none;
  overflow: hidden;
  height: 100%;
  text-align: left;
}

.blocklyHtmlTextAreaInputOverflowedY {
  overflow-y: scroll;
}
`),(0,$e.register)("field_multilinetext",Jt.FieldMultilineInput);var Wn={FieldLabelSerializable:function(t,e,o){n.module$exports$Blockly$FieldLabel.FieldLabel.call(this,String(t!=null?t:""),e,o),this.EDITABLE=!1,this.SERIALIZABLE=!0}};n.$jscomp.inherits(Wn.FieldLabelSerializable,n.module$exports$Blockly$FieldLabel.FieldLabel),Wn.FieldLabelSerializable.fromJson=function(t){return new this((0,mt.replaceMessageReferences)(t.text),void 0,t)},(0,$e.register)("field_label_serializable",Wn.FieldLabelSerializable);var Rt={FieldColour:function(t,e,o){w.Field.call(this,w.Field.SKIP_SETUP),this.onKeyDownWrapper_=this.onMouseLeaveWrapper_=this.onMouseEnterWrapper_=this.onMouseMoveWrapper_=this.onClickWrapper_=this.highlightedIndex_=this.picker_=null,this.SERIALIZABLE=!0,this.CURSOR="default",this.isDirty_=!1,this.titles_=this.colours_=null,this.columns_=0,t!==w.Field.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(t),e&&this.setValidator(e))}};n.$jscomp.inherits(Rt.FieldColour,w.Field),Rt.FieldColour.prototype.configure_=function(t){w.Field.prototype.configure_.call(this,t),t.colourOptions&&(this.colours_=t.colourOptions,this.titles_=t.colourTitles),t.columns&&(this.columns_=t.columns)},Rt.FieldColour.prototype.initView=function(){this.size_=new jt.Size(this.getConstants().FIELD_COLOUR_DEFAULT_WIDTH,this.getConstants().FIELD_COLOUR_DEFAULT_HEIGHT),this.getConstants().FIELD_COLOUR_FULL_BLOCK?this.clickTarget_=this.sourceBlock_.getSvgRoot():(this.createBorderRect_(),this.borderRect_.style.fillOpacity="1")},Rt.FieldColour.prototype.applyColour=function(){this.getConstants().FIELD_COLOUR_FULL_BLOCK?(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",this.getValue()),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff")):this.borderRect_&&(this.borderRect_.style.fill=this.getValue())},Rt.FieldColour.prototype.doClassValidation_=function(t){return typeof t!="string"?null:(0,Et.parse)(t)},Rt.FieldColour.prototype.doValueUpdate_=function(t){this.value_=t,this.borderRect_?this.borderRect_.style.fill=t:this.sourceBlock_&&this.sourceBlock_.rendered&&(this.sourceBlock_.pathObject.svgPath.setAttribute("fill",t),this.sourceBlock_.pathObject.svgPath.setAttribute("stroke","#fff"))},Rt.FieldColour.prototype.getText=function(){var t=this.value_;return/^#(.)\1(.)\2(.)\3$/.test(t)&&(t="#"+t[1]+t[3]+t[5]),t},Rt.FieldColour.prototype.setColours=function(t,e){return this.colours_=t,e&&(this.titles_=e),this},Rt.FieldColour.prototype.setColumns=function(t){return this.columns_=t,this},Rt.FieldColour.prototype.showEditor_=function(){this.dropdownCreate_(),(0,z.getContentDiv)().appendChild(this.picker_),(0,z.showPositionedByField)(this,this.dropdownDispose_.bind(this)),this.picker_.focus({preventScroll:!0})},Rt.FieldColour.prototype.onClick_=function(t){t=(t=t.target)&&t.label,t!==null&&(this.setValue(t),(0,z.hideIfOwner)(this))},Rt.FieldColour.prototype.onKeyDown_=function(t){var e=!1;t.keyCode===K.KeyCodes.UP?(this.moveHighlightBy_(0,-1),e=!0):t.keyCode===K.KeyCodes.DOWN?(this.moveHighlightBy_(0,1),e=!0):t.keyCode===K.KeyCodes.LEFT?(this.moveHighlightBy_(-1,0),e=!0):t.keyCode===K.KeyCodes.RIGHT?(this.moveHighlightBy_(1,0),e=!0):t.keyCode===K.KeyCodes.ENTER&&((e=this.getHighlighted_())&&(e=e&&e.label,e!==null&&this.setValue(e)),(0,z.hideWithoutAnimation)(),e=!0),e&&t.stopPropagation()},Rt.FieldColour.prototype.moveHighlightBy_=function(t,e){var o=this.colours_||Rt.FieldColour.COLOURS,i=this.columns_||Rt.FieldColour.COLUMNS,s=this.highlightedIndex_%i,l=Math.floor(this.highlightedIndex_/i);s+=t,l+=e,0>t?0>s&&0<l?(s=i-1,l--):0>s&&(s=0):0<t?s>i-1&&l<Math.floor(o.length/i)-1?(s=0,l++):s>i-1&&s--:0>e?0>l&&(l=0):0<e&&l>Math.floor(o.length/i)-1&&(l=Math.floor(o.length/i)-1),this.setHighlightedCell_(this.picker_.childNodes[l].childNodes[s],l*i+s)},Rt.FieldColour.prototype.onMouseMove_=function(t){var e=(t=t.target)&&Number(t.getAttribute("data-index"));e!==null&&e!==this.highlightedIndex_&&this.setHighlightedCell_(t,e)},Rt.FieldColour.prototype.onMouseEnter_=function(){this.picker_.focus({preventScroll:!0})},Rt.FieldColour.prototype.onMouseLeave_=function(){this.picker_.blur();var t=this.getHighlighted_();t&&(0,_.removeClass)(t,"blocklyColourHighlighted")},Rt.FieldColour.prototype.getHighlighted_=function(){var t=this.columns_||Rt.FieldColour.COLUMNS,e=this.picker_.childNodes[Math.floor(this.highlightedIndex_/t)];return e?e.childNodes[this.highlightedIndex_%t]:null},Rt.FieldColour.prototype.setHighlightedCell_=function(t,e){var o=this.getHighlighted_();o&&(0,_.removeClass)(o,"blocklyColourHighlighted"),(0,_.addClass)(t,"blocklyColourHighlighted"),this.highlightedIndex_=e,(0,Y.setState)(this.picker_,Y.State.ACTIVEDESCENDANT,t.getAttribute("id"))},Rt.FieldColour.prototype.dropdownCreate_=function(){var t=this.columns_||Rt.FieldColour.COLUMNS,e=this.colours_||Rt.FieldColour.COLOURS,o=this.titles_||Rt.FieldColour.TITLES,i=this.getValue(),s=document.createElement("table");s.className="blocklyColourTable",s.tabIndex=0,s.dir="ltr",(0,Y.setRole)(s,Y.Role.GRID),(0,Y.setState)(s,Y.State.EXPANDED,!0),(0,Y.setState)(s,Y.State.ROWCOUNT,Math.floor(e.length/t)),(0,Y.setState)(s,Y.State.COLCOUNT,t);for(var l,h=0;h<e.length;h++){h%t===0&&(l=document.createElement("tr"),(0,Y.setRole)(l,Y.Role.ROW),s.appendChild(l));var S=document.createElement("td");l.appendChild(S),S.label=e[h],S.title=o[h]||e[h],S.id=(0,re.getNextUniqueId)(),S.setAttribute("data-index",h),(0,Y.setRole)(S,Y.Role.GRIDCELL),(0,Y.setState)(S,Y.State.LABEL,e[h]),(0,Y.setState)(S,Y.State.SELECTED,e[h]===i),S.style.backgroundColor=e[h],e[h]===i&&(S.className="blocklyColourSelected",this.highlightedIndex_=h)}this.onClickWrapper_=(0,$.conditionalBind)(s,"click",this,this.onClick_,!0),this.onMouseMoveWrapper_=(0,$.conditionalBind)(s,"mousemove",this,this.onMouseMove_,!0),this.onMouseEnterWrapper_=(0,$.conditionalBind)(s,"mouseenter",this,this.onMouseEnter_,!0),this.onMouseLeaveWrapper_=(0,$.conditionalBind)(s,"mouseleave",this,this.onMouseLeave_,!0),this.onKeyDownWrapper_=(0,$.conditionalBind)(s,"keydown",this,this.onKeyDown_),this.picker_=s},Rt.FieldColour.prototype.dropdownDispose_=function(){this.onClickWrapper_&&((0,$.unbind)(this.onClickWrapper_),this.onClickWrapper_=null),this.onMouseMoveWrapper_&&((0,$.unbind)(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null),this.onMouseEnterWrapper_&&((0,$.unbind)(this.onMouseEnterWrapper_),this.onMouseEnterWrapper_=null),this.onMouseLeaveWrapper_&&((0,$.unbind)(this.onMouseLeaveWrapper_),this.onMouseLeaveWrapper_=null),this.onKeyDownWrapper_&&((0,$.unbind)(this.onKeyDownWrapper_),this.onKeyDownWrapper_=null),this.highlightedIndex_=this.picker_=null},Rt.FieldColour.fromJson=function(t){return new this(t.colour,void 0,t)},Rt.FieldColour.COLOURS="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" "),Rt.FieldColour.prototype.DEFAULT_VALUE=Rt.FieldColour.COLOURS[0],Rt.FieldColour.TITLES=[],Rt.FieldColour.COLUMNS=7,(0,O.register)(`
.blocklyColourTable {
  border-collapse: collapse;
  display: block;
  outline: none;
  padding: 1px;
}

.blocklyColourTable>tr>td {
  border: .5px solid #888;
  box-sizing: border-box;
  cursor: pointer;
  display: inline-block;
  height: 20px;
  padding: 0;
  width: 20px;
}

.blocklyColourTable>tr>td.blocklyColourHighlighted {
  border-color: #eee;
  box-shadow: 2px 2px 7px 2px rgba(0,0,0,.3);
  position: relative;
}

.blocklyColourSelected, .blocklyColourSelected:hover {
  border-color: #eee !important;
  outline: 1px solid #333;
  position: relative;
}
`),(0,$e.register)("field_colour",Rt.FieldColour),n.module$exports$Blockly$FieldCheckbox={FieldCheckbox:function(t,e,o){w.Field.call(this,w.Field.SKIP_SETUP),this.checkChar_=n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.CHECK_CHAR,this.SERIALIZABLE=!0,this.CURSOR="default",t!==w.Field.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(t),e&&this.setValidator(e))}},n.$jscomp.inherits(n.module$exports$Blockly$FieldCheckbox.FieldCheckbox,w.Field),n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.configure_=function(t){w.Field.prototype.configure_.call(this,t),t.checkCharacter&&(this.checkChar_=t.checkCharacter)},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.saveState=function(){var t=this.saveLegacyState(n.module$exports$Blockly$FieldCheckbox.FieldCheckbox);return t!==null?t:this.getValueBoolean()},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.initView=function(){w.Field.prototype.initView.call(this),(0,_.addClass)(this.textElement_,"blocklyCheckbox"),this.textElement_.style.display=this.value_?"block":"none"},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.render_=function(){this.textContent_&&(this.textContent_.nodeValue=this.getDisplayText_()),this.updateSize_(this.getConstants().FIELD_CHECKBOX_X_OFFSET)},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getDisplayText_=function(){return this.checkChar_},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.setCheckCharacter=function(t){this.checkChar_=t||n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.CHECK_CHAR,this.forceRerender()},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.showEditor_=function(){this.setValue(!this.value_)},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.doClassValidation_=function(t){return t===!0||t==="TRUE"?"TRUE":t===!1||t==="FALSE"?"FALSE":null},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.doValueUpdate_=function(t){this.value_=this.convertValueToBool_(t),this.textElement_&&(this.textElement_.style.display=this.value_?"block":"none")},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getValue=function(){return this.value_?"TRUE":"FALSE"},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getValueBoolean=function(){return this.value_},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.getText=function(){return String(this.convertValueToBool_(this.value_))},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.convertValueToBool_=function(t){return typeof t=="string"?t==="TRUE":!!t},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.fromJson=function(t){return new this(t.checked,void 0,t)},n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.prototype.DEFAULT_VALUE=!1,n.module$exports$Blockly$FieldCheckbox.FieldCheckbox.CHECK_CHAR="\u2713",(0,$e.register)("field_checkbox",n.module$exports$Blockly$FieldCheckbox.FieldCheckbox);var ot={FieldAngle:function(t,e,o){n.module$exports$Blockly$FieldTextInput.FieldTextInput.call(this,w.Field.SKIP_SETUP),this.clockwise_=ot.FieldAngle.CLOCKWISE,this.offset_=ot.FieldAngle.OFFSET,this.wrap_=ot.FieldAngle.WRAP,this.round_=ot.FieldAngle.ROUND,this.moveSurfaceWrapper_=this.clickSurfaceWrapper_=this.clickWrapper_=this.symbol_=this.line_=this.gauge_=this.editor_=null,this.SERIALIZABLE=!0,t!==w.Field.SKIP_SETUP&&(o&&this.configure_(o),this.setValue(t),e&&this.setValidator(e))}};n.$jscomp.inherits(ot.FieldAngle,n.module$exports$Blockly$FieldTextInput.FieldTextInput),ot.FieldAngle.prototype.configure_=function(t){switch(n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.configure_.call(this,t),t.mode){case"compass":this.clockwise_=!0,this.offset_=90;break;case"protractor":this.clockwise_=!1,this.offset_=0}var e=t.clockwise;typeof e=="boolean"&&(this.clockwise_=e),e=t.offset,e!==null&&(e=Number(e),isNaN(e)||(this.offset_=e)),e=t.wrap,e!==null&&(e=Number(e),isNaN(e)||(this.wrap_=e)),t=t.round,t!==null&&(t=Number(t),isNaN(t)||(this.round_=t))},ot.FieldAngle.prototype.initView=function(){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.initView.call(this),this.symbol_=(0,_.createSvgElement)(R.Svg.TSPAN,{},null),this.symbol_.appendChild(document.createTextNode("\xB0")),this.textElement_.appendChild(this.symbol_)},ot.FieldAngle.prototype.render_=function(){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.render_.call(this),this.updateGraph_()},ot.FieldAngle.prototype.showEditor_=function(t){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.showEditor_.call(this,t,G.MOBILE||G.ANDROID||G.IPAD),this.dropdownCreate_(),(0,z.getContentDiv)().appendChild(this.editor_),(0,z.setColour)(this.sourceBlock_.style.colourPrimary,this.sourceBlock_.style.colourTertiary),(0,z.showPositionedByField)(this,this.dropdownDispose_.bind(this)),this.updateGraph_()},ot.FieldAngle.prototype.dropdownCreate_=function(){var t=(0,_.createSvgElement)(R.Svg.SVG,{xmlns:_.SVG_NS,"xmlns:html":_.HTML_NS,"xmlns:xlink":_.XLINK_NS,version:"1.1",height:2*ot.FieldAngle.HALF+"px",width:2*ot.FieldAngle.HALF+"px",style:"touch-action: none"},null),e=(0,_.createSvgElement)(R.Svg.CIRCLE,{cx:ot.FieldAngle.HALF,cy:ot.FieldAngle.HALF,r:ot.FieldAngle.RADIUS,class:"blocklyAngleCircle"},t);this.gauge_=(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyAngleGauge"},t),this.line_=(0,_.createSvgElement)(R.Svg.LINE,{x1:ot.FieldAngle.HALF,y1:ot.FieldAngle.HALF,class:"blocklyAngleLine"},t);for(var o=0;360>o;o+=15)(0,_.createSvgElement)(R.Svg.LINE,{x1:ot.FieldAngle.HALF+ot.FieldAngle.RADIUS,y1:ot.FieldAngle.HALF,x2:ot.FieldAngle.HALF+ot.FieldAngle.RADIUS-(o%45===0?10:5),y2:ot.FieldAngle.HALF,class:"blocklyAngleMarks",transform:"rotate("+o+","+ot.FieldAngle.HALF+","+ot.FieldAngle.HALF+")"},t);this.clickWrapper_=(0,$.conditionalBind)(t,"click",this,this.hide_),this.clickSurfaceWrapper_=(0,$.conditionalBind)(e,"click",this,this.onMouseMove_,!0,!0),this.moveSurfaceWrapper_=(0,$.conditionalBind)(e,"mousemove",this,this.onMouseMove_,!0,!0),this.editor_=t},ot.FieldAngle.prototype.dropdownDispose_=function(){this.clickWrapper_&&((0,$.unbind)(this.clickWrapper_),this.clickWrapper_=null),this.clickSurfaceWrapper_&&((0,$.unbind)(this.clickSurfaceWrapper_),this.clickSurfaceWrapper_=null),this.moveSurfaceWrapper_&&((0,$.unbind)(this.moveSurfaceWrapper_),this.moveSurfaceWrapper_=null),this.line_=this.gauge_=null},ot.FieldAngle.prototype.hide_=function(){(0,z.hideIfOwner)(this),(0,v.hide)()},ot.FieldAngle.prototype.onMouseMove_=function(t){var e=this.gauge_.ownerSVGElement.getBoundingClientRect(),o=t.clientX-e.left-ot.FieldAngle.HALF;t=t.clientY-e.top-ot.FieldAngle.HALF,e=Math.atan(-t/o),isNaN(e)||(e=(0,He.toDegrees)(e),0>o?e+=180:0<t&&(e+=360),e=this.clockwise_?this.offset_+360-e:360-(this.offset_-e),this.displayMouseOrKeyboardValue_(e))},ot.FieldAngle.prototype.displayMouseOrKeyboardValue_=function(t){this.round_&&(t=Math.round(t/this.round_)*this.round_),t=this.wrapValue_(t),t!==this.value_&&this.setEditorValue_(t)},ot.FieldAngle.prototype.updateGraph_=function(){if(this.gauge_){var t=Number(this.getText())+this.offset_,e=(0,He.toRadians)(t%360);t=["M ",ot.FieldAngle.HALF,",",ot.FieldAngle.HALF];var o=ot.FieldAngle.HALF,i=ot.FieldAngle.HALF;if(!isNaN(e)){var s=Number(this.clockwise_),l=(0,He.toRadians)(this.offset_),h=Math.cos(l)*ot.FieldAngle.RADIUS,S=Math.sin(l)*-ot.FieldAngle.RADIUS;s&&(e=2*l-e),o+=Math.cos(e)*ot.FieldAngle.RADIUS,i-=Math.sin(e)*ot.FieldAngle.RADIUS,e=Math.abs(Math.floor((e-l)/Math.PI)%2),s&&(e=1-e),t.push(" l ",h,",",S," A ",ot.FieldAngle.RADIUS,",",ot.FieldAngle.RADIUS," 0 ",e," ",s," ",o,",",i," z")}this.gauge_.setAttribute("d",t.join("")),this.line_.setAttribute("x2",o),this.line_.setAttribute("y2",i)}},ot.FieldAngle.prototype.onHtmlInputKeyDown_=function(t){n.module$exports$Blockly$FieldTextInput.FieldTextInput.prototype.onHtmlInputKeyDown_.call(this,t);var e;if(t.keyCode===K.KeyCodes.LEFT?e=this.sourceBlock_.RTL?1:-1:t.keyCode===K.KeyCodes.RIGHT?e=this.sourceBlock_.RTL?-1:1:t.keyCode===K.KeyCodes.DOWN?e=-1:t.keyCode===K.KeyCodes.UP&&(e=1),e){var o=this.getValue();this.displayMouseOrKeyboardValue_(o+e*this.round_),t.preventDefault(),t.stopPropagation()}},ot.FieldAngle.prototype.doClassValidation_=function(t){return t=Number(t),isNaN(t)||!isFinite(t)?null:this.wrapValue_(t)},ot.FieldAngle.prototype.wrapValue_=function(t){return t%=360,0>t&&(t+=360),t>this.wrap_&&(t-=360),t},ot.FieldAngle.fromJson=function(t){return new this(t.angle,void 0,t)},ot.FieldAngle.prototype.DEFAULT_VALUE=0,ot.FieldAngle.ROUND=15,ot.FieldAngle.HALF=50,ot.FieldAngle.CLOCKWISE=!1,ot.FieldAngle.OFFSET=0,ot.FieldAngle.WRAP=360,ot.FieldAngle.RADIUS=ot.FieldAngle.HALF-1,(0,O.register)(`
.blocklyAngleCircle {
  stroke: #444;
  stroke-width: 1;
  fill: #ddd;
  fill-opacity: .8;
}

.blocklyAngleMarks {
  stroke: #444;
  stroke-width: 1;
}

.blocklyAngleGauge {
  fill: #f88;
  fill-opacity: .8;
  pointer-events: none;
}

.blocklyAngleLine {
  stroke: #f00;
  stroke-width: 2;
  stroke-linecap: round;
  pointer-events: none;
}
`),(0,$e.register)("field_angle",ot.FieldAngle);var rn={BottomRow:function(t){io.BottomRow.call(this,t)}};n.$jscomp.inherits(rn.BottomRow,io.BottomRow),rn.BottomRow.prototype.endsWithElemSpacer=function(){return!1},rn.BottomRow.prototype.hasLeftSquareCorner=function(t){return!!t.outputConnection},rn.BottomRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection};var le={ConstantProvider:function(){Tt.ConstantProvider.call(this),this.SMALL_PADDING=this.GRID_UNIT=4,this.MEDIUM_PADDING=2*this.GRID_UNIT,this.MEDIUM_LARGE_PADDING=3*this.GRID_UNIT,this.LARGE_PADDING=4*this.GRID_UNIT,this.CORNER_RADIUS=1*this.GRID_UNIT,this.NOTCH_WIDTH=9*this.GRID_UNIT,this.NOTCH_HEIGHT=2*this.GRID_UNIT,this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT=3*this.GRID_UNIT,this.MIN_BLOCK_WIDTH=2*this.GRID_UNIT,this.MIN_BLOCK_HEIGHT=12*this.GRID_UNIT,this.EMPTY_STATEMENT_INPUT_HEIGHT=6*this.GRID_UNIT,this.TAB_OFFSET_FROM_TOP=0,this.TOP_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.TOP_ROW_PRECEDES_STATEMENT_MIN_HEIGHT=this.LARGE_PADDING,this.BOTTOM_ROW_MIN_HEIGHT=this.CORNER_RADIUS,this.BOTTOM_ROW_AFTER_STATEMENT_MIN_HEIGHT=6*this.GRID_UNIT,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT,this.STATEMENT_INPUT_SPACER_MIN_WIDTH=40*this.GRID_UNIT,this.STATEMENT_INPUT_PADDING_LEFT=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_PADDING=4*this.GRID_UNIT,this.EMPTY_INLINE_INPUT_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_MIN_HEIGHT=8*this.GRID_UNIT,this.DUMMY_INPUT_SHADOW_MIN_HEIGHT=6*this.GRID_UNIT,this.CURSOR_WS_WIDTH=20*this.GRID_UNIT,this.CURSOR_COLOUR="#ffa200",this.CURSOR_RADIUS=5,this.JAGGED_TEETH_WIDTH=this.JAGGED_TEETH_HEIGHT=0,this.START_HAT_HEIGHT=22,this.START_HAT_WIDTH=96,this.SHAPES={HEXAGONAL:1,ROUND:2,SQUARE:3,PUZZLE:4,NOTCH:5},this.SHAPE_IN_SHAPE_PADDING={1:{0:5*this.GRID_UNIT,1:2*this.GRID_UNIT,2:5*this.GRID_UNIT,3:5*this.GRID_UNIT},2:{0:3*this.GRID_UNIT,1:3*this.GRID_UNIT,2:1*this.GRID_UNIT,3:2*this.GRID_UNIT},3:{0:2*this.GRID_UNIT,1:2*this.GRID_UNIT,2:2*this.GRID_UNIT,3:2*this.GRID_UNIT}},this.FULL_BLOCK_FIELDS=!0,this.FIELD_TEXT_FONTSIZE=3*this.GRID_UNIT,this.FIELD_TEXT_FONTWEIGHT="bold",this.FIELD_TEXT_FONTFAMILY='"Helvetica Neue", "Segoe UI", Helvetica, sans-serif',this.FIELD_BORDER_RECT_RADIUS=this.CORNER_RADIUS,this.FIELD_BORDER_RECT_X_PADDING=2*this.GRID_UNIT,this.FIELD_BORDER_RECT_Y_PADDING=1.625*this.GRID_UNIT,this.FIELD_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=8*this.GRID_UNIT,this.FIELD_DROPDOWN_SVG_ARROW=this.FIELD_DROPDOWN_COLOURED_DIV=this.FIELD_DROPDOWN_NO_BORDER_RECT_SHADOW=!0,this.FIELD_DROPDOWN_SVG_ARROW_PADDING=this.FIELD_BORDER_RECT_X_PADDING,this.FIELD_COLOUR_FULL_BLOCK=this.FIELD_TEXTINPUT_BOX_SHADOW=!0,this.FIELD_COLOUR_DEFAULT_WIDTH=2*this.GRID_UNIT,this.FIELD_COLOUR_DEFAULT_HEIGHT=4*this.GRID_UNIT,this.FIELD_CHECKBOX_X_OFFSET=1*this.GRID_UNIT,this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH=12*this.GRID_UNIT,this.SELECTED_GLOW_COLOUR="#fff200",this.SELECTED_GLOW_SIZE=.5,this.REPLACEMENT_GLOW_COLOUR="#fff200",this.REPLACEMENT_GLOW_SIZE=2,this.selectedGlowFilterId="",this.selectedGlowFilter_=null,this.replacementGlowFilterId="",this.SQUARED=this.ROUNDED=this.HEXAGONAL=this.replacementGlowFilter_=null}};n.$jscomp.inherits(le.ConstantProvider,Tt.ConstantProvider),le.ConstantProvider.prototype.setFontConstants_=function(t){Tt.ConstantProvider.prototype.setFontConstants_.call(this,t),this.FIELD_DROPDOWN_BORDER_RECT_HEIGHT=this.FIELD_BORDER_RECT_HEIGHT=this.FIELD_TEXT_HEIGHT+2*this.FIELD_BORDER_RECT_Y_PADDING},le.ConstantProvider.prototype.init=function(){Tt.ConstantProvider.prototype.init.call(this),this.HEXAGONAL=this.makeHexagonal(),this.ROUNDED=this.makeRounded(),this.SQUARED=this.makeSquared(),this.STATEMENT_INPUT_NOTCH_OFFSET=this.NOTCH_OFFSET_LEFT+this.INSIDE_CORNERS.rightWidth},le.ConstantProvider.prototype.setDynamicProperties_=function(t){Tt.ConstantProvider.prototype.setDynamicProperties_.call(this,t),this.SELECTED_GLOW_COLOUR=t.getComponentStyle("selectedGlowColour")||this.SELECTED_GLOW_COLOUR;var e=Number(t.getComponentStyle("selectedGlowSize"));this.SELECTED_GLOW_SIZE=e&&!isNaN(e)?e:this.SELECTED_GLOW_SIZE,this.REPLACEMENT_GLOW_COLOUR=t.getComponentStyle("replacementGlowColour")||this.REPLACEMENT_GLOW_COLOUR,this.REPLACEMENT_GLOW_SIZE=(t=Number(t.getComponentStyle("replacementGlowSize")))&&!isNaN(t)?t:this.REPLACEMENT_GLOW_SIZE},le.ConstantProvider.prototype.dispose=function(){Tt.ConstantProvider.prototype.dispose.call(this),this.selectedGlowFilter_&&(0,_.removeNode)(this.selectedGlowFilter_),this.replacementGlowFilter_&&(0,_.removeNode)(this.replacementGlowFilter_)},le.ConstantProvider.prototype.makeStartHat=function(){var t=this.START_HAT_HEIGHT,e=this.START_HAT_WIDTH,o=(0,B.curve)("c",[(0,B.point)(25,-t),(0,B.point)(71,-t),(0,B.point)(e,0)]);return{height:t,width:e,path:o}},le.ConstantProvider.prototype.makeHexagonal=function(){function t(o,i,s){var l=o/2;return l=l>e?e:l,s=s?-1:1,o=(i?-1:1)*o/2,(0,B.lineTo)(-s*l,o)+(0,B.lineTo)(s*l,o)}var e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH;return{type:this.SHAPES.HEXAGONAL,isDynamic:!0,width:function(o){return o/=2,o>e?e:o},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},le.ConstantProvider.prototype.makeRounded=function(){function t(i,s,l){var h=i>o?i-o:0;return i=(i>o?o:i)/2,(0,B.arc)("a","0 0,1",i,(0,B.point)((s?-1:1)*i,(s?-1:1)*i))+(0,B.lineOnAxis)("v",(l?1:-1)*h)+(0,B.arc)("a","0 0,1",i,(0,B.point)((s?1:-1)*i,(s?-1:1)*i))}var e=this.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=2*e;return{type:this.SHAPES.ROUND,isDynamic:!0,width:function(i){return i/=2,i>e?e:i},height:function(i){return i},connectionOffsetY:function(i){return i/2},connectionOffsetX:function(i){return-i},pathDown:function(i){return t(i,!1,!1)},pathUp:function(i){return t(i,!0,!1)},pathRightDown:function(i){return t(i,!1,!0)},pathRightUp:function(i){return t(i,!1,!0)}}},le.ConstantProvider.prototype.makeSquared=function(){function t(o,i,s){return o-=2*e,(0,B.arc)("a","0 0,1",e,(0,B.point)((i?-1:1)*e,(i?-1:1)*e))+(0,B.lineOnAxis)("v",(s?1:-1)*o)+(0,B.arc)("a","0 0,1",e,(0,B.point)((i?1:-1)*e,(i?-1:1)*e))}var e=this.CORNER_RADIUS;return{type:this.SHAPES.SQUARE,isDynamic:!0,width:function(o){return e},height:function(o){return o},connectionOffsetY:function(o){return o/2},connectionOffsetX:function(o){return-o},pathDown:function(o){return t(o,!1,!1)},pathUp:function(o){return t(o,!0,!1)},pathRightDown:function(o){return t(o,!1,!0)},pathRightUp:function(o){return t(o,!1,!0)}}},le.ConstantProvider.prototype.shapeFor=function(t){var e=t.getCheck();switch(!e&&t.targetConnection&&(e=t.targetConnection.getCheck()),t.type){case n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE:case n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE:if(t=t.getSourceBlock().getOutputShape(),t!==null)switch(t){case this.SHAPES.HEXAGONAL:return this.HEXAGONAL;case this.SHAPES.ROUND:return this.ROUNDED;case this.SHAPES.SQUARE:return this.SQUARED}return e&&e.indexOf("Boolean")!==-1?this.HEXAGONAL:e&&e.indexOf("Number")!==-1?this.ROUNDED:(e&&e.indexOf("String"),this.ROUNDED);case n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT:case n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT:return this.NOTCH;default:throw Error("Unknown type")}},le.ConstantProvider.prototype.makeNotch=function(){function t(x){return(0,B.curve)("c",[(0,B.point)(x*s/2,0),(0,B.point)(x*s*3/4,h/2),(0,B.point)(x*s,h)])+(0,B.line)([(0,B.point)(x*s,l)])+(0,B.curve)("c",[(0,B.point)(x*s/4,h/2),(0,B.point)(x*s/2,h),(0,B.point)(x*s,h)])+(0,B.lineOnAxis)("h",x*i)+(0,B.curve)("c",[(0,B.point)(x*s/2,0),(0,B.point)(x*s*3/4,-(h/2)),(0,B.point)(x*s,-h)])+(0,B.line)([(0,B.point)(x*s,-l)])+(0,B.curve)("c",[(0,B.point)(x*s/4,-(h/2)),(0,B.point)(x*s/2,-h),(0,B.point)(x*s,-h)])}var e=this.NOTCH_WIDTH,o=this.NOTCH_HEIGHT,i=e/3,s=i/3,l=o/2,h=l/2,S=t(1),C=t(-1);return{type:this.SHAPES.NOTCH,width:e,height:o,pathLeft:S,pathRight:C}},le.ConstantProvider.prototype.makeInsideCorners=function(){var t=this.CORNER_RADIUS,e=(0,B.arc)("a","0 0,0",t,(0,B.point)(-t,t)),o=(0,B.arc)("a","0 0,1",t,(0,B.point)(-t,t)),i=(0,B.arc)("a","0 0,0",t,(0,B.point)(t,t)),s=(0,B.arc)("a","0 0,1",t,(0,B.point)(t,t));return{width:t,height:t,pathTop:e,pathBottom:i,rightWidth:t,rightHeight:t,pathTopRight:o,pathBottomRight:s}},le.ConstantProvider.prototype.generateSecondaryColour_=function(t){return(0,Et.blend)("#000",t,.15)||t},le.ConstantProvider.prototype.generateTertiaryColour_=function(t){return(0,Et.blend)("#000",t,.25)||t},le.ConstantProvider.prototype.createDom=function(t,e,o){Tt.ConstantProvider.prototype.createDom.call(this,t,e,o),t=(0,_.createSvgElement)(R.Svg.DEFS,{},t),e=(0,_.createSvgElement)(R.Svg.FILTER,{id:"blocklySelectedGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),(0,_.createSvgElement)(R.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.SELECTED_GLOW_SIZE},e),o=(0,_.createSvgElement)(R.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},e),(0,_.createSvgElement)(R.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},o),(0,_.createSvgElement)(R.Svg.FEFLOOD,{"flood-color":this.SELECTED_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},e),(0,_.createSvgElement)(R.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},e),this.selectedGlowFilterId=e.id,this.selectedGlowFilter_=e,t=(0,_.createSvgElement)(R.Svg.FILTER,{id:"blocklyReplacementGlowFilter"+this.randomIdentifier,height:"160%",width:"180%",y:"-30%",x:"-40%"},t),(0,_.createSvgElement)(R.Svg.FEGAUSSIANBLUR,{in:"SourceGraphic",stdDeviation:this.REPLACEMENT_GLOW_SIZE},t),e=(0,_.createSvgElement)(R.Svg.FECOMPONENTTRANSFER,{result:"outBlur"},t),(0,_.createSvgElement)(R.Svg.FEFUNCA,{type:"table",tableValues:"0 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1"},e),(0,_.createSvgElement)(R.Svg.FEFLOOD,{"flood-color":this.REPLACEMENT_GLOW_COLOUR,"flood-opacity":1,result:"outColor"},t),(0,_.createSvgElement)(R.Svg.FECOMPOSITE,{in:"outColor",in2:"outBlur",operator:"in",result:"outGlow"},t),(0,_.createSvgElement)(R.Svg.FECOMPOSITE,{in:"SourceGraphic",in2:"outGlow",operator:"over"},t),this.replacementGlowFilterId=t.id,this.replacementGlowFilter_=t},le.ConstantProvider.prototype.getCSS_=function(t){return[t+" .blocklyText,",t+" .blocklyFlyoutLabelText {","font: "+this.FIELD_TEXT_FONTWEIGHT+" "+this.FIELD_TEXT_FONTSIZE+"pt "+this.FIELD_TEXT_FONTFAMILY+";","}",t+" .blocklyText {","fill: #fff;","}",t+" .blocklyNonEditableText>rect:not(.blocklyDropdownRect),",t+" .blocklyEditableText>rect:not(.blocklyDropdownRect) {","fill: "+this.FIELD_BORDER_RECT_COLOUR+";","}",t+" .blocklyNonEditableText>text,",t+" .blocklyEditableText>text,",t+" .blocklyNonEditableText>g>text,",t+" .blocklyEditableText>g>text {","fill: #575E75;","}",t+" .blocklyFlyoutLabelText {","fill: #575E75;","}",t+" .blocklyText.blocklyBubbleText {","fill: #575E75;","}",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>rect,",t+" .blocklyDraggable:not(.blocklyDisabled)"," .blocklyEditableText:not(.editing):hover>.blocklyPath {","stroke: #fff;","stroke-width: 2;","}",t+" .blocklyHtmlInput {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","font-weight: "+this.FIELD_TEXT_FONTWEIGHT+";","color: #575E75;","}",t+" .blocklyDropdownText {","fill: #fff !important;","}",t+".blocklyWidgetDiv .goog-menuitem,",t+".blocklyDropDownDiv .goog-menuitem {","font-family: "+this.FIELD_TEXT_FONTFAMILY+";","}",t+".blocklyDropDownDiv .goog-menuitem-content {","color: #fff;","}",t+" .blocklyHighlightedConnectionPath {","stroke: "+this.SELECTED_GLOW_COLOUR+";","}",t+" .blocklyDisabled > .blocklyOutlinePath {","fill: url(#blocklyDisabledPattern"+this.randomIdentifier+")","}",t+" .blocklyInsertionMarker>.blocklyPath {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"]};var Fe={Drawer:function(t,e){ft.Drawer.call(this,t,e)}};n.$jscomp.inherits(Fe.Drawer,ft.Drawer),Fe.Drawer.prototype.draw=function(){var t=this.block_.pathObject;t.beginDrawing(),this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_(),t.setPath(this.outlinePath_+`
`+this.inlinePath_),this.info_.RTL&&t.flipRTL(),(0,Ke.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_(),this.info_.outputConnection&&(t.outputShapeType=this.info_.outputConnection.shape.type),t.endDrawing()},Fe.Drawer.prototype.drawOutline_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape&&!this.info_.hasStatementInput&&!this.info_.bottomRow.hasNextConnection?(this.drawFlatTop_(),this.drawRightDynamicConnection_(),this.drawFlatBottom_(),this.drawLeftDynamicConnection_()):ft.Drawer.prototype.drawOutline_.call(this)},Fe.Drawer.prototype.drawLeft_=function(){this.info_.outputConnection&&this.info_.outputConnection.isDynamicShape?this.drawLeftDynamicConnection_():ft.Drawer.prototype.drawLeft_.call(this)},Fe.Drawer.prototype.drawRightSideRow_=function(t){if(!(0>=t.height))if(E.Types.isSpacer(t)&&(t.precedesStatement||t.followsStatement)){var e=this.constants_.INSIDE_CORNERS.rightHeight;e=t.height-(t.precedesStatement?e:0),this.outlinePath_+=(t.followsStatement?this.constants_.INSIDE_CORNERS.pathBottomRight:"")+(0<e?(0,B.lineOnAxis)("V",t.yPos+e):"")+(t.precedesStatement?this.constants_.INSIDE_CORNERS.pathTopRight:"")}else this.outlinePath_+=(0,B.lineOnAxis)("V",t.yPos+t.height)},Fe.Drawer.prototype.drawRightDynamicConnection_=function(){this.outlinePath_+=this.info_.outputConnection.shape.pathRightDown(this.info_.outputConnection.height)},Fe.Drawer.prototype.drawLeftDynamicConnection_=function(){this.positionOutputConnection_(),this.outlinePath_+=this.info_.outputConnection.shape.pathUp(this.info_.outputConnection.height),this.outlinePath_+="z"},Fe.Drawer.prototype.drawFlatTop_=function(){var t=this.info_.topRow;this.positionPreviousConnection_(),this.outlinePath_+=(0,B.moveBy)(t.xPos,this.info_.startY),this.outlinePath_+=(0,B.lineOnAxis)("h",t.width)},Fe.Drawer.prototype.drawFlatBottom_=function(){var t=this.info_.bottomRow;this.positionNextConnection_(),this.outlinePath_+=(0,B.lineOnAxis)("V",t.baseline),this.outlinePath_+=(0,B.lineOnAxis)("h",-t.width)},Fe.Drawer.prototype.drawInlineInput_=function(t){this.positionInlineInputConnection_(t);var e=t.input.name;if(!t.connectedBlock&&!this.info_.isInsertionMarker){var o=t.width-2*t.connectionWidth;t=(0,B.moveTo)(t.xPos+t.connectionWidth,t.centerline-t.height/2)+(0,B.lineOnAxis)("h",o)+t.shape.pathRightDown(t.height)+(0,B.lineOnAxis)("h",-o)+t.shape.pathUp(t.height)+"z",this.block_.pathObject.setOutlinePath(e,t)}},Fe.Drawer.prototype.drawStatementInput_=function(t){var e=t.getLastInput(),o=e.xPos+e.notchOffset+e.shape.width,i=e.shape.pathRight+(0,B.lineOnAxis)("h",-(e.notchOffset-this.constants_.INSIDE_CORNERS.width))+this.constants_.INSIDE_CORNERS.pathTop,s=t.height-2*this.constants_.INSIDE_CORNERS.height;e=this.constants_.INSIDE_CORNERS.pathBottom+(0,B.lineOnAxis)("h",e.notchOffset-this.constants_.INSIDE_CORNERS.width)+(e.connectedBottomNextConnection?"":e.shape.pathLeft),this.outlinePath_+=(0,B.lineOnAxis)("H",o)+i+(0,B.lineOnAxis)("v",s)+e+(0,B.lineOnAxis)("H",t.xPos+t.width),this.positionStatementInputConnection_(t)};var qe={MarkerSvg:function(t,e,o){_t.MarkerSvg.call(this,t,e,o),this.markerCircle_=null}};n.$jscomp.inherits(qe.MarkerSvg,_t.MarkerSvg),qe.MarkerSvg.prototype.showWithInputOutput_=function(t){var e=t.getSourceBlock();t=t.getLocation().getOffsetInBlock(),this.positionCircle_(t.x,t.y),this.setParent_(e),this.showCurrent_()},qe.MarkerSvg.prototype.showWithOutput_=function(t){this.showWithInputOutput_(t)},qe.MarkerSvg.prototype.showWithInput_=function(t){this.showWithInputOutput_(t)},qe.MarkerSvg.prototype.showWithBlock_=function(t){t=t.getLocation();var e=t.getHeightWidth();this.positionRect_(0,0,e.width,e.height),this.setParent_(t),this.showCurrent_()},qe.MarkerSvg.prototype.positionCircle_=function(t,e){this.markerCircle_.setAttribute("cx",t),this.markerCircle_.setAttribute("cy",e),this.currentMarkerSvg=this.markerCircle_},qe.MarkerSvg.prototype.hide=function(){_t.MarkerSvg.prototype.hide.call(this),this.markerCircle_.style.display="none"},qe.MarkerSvg.prototype.createDomInternal_=function(){if(_t.MarkerSvg.prototype.createDomInternal_.call(this),this.markerCircle_=(0,_.createSvgElement)(R.Svg.CIRCLE,{r:this.constants_.CURSOR_RADIUS,style:"display: none","stroke-width":this.constants_.CURSOR_STROKE_WIDTH},this.markerSvg_),this.isCursor()){var t=this.getBlinkProperties_();(0,_.createSvgElement)(R.Svg.ANIMATE,t,this.markerCircle_)}return this.markerSvg_},qe.MarkerSvg.prototype.applyColour_=function(t){_t.MarkerSvg.prototype.applyColour_.call(this,t),this.markerCircle_.setAttribute("fill",this.colour_),this.markerCircle_.setAttribute("stroke",this.colour_),this.isCursor()&&this.markerCircle_.firstChild.setAttribute("values",this.colour_+";transparent;transparent;")};var Ne={PathObject:function(t,e,o){At.PathObject.call(this,t,e,o),this.constants=o,this.svgPathSelected_=null,this.outlines_=Object.create(null),this.outputShapeType=this.remainingOutlines_=null}};n.$jscomp.inherits(Ne.PathObject,At.PathObject),Ne.PathObject.prototype.setPath=function(t){At.PathObject.prototype.setPath.call(this,t),this.svgPathSelected_&&this.svgPathSelected_.setAttribute("d",t)},Ne.PathObject.prototype.applyColour=function(t){At.PathObject.prototype.applyColour.call(this,t),t.isShadow()&&t.getParent()&&this.svgPath.setAttribute("stroke",t.getParent().style.colourTertiary);for(var e in this.outlines_)this.outlines_[e].setAttribute("fill",this.style.colourTertiary)},Ne.PathObject.prototype.flipRTL=function(){At.PathObject.prototype.flipRTL.call(this);for(var t in this.outlines_)this.outlines_[t].setAttribute("transform","scale(-1 1)")},Ne.PathObject.prototype.updateSelected=function(t){this.setClass_("blocklySelected",t),t?this.svgPathSelected_||(this.svgPathSelected_=this.svgPath.cloneNode(!0),this.svgPathSelected_.setAttribute("fill","none"),this.svgPathSelected_.setAttribute("filter","url(#"+this.constants.selectedGlowFilterId+")"),this.svgRoot.appendChild(this.svgPathSelected_)):this.svgPathSelected_&&(this.svgRoot.removeChild(this.svgPathSelected_),this.svgPathSelected_=null)},Ne.PathObject.prototype.updateReplacementFade=function(t){this.setClass_("blocklyReplaceable",t),t?this.svgPath.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):this.svgPath.removeAttribute("filter")},Ne.PathObject.prototype.updateShapeForInputHighlight=function(t,e){t=t.getParentInput().name,(t=this.getOutlinePath_(t))&&(e?t.setAttribute("filter","url(#"+this.constants.replacementGlowFilterId+")"):t.removeAttribute("filter"))},Ne.PathObject.prototype.beginDrawing=function(){this.remainingOutlines_=Object.create(null);for(var t in this.outlines_)this.remainingOutlines_[t]=1},Ne.PathObject.prototype.endDrawing=function(){if(this.remainingOutlines_)for(var t in this.remainingOutlines_)this.removeOutlinePath_(t);this.remainingOutlines_=null},Ne.PathObject.prototype.setOutlinePath=function(t,e){t=this.getOutlinePath_(t),t.setAttribute("d",e),t.setAttribute("fill",this.style.colourTertiary)},Ne.PathObject.prototype.getOutlinePath_=function(t){return this.outlines_[t]||(this.outlines_[t]=(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyOutlinePath",d:""},this.svgRoot)),this.remainingOutlines_&&delete this.remainingOutlines_[t],this.outlines_[t]},Ne.PathObject.prototype.removeOutlinePath_=function(t){this.outlines_[t].parentNode.removeChild(this.outlines_[t]),delete this.outlines_[t]},n.module$exports$Blockly$FieldImage={FieldImage:function(t,e,o,i,s,l,h){if(w.Field.call(this,w.Field.SKIP_SETUP),!t)throw Error("Src value of an image field is required");if(o=Number((0,mt.replaceMessageReferences)(o)),e=Number((0,mt.replaceMessageReferences)(e)),isNaN(o)||isNaN(e))throw Error("Height and width values of an image field must cast to numbers.");if(0>=o||0>=e)throw Error("Height and width values of an image field must be greater than 0.");this.size_=new jt.Size(e,o+n.module$exports$Blockly$FieldImage.FieldImage.Y_PADDING),this.imageHeight_=o,this.clickHandler_=null,typeof s=="function"&&(this.clickHandler_=s),this.imageElement_=null,this.flipRtl_=this.isDirty_=this.EDITABLE=!1,this.altText_="",t!==w.Field.SKIP_SETUP&&(h?this.configure_(h):(this.flipRtl_=!!l,this.altText_=(0,mt.replaceMessageReferences)(i)||""),this.setValue((0,mt.replaceMessageReferences)(t)))}},n.$jscomp.inherits(n.module$exports$Blockly$FieldImage.FieldImage,w.Field),n.module$exports$Blockly$FieldImage.FieldImage.prototype.configure_=function(t){w.Field.prototype.configure_.call(this,t),this.flipRtl_=!!t.flipRtl,this.altText_=(0,mt.replaceMessageReferences)(t.alt)||""},n.module$exports$Blockly$FieldImage.FieldImage.prototype.initView=function(){this.imageElement_=(0,_.createSvgElement)(R.Svg.IMAGE,{height:this.imageHeight_+"px",width:this.size_.width+"px",alt:this.altText_},this.fieldGroup_),this.imageElement_.setAttributeNS(_.XLINK_NS,"xlink:href",this.value_),this.clickHandler_&&(this.imageElement_.style.cursor="pointer")},n.module$exports$Blockly$FieldImage.FieldImage.prototype.updateSize_=function(){},n.module$exports$Blockly$FieldImage.FieldImage.prototype.doClassValidation_=function(t){return typeof t!="string"?null:t},n.module$exports$Blockly$FieldImage.FieldImage.prototype.doValueUpdate_=function(t){this.value_=t,this.imageElement_&&this.imageElement_.setAttributeNS(_.XLINK_NS,"xlink:href",String(this.value_))},n.module$exports$Blockly$FieldImage.FieldImage.prototype.getFlipRtl=function(){return this.flipRtl_},n.module$exports$Blockly$FieldImage.FieldImage.prototype.setAlt=function(t){t!==this.altText_&&(this.altText_=t||"",this.imageElement_&&this.imageElement_.setAttribute("alt",this.altText_))},n.module$exports$Blockly$FieldImage.FieldImage.prototype.showEditor_=function(){this.clickHandler_&&this.clickHandler_(this)},n.module$exports$Blockly$FieldImage.FieldImage.prototype.setOnClickHandler=function(t){this.clickHandler_=t},n.module$exports$Blockly$FieldImage.FieldImage.prototype.getText_=function(){return this.altText_},n.module$exports$Blockly$FieldImage.FieldImage.fromJson=function(t){return new this(t.src,t.width,t.height,void 0,void 0,void 0,t)},n.module$exports$Blockly$FieldImage.FieldImage.prototype.DEFAULT_VALUE="",n.module$exports$Blockly$FieldImage.FieldImage.Y_PADDING=1,(0,$e.register)("field_image",n.module$exports$Blockly$FieldImage.FieldImage);var Ci={RightConnectionShape:function(t){qt.Measurable.call(this,t),this.type|=E.Types.getType("RIGHT_CONNECTION"),this.width=this.height=0}};n.$jscomp.inherits(Ci.RightConnectionShape,qt.Measurable);var $i={StatementInput:function(t,e){if(bo.StatementInput.call(this,t,e),this.connectedBlock){for(t=this.connectedBlock;e=t.getNextBlock();)t=e;t.nextConnection||(this.height=this.connectedBlockHeight,this.connectedBottomNextConnection=!0)}}};n.$jscomp.inherits($i.StatementInput,bo.StatementInput);var sn={TopRow:function(t){ro.TopRow.call(this,t)}};n.$jscomp.inherits(sn.TopRow,ro.TopRow),sn.TopRow.prototype.endsWithElemSpacer=function(){return!1},sn.TopRow.prototype.hasLeftSquareCorner=function(t){var e=(t.hat?t.hat==="cap":this.constants_.ADD_START_HATS)&&!t.outputConnection&&!t.previousConnection;return!!t.outputConnection||e},sn.TopRow.prototype.hasRightSquareCorner=function(t){return!!t.outputConnection&&!t.statementInputCount&&!t.nextConnection};var ee={RenderInfo:function(t,e){ht.RenderInfo.call(this,t,e),this.topRow=new sn.TopRow(this.constants_),this.bottomRow=new rn.BottomRow(this.constants_),this.isInline=!0,this.isMultiRow=!e.getInputsInline()||e.isCollapsed(),this.hasStatementInput=0<e.statementInputCount,this.rightSide=this.outputConnection?new Ci.RightConnectionShape(this.constants_):null,this.rightAlignedDummyInputs_=new WeakMap}};n.$jscomp.inherits(ee.RenderInfo,ht.RenderInfo),ee.RenderInfo.prototype.getRenderer=function(){return this.renderer_},ee.RenderInfo.prototype.measure=function(){this.createRows_(),this.addElemSpacing_(),this.addRowSpacing_(),this.adjustXPosition_(),this.computeBounds_(),this.alignRowElements_(),this.finalize_()},ee.RenderInfo.prototype.shouldStartNewRow_=function(t,e){return e?t.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||e.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?!0:t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE||t.type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY?!this.isInline||this.isMultiRow:!1:!1},ee.RenderInfo.prototype.getDesiredRowWidth_=function(t){return t.hasStatement?this.width-this.startX-(this.constants_.INSIDE_CORNERS.rightWidth||0):ht.RenderInfo.prototype.getDesiredRowWidth_.call(this,t)},ee.RenderInfo.prototype.getInRowSpacing_=function(t,e){return t&&e||!this.outputConnection||!this.outputConnection.isDynamicShape||this.hasStatementInput||this.bottomRow.hasNextConnection?!t&&e&&E.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:t&&E.Types.isLeftRoundedCorner(t)&&e&&(E.Types.isPreviousConnection(e)||E.Types.isNextConnection(e))?e.notchOffset-this.constants_.CORNER_RADIUS:t&&E.Types.isLeftSquareCorner(t)&&e&&E.Types.isHat(e)?this.constants_.NO_PADDING:this.constants_.MEDIUM_PADDING:this.constants_.NO_PADDING},ee.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){if(E.Types.isTopRow(t)&&E.Types.isBottomRow(e))return this.constants_.EMPTY_BLOCK_SPACER_HEIGHT;var o=E.Types.isInputRow(t)&&t.hasStatement,i=E.Types.isInputRow(e)&&e.hasStatement;return i||o?(t=Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.INSIDE_CORNERS.rightHeight||0),i&&o?Math.max(t,this.constants_.DUMMY_INPUT_MIN_HEIGHT):t):E.Types.isTopRow(t)?t.hasPreviousConnection||this.outputConnection&&!this.hasStatementInput?this.constants_.NO_PADDING:Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):E.Types.isBottomRow(e)?this.outputConnection?!e.hasNextConnection&&this.hasStatementInput?Math.abs(this.constants_.NOTCH_HEIGHT-this.constants_.CORNER_RADIUS):this.constants_.NO_PADDING:Math.max(this.topRow.minHeight,Math.max(this.constants_.NOTCH_HEIGHT,this.constants_.CORNER_RADIUS))-this.constants_.CORNER_RADIUS:this.constants_.MEDIUM_PADDING},ee.RenderInfo.prototype.getSpacerRowWidth_=function(t,e){var o=this.width-this.startX;return E.Types.isInputRow(t)&&t.hasStatement||E.Types.isInputRow(e)&&e.hasStatement?Math.max(o,this.constants_.STATEMENT_INPUT_SPACER_MIN_WIDTH):o},ee.RenderInfo.prototype.getElemCenterline_=function(t,e){if(t.hasStatement&&!E.Types.isSpacer(e)&&!E.Types.isStatementInput(e))return t.yPos+this.constants_.EMPTY_STATEMENT_INPUT_HEIGHT/2;if(E.Types.isInlineInput(e)&&e instanceof Pe.InputConnection){var o=e.connectedBlock;if(o&&o.outputConnection&&o.nextConnection)return t.yPos+o.height/2}return ht.RenderInfo.prototype.getElemCenterline_.call(this,t,e)},ee.RenderInfo.prototype.addInput_=function(t,e){if(t.type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&e.hasDummyInput&&e.align===n.module$exports$Blockly$Input.Align.LEFT&&t.align===n.module$exports$Blockly$Input.Align.RIGHT)this.rightAlignedDummyInputs_.set(e,t);else if(t.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT){e.elements.push(new $i.StatementInput(this.constants_,t)),e.hasStatement=!0,e.align===null&&(e.align=t.align);return}ht.RenderInfo.prototype.addInput_.call(this,t,e)},ee.RenderInfo.prototype.addAlignmentPadding_=function(t,e){if(this.rightAlignedDummyInputs_.get(t)){for(var o,i=0;i<t.elements.length;i++){var s=t.elements[i];if(E.Types.isSpacer(s)&&(o=s),E.Types.isField(s)&&s instanceof $o.Field&&s.parentInput===this.rightAlignedDummyInputs_.get(t))break}if(o){o.width+=e,t.width+=e;return}}ht.RenderInfo.prototype.addAlignmentPadding_.call(this,t,e)},ee.RenderInfo.prototype.adjustXPosition_=function(){for(var t=this.constants_.NOTCH_OFFSET_LEFT+this.constants_.NOTCH_WIDTH,e=t,o=2;o<this.rows.length-1;o+=2){var i=this.rows[o-1],s=this.rows[o],l=this.rows[o+1];if(i=o===2?!!this.topRow.hasPreviousConnection:!!i.followsStatement,l=o+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!l.precedesStatement,E.Types.isInputRow(s)&&s.hasStatement)s.measure(),e=s.width-s.getLastInput().width+t;else if(i&&(o===2||l)&&E.Types.isInputRow(s)&&!s.hasStatement){l=s.xPos,i=null;for(var h=0;h<s.elements.length;h++){var S=s.elements[h];E.Types.isSpacer(S)&&(i=S),i&&(E.Types.isField(S)||E.Types.isInput(S))&&l<e&&!(E.Types.isField(S)&&S instanceof $o.Field&&(S.field instanceof n.module$exports$Blockly$FieldLabel.FieldLabel||S.field instanceof n.module$exports$Blockly$FieldImage.FieldImage))&&(i.width+=e-l),l+=S.width}}}},ee.RenderInfo.prototype.finalizeOutputConnection_=function(){if(this.outputConnection&&this.outputConnection.isDynamicShape){for(var t=0,e=0;e<this.rows.length;e++){var o=this.rows[e];o.yPos=t,t+=o.height}this.height=t,e=this.bottomRow.hasNextConnection?this.height-this.bottomRow.descenderHeight:this.height,t=this.outputConnection.shape.height(e),e=this.outputConnection.shape.width(e),this.outputConnection.height=t,this.outputConnection.width=e,this.outputConnection.startX=e,this.outputConnection.connectionOffsetY=this.outputConnection.shape.connectionOffsetY(t),this.outputConnection.connectionOffsetX=this.outputConnection.shape.connectionOffsetX(e),o=0,this.hasStatementInput||this.bottomRow.hasNextConnection||(o=e,this.rightSide.height=t,this.rightSide.width=o,this.rightSide.centerline=t/2,this.rightSide.xPos=this.width+o),this.startX=e,this.width+=e+o,this.widthWithChildren+=e+o}},ee.RenderInfo.prototype.finalizeHorizontalAlignment_=function(){if(this.outputConnection&&!this.hasStatementInput&&!this.bottomRow.hasNextConnection){for(var t=0,e=0;e<this.rows.length;e++){var o=this.rows[e];if(E.Types.isInputRow(o)){t=o.elements[o.elements.length-2];var i=this.getNegativeSpacing_(o.elements[1]),s=this.getNegativeSpacing_(t);t=i+s;var l=this.constants_.MIN_BLOCK_WIDTH+2*this.outputConnection.width;this.width-t<l&&(t=this.width-l,i=t/2,s=t/2),o.elements.unshift(new Oe.InRowSpacer(this.constants_,-i)),o.elements.push(new Oe.InRowSpacer(this.constants_,-s))}}if(t)for(this.width-=t,this.widthWithChildren-=t,this.rightSide.xPos-=t,e=0;e<this.rows.length;e++)o=this.rows[e],E.Types.isTopOrBottomRow(o)&&(o.elements[1].width-=t),o.width-=t,o.widthWithConnectedBlocks-=t}},ee.RenderInfo.prototype.getNegativeSpacing_=function(t){if(!t)return 0;var e=this.outputConnection.width,o=this.outputConnection.shape.type,i=this.constants_;if(this.isMultiRow&&1<this.inputRows.length)switch(o){case i.SHAPES.ROUND:return o=this.constants_.MAX_DYNAMIC_CONNECTION_SHAPE_WIDTH,o=this.height/2>o?o:this.height/2,e-o*(1-Math.sin(Math.acos((o-this.constants_.SMALL_PADDING)/o)));default:return 0}if(E.Types.isInlineInput(t)&&t instanceof Pe.InputConnection){var s=t.connectedBlock;return t=s?s.pathObject.outputShapeType:t.shape.type,s&&s.outputConnection&&(s.statementInputCount||s.nextConnection)||o===i.SHAPES.HEXAGONAL&&o!==t?0:e-this.constants_.SHAPE_IN_SHAPE_PADDING[o][t]}return E.Types.isField(t)&&t instanceof $o.Field?o===i.SHAPES.ROUND&&t.field instanceof n.module$exports$Blockly$FieldTextInput.FieldTextInput?e-2.75*i.GRID_UNIT:e-this.constants_.SHAPE_IN_SHAPE_PADDING[o][0]:E.Types.isIcon(t)?this.constants_.SMALL_PADDING:0},ee.RenderInfo.prototype.finalizeVerticalAlignment_=function(){if(!this.outputConnection)for(var t=2;t<this.rows.length-1;t+=2){var e=this.rows[t-1],o=this.rows[t],i=this.rows[t+1],s=t===2,l=t+2>=this.rows.length-1?!!this.bottomRow.hasNextConnection:!!i.precedesStatement;if(s?this.topRow.hasPreviousConnection:e.followsStatement){var h=o.elements[1];if(h=o.elements.length===3&&h instanceof $o.Field&&(h.field instanceof n.module$exports$Blockly$FieldLabel.FieldLabel||h.field instanceof n.module$exports$Blockly$FieldImage.FieldImage),!s&&h)e.height-=this.constants_.SMALL_PADDING,i.height-=this.constants_.SMALL_PADDING,o.height-=this.constants_.MEDIUM_PADDING;else if(!s&&!l)e.height+=this.constants_.SMALL_PADDING;else if(l){for(s=!1,l=0;l<o.elements.length;l++)if(h=o.elements[l],h instanceof Pe.InputConnection&&E.Types.isInlineInput(h)&&h.connectedBlock&&!h.connectedBlock.isShadow()&&40<=h.connectedBlock.getHeightWidth().height){s=!0;break}s&&(e.height-=this.constants_.SMALL_PADDING,i.height-=this.constants_.SMALL_PADDING)}}}},ee.RenderInfo.prototype.finalize_=function(){this.finalizeOutputConnection_(),this.finalizeHorizontalAlignment_(),this.finalizeVerticalAlignment_(),ht.RenderInfo.prototype.finalize_.call(this),this.rightSide&&(this.widthWithChildren+=this.rightSide.width)};var co={Renderer:function(t){bt.Renderer.call(this,t)}};n.$jscomp.inherits(co.Renderer,bt.Renderer),co.Renderer.prototype.makeConstants_=function(){return new le.ConstantProvider},co.Renderer.prototype.makeRenderInfo_=function(t){return new ee.RenderInfo(this,t)},co.Renderer.prototype.makeDrawer_=function(t,e){return new Fe.Drawer(t,e)},co.Renderer.prototype.makeMarkerDrawer=function(t,e){return new qe.MarkerSvg(t,this.getConstants(),e)},co.Renderer.prototype.makePathObject=function(t,e){return new Ne.PathObject(t,e,this.getConstants())},co.Renderer.prototype.shouldHighlightConnection=function(t){return t.type!==n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE&&t.type!==n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE},co.Renderer.prototype.getConnectionPreviewMethod=function(t,e,o){return e.type===n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE?t.isConnected()?vt.InsertionMarkerManager.PREVIEW_TYPE.REPLACEMENT_FADE:vt.InsertionMarkerManager.PREVIEW_TYPE.INPUT_OUTLINE:bt.Renderer.prototype.getConnectionPreviewMethod.call(this,t,e,o)},(0,kt.register)("zelos",co.Renderer);var Ze={};Ze.BottomRow=rn.BottomRow,Ze.ConstantProvider=le.ConstantProvider,Ze.Drawer=Fe.Drawer,Ze.MarkerSvg=qe.MarkerSvg,Ze.PathObject=Ne.PathObject,Ze.RenderInfo=ee.RenderInfo,Ze.Renderer=co.Renderer,Ze.RightConnectionShape=Ci.RightConnectionShape,Ze.StatementInput=$i.StatementInput,Ze.TopRow=sn.TopRow;var Bo={RenderInfo:function(t,e){ht.RenderInfo.call(this,t,e)}};n.$jscomp.inherits(Bo.RenderInfo,ht.RenderInfo),Bo.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Bo.RenderInfo.prototype.addElemSpacing_=function(){for(var t=!1,e=0;e<this.rows.length;e++)if(this.rows[e].hasExternalInput){t=!0;break}for(e=0;e<this.rows.length;e++){var o=this.rows[e],i=o.elements;o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Oe.InRowSpacer(this.constants_,this.getInRowSpacing_(null,i[0])));for(var s=0;s<i.length-1;s++){o.elements.push(i[s]);var l=this.getInRowSpacing_(i[s],i[s+1]);o.elements.push(new Oe.InRowSpacer(this.constants_,l))}o.elements.push(i[i.length-1]),o.endsWithElemSpacer()&&(i=this.getInRowSpacing_(i[i.length-1],null),t&&o.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),o.elements.push(new Oe.InRowSpacer(this.constants_,i)))}},Bo.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t)return e&&E.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&E.Types.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&E.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!E.Types.isInput(t)&&!e)return E.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:E.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:E.Types.isHat(t)?this.constants_.NO_PADDING:E.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:E.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:E.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(E.Types.isInput(t)&&!e){if(E.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(E.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(E.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!E.Types.isInput(t)&&e&&E.Types.isInput(e)){if(E.Types.isField(t)&&t.isEditable){if(E.Types.isInlineInput(e)||E.Types.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(E.Types.isInlineInput(e)||E.Types.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(E.Types.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(E.Types.isIcon(t)&&e&&!E.Types.isInput(e))return this.constants_.LARGE_PADDING;if(E.Types.isInlineInput(t)&&e&&E.Types.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(E.Types.isLeftSquareCorner(t)&&e){if(E.Types.isHat(e))return this.constants_.NO_PADDING;if(E.Types.isPreviousConnection(e)||E.Types.isNextConnection(e))return e.notchOffset}return E.Types.isLeftRoundedCorner(t)&&e?e.notchOffset-this.constants_.CORNER_RADIUS:E.Types.isField(t)&&e&&E.Types.isField(e)&&t.isEditable===e.isEditable||e&&E.Types.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Bo.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return E.Types.isTopRow(t)&&E.Types.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:E.Types.isTopRow(t)||E.Types.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||t.hasDummyInput||e.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Bo.RenderInfo.prototype.getElemCenterline_=function(t,e){if(E.Types.isSpacer(e))return t.yPos+e.height/2;if(E.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,E.Types.isNextConnection(e)?t+e.height/2:t-e.height/2;if(E.Types.isTopRow(t))return E.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;var o=t.yPos;return o=E.Types.isField(e)&&t.hasStatement?o+(this.constants_.TALL_INPUT_FIELD_OFFSET_Y+e.height/2):o+t.height/2},Bo.RenderInfo.prototype.finalize_=function(){for(var t=0,e=0,o=0;o<this.rows.length;o++){var i=this.rows[o];i.yPos=e,i.xPos=this.startX,e+=i.height,t=Math.max(t,i.widthWithConnectedBlocks);var s=e-this.topRow.ascenderHeight;i===this.bottomRow&&s<this.constants_.MIN_BLOCK_HEIGHT&&(s=this.constants_.MIN_BLOCK_HEIGHT-s,this.bottomRow.height+=s,e+=s),this.recordElemPositions_(i)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width)),this.bottomRow.baseline=e-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX,this.height=e,this.startY=this.topRow.capline};var Xn={Renderer:function(t){bt.Renderer.call(this,t)}};n.$jscomp.inherits(Xn.Renderer,bt.Renderer),Xn.Renderer.prototype.makeRenderInfo_=function(t){return new Bo.RenderInfo(this,t)},(0,kt.register)("thrasos",Xn.Renderer);var bi={};bi.RenderInfo=Bo.RenderInfo,bi.Renderer=Xn.Renderer;var Tl={save:function(t){var e=Object.create(null),o=(0,b.getAllItems)(b.Type.SERIALIZER,!0),i;for(i in o){var s=o[i].save(t);s&&(e[i]=s)}return e},load:function(t,e,o){o=o===void 0?{}:o;var i=o.recordUndo===void 0?!1:o.recordUndo;if(o=(0,b.getAllItems)(b.Type.SERIALIZER,!0)){var s=Object.entries(o).sort(function(S,C){return C[1].priority-S[1].priority});o=(0,p.getRecordUndo)(),(0,p.setRecordUndo)(i),(i=(0,p.getGroup)())||(0,p.setGroup)(!0),(0,_.startTextWidthCache)(),e instanceof L.WorkspaceSvg&&e.setResizesEnabled(!1);for(var l=n.$jscomp.makeIterator(s.reverse()),h=l.next();!h.done;h=l.next())h=n.$jscomp.makeIterator(h.value),h.next(),h.next().value.clear(e);for(s=n.$jscomp.makeIterator(s.reverse()),l=s.next();!l.done;l=s.next())h=n.$jscomp.makeIterator(l.value),l=h.next().value,h=h.next().value,t[l]&&h.load(t[l],e);e instanceof L.WorkspaceSvg&&e.setResizesEnabled(!0),(0,_.stopTextWidthCache)(),(0,p.fire)(new((0,p.get)(p.FINISHED_LOADING))(e)),(0,p.setGroup)(i),(0,p.setRecordUndo)(o)}}},fl={},jn=function(){this.priority=pi.VARIABLES};jn.prototype.save=function(t){var e=[];t=n.$jscomp.makeIterator(t.getAllVariables());for(var o=t.next();!o.done;o=t.next()){o=o.value;var i={name:o.name,id:o.getId()};o.type&&(i.type=o.type),e.push(i)}return e.length?e:null},jn.prototype.load=function(t,e){t=n.$jscomp.makeIterator(t);for(var o=t.next();!o.done;o=t.next())o=o.value,e.createVariable(o.name,o.type,o.id)},jn.prototype.clear=function(t){t.getVariableMap().clear()},(0,hi.register)("variables",new jn);var Oi={ConstantProvider:function(){Tt.ConstantProvider.call(this)}};n.$jscomp.inherits(Oi.ConstantProvider,Tt.ConstantProvider);var Ai={Drawer:function(t,e){ft.Drawer.call(this,t,e)}};n.$jscomp.inherits(Ai.Drawer,ft.Drawer);var Yn={RenderInfo:function(t,e){ht.RenderInfo.call(this,t,e)}};n.$jscomp.inherits(Yn.RenderInfo,ht.RenderInfo),Yn.RenderInfo.prototype.getRenderer=function(){return this.renderer_};var ln={Renderer:function(t){bt.Renderer.call(this,t)}};n.$jscomp.inherits(ln.Renderer,bt.Renderer),ln.Renderer.prototype.makeConstants_=function(){return new Oi.ConstantProvider},ln.Renderer.prototype.makeRenderInfo_=function(t){return new Yn.RenderInfo(this,t)},ln.Renderer.prototype.makeDrawer_=function(t,e){return new Ai.Drawer(t,e)},(0,kt.register)("minimalist",ln.Renderer);var On={};On.ConstantProvider=Oi.ConstantProvider,On.Drawer=Ai.Drawer,On.RenderInfo=Yn.RenderInfo,On.Renderer=ln.Renderer;var xi={StatementInput:function(t,e){bo.StatementInput.call(this,t,e),this.connectedBlock&&(this.height+=this.constants_.DARK_PATH_OFFSET)}};n.$jscomp.inherits(xi.StatementInput,bo.StatementInput);var Qe={PathObject:function(t,e,o){At.PathObject.call(this,t,e,o),this.constants=o,this.svgPathDark=(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyPathDark",transform:"translate(1,1)"}),this.svgRoot.insertBefore(this.svgPathDark,this.svgPath),this.svgPathLight=(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyPathLight"},this.svgRoot),this.colourDark="#000000"}};n.$jscomp.inherits(Qe.PathObject,At.PathObject),Qe.PathObject.prototype.setPath=function(t){this.svgPath.setAttribute("d",t),this.svgPathDark.setAttribute("d",t)},Qe.PathObject.prototype.setHighlightPath=function(t){this.svgPathLight.setAttribute("d",t)},Qe.PathObject.prototype.flipRTL=function(){this.svgPath.setAttribute("transform","scale(-1 1)"),this.svgPathLight.setAttribute("transform","scale(-1 1)"),this.svgPathDark.setAttribute("transform","translate(1,1) scale(-1 1)")},Qe.PathObject.prototype.applyColour=function(t){this.svgPathLight.style.display="",this.svgPathDark.style.display="",this.svgPathLight.setAttribute("stroke",this.style.colourTertiary),this.svgPathDark.setAttribute("fill",this.colourDark),At.PathObject.prototype.applyColour.call(this,t),this.svgPath.setAttribute("stroke","none")},Qe.PathObject.prototype.setStyle=function(t){this.style=t,this.colourDark=(0,Et.blend)("#000",this.style.colourPrimary,.2)||this.colourDark},Qe.PathObject.prototype.updateHighlighted=function(t){t?(this.svgPath.setAttribute("filter","url(#"+this.constants.embossFilterId+")"),this.svgPathLight.style.display="none"):(this.svgPath.setAttribute("filter","none"),this.svgPathLight.style.display="inline")},Qe.PathObject.prototype.updateShadow_=function(t){t&&(this.svgPathLight.style.display="none",this.svgPathDark.setAttribute("fill",this.style.colourSecondary),this.svgPath.setAttribute("stroke","none"),this.svgPath.setAttribute("fill",this.style.colourSecondary))},Qe.PathObject.prototype.updateDisabled_=function(t){At.PathObject.prototype.updateDisabled_.call(this,t),t&&this.svgPath.setAttribute("stroke","none")};var Kn={ConstantProvider:function(){Tt.ConstantProvider.call(this),this.FIELD_TEXT_BASELINE_CENTER=!1,this.DARK_PATH_OFFSET=1,this.MAX_BOTTOM_WIDTH=30,this.STATEMENT_BOTTOM_SPACER=-this.NOTCH_HEIGHT/2}};n.$jscomp.inherits(Kn.ConstantProvider,Tt.ConstantProvider),Kn.ConstantProvider.prototype.getCSS_=function(t){return Tt.ConstantProvider.prototype.getCSS_.call(this,t).concat([t+" .blocklyInsertionMarker>.blocklyPathLight,",t+" .blocklyInsertionMarker>.blocklyPathDark {","fill-opacity: "+this.INSERTION_MARKER_OPACITY+";","stroke: none;","}"])};var Mi={InlineInput:function(t,e){Sn.InlineInput.call(this,t,e),this.connectedBlock&&(this.width+=this.constants_.DARK_PATH_OFFSET,this.height+=this.constants_.DARK_PATH_OFFSET)}};n.$jscomp.inherits(Mi.InlineInput,Sn.InlineInput);var to={Highlighter:function(t){this.info_=t,this.inlineSteps_=this.steps_="",this.RTL_=this.info_.RTL,t=t.getRenderer(),this.constants_=t.getConstants(),this.highlightConstants_=t.getHighlightConstants(),this.highlightOffset_=this.highlightConstants_.OFFSET,this.outsideCornerPaths_=this.highlightConstants_.OUTSIDE_CORNER,this.insideCornerPaths_=this.highlightConstants_.INSIDE_CORNER,this.puzzleTabPaths_=this.highlightConstants_.PUZZLE_TAB,this.notchPaths_=this.highlightConstants_.NOTCH,this.startPaths_=this.highlightConstants_.START_HAT,this.jaggedTeethPaths_=this.highlightConstants_.JAGGED_TEETH}};to.Highlighter.prototype.getPath=function(){return this.steps_+`
`+this.inlineSteps_},to.Highlighter.prototype.drawTopCorner=function(t){this.steps_+=(0,B.moveBy)(t.xPos,this.info_.startY);for(var e=0,o;o=t.elements[e];e++)E.Types.isLeftSquareCorner(o)?this.steps_+=this.highlightConstants_.START_POINT:E.Types.isLeftRoundedCorner(o)?this.steps_+=this.outsideCornerPaths_.topLeft(this.RTL_):E.Types.isPreviousConnection(o)?this.steps_+=this.notchPaths_.pathLeft:E.Types.isHat(o)?this.steps_+=this.startPaths_.path(this.RTL_):E.Types.isSpacer(o)&&o.width!==0&&(this.steps_+=(0,B.lineOnAxis)("H",o.xPos+o.width-this.highlightOffset_));this.steps_+=(0,B.lineOnAxis)("H",t.xPos+t.width-this.highlightOffset_)},to.Highlighter.prototype.drawJaggedEdge_=function(t){this.info_.RTL&&(this.steps_+=this.jaggedTeethPaths_.pathLeft+(0,B.lineOnAxis)("v",t.height-this.jaggedTeethPaths_.height-this.highlightOffset_))},to.Highlighter.prototype.drawValueInput=function(t){var e=t.getLastInput();if(this.RTL_){var o=t.height-e.connectionHeight;this.steps_+=(0,B.moveTo)(e.xPos+e.width-this.highlightOffset_,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)+(0,B.lineOnAxis)("v",o)}else this.steps_+=(0,B.moveTo)(e.xPos+e.width,t.yPos)+this.puzzleTabPaths_.pathDown(this.RTL_)},to.Highlighter.prototype.drawStatementInput=function(t){var e=t.getLastInput();if(this.RTL_){var o=t.height-2*this.insideCornerPaths_.height;this.steps_+=(0,B.moveTo)(e.xPos,t.yPos)+this.insideCornerPaths_.pathTop(this.RTL_)+(0,B.lineOnAxis)("v",o)+this.insideCornerPaths_.pathBottom(this.RTL_)+(0,B.lineTo)(t.width-e.xPos-this.insideCornerPaths_.width,0)}else this.steps_+=(0,B.moveTo)(e.xPos,t.yPos+t.height)+this.insideCornerPaths_.pathBottom(this.RTL_)+(0,B.lineTo)(t.width-e.xPos-this.insideCornerPaths_.width,0)},to.Highlighter.prototype.drawRightSideRow=function(t){var e=t.xPos+t.width-this.highlightOffset_;t instanceof In.SpacerRow&&t.followsStatement&&(this.steps_+=(0,B.lineOnAxis)("H",e)),this.RTL_&&(this.steps_+=(0,B.lineOnAxis)("H",e),t.height>this.highlightOffset_&&(this.steps_+=(0,B.lineOnAxis)("V",t.yPos+t.height-this.highlightOffset_)))},to.Highlighter.prototype.drawBottomRow=function(t){if(this.RTL_)this.steps_+=(0,B.lineOnAxis)("V",t.baseline-this.highlightOffset_);else{var e=this.info_.bottomRow.elements[0];E.Types.isLeftSquareCorner(e)?this.steps_+=(0,B.moveTo)(t.xPos+this.highlightOffset_,t.baseline-this.highlightOffset_):E.Types.isLeftRoundedCorner(e)&&(this.steps_+=(0,B.moveTo)(t.xPos,t.baseline),this.steps_+=this.outsideCornerPaths_.bottomLeft())}},to.Highlighter.prototype.drawLeft=function(){var t=this.info_.outputConnection;t&&(t=t.connectionOffsetY+t.height,this.RTL_?this.steps_+=(0,B.moveTo)(this.info_.startX,t):(this.steps_+=(0,B.moveTo)(this.info_.startX+this.highlightOffset_,this.info_.bottomRow.baseline-this.highlightOffset_),this.steps_+=(0,B.lineOnAxis)("V",t)),this.steps_+=this.puzzleTabPaths_.pathUp(this.RTL_)),this.RTL_||(t=this.info_.topRow,E.Types.isLeftRoundedCorner(t.elements[0])?this.steps_+=(0,B.lineOnAxis)("V",this.outsideCornerPaths_.height):this.steps_+=(0,B.lineOnAxis)("V",t.capline+this.highlightOffset_))},to.Highlighter.prototype.drawInlineInput=function(t){var e=this.highlightOffset_,o=t.xPos+t.connectionWidth,i=t.centerline-t.height/2,s=t.width-t.connectionWidth,l=i+e;this.RTL_?(i=t.connectionOffsetY-e,t=t.height-(t.connectionOffsetY+t.connectionHeight)+e,this.inlineSteps_+=(0,B.moveTo)(o-e,l)+(0,B.lineOnAxis)("v",i)+this.puzzleTabPaths_.pathDown(this.RTL_)+(0,B.lineOnAxis)("v",t)+(0,B.lineOnAxis)("h",s)):this.inlineSteps_+=(0,B.moveTo)(t.xPos+t.width+e,l)+(0,B.lineOnAxis)("v",t.height)+(0,B.lineOnAxis)("h",-s)+(0,B.moveTo)(o,i+t.connectionOffsetY)+this.puzzleTabPaths_.pathDown(this.RTL_)};var ge={Drawer:function(t,e){ft.Drawer.call(this,t,e),this.highlighter_=new to.Highlighter(e)}};n.$jscomp.inherits(ge.Drawer,ft.Drawer),ge.Drawer.prototype.draw=function(){this.hideHiddenIcons_(),this.drawOutline_(),this.drawInternals_();var t=this.block_.pathObject;t.setPath(this.outlinePath_+`
`+this.inlinePath_),t.setHighlightPath(this.highlighter_.getPath()),this.info_.RTL&&t.flipRTL(),(0,Ke.isDebuggerEnabled)()&&this.block_.renderingDebugger.drawDebug(this.block_,this.info_),this.recordSizeOnBlock_()},ge.Drawer.prototype.drawTop_=function(){this.highlighter_.drawTopCorner(this.info_.topRow),this.highlighter_.drawRightSideRow(this.info_.topRow),ft.Drawer.prototype.drawTop_.call(this)},ge.Drawer.prototype.drawJaggedEdge_=function(t){this.highlighter_.drawJaggedEdge_(t),ft.Drawer.prototype.drawJaggedEdge_.call(this,t)},ge.Drawer.prototype.drawValueInput_=function(t){this.highlighter_.drawValueInput(t),ft.Drawer.prototype.drawValueInput_.call(this,t)},ge.Drawer.prototype.drawStatementInput_=function(t){this.highlighter_.drawStatementInput(t),ft.Drawer.prototype.drawStatementInput_.call(this,t)},ge.Drawer.prototype.drawRightSideRow_=function(t){this.highlighter_.drawRightSideRow(t),this.outlinePath_+=(0,B.lineOnAxis)("H",t.xPos+t.width)+(0,B.lineOnAxis)("V",t.yPos+t.height)},ge.Drawer.prototype.drawBottom_=function(){this.highlighter_.drawBottomRow(this.info_.bottomRow),ft.Drawer.prototype.drawBottom_.call(this)},ge.Drawer.prototype.drawLeft_=function(){this.highlighter_.drawLeft(),ft.Drawer.prototype.drawLeft_.call(this)},ge.Drawer.prototype.drawInlineInput_=function(t){this.highlighter_.drawInlineInput(t),ft.Drawer.prototype.drawInlineInput_.call(this,t)},ge.Drawer.prototype.positionInlineInputConnection_=function(t){var e=t.centerline-t.height/2;if(t.connectionModel){var o=t.xPos+t.connectionWidth+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),t.connectionModel.setOffsetInBlock(o,e+t.connectionOffsetY+this.constants_.DARK_PATH_OFFSET)}},ge.Drawer.prototype.positionStatementInputConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.statementEdge+e.notchOffset;o=this.info_.RTL?-1*o:o+this.constants_.DARK_PATH_OFFSET,e.connectionModel.setOffsetInBlock(o,t.yPos+this.constants_.DARK_PATH_OFFSET)}},ge.Drawer.prototype.positionExternalValueConnection_=function(t){var e=t.getLastInput();if(e.connectionModel){var o=t.xPos+t.width+this.constants_.DARK_PATH_OFFSET;this.info_.RTL&&(o*=-1),e.connectionModel.setOffsetInBlock(o,t.yPos)}},ge.Drawer.prototype.positionNextConnection_=function(){var t=this.info_.bottomRow;if(t.connection){var e=t.connection,o=e.xPos;e.connectionModel.setOffsetInBlock((this.info_.RTL?-o:o)+this.constants_.DARK_PATH_OFFSET/2,t.baseline+this.constants_.DARK_PATH_OFFSET)}};var Io={HighlightConstantProvider:function(t){this.constantProvider=t,this.OFFSET=.5,this.START_POINT=(0,B.moveBy)(this.OFFSET,this.OFFSET)}};Io.HighlightConstantProvider.prototype.init=function(){this.INSIDE_CORNER=this.makeInsideCorner(),this.OUTSIDE_CORNER=this.makeOutsideCorner(),this.PUZZLE_TAB=this.makePuzzleTab(),this.NOTCH=this.makeNotch(),this.JAGGED_TEETH=this.makeJaggedTeeth(),this.START_HAT=this.makeStartHat()},Io.HighlightConstantProvider.prototype.makeInsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,o=(1-Math.SQRT1_2)*(t+e)-e,i=(0,B.moveBy)(o,o)+(0,B.arc)("a","0 0,0",t,(0,B.point)(-o-e,t-o)),s=(0,B.arc)("a","0 0,0",t+e,(0,B.point)(t+e,t+e)),l=(0,B.moveBy)(o,-o)+(0,B.arc)("a","0 0,0",t+e,(0,B.point)(t-o,o+e));return{width:t+e,height:t,pathTop:function(h){return h?i:""},pathBottom:function(h){return h?s:l}}},Io.HighlightConstantProvider.prototype.makeOutsideCorner=function(){var t=this.constantProvider.CORNER_RADIUS,e=this.OFFSET,o=(1-Math.SQRT1_2)*(t-e)+e,i=(0,B.moveBy)(o,o)+(0,B.arc)("a","0 0,1",t-e,(0,B.point)(t-o,-o+e)),s=(0,B.moveBy)(e,t)+(0,B.arc)("a","0 0,1",t-e,(0,B.point)(t,-t+e)),l=-o,h=(0,B.moveBy)(o,l)+(0,B.arc)("a","0 0,1",t-e,(0,B.point)(-o+e,-l-t));return{height:t,topLeft:function(S){return S?i:s},bottomLeft:function(){return h}}},Io.HighlightConstantProvider.prototype.makePuzzleTab=function(){var t=this.constantProvider.TAB_WIDTH,e=this.constantProvider.TAB_HEIGHT,o=(0,B.moveBy)(-2,-e+3.4)+(0,B.lineTo)(-.45*t,-2.1),i=(0,B.lineOnAxis)("v",2.5)+(0,B.moveBy)(.97*-t,2.5)+(0,B.curve)("q",[(0,B.point)(.05*-t,10),(0,B.point)(.3*t,9.5)])+(0,B.moveBy)(.67*t,-1.9)+(0,B.lineOnAxis)("v",2.5),s=(0,B.lineOnAxis)("v",-1.5)+(0,B.moveBy)(-.92*t,-.5)+(0,B.curve)("q",[(0,B.point)(-.19*t,-5.5),(0,B.point)(0,-11)])+(0,B.moveBy)(.92*t,1),l=(0,B.moveBy)(-5,e-.7)+(0,B.lineTo)(.46*t,-2.1);return{width:t,height:e,pathUp:function(h){return h?o:s},pathDown:function(h){return h?i:l}}},Io.HighlightConstantProvider.prototype.makeNotch=function(){return{pathLeft:(0,B.lineOnAxis)("h",this.OFFSET)+this.constantProvider.NOTCH.pathLeft}},Io.HighlightConstantProvider.prototype.makeJaggedTeeth=function(){return{pathLeft:(0,B.lineTo)(5.1,2.6)+(0,B.moveBy)(-10.2,6.8)+(0,B.lineTo)(5.1,2.6),height:12,width:10.2}},Io.HighlightConstantProvider.prototype.makeStartHat=function(){var t=this.constantProvider.START_HAT.height,e=(0,B.moveBy)(25,-8.7)+(0,B.curve)("c",[(0,B.point)(29.7,-6.2),(0,B.point)(57.2,-.5),(0,B.point)(75,8.7)]),o=(0,B.curve)("c",[(0,B.point)(17.8,-9.2),(0,B.point)(45.3,-14.9),(0,B.point)(75,-8.7)])+(0,B.moveTo)(100.5,t+.5);return{path:function(i){return i?e:o}}};var Ue={RenderInfo:function(t,e){ht.RenderInfo.call(this,t,e)}};n.$jscomp.inherits(Ue.RenderInfo,ht.RenderInfo),Ue.RenderInfo.prototype.getRenderer=function(){return this.renderer_},Ue.RenderInfo.prototype.populateBottomRow_=function(){ht.RenderInfo.prototype.populateBottomRow_.call(this),this.block_.inputList.length&&this.block_.inputList[this.block_.inputList.length-1].type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT||(this.bottomRow.minHeight=this.constants_.MEDIUM_PADDING-this.constants_.DARK_PATH_OFFSET)},Ue.RenderInfo.prototype.addInput_=function(t,e){this.isInline&&t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new Mi.InlineInput(this.constants_,t)),e.hasInlineInput=!0):t.type===n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT?(e.elements.push(new xi.StatementInput(this.constants_,t)),e.hasStatement=!0):t.type===n.module$exports$Blockly$inputTypes.inputTypes.VALUE?(e.elements.push(new vn.ExternalValueInput(this.constants_,t)),e.hasExternalInput=!0):t.type===n.module$exports$Blockly$inputTypes.inputTypes.DUMMY&&(e.minHeight=Math.max(e.minHeight,this.constants_.DUMMY_INPUT_MIN_HEIGHT),e.hasDummyInput=!0),this.isInline||e.align!==null||(e.align=t.align)},Ue.RenderInfo.prototype.addElemSpacing_=function(){for(var t=!1,e=0,o;o=this.rows[e];e++)o.hasExternalInput&&(t=!0);for(e=0;o=this.rows[e];e++){var i=o.elements;if(o.elements=[],o.startsWithElemSpacer()&&o.elements.push(new Oe.InRowSpacer(this.constants_,this.getInRowSpacing_(null,i[0]))),i.length){for(var s=0;s<i.length-1;s++){o.elements.push(i[s]);var l=this.getInRowSpacing_(i[s],i[s+1]);o.elements.push(new Oe.InRowSpacer(this.constants_,l))}o.elements.push(i[i.length-1]),o.endsWithElemSpacer()&&(i=this.getInRowSpacing_(i[i.length-1],null),t&&o.hasDummyInput&&(i+=this.constants_.TAB_WIDTH),o.elements.push(new Oe.InRowSpacer(this.constants_,i)))}}},Ue.RenderInfo.prototype.getInRowSpacing_=function(t,e){if(!t)return e&&E.Types.isField(e)&&e.isEditable?this.constants_.MEDIUM_PADDING:e&&E.Types.isInlineInput(e)?this.constants_.MEDIUM_LARGE_PADDING:e&&E.Types.isStatementInput(e)?this.constants_.STATEMENT_INPUT_PADDING_LEFT:this.constants_.LARGE_PADDING;if(!E.Types.isInput(t)&&(!e||E.Types.isStatementInput(e)))return E.Types.isField(t)&&t.isEditable?this.constants_.MEDIUM_PADDING:E.Types.isIcon(t)?2*this.constants_.LARGE_PADDING+1:E.Types.isHat(t)?this.constants_.NO_PADDING:E.Types.isPreviousOrNextConnection(t)?this.constants_.LARGE_PADDING:E.Types.isLeftRoundedCorner(t)?this.constants_.MIN_BLOCK_WIDTH:E.Types.isJaggedEdge(t)?this.constants_.NO_PADDING:this.constants_.LARGE_PADDING;if(E.Types.isInput(t)&&!e){if(E.Types.isExternalInput(t))return this.constants_.NO_PADDING;if(E.Types.isInlineInput(t))return this.constants_.LARGE_PADDING;if(E.Types.isStatementInput(t))return this.constants_.NO_PADDING}if(!E.Types.isInput(t)&&e&&E.Types.isInput(e)){if(E.Types.isField(t)&&t.isEditable){if(E.Types.isInlineInput(e)||E.Types.isExternalInput(e))return this.constants_.SMALL_PADDING}else{if(E.Types.isInlineInput(e)||E.Types.isExternalInput(e))return this.constants_.MEDIUM_LARGE_PADDING;if(E.Types.isStatementInput(e))return this.constants_.LARGE_PADDING}return this.constants_.LARGE_PADDING-1}if(E.Types.isIcon(t)&&e&&!E.Types.isInput(e))return this.constants_.LARGE_PADDING;if(E.Types.isInlineInput(t)&&e&&E.Types.isField(e))return e.isEditable?this.constants_.MEDIUM_PADDING:this.constants_.LARGE_PADDING;if(E.Types.isLeftSquareCorner(t)&&e){if(E.Types.isHat(e))return this.constants_.NO_PADDING;if(E.Types.isPreviousConnection(e))return e.notchOffset;if(E.Types.isNextConnection(e))return e.notchOffset+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}if(E.Types.isLeftRoundedCorner(t)&&e){if(E.Types.isPreviousConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS;if(E.Types.isNextConnection(e))return e.notchOffset-this.constants_.CORNER_RADIUS+(this.RTL?1:-1)*this.constants_.DARK_PATH_OFFSET/2}return E.Types.isField(t)&&e&&E.Types.isField(e)&&t.isEditable===e.isEditable||e&&E.Types.isJaggedEdge(e)?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Ue.RenderInfo.prototype.getSpacerRowHeight_=function(t,e){return E.Types.isTopRow(t)&&E.Types.isBottomRow(e)?this.constants_.EMPTY_BLOCK_SPACER_HEIGHT:E.Types.isTopRow(t)||E.Types.isBottomRow(e)?this.constants_.NO_PADDING:t.hasExternalInput&&e.hasExternalInput?this.constants_.LARGE_PADDING:!t.hasStatement&&e.hasStatement?this.constants_.BETWEEN_STATEMENT_PADDING_Y:t.hasStatement&&e.hasStatement||!t.hasStatement&&e.hasDummyInput||t.hasDummyInput?this.constants_.LARGE_PADDING:this.constants_.MEDIUM_PADDING},Ue.RenderInfo.prototype.getElemCenterline_=function(t,e){if(E.Types.isSpacer(e))return t.yPos+e.height/2;if(E.Types.isBottomRow(t))return t=t.yPos+t.height-t.descenderHeight,E.Types.isNextConnection(e)?t+e.height/2:t-e.height/2;if(E.Types.isTopRow(t))return E.Types.isHat(e)?t.capline-e.height/2:t.capline+e.height/2;var o=t.yPos;return E.Types.isField(e)||E.Types.isIcon(e)?(o+=e.height/2,(t.hasInlineInput||t.hasStatement)&&e.height+this.constants_.TALL_INPUT_FIELD_OFFSET_Y<=t.height&&(o+=this.constants_.TALL_INPUT_FIELD_OFFSET_Y)):o=E.Types.isInlineInput(e)?o+e.height/2:o+t.height/2,o},Ue.RenderInfo.prototype.alignRowElements_=function(){if(this.isInline){for(var t=0,e=new WeakMap,o=null,i=this.rows.length-1,s;s=this.rows[i];i--)e.set(s,t),E.Types.isInputRow(s)&&(s.hasStatement&&this.alignStatementRow_(s),o&&o.hasStatement&&s.width<o.width?e.set(s,o.width):t=s.width,o=s);for(t=i=0;o=this.rows[t];t++)o.hasStatement?i=this.getDesiredRowWidth_(o):E.Types.isSpacer(o)?o.width=Math.max(i,e.get(o)):(s=o.width,i=Math.max(i,e.get(o))-s,0<i&&this.addAlignmentPadding_(o,i),i=o.width)}else ht.RenderInfo.prototype.alignRowElements_.call(this)},Ue.RenderInfo.prototype.getDesiredRowWidth_=function(t){return this.isInline&&t.hasStatement?this.statementEdge+this.constants_.MAX_BOTTOM_WIDTH+this.startX:ht.RenderInfo.prototype.getDesiredRowWidth_.call(this,t)},Ue.RenderInfo.prototype.finalize_=function(){for(var t=0,e=0,o=0,i;i=this.rows[o];o++){i.yPos=e,i.xPos=this.startX,e+=i.height,t=Math.max(t,i.widthWithConnectedBlocks);var s=e-this.topRow.ascenderHeight;i===this.bottomRow&&s<this.constants_.MIN_BLOCK_HEIGHT&&(s=this.constants_.MIN_BLOCK_HEIGHT-s,this.bottomRow.height+=s,e+=s),this.recordElemPositions_(i)}this.outputConnection&&this.block_.nextConnection&&this.block_.nextConnection.isConnected()&&(t=Math.max(t,this.block_.nextConnection.targetBlock().getHeightWidth().width-this.constants_.DARK_PATH_OFFSET)),this.bottomRow.baseline=e-this.bottomRow.descenderHeight,this.widthWithChildren=t+this.startX+this.constants_.DARK_PATH_OFFSET,this.width+=this.constants_.DARK_PATH_OFFSET,this.height=e+this.constants_.DARK_PATH_OFFSET,this.startY=this.topRow.capline};var eo={Renderer:function(t){bt.Renderer.call(this,t),this.highlightConstants_=null}};n.$jscomp.inherits(eo.Renderer,bt.Renderer),eo.Renderer.prototype.init=function(t,e){bt.Renderer.prototype.init.call(this,t,e),this.highlightConstants_=this.makeHighlightConstants_(),this.highlightConstants_.init()},eo.Renderer.prototype.refreshDom=function(t,e){bt.Renderer.prototype.refreshDom.call(this,t,e),this.getHighlightConstants().init()},eo.Renderer.prototype.makeConstants_=function(){return new Kn.ConstantProvider},eo.Renderer.prototype.makeRenderInfo_=function(t){return new Ue.RenderInfo(this,t)},eo.Renderer.prototype.makeDrawer_=function(t,e){return new ge.Drawer(t,e)},eo.Renderer.prototype.makePathObject=function(t,e){return new Qe.PathObject(t,e,this.getConstants())},eo.Renderer.prototype.makeHighlightConstants_=function(){return new Io.HighlightConstantProvider(this.getConstants())},eo.Renderer.prototype.getHighlightConstants=function(){return this.highlightConstants_},(0,kt.register)("geras",eo.Renderer);var uo={};uo.ConstantProvider=Kn.ConstantProvider,uo.Drawer=ge.Drawer,uo.HighlightConstantProvider=Io.HighlightConstantProvider,uo.Highlighter=to.Highlighter,uo.InlineInput=Mi.InlineInput,uo.PathObject=Qe.PathObject,uo.RenderInfo=Ue.RenderInfo,uo.Renderer=eo.Renderer,uo.StatementInput=xi.StatementInput;var Er={},kl={colour_blocks:{colourPrimary:"#CF63CF",colourSecondary:"#C94FC9",colourTertiary:"#BD42BD"},list_blocks:{colourPrimary:"#9966FF",colourSecondary:"#855CD6",colourTertiary:"#774DCB"},logic_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC"},loop_blocks:{colourPrimary:"#0fBD8C",colourSecondary:"#0DA57A",colourTertiary:"#0B8E69"},math_blocks:{colourPrimary:"#59C059",colourSecondary:"#46B946",colourTertiary:"#389438"},procedure_blocks:{colourPrimary:"#FF6680",colourSecondary:"#FF4D6A",colourTertiary:"#FF3355"},text_blocks:{colourPrimary:"#FFBF00",colourSecondary:"#E6AC00",colourTertiary:"#CC9900"},variable_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},variable_dynamic_blocks:{colourPrimary:"#FF8C1A",colourSecondary:"#FF8000",colourTertiary:"#DB6E00"},hat_blocks:{colourPrimary:"#4C97FF",colourSecondary:"#4280D7",colourTertiary:"#3373CC",hat:"cap"}},El={colour_category:{colour:"#CF63CF"},list_category:{colour:"#9966FF"},logic_category:{colour:"#4C97FF"},loop_category:{colour:"#0fBD8C"},math_category:{colour:"#59C059"},procedure_category:{colour:"#FF6680"},text_category:{colour:"#FFBF00"},variable_category:{colour:"#FF8C1A"},variable_dynamic_category:{colour:"#FF8C1A"}};Er.Zelos=new ke.Theme("zelos",kl,El);var Ni={};Ni.Classic=mn.Classic,Ni.Zelos=Er.Zelos;var ye={names:{ESCAPE:"escape",DELETE:"delete",COPY:"copy",CUT:"cut",PASTE:"paste",UNDO:"undo",REDO:"redo"},registerEscape:function(){var t={name:ye.names.ESCAPE,preconditionFn:function(e){return!e.options.readOnly},callback:function(e){return e.hideChaff(),!0}};J.ShortcutRegistry.registry.register(t),J.ShortcutRegistry.registry.addKeyMapping(K.KeyCodes.ESC,t.name)},registerDelete:function(){var t={name:ye.names.DELETE,preconditionFn:function(e){var o=(0,n.module$exports$Blockly$common.getSelected)();return!e.options.readOnly&&o&&o.isDeletable()},callback:function(e,o){return o.preventDefault(),et.Gesture.inProgress()?!1:((0,n.module$exports$Blockly$common.getSelected)().checkAndDelete(),!0)}};J.ShortcutRegistry.registry.register(t),J.ShortcutRegistry.registry.addKeyMapping(K.KeyCodes.DELETE,t.name),J.ShortcutRegistry.registry.addKeyMapping(K.KeyCodes.BACKSPACE,t.name)},registerCopy:function(){var t={name:ye.names.COPY,preconditionFn:function(o){var i=(0,n.module$exports$Blockly$common.getSelected)();return!o.options.readOnly&&!et.Gesture.inProgress()&&i&&i.isDeletable()&&i.isMovable()},callback:function(o,i){return i.preventDefault(),o.hideChaff(),(0,Le.copy)((0,n.module$exports$Blockly$common.getSelected)()),!0}};J.ShortcutRegistry.registry.register(t);var e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.C,[K.KeyCodes.CTRL]);J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.C,[K.KeyCodes.ALT]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.C,[K.KeyCodes.META]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerCut:function(){var t={name:ye.names.CUT,preconditionFn:function(o){var i=(0,n.module$exports$Blockly$common.getSelected)();return!o.options.readOnly&&!et.Gesture.inProgress()&&i&&i.isDeletable()&&i.isMovable()&&!i.workspace.isFlyout},callback:function(){var o=(0,n.module$exports$Blockly$common.getSelected)();return o?((0,Le.copy)(o),o.checkAndDelete(),!0):!1}};J.ShortcutRegistry.registry.register(t);var e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.X,[K.KeyCodes.CTRL]);J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.X,[K.KeyCodes.ALT]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.X,[K.KeyCodes.META]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerPaste:function(){var t={name:ye.names.PASTE,preconditionFn:function(o){return!o.options.readOnly&&!et.Gesture.inProgress()},callback:function(){return(0,Le.paste)()}};J.ShortcutRegistry.registry.register(t);var e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.V,[K.KeyCodes.CTRL]);J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.V,[K.KeyCodes.ALT]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.V,[K.KeyCodes.META]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerUndo:function(){var t={name:ye.names.UNDO,preconditionFn:function(o){return!o.options.readOnly&&!et.Gesture.inProgress()},callback:function(o){return o.hideChaff(),o.undo(!1),!0}};J.ShortcutRegistry.registry.register(t);var e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.Z,[K.KeyCodes.CTRL]);J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.Z,[K.KeyCodes.ALT]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.Z,[K.KeyCodes.META]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerRedo:function(){var t={name:ye.names.REDO,preconditionFn:function(o){return!et.Gesture.inProgress()&&!o.options.readOnly},callback:function(o){return o.hideChaff(),o.undo(!0),!0}};J.ShortcutRegistry.registry.register(t);var e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.Z,[K.KeyCodes.SHIFT,K.KeyCodes.CTRL]);J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.Z,[K.KeyCodes.SHIFT,K.KeyCodes.ALT]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.Z,[K.KeyCodes.SHIFT,K.KeyCodes.META]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name),e=J.ShortcutRegistry.registry.createSerializedKey(K.KeyCodes.Y,[K.KeyCodes.CTRL]),J.ShortcutRegistry.registry.addKeyMapping(e,t.name)},registerDefaultShortcuts:function(){(0,ye.registerEscape)(),(0,ye.registerDelete)(),(0,ye.registerCopy)(),(0,ye.registerCut)(),(0,ye.registerPaste)(),(0,ye.registerUndo)(),(0,ye.registerRedo)()}};(0,ye.registerDefaultShortcuts)();var An={FinishedLoading:function(t){Ht.Abstract.call(this),this.isBlank=typeof t>"u",this.workspaceId=t?t.id:"",this.recordUndo=!1,this.type=p.FINISHED_LOADING}};n.$jscomp.inherits(An.FinishedLoading,Ht.Abstract),An.FinishedLoading.prototype.toJson=function(){var t={type:this.type};return this.group&&(t.group=this.group),this.workspaceId&&(t.workspaceId=this.workspaceId),t},An.FinishedLoading.prototype.fromJson=function(t){this.isBlank=!1,this.workspaceId=t.workspaceId,this.group=t.group},(0,b.register)(b.Type.EVENT,p.FINISHED_LOADING,An.FinishedLoading);var xn={Ui:function(t,e,o,i){pt.UiBase.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.element=typeof e>"u"?"":e,this.oldValue=typeof o>"u"?"":o,this.newValue=typeof i>"u"?"":i,this.type=p.UI}};n.$jscomp.inherits(xn.Ui,pt.UiBase),xn.Ui.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.element=this.element,this.newValue!==void 0&&(t.newValue=this.newValue),this.blockId&&(t.blockId=this.blockId),t},xn.Ui.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.element=t.element,this.newValue=t.newValue,this.blockId=t.blockId},(0,b.register)(b.Type.EVENT,p.UI,xn.Ui);var Mn={BubbleOpen:function(t,e,o){pt.UiBase.call(this,t?t.workspace.id:void 0),this.blockId=t?t.id:null,this.isOpen=e,this.bubbleType=o,this.type=p.BUBBLE_OPEN}};n.$jscomp.inherits(Mn.BubbleOpen,pt.UiBase),Mn.BubbleOpen.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.isOpen=this.isOpen,t.bubbleType=this.bubbleType,t.blockId=this.blockId,t},Mn.BubbleOpen.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.isOpen=t.isOpen,this.bubbleType=t.bubbleType,this.blockId=t.blockId},(0,b.register)(b.Type.EVENT,p.BUBBLE_OPEN,Mn.BubbleOpen);var Go={CommentChange:function(t,e,o){Gt.CommentBase.call(this,t),this.type=p.COMMENT_CHANGE,t&&(this.oldContents_=typeof e>"u"?"":e,this.newContents_=typeof o>"u"?"":o)}};n.$jscomp.inherits(Go.CommentChange,Gt.CommentBase),Go.CommentChange.prototype.toJson=function(){var t=Gt.CommentBase.prototype.toJson.call(this);return t.oldContents=this.oldContents_,t.newContents=this.newContents_,t},Go.CommentChange.prototype.fromJson=function(t){Gt.CommentBase.prototype.fromJson.call(this,t),this.oldContents_=t.oldContents,this.newContents_=t.newContents},Go.CommentChange.prototype.isNull=function(){return this.oldContents_===this.newContents_},Go.CommentChange.prototype.run=function(t){var e=this.getEventWorkspace_().getCommentById(this.commentId);e?e.setContent(t?this.newContents_:this.oldContents_):console.warn("Can't change non-existent comment: "+this.commentId)},(0,b.register)(b.Type.EVENT,p.COMMENT_CHANGE,Go.CommentChange);var an={CommentCreate:function(t){Gt.CommentBase.call(this,t),this.type=p.COMMENT_CREATE,t&&(this.xml=t.toXmlWithXY())}};n.$jscomp.inherits(an.CommentCreate,Gt.CommentBase),an.CommentCreate.prototype.toJson=function(){var t=Gt.CommentBase.prototype.toJson.call(this);return t.xml=(0,n.module$exports$Blockly$Xml.domToText)(this.xml),t},an.CommentCreate.prototype.fromJson=function(t){Gt.CommentBase.prototype.fromJson.call(this,t),this.xml=(0,n.module$exports$Blockly$Xml.textToDom)(t.xml)},an.CommentCreate.prototype.run=function(t){Gt.CommentBase.CommentCreateDeleteHelper(this,t)},(0,b.register)(b.Type.EVENT,p.COMMENT_CREATE,an.CommentCreate);var cn={CommentDelete:function(t){Gt.CommentBase.call(this,t),this.type=p.COMMENT_DELETE,t&&(this.xml=t.toXmlWithXY())}};n.$jscomp.inherits(cn.CommentDelete,Gt.CommentBase),cn.CommentDelete.prototype.toJson=function(){return Gt.CommentBase.prototype.toJson.call(this)},cn.CommentDelete.prototype.fromJson=function(t){Gt.CommentBase.prototype.fromJson.call(this,t)},cn.CommentDelete.prototype.run=function(t){Gt.CommentBase.CommentCreateDeleteHelper(this,!t)},(0,b.register)(b.Type.EVENT,p.COMMENT_DELETE,cn.CommentDelete);var Nn={TrashcanOpen:function(t,e){pt.UiBase.call(this,e),this.isOpen=t,this.type=p.TRASHCAN_OPEN}};n.$jscomp.inherits(Nn.TrashcanOpen,pt.UiBase),Nn.TrashcanOpen.prototype.toJson=function(){var t=pt.UiBase.prototype.toJson.call(this);return t.isOpen=this.isOpen,t},Nn.TrashcanOpen.prototype.fromJson=function(t){pt.UiBase.prototype.fromJson.call(this,t),this.isOpen=t.isOpen},(0,b.register)(b.Type.EVENT,p.TRASHCAN_OPEN,Nn.TrashcanOpen),n.module$exports$Blockly$Events={},n.module$exports$Blockly$Events.Abstract=Ht.Abstract,n.module$exports$Blockly$Events.BubbleOpen=Mn.BubbleOpen,n.module$exports$Blockly$Events.BlockBase=Yt.BlockBase,n.module$exports$Blockly$Events.BlockChange=Xe.BlockChange,n.module$exports$Blockly$Events.BlockCreate=Yo.BlockCreate,n.module$exports$Blockly$Events.BlockDelete=on.BlockDelete,n.module$exports$Blockly$Events.BlockDrag=kn.BlockDrag,n.module$exports$Blockly$Events.BlockMove=mo.BlockMove,n.module$exports$Blockly$Events.Click=En.Click,n.module$exports$Blockly$Events.CommentBase=Gt.CommentBase,n.module$exports$Blockly$Events.CommentChange=Go.CommentChange,n.module$exports$Blockly$Events.CommentCreate=an.CommentCreate,n.module$exports$Blockly$Events.CommentDelete=cn.CommentDelete,n.module$exports$Blockly$Events.CommentMove=ko.CommentMove,n.module$exports$Blockly$Events.FinishedLoading=An.FinishedLoading,n.module$exports$Blockly$Events.MarkerMove=Bn.MarkerMove,n.module$exports$Blockly$Events.Selected=Rn.Selected,n.module$exports$Blockly$Events.ThemeChange=Cn.ThemeChange,n.module$exports$Blockly$Events.ToolboxItemSelect=bn.ToolboxItemSelect,n.module$exports$Blockly$Events.TrashcanOpen=Nn.TrashcanOpen,n.module$exports$Blockly$Events.Ui=xn.Ui,n.module$exports$Blockly$Events.UiBase=pt.UiBase,n.module$exports$Blockly$Events.VarBase=he.VarBase,n.module$exports$Blockly$Events.VarCreate=Ko.VarCreate,n.module$exports$Blockly$Events.VarDelete=Jo.VarDelete,n.module$exports$Blockly$Events.VarRename=zo.VarRename,n.module$exports$Blockly$Events.ViewportChange=$n.ViewportChange,n.module$exports$Blockly$Events.BLOCK_CHANGE=p.CHANGE,n.module$exports$Blockly$Events.BLOCK_CREATE=p.CREATE,n.module$exports$Blockly$Events.BLOCK_DELETE=p.DELETE,n.module$exports$Blockly$Events.BLOCK_DRAG=p.BLOCK_DRAG,n.module$exports$Blockly$Events.BLOCK_MOVE=p.MOVE,n.module$exports$Blockly$Events.BUBBLE_OPEN=p.BUBBLE_OPEN,n.module$exports$Blockly$Events.BumpEvent=p.BumpEvent,n.module$exports$Blockly$Events.BUMP_EVENTS=p.BUMP_EVENTS,n.module$exports$Blockly$Events.CHANGE=p.CHANGE,n.module$exports$Blockly$Events.CLICK=p.CLICK,n.module$exports$Blockly$Events.COMMENT_CHANGE=p.COMMENT_CHANGE,n.module$exports$Blockly$Events.COMMENT_CREATE=p.COMMENT_CREATE,n.module$exports$Blockly$Events.COMMENT_DELETE=p.COMMENT_DELETE,n.module$exports$Blockly$Events.COMMENT_MOVE=p.COMMENT_MOVE,n.module$exports$Blockly$Events.CREATE=p.CREATE,n.module$exports$Blockly$Events.DELETE=p.DELETE,n.module$exports$Blockly$Events.FINISHED_LOADING=p.FINISHED_LOADING,n.module$exports$Blockly$Events.MARKER_MOVE=p.MARKER_MOVE,n.module$exports$Blockly$Events.MOVE=p.MOVE,n.module$exports$Blockly$Events.SELECTED=p.SELECTED,n.module$exports$Blockly$Events.THEME_CHANGE=p.THEME_CHANGE,n.module$exports$Blockly$Events.TOOLBOX_ITEM_SELECT=p.TOOLBOX_ITEM_SELECT,n.module$exports$Blockly$Events.TRASHCAN_OPEN=p.TRASHCAN_OPEN,n.module$exports$Blockly$Events.UI=p.UI,n.module$exports$Blockly$Events.VAR_CREATE=p.VAR_CREATE,n.module$exports$Blockly$Events.VAR_DELETE=p.VAR_DELETE,n.module$exports$Blockly$Events.VAR_RENAME=p.VAR_RENAME,n.module$exports$Blockly$Events.VIEWPORT_CHANGE=p.VIEWPORT_CHANGE,n.module$exports$Blockly$Events.clearPendingUndo=p.clearPendingUndo,n.module$exports$Blockly$Events.disable=p.disable,n.module$exports$Blockly$Events.enable=p.enable,n.module$exports$Blockly$Events.filter=p.filter,n.module$exports$Blockly$Events.fire=p.fire,n.module$exports$Blockly$Events.fromJson=p.fromJson,n.module$exports$Blockly$Events.getDescendantIds=p.getDescendantIds,n.module$exports$Blockly$Events.get=p.get,n.module$exports$Blockly$Events.getGroup=p.getGroup,n.module$exports$Blockly$Events.getRecordUndo=p.getRecordUndo,n.module$exports$Blockly$Events.isEnabled=p.isEnabled,n.module$exports$Blockly$Events.setGroup=p.setGroup,n.module$exports$Blockly$Events.setRecordUndo=p.setRecordUndo,n.module$exports$Blockly$Events.disableOrphans=p.disableOrphans,Object.defineProperties(n.module$exports$Blockly$Events,{recordUndo:{get:function(){return(0,y.warn)("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.getRecordUndo()"),(0,p.getRecordUndo)()},set:function(t){(0,y.warn)("Blockly.Events.recordUndo","September 2021","September 2022","Blockly.Events.setRecordUndo()"),(0,p.setRecordUndo)(t)}}});var Mt={registerUndo:function(){dt.ContextMenuRegistry.registry.register({displayText:function(){return n.module$exports$Blockly$Msg.Msg.UNDO},preconditionFn:function(t){return 0<t.workspace.getUndoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!1)},scopeType:dt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"undoWorkspace",weight:1})},registerRedo:function(){dt.ContextMenuRegistry.registry.register({displayText:function(){return n.module$exports$Blockly$Msg.Msg.REDO},preconditionFn:function(t){return 0<t.workspace.getRedoStack().length?"enabled":"disabled"},callback:function(t){t.workspace.undo(!0)},scopeType:dt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"redoWorkspace",weight:2})},registerCleanup:function(){dt.ContextMenuRegistry.registry.register({displayText:function(){return n.module$exports$Blockly$Msg.Msg.CLEAN_UP},preconditionFn:function(t){return t.workspace.isMovable()?1<t.workspace.getTopBlocks(!1).length?"enabled":"disabled":"hidden"},callback:function(t){t.workspace.cleanUp()},scopeType:dt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"cleanWorkspace",weight:3})}},vr=function(t,e){var o=0,i=0,s=function(S){i--,S.setCollapsed(t),i===0&&(0,n.module$exports$Blockly$Events.setGroup)(!1)};(0,n.module$exports$Blockly$Events.setGroup)(!0);for(var l=0;l<e.length;l++)for(var h=e[l];h;)i++,setTimeout(s.bind(null,h),o),h=h.getNextBlock(),o+=10};Mt.registerCollapse=function(){dt.ContextMenuRegistry.registry.register({displayText:function(){return n.module$exports$Blockly$Msg.Msg.COLLAPSE_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var o=t[e];o;){if(!o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){vr(!0,t.workspace.getTopBlocks(!0))},scopeType:dt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"collapseWorkspace",weight:4})},Mt.registerExpand=function(){dt.ContextMenuRegistry.registry.register({displayText:function(){return n.module$exports$Blockly$Msg.Msg.EXPAND_ALL},preconditionFn:function(t){if(t.workspace.options.collapse){t=t.workspace.getTopBlocks(!1);for(var e=0;e<t.length;e++)for(var o=t[e];o;){if(o.isCollapsed())return"enabled";o=o.getNextBlock()}return"disabled"}return"hidden"},callback:function(t){vr(!1,t.workspace.getTopBlocks(!0))},scopeType:dt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"expandWorkspace",weight:5})};var Sr=function(t,e){if(t.isDeletable())Array.prototype.push.apply(e,t.getDescendants(!1));else{t=t.getChildren(!1);for(var o=0;o<t.length;o++)Sr(t[o],e)}},Di=function(t){var e=[];t=t.getTopBlocks(!0);for(var o=0;o<t.length;o++)Sr(t[o],e);return e},Jn=function(t,e){(0,p.setGroup)(e);var o=t.shift();o&&(o.workspace?(o.dispose(!1,!0),setTimeout(Jn,10,t,e)):Jn(t,e)),(0,p.setGroup)(!1)};Mt.registerDeleteAll=function(){dt.ContextMenuRegistry.registry.register({displayText:function(t){if(t.workspace)return t=Di(t.workspace).length,t===1?n.module$exports$Blockly$Msg.Msg.DELETE_BLOCK:n.module$exports$Blockly$Msg.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){if(t.workspace)return 0<Di(t.workspace).length?"enabled":"disabled"},callback:function(t){if(t.workspace){t.workspace.cancelCurrentGesture();var e=Di(t.workspace),o=(0,re.genUid)();2>e.length?Jn(e,o):(0,Kt.confirm)(n.module$exports$Blockly$Msg.Msg.DELETE_ALL_BLOCKS.replace("%1",String(e.length)),function(i){i&&Jn(e,o)})}},scopeType:dt.ContextMenuRegistry.ScopeType.WORKSPACE,id:"workspaceDelete",weight:6})};var vl=function(){(0,Mt.registerUndo)(),(0,Mt.registerRedo)(),(0,Mt.registerCleanup)(),(0,Mt.registerCollapse)(),(0,Mt.registerExpand)(),(0,Mt.registerDeleteAll)()};Mt.registerDuplicate=function(){dt.ContextMenuRegistry.registry.register({displayText:function(){return n.module$exports$Blockly$Msg.Msg.DUPLICATE_BLOCK},preconditionFn:function(t){return t=t.block,!t.isInFlyout&&t.isDeletable()&&t.isMovable()?t.isDuplicatable()?"enabled":"disabled":"hidden"},callback:function(t){t.block&&(0,Le.duplicate)(t.block)},scopeType:dt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDuplicate",weight:1})},Mt.registerComment=function(){dt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getCommentIcon()?n.module$exports$Blockly$Msg.Msg.REMOVE_COMMENT:n.module$exports$Blockly$Msg.Msg.ADD_COMMENT},preconditionFn:function(t){return t=t.block,G.IE||t.isInFlyout||!t.workspace.options.comments||t.isCollapsed()||!t.isEditable()?"hidden":"enabled"},callback:function(t){t=t.block,t.getCommentIcon()?t.setCommentText(null):t.setCommentText("")},scopeType:dt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockComment",weight:2})},Mt.registerInline=function(){dt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.getInputsInline()?n.module$exports$Blockly$Msg.Msg.EXTERNAL_INPUTS:n.module$exports$Blockly$Msg.Msg.INLINE_INPUTS},preconditionFn:function(t){if(t=t.block,!t.isInFlyout&&t.isMovable()&&!t.isCollapsed()){for(var e=1;e<t.inputList.length;e++)if(t.inputList[e-1].type!==n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT&&t.inputList[e].type!==n.module$exports$Blockly$inputTypes.inputTypes.STATEMENT)return"enabled"}return"hidden"},callback:function(t){t.block.setInputsInline(!t.block.getInputsInline())},scopeType:dt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockInline",weight:3})},Mt.registerCollapseExpandBlock=function(){dt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isCollapsed()?n.module$exports$Blockly$Msg.Msg.EXPAND_BLOCK:n.module$exports$Blockly$Msg.Msg.COLLAPSE_BLOCK},preconditionFn:function(t){return t=t.block,!t.isInFlyout&&t.isMovable()&&t.workspace.options.collapse?"enabled":"hidden"},callback:function(t){t.block.setCollapsed(!t.block.isCollapsed())},scopeType:dt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockCollapseExpand",weight:4})},Mt.registerDisable=function(){dt.ContextMenuRegistry.registry.register({displayText:function(t){return t.block.isEnabled()?n.module$exports$Blockly$Msg.Msg.DISABLE_BLOCK:n.module$exports$Blockly$Msg.Msg.ENABLE_BLOCK},preconditionFn:function(t){return t=t.block,!t.isInFlyout&&t.workspace.options.disable&&t.isEditable()?t.getInheritedDisabled()?"disabled":"enabled":"hidden"},callback:function(t){t=t.block;var e=(0,p.getGroup)();e||(0,p.setGroup)(!0),t.setEnabled(!t.isEnabled()),e||(0,p.setGroup)(!1)},scopeType:dt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDisable",weight:5})},Mt.registerDelete=function(){dt.ContextMenuRegistry.registry.register({displayText:function(t){var e=t.block;return t=e.getDescendants(!1).length,(e=e.getNextBlock())&&(t-=e.getDescendants(!1).length),t===1?n.module$exports$Blockly$Msg.Msg.DELETE_BLOCK:n.module$exports$Blockly$Msg.Msg.DELETE_X_BLOCKS.replace("%1",String(t))},preconditionFn:function(t){return!t.block.isInFlyout&&t.block.isDeletable()?"enabled":"hidden"},callback:function(t){t.block&&t.block.checkAndDelete()},scopeType:dt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockDelete",weight:6})},Mt.registerHelp=function(){dt.ContextMenuRegistry.registry.register({displayText:function(){return n.module$exports$Blockly$Msg.Msg.HELP},preconditionFn:function(t){return t=t.block,(typeof t.helpUrl=="function"?t.helpUrl():t.helpUrl)?"enabled":"hidden"},callback:function(t){t.block.showHelp()},scopeType:dt.ContextMenuRegistry.ScopeType.BLOCK,id:"blockHelp",weight:7})};var Sl=function(){(0,Mt.registerDuplicate)(),(0,Mt.registerComment)(),(0,Mt.registerInline)(),(0,Mt.registerCollapseExpandBlock)(),(0,Mt.registerDisable)(),(0,Mt.registerDelete)(),(0,Mt.registerHelp)()};Mt.registerDefaultOptions=function(){vl(),Sl()},(0,Mt.registerDefaultOptions)();var Dt={Icon:function(t){this.block_=t,this.iconGroup_=null,this.collapseHidden=!0,this.SIZE=17,this.iconXY_=this.bubble_=null}};Dt.Icon.prototype.createIcon=function(){this.iconGroup_||(this.iconGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyIconGroup"},null),this.block_.isInFlyout&&(0,_.addClass)(this.iconGroup_,"blocklyIconGroupReadonly"),this.drawIcon_(this.iconGroup_),this.block_.getSvgRoot().appendChild(this.iconGroup_),(0,$.conditionalBind)(this.iconGroup_,"mouseup",this,this.iconClick_),this.updateEditable())},Dt.Icon.prototype.dispose=function(){(0,_.removeNode)(this.iconGroup_),this.iconGroup_=null,this.setVisible(!1),this.block_=null},Dt.Icon.prototype.updateEditable=function(){},Dt.Icon.prototype.isVisible=function(){return!!this.bubble_},Dt.Icon.prototype.iconClick_=function(t){this.block_.workspace.isDragging()||this.block_.isInFlyout||(0,$.isRightButton)(t)||this.setVisible(!this.isVisible())},Dt.Icon.prototype.applyColour=function(){this.isVisible()&&this.bubble_.setColour(this.block_.style.colourPrimary)},Dt.Icon.prototype.setIconLocation=function(t){this.iconXY_=t,this.isVisible()&&this.bubble_.setAnchorLocation(t)},Dt.Icon.prototype.computeIconLocation=function(){var t=this.block_.getRelativeToSurfaceXY(),e=(0,yt.getRelativeXY)(this.iconGroup_);t=new H.Coordinate(t.x+e.x+this.SIZE/2,t.y+e.y+this.SIZE/2),H.Coordinate.equals(this.getIconLocation(),t)||this.setIconLocation(t)},Dt.Icon.prototype.getIconLocation=function(){return this.iconXY_},Dt.Icon.prototype.getCorrectedSize=function(){return new jt.Size(this.SIZE,this.SIZE-2)},Dt.Icon.prototype.drawIcon_=function(t){},Dt.Icon.prototype.setVisible=function(t){},n.module$exports$Blockly$Mutator={Mutator:function(t){Dt.Icon.call(this,null),this.quarkNames_=t,this.workspace_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_=this.rootBlock_=this.svgDialog_=null}},n.$jscomp.inherits(n.module$exports$Blockly$Mutator.Mutator,Dt.Icon),n.module$exports$Blockly$Mutator.Mutator.prototype.setBlock=function(t){this.block_=t},n.module$exports$Blockly$Mutator.Mutator.prototype.getWorkspace=function(){return this.workspace_},n.module$exports$Blockly$Mutator.Mutator.prototype.drawIcon_=function(t){(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyIconShape",rx:"4",ry:"4",height:"16",width:"16"},t),(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyIconSymbol",d:"m4.203,7.296 0,1.368 -0.92,0.677 -0.11,0.41 0.9,1.559 0.41,0.11 1.043,-0.457 1.187,0.683 0.127,1.134 0.3,0.3 1.8,0 0.3,-0.299 0.127,-1.138 1.185,-0.682 1.046,0.458 0.409,-0.11 0.9,-1.559 -0.11,-0.41 -0.92,-0.677 0,-1.366 0.92,-0.677 0.11,-0.41 -0.9,-1.559 -0.409,-0.109 -1.046,0.458 -1.185,-0.682 -0.127,-1.138 -0.3,-0.299 -1.8,0 -0.3,0.3 -0.126,1.135 -1.187,0.682 -1.043,-0.457 -0.41,0.11 -0.899,1.559 0.108,0.409z"},t),(0,_.createSvgElement)(R.Svg.CIRCLE,{class:"blocklyIconShape",r:"2.7",cx:"8",cy:"8"},t)},n.module$exports$Blockly$Mutator.Mutator.prototype.iconClick_=function(t){this.block_.isEditable()&&Dt.Icon.prototype.iconClick_.call(this,t)},n.module$exports$Blockly$Mutator.Mutator.prototype.createEditor_=function(){if(this.svgDialog_=(0,_.createSvgElement)(R.Svg.SVG,{x:W.Bubble.BORDER_WIDTH,y:W.Bubble.BORDER_WIDTH},null),this.quarkNames_.length)for(var t=(0,n.module$exports$Blockly$utils$xml.createElement)("xml"),e=0,o;o=this.quarkNames_[e];e++){var i=(0,n.module$exports$Blockly$utils$xml.createElement)("block");i.setAttribute("type",o),t.appendChild(i)}else t=null;return e=new Ee.Options({disable:!1,parentWorkspace:this.block_.workspace,media:this.block_.workspace.options.pathToMedia,rtl:this.block_.RTL,horizontalLayout:!1,renderer:this.block_.workspace.options.renderer,rendererOverrides:this.block_.workspace.options.rendererOverrides}),e.toolboxPosition=this.block_.RTL?q.Position.RIGHT:q.Position.LEFT,(o=!!t)&&(e.languageTree=(0,q.convertToolboxDefToJson)(t)),this.workspace_=new L.WorkspaceSvg(e),this.workspace_.isMutator=!0,this.workspace_.addChangeListener(p.disableOrphans),t=o?this.workspace_.addFlyout(R.Svg.G):null,e=this.workspace_.createDom("blocklyMutatorBackground"),t&&e.insertBefore(t,this.workspace_.svgBlockCanvas_),this.svgDialog_.appendChild(e),this.svgDialog_},n.module$exports$Blockly$Mutator.Mutator.prototype.updateEditable=function(){Dt.Icon.prototype.updateEditable.call(this),this.block_.isInFlyout||(this.block_.isEditable()?this.iconGroup_&&(0,_.removeClass)(this.iconGroup_,"blocklyIconGroupReadonly"):(this.setVisible(!1),this.iconGroup_&&(0,_.addClass)(this.iconGroup_,"blocklyIconGroupReadonly")))},n.module$exports$Blockly$Mutator.Mutator.prototype.resizeBubble_=function(){var t=2*W.Bubble.BORDER_WIDTH,e=this.workspace_.getCanvas().getBBox(),o=e.width+e.x,i=e.height+3*t,s=this.workspace_.getFlyout();if(s){var l=s.getWorkspace().getMetricsManager().getScrollMetrics();i=Math.max(i,l.height+20),o+=s.getWidth()}this.block_.RTL&&(o=-e.x),o+=3*t,(Math.abs(this.workspaceWidth_-o)>t||Math.abs(this.workspaceHeight_-i)>t)&&(this.workspaceWidth_=o,this.workspaceHeight_=i,this.bubble_.setBubbleSize(o+t,i+t),this.svgDialog_.setAttribute("width",this.workspaceWidth_),this.svgDialog_.setAttribute("height",this.workspaceHeight_),this.workspace_.setCachedParentSvgSize(this.workspaceWidth_,this.workspaceHeight_)),this.block_.RTL&&(t="translate("+this.workspaceWidth_+",0)",this.workspace_.getCanvas().setAttribute("transform",t)),this.workspace_.resize()},n.module$exports$Blockly$Mutator.Mutator.prototype.onBubbleMove_=function(){this.workspace_&&this.workspace_.recordDragTargets()},n.module$exports$Blockly$Mutator.Mutator.prototype.setVisible=function(t){var e=this;if(t!==this.isVisible())if((0,p.fire)(new((0,p.get)(p.BUBBLE_OPEN))(this.block_,t,"mutator")),t){this.bubble_=new W.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,null,null),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerMoveEvent(this.onBubbleMove_.bind(this));var o=this.workspace_.options.languageTree;t=this.workspace_.getFlyout(),o&&(t.init(this.workspace_),t.show(o)),this.rootBlock_=this.block_.decompose(this.workspace_),o=this.rootBlock_.getDescendants(!1);for(var i=0,s=void 0;s=o[i];i++)s.render();if(this.rootBlock_.setMovable(!1),this.rootBlock_.setDeletable(!1),t?(o=2*t.CORNER_RADIUS,t=this.rootBlock_.RTL?t.getWidth()+o:o):t=o=16,this.block_.RTL&&(t=-t),this.rootBlock_.moveBy(t,o),this.block_.saveConnections){var l=this.rootBlock_;this.block_.saveConnections(l),this.sourceListener_=function(){e.block_&&e.block_.saveConnections(l)},this.block_.workspace.addChangeListener(this.sourceListener_)}this.resizeBubble_(),this.workspace_.addChangeListener(this.workspaceChanged_.bind(this)),this.updateWorkspace_(),this.applyColour()}else this.svgDialog_=null,this.workspace_.dispose(),this.rootBlock_=this.workspace_=null,this.bubble_.dispose(),this.bubble_=null,this.workspaceHeight_=this.workspaceWidth_=0,this.sourceListener_&&(this.block_.workspace.removeChangeListener(this.sourceListener_),this.sourceListener_=null)},n.module$exports$Blockly$Mutator.Mutator.prototype.workspaceChanged_=function(t){t.isUiEvent||t.type===p.CHANGE&&t.element==="disabled"||t.type===p.CREATE||this.updateWorkspace_()},n.module$exports$Blockly$Mutator.Mutator.prototype.updateWorkspace_=function(){if(!this.workspace_.isDragging())for(var t=this.workspace_.getTopBlocks(!1),e=0,o=void 0;o=t[e];e++){var i=o.getRelativeToSurfaceXY();if(20>i.y&&o.moveBy(0,20-i.y),o.RTL){var s=-20,l=this.workspace_.getFlyout();l&&(s-=l.getWidth()),i.x>s&&o.moveBy(s-i.x,0)}else 20>i.x&&o.moveBy(20-i.x,0)}if(this.rootBlock_.workspace===this.workspace_){(t=(0,p.getGroup)())||(0,p.setGroup)(!0);var h=this.block_;if(e=Xe.BlockChange.getExtraBlockState_(h),o=h.rendered,h.rendered=!1,h.compose(this.rootBlock_),h.rendered=o,h.initSvg(),h.rendered&&h.render(),o=Xe.BlockChange.getExtraBlockState_(h),e!==o){(0,p.fire)(new((0,p.get)(p.CHANGE))(h,"mutation",null,e,o));var S=(0,p.getGroup)();setTimeout(function(){var C=(0,p.getGroup)();(0,p.setGroup)(S),h.bumpNeighbours(),(0,p.setGroup)(C)},n.module$exports$Blockly$config.config.bumpDelay)}this.workspace_.isDragging()||this.resizeBubble_(),(0,p.setGroup)(t)}},n.module$exports$Blockly$Mutator.Mutator.prototype.dispose=function(){this.block_.mutator=null,Dt.Icon.prototype.dispose.call(this)},n.module$exports$Blockly$Mutator.Mutator.prototype.updateBlockStyle=function(){var t=this.workspace_;if(t&&t.getAllBlocks(!1)){for(var e=t.getAllBlocks(!1),o=0,i;i=e[o];o++)i.setStyle(i.getStyleName());if(t=t.getFlyout())for(t=t.workspace_.getAllBlocks(!1),e=0;o=t[e];e++)o.setStyle(o.getStyleName())}},n.module$exports$Blockly$Mutator.Mutator.reconnect=function(t,e,o){if(!t||!t.getSourceBlock().workspace)return!1;o=e.getInput(o).connection;var i=t.targetBlock();return i&&i!==e||o.targetConnection===t?!1:(o.isConnected()&&o.disconnect(),o.connect(t),!0)},n.module$exports$Blockly$Mutator.Mutator.findParentWs=function(t){var e=null;if(t&&t.options){var o=t.options.parentWorkspace;t.isFlyout?o&&o.options&&(e=o.options.parentWorkspace):o&&(e=o)}return e};var po={Warning:function(t){Dt.Icon.call(this,t),this.createIcon(),this.text_=Object.create(null),this.paragraphElement_=null,this.collapseHidden=!1}};n.$jscomp.inherits(po.Warning,Dt.Icon),po.Warning.prototype.drawIcon_=function(t){(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyIconShape",d:"M2,15Q-1,15 0.5,12L6.5,1.7Q8,-1 9.5,1.7L15.5,12Q17,15 14,15z"},t),(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyIconSymbol",d:"m7,4.8v3.16l0.27,2.27h1.46l0.27,-2.27v-3.16z"},t),(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyIconSymbol",x:"7",y:"11",height:"2",width:"2"},t)},po.Warning.prototype.setVisible=function(t){t!==this.isVisible()&&((0,p.fire)(new((0,p.get)(p.BUBBLE_OPEN))(this.block_,t,"warning")),t?this.createBubble_():this.disposeBubble_())},po.Warning.prototype.createBubble_=function(){this.paragraphElement_=W.Bubble.textToDom(this.getText()),this.bubble_=W.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},po.Warning.prototype.disposeBubble_=function(){this.bubble_.dispose(),this.paragraphElement_=this.bubble_=null},po.Warning.prototype.setText=function(t,e){this.text_[e]!==t&&(t?this.text_[e]=t:delete this.text_[e],this.isVisible()&&(this.setVisible(!1),this.setVisible(!0)))},po.Warning.prototype.getText=function(){var t=[],e;for(e in this.text_)t.push(this.text_[e]);return t.join(`
`)},po.Warning.prototype.dispose=function(){this.block_.warning=null,Dt.Icon.prototype.dispose.call(this)};var oe={Comment:function(t){Dt.Icon.call(this,t),this.model_=t.commentModel,this.model_.text=this.model_.text||"",this.cachedText_="",this.paragraphElement_=this.textarea_=this.foreignObject_=this.onInputWrapper_=this.onChangeWrapper_=this.onWheelWrapper_=this.onMouseUpWrapper_=null,this.createIcon()}};n.$jscomp.inherits(oe.Comment,Dt.Icon),oe.Comment.prototype.drawIcon_=function(t){(0,_.createSvgElement)(R.Svg.CIRCLE,{class:"blocklyIconShape",r:"8",cx:"8",cy:"8"},t),(0,_.createSvgElement)(R.Svg.PATH,{class:"blocklyIconSymbol",d:"m6.8,10h2c0.003,-0.617 0.271,-0.962 0.633,-1.266 2.875,-2.4050.607,-5.534 -3.765,-3.874v1.7c3.12,-1.657 3.698,0.118 2.336,1.25-1.201,0.998 -1.201,1.528 -1.204,2.19z"},t),(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyIconSymbol",x:"6.8",y:"10.78",height:"2",width:"2"},t)},oe.Comment.prototype.createEditor_=function(){this.foreignObject_=(0,_.createSvgElement)(R.Svg.FOREIGNOBJECT,{x:W.Bubble.BORDER_WIDTH,y:W.Bubble.BORDER_WIDTH},null);var t=document.createElementNS(_.HTML_NS,"body");t.setAttribute("xmlns",_.HTML_NS),t.className="blocklyMinimalBody";var e=this.textarea_=document.createElementNS(_.HTML_NS,"textarea");return e.className="blocklyCommentTextarea",e.setAttribute("dir",this.block_.RTL?"RTL":"LTR"),e.value=this.model_.text,this.resizeTextarea_(),t.appendChild(e),this.foreignObject_.appendChild(t),this.onMouseUpWrapper_=(0,$.conditionalBind)(e,"mouseup",this,this.startEdit_,!0,!0),this.onWheelWrapper_=(0,$.conditionalBind)(e,"wheel",this,function(o){o.stopPropagation()}),this.onChangeWrapper_=(0,$.conditionalBind)(e,"change",this,function(o){this.cachedText_!==this.model_.text&&(0,p.fire)(new((0,p.get)(p.CHANGE))(this.block_,"comment",null,this.cachedText_,this.model_.text))}),this.onInputWrapper_=(0,$.conditionalBind)(e,"input",this,function(o){this.model_.text=e.value}),setTimeout(e.focus.bind(e),0),this.foreignObject_},oe.Comment.prototype.updateEditable=function(){Dt.Icon.prototype.updateEditable.call(this),this.isVisible()&&(this.disposeBubble_(),this.createBubble_())},oe.Comment.prototype.onBubbleResize_=function(){this.isVisible()&&(this.model_.size=this.bubble_.getBubbleSize(),this.resizeTextarea_())},oe.Comment.prototype.resizeTextarea_=function(){var t=this.model_.size,e=2*W.Bubble.BORDER_WIDTH,o=t.width-e;t=t.height-e,this.foreignObject_.setAttribute("width",o),this.foreignObject_.setAttribute("height",t),this.textarea_.style.width=o-4+"px",this.textarea_.style.height=t-4+"px"},oe.Comment.prototype.setVisible=function(t){t!==this.isVisible()&&((0,p.fire)(new((0,p.get)(p.BUBBLE_OPEN))(this.block_,t,"comment")),(this.model_.pinned=t)?this.createBubble_():this.disposeBubble_())},oe.Comment.prototype.createBubble_=function(){!this.block_.isEditable()||G.IE?this.createNonEditableBubble_():this.createEditableBubble_()},oe.Comment.prototype.createEditableBubble_=function(){this.bubble_=new W.Bubble(this.block_.workspace,this.createEditor_(),this.block_.pathObject.svgPath,this.iconXY_,this.model_.size.width,this.model_.size.height),this.bubble_.setSvgId(this.block_.id),this.bubble_.registerResizeEvent(this.onBubbleResize_.bind(this)),this.applyColour()},oe.Comment.prototype.createNonEditableBubble_=function(){this.paragraphElement_=W.Bubble.textToDom(this.block_.getCommentText()),this.bubble_=W.Bubble.createNonEditableBubble(this.paragraphElement_,this.block_,this.iconXY_),this.applyColour()},oe.Comment.prototype.disposeBubble_=function(){this.onMouseUpWrapper_&&((0,$.unbind)(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onWheelWrapper_&&((0,$.unbind)(this.onWheelWrapper_),this.onWheelWrapper_=null),this.onChangeWrapper_&&((0,$.unbind)(this.onChangeWrapper_),this.onChangeWrapper_=null),this.onInputWrapper_&&((0,$.unbind)(this.onInputWrapper_),this.onInputWrapper_=null),this.bubble_.dispose(),this.paragraphElement_=this.foreignObject_=this.textarea_=this.bubble_=null},oe.Comment.prototype.startEdit_=function(t){this.bubble_.promote()&&this.textarea_.focus(),this.cachedText_=this.model_.text},oe.Comment.prototype.getBubbleSize=function(){return this.model_.size},oe.Comment.prototype.setBubbleSize=function(t,e){this.bubble_?this.bubble_.setBubbleSize(t,e):(this.model_.size.width=t,this.model_.size.height=e)},oe.Comment.prototype.updateText=function(){this.textarea_?this.textarea_.value=this.model_.text:this.paragraphElement_&&(this.paragraphElement_.firstChild.textContent=this.model_.text)},oe.Comment.prototype.dispose=function(){this.block_.comment=null,Dt.Icon.prototype.dispose.call(this)},(0,O.register)(`
.blocklyCommentTextarea {
  background-color: #fef49c;
  border: 0;
  display: block;
  margin: 0;
  outline: 0;
  padding: 3px;
  resize: none;
  text-overflow: hidden;
}
`);var Ie={SPRITE:{width:96,height:124,url:"sprites.png"}},Xt={verticalPosition:{TOP:0,BOTTOM:1},horizontalPosition:{LEFT:0,RIGHT:1},bumpDirection:{UP:0,DOWN:1},getStartPositionRect:function(t,e,o,i,s,l){var h=l.scrollbar&&l.scrollbar.canScrollVertically();return t.horizontal===Xt.horizontalPosition.LEFT?(o=s.absoluteMetrics.left+o,h&&l.RTL&&(o+=Z.Scrollbar.scrollbarThickness)):(o=s.absoluteMetrics.left+s.viewMetrics.width-e.width-o,h&&!l.RTL&&(o-=Z.Scrollbar.scrollbarThickness)),t.vertical===Xt.verticalPosition.TOP?t=s.absoluteMetrics.top+i:(t=s.absoluteMetrics.top+s.viewMetrics.height-e.height-i,l.scrollbar&&l.scrollbar.canScrollHorizontally()&&(t-=Z.Scrollbar.scrollbarThickness)),new wt.Rect(t,t+e.height,o,o+e.width)},getCornerOppositeToolbox:function(t,e){return{horizontal:e.toolboxMetrics.position===q.Position.LEFT||t.horizontalLayout&&!t.RTL?Xt.horizontalPosition.RIGHT:Xt.horizontalPosition.LEFT,vertical:e.toolboxMetrics.position===q.Position.BOTTOM?Xt.verticalPosition.TOP:Xt.verticalPosition.BOTTOM}},bumpPositionRect:function(t,e,o,i){for(var s=t.left,l=t.right-t.left,h=t.bottom-t.top,S=0;S<i.length;S++){var C=i[S];t.intersects(C)&&(t=o===Xt.bumpDirection.UP?C.top-h-e:C.bottom+e,t=new wt.Rect(t,t+h,s,s+l),S=-1)}return t}},Bl={IPositionable:function(){}},Ge={ZoomControls:function(t){this.workspace_=t,this.id="zoomControls",this.zoomResetGroup_=this.zoomOutGroup_=this.zoomInGroup_=this.onZoomOutWrapper_=this.onZoomInWrapper_=this.onZoomResetWrapper_=null,this.HEIGHT_=this.WIDTH_=32,this.SMALL_SPACING_=2,this.LARGE_SPACING_=11,this.MARGIN_HORIZONTAL_=this.MARGIN_VERTICAL_=20,this.svgGroup_=null,this.top_=this.left_=0,this.initialized_=!1}};Ge.ZoomControls.prototype.createDom=function(){this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{},null);var t=String(Math.random()).substring(2);return this.createZoomOutSvg_(t),this.createZoomInSvg_(t),this.workspace_.isMovable()&&this.createZoomResetSvg_(t),this.svgGroup_},Ge.ZoomControls.prototype.init=function(){this.workspace_.getComponentManager().addComponent({component:this,weight:2,capabilities:[It.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0},Ge.ZoomControls.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("zoomControls"),this.svgGroup_&&(0,_.removeNode)(this.svgGroup_),this.onZoomResetWrapper_&&(0,$.unbind)(this.onZoomResetWrapper_),this.onZoomInWrapper_&&(0,$.unbind)(this.onZoomInWrapper_),this.onZoomOutWrapper_&&(0,$.unbind)(this.onZoomOutWrapper_)},Ge.ZoomControls.prototype.getBoundingRectangle=function(){var t=this.SMALL_SPACING_+2*this.HEIGHT_;return this.zoomResetGroup_&&(t+=this.LARGE_SPACING_+this.HEIGHT_),new wt.Rect(this.top_,this.top_+t,this.left_,this.left_+this.WIDTH_)},Ge.ZoomControls.prototype.position=function(t,e){if(this.initialized_){var o=(0,Xt.getCornerOppositeToolbox)(this.workspace_,t),i=this.SMALL_SPACING_+2*this.HEIGHT_;this.zoomResetGroup_&&(i+=this.LARGE_SPACING_+this.HEIGHT_),t=(0,Xt.getStartPositionRect)(o,new jt.Size(this.WIDTH_,i),this.MARGIN_HORIZONTAL_,this.MARGIN_VERTICAL_,t,this.workspace_),o=o.vertical,e=(0,Xt.bumpPositionRect)(t,this.MARGIN_VERTICAL_,o===Xt.verticalPosition.TOP?Xt.bumpDirection.DOWN:Xt.bumpDirection.UP,e),o===Xt.verticalPosition.TOP?(o=this.SMALL_SPACING_+this.HEIGHT_,this.zoomInGroup_.setAttribute("transform","translate(0, "+o+")"),this.zoomResetGroup_&&this.zoomResetGroup_.setAttribute("transform","translate(0, "+(o+this.LARGE_SPACING_+this.HEIGHT_)+")")):(o=this.zoomResetGroup_?this.LARGE_SPACING_+this.HEIGHT_:0,this.zoomInGroup_.setAttribute("transform","translate(0, "+o+")"),this.zoomOutGroup_.setAttribute("transform","translate(0, "+(o+this.SMALL_SPACING_+this.HEIGHT_)+")")),this.top_=e.top,this.left_=e.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},Ge.ZoomControls.prototype.createZoomOutSvg_=function(t){this.zoomOutGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=(0,_.createSvgElement)(R.Svg.CLIPPATH,{id:"blocklyZoomoutClipPath"+t},this.zoomOutGroup_);(0,_.createSvgElement)(R.Svg.RECT,{width:32,height:32},e),(0,_.createSvgElement)(R.Svg.IMAGE,{width:Ie.SPRITE.width,height:Ie.SPRITE.height,x:-64,y:-92,"clip-path":"url(#blocklyZoomoutClipPath"+t+")"},this.zoomOutGroup_).setAttributeNS(_.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Ie.SPRITE.url),this.onZoomOutWrapper_=(0,$.conditionalBind)(this.zoomOutGroup_,"mousedown",null,this.zoom_.bind(this,-1))},Ge.ZoomControls.prototype.createZoomInSvg_=function(t){this.zoomInGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=(0,_.createSvgElement)(R.Svg.CLIPPATH,{id:"blocklyZoominClipPath"+t},this.zoomInGroup_);(0,_.createSvgElement)(R.Svg.RECT,{width:32,height:32},e),(0,_.createSvgElement)(R.Svg.IMAGE,{width:Ie.SPRITE.width,height:Ie.SPRITE.height,x:-32,y:-92,"clip-path":"url(#blocklyZoominClipPath"+t+")"},this.zoomInGroup_).setAttributeNS(_.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Ie.SPRITE.url),this.onZoomInWrapper_=(0,$.conditionalBind)(this.zoomInGroup_,"mousedown",null,this.zoom_.bind(this,1))},Ge.ZoomControls.prototype.zoom_=function(t,e){this.workspace_.markFocused(),this.workspace_.zoomCenter(t),this.fireZoomEvent_(),(0,g.clearTouchIdentifier)(),e.stopPropagation(),e.preventDefault()},Ge.ZoomControls.prototype.createZoomResetSvg_=function(t){this.zoomResetGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyZoom"},this.svgGroup_);var e=(0,_.createSvgElement)(R.Svg.CLIPPATH,{id:"blocklyZoomresetClipPath"+t},this.zoomResetGroup_);(0,_.createSvgElement)(R.Svg.RECT,{width:32,height:32},e),(0,_.createSvgElement)(R.Svg.IMAGE,{width:Ie.SPRITE.width,height:Ie.SPRITE.height,y:-92,"clip-path":"url(#blocklyZoomresetClipPath"+t+")"},this.zoomResetGroup_).setAttributeNS(_.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Ie.SPRITE.url),this.onZoomResetWrapper_=(0,$.conditionalBind)(this.zoomResetGroup_,"mousedown",null,this.resetZoom_.bind(this))},Ge.ZoomControls.prototype.resetZoom_=function(t){this.workspace_.markFocused();var e=Math.log(this.workspace_.options.zoomOptions.startScale/this.workspace_.scale)/Math.log(this.workspace_.options.zoomOptions.scaleSpeed);this.workspace_.beginCanvasTransition(),this.workspace_.zoomCenter(e),this.workspace_.scrollCenter(),setTimeout(this.workspace_.endCanvasTransition.bind(this.workspace_),500),this.fireZoomEvent_(),(0,g.clearTouchIdentifier)(),t.stopPropagation(),t.preventDefault()},Ge.ZoomControls.prototype.fireZoomEvent_=function(){var t=new((0,p.get)(p.CLICK))(null,this.workspace_.id,"zoom_controls");(0,p.fire)(t)},(0,O.register)(`
.blocklyZoom>image, .blocklyZoom>svg>image {
  opacity: .4;
}

.blocklyZoom>image:hover, .blocklyZoom>svg>image:hover {
  opacity: .6;
}

.blocklyZoom>image:active, .blocklyZoom>svg>image:active {
  opacity: .8;
}
`);var St={WorkspaceComment:function(t,e,o,i,s){this.id=s&&!t.getCommentById(s)?s:(0,re.genUid)(),t.addTopComment(this),this.xy_=new H.Coordinate(0,0),this.height_=o,this.width_=i,this.workspace=t,this.RTL=t.RTL,this.editable_=this.movable_=this.deletable_=!0,this.content_=e,this.disposed_=!1,this.isComment=!0,St.WorkspaceComment.fireCreateEvent(this)}};St.WorkspaceComment.prototype.dispose=function(){this.disposed_||((0,p.isEnabled)()&&(0,p.fire)(new((0,p.get)(p.COMMENT_DELETE))(this)),this.workspace.removeTopComment(this),this.disposed_=!0)},St.WorkspaceComment.prototype.getHeight=function(){return this.height_},St.WorkspaceComment.prototype.setHeight=function(t){this.height_=t},St.WorkspaceComment.prototype.getWidth=function(){return this.width_},St.WorkspaceComment.prototype.setWidth=function(t){this.width_=t},St.WorkspaceComment.prototype.getXY=function(){return new H.Coordinate(this.xy_.x,this.xy_.y)},St.WorkspaceComment.prototype.moveBy=function(t,e){var o=new((0,p.get)(p.COMMENT_MOVE))(this);this.xy_.translate(t,e),o.recordNew(),(0,p.fire)(o)},St.WorkspaceComment.prototype.isDeletable=function(){return this.deletable_&&!(this.workspace&&this.workspace.options.readOnly)},St.WorkspaceComment.prototype.setDeletable=function(t){this.deletable_=t},St.WorkspaceComment.prototype.isMovable=function(){return this.movable_&&!(this.workspace&&this.workspace.options.readOnly)},St.WorkspaceComment.prototype.setMovable=function(t){this.movable_=t},St.WorkspaceComment.prototype.isEditable=function(){return this.editable_&&!(this.workspace&&this.workspace.options.readOnly)},St.WorkspaceComment.prototype.setEditable=function(t){this.editable_=t},St.WorkspaceComment.prototype.getContent=function(){return this.content_},St.WorkspaceComment.prototype.setContent=function(t){this.content_!==t&&((0,p.fire)(new((0,p.get)(p.COMMENT_CHANGE))(this,this.content_,t)),this.content_=t)},St.WorkspaceComment.prototype.toXmlWithXY=function(t){return t=this.toXml(t),t.setAttribute("x",Math.round(this.xy_.x)),t.setAttribute("y",Math.round(this.xy_.y)),t.setAttribute("h",this.height_),t.setAttribute("w",this.width_),t},St.WorkspaceComment.prototype.toXml=function(t){var e=(0,n.module$exports$Blockly$utils$xml.createElement)("comment");return t||(e.id=this.id),e.textContent=this.getContent(),e},St.WorkspaceComment.fireCreateEvent=function(t){if((0,p.isEnabled)()){var e=(0,p.getGroup)();e||(0,p.setGroup)(!0);try{(0,p.fire)(new((0,p.get)(p.COMMENT_CREATE))(t))}finally{e||(0,p.setGroup)(!1)}}},St.WorkspaceComment.fromXml=function(t,e){var o=St.WorkspaceComment.parseAttributes(t);return e=new St.WorkspaceComment(e,o.content,o.h,o.w,o.id),o=parseInt(t.getAttribute("x"),10),t=parseInt(t.getAttribute("y"),10),isNaN(o)||isNaN(t)||e.moveBy(o,t),St.WorkspaceComment.fireCreateEvent(e),e},St.WorkspaceComment.parseAttributes=function(t){var e=t.getAttribute("h"),o=t.getAttribute("w");return{id:t.getAttribute("id"),h:e?parseInt(e,10):100,w:o?parseInt(o,10):100,x:parseInt(t.getAttribute("x"),10),y:parseInt(t.getAttribute("y"),10),content:t.textContent}};var tt={},ue=8,zn=3,Il=2;tt.WorkspaceCommentSvg=function(t,e,o,i,s){St.WorkspaceComment.call(this,t,e,o,i,s),this.onMouseMoveWrapper_=this.onMouseUpWrapper_=null,this.eventsInit_=!1,this.deleteIconBorder_=this.deleteGroup_=this.resizeGroup_=this.foreignObject_=this.svgHandleTarget_=this.svgRectTarget_=this.textarea_=null,this.autoLayout_=this.focused_=!1,this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyComment"},null),this.svgGroup_.translate_="",this.svgRect_=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyCommentRect",x:0,y:0,rx:zn,ry:zn}),this.svgGroup_.appendChild(this.svgRect_),this.rendered_=!1,this.useDragSurface_=(0,yt.is3dSupported)()&&!!t.getBlockDragSurface(),this.render()},n.$jscomp.inherits(tt.WorkspaceCommentSvg,St.WorkspaceComment),tt.WorkspaceCommentSvg.prototype.dispose=function(){this.disposed_||((0,n.module$exports$Blockly$common.getSelected)()===this&&(this.unselect(),this.workspace.cancelCurrentGesture()),(0,p.isEnabled)()&&(0,p.fire)(new((0,p.get)(p.COMMENT_DELETE))(this)),(0,_.removeNode)(this.svgGroup_),this.disposeInternal_(),(0,p.disable)(),St.WorkspaceComment.prototype.dispose.call(this),(0,p.enable)())},tt.WorkspaceCommentSvg.prototype.initSvg=function(t){if(!this.workspace.rendered)throw TypeError("Workspace is headless.");this.workspace.options.readOnly||this.eventsInit_||((0,$.conditionalBind)(this.svgRectTarget_,"mousedown",this,this.pathMouseDown_),(0,$.conditionalBind)(this.svgHandleTarget_,"mousedown",this,this.pathMouseDown_)),this.eventsInit_=!0,this.updateMovable(),this.getSvgRoot().parentNode||this.workspace.getBubbleCanvas().appendChild(this.getSvgRoot()),!t&&this.textarea_&&this.textarea_.select()},tt.WorkspaceCommentSvg.prototype.pathMouseDown_=function(t){var e=this.workspace.getGesture(t);e&&e.handleBubbleStart(t,this)},tt.WorkspaceCommentSvg.prototype.showContextMenu=function(t){if(!this.workspace.options.readOnly){var e=[];this.isDeletable()&&this.isMovable()&&(e.push((0,n.module$exports$Blockly$ContextMenu.commentDuplicateOption)(this)),e.push((0,n.module$exports$Blockly$ContextMenu.commentDeleteOption)(this))),(0,n.module$exports$Blockly$ContextMenu.show)(t,e,this.RTL)}},tt.WorkspaceCommentSvg.prototype.select=function(){if((0,n.module$exports$Blockly$common.getSelected)()!==this){var t=null;if((0,n.module$exports$Blockly$common.getSelected)()){t=(0,n.module$exports$Blockly$common.getSelected)().id,(0,p.disable)();try{(0,n.module$exports$Blockly$common.getSelected)().unselect()}finally{(0,p.enable)()}}t=new((0,p.get)(p.SELECTED))(t,this.id,this.workspace.id),(0,p.fire)(t),(0,n.module$exports$Blockly$common.setSelected)(this),this.addSelect()}},tt.WorkspaceCommentSvg.prototype.unselect=function(){if((0,n.module$exports$Blockly$common.getSelected)()===this){var t=new((0,p.get)(p.SELECTED))(this.id,null,this.workspace.id);(0,p.fire)(t),(0,n.module$exports$Blockly$common.setSelected)(null),this.removeSelect(),this.blurFocus()}},tt.WorkspaceCommentSvg.prototype.addSelect=function(){(0,_.addClass)(this.svgGroup_,"blocklySelected"),this.setFocus()},tt.WorkspaceCommentSvg.prototype.removeSelect=function(){(0,_.removeClass)(this.svgGroup_,"blocklySelected"),this.blurFocus()},tt.WorkspaceCommentSvg.prototype.addFocus=function(){(0,_.addClass)(this.svgGroup_,"blocklyFocused")},tt.WorkspaceCommentSvg.prototype.removeFocus=function(){(0,_.removeClass)(this.svgGroup_,"blocklyFocused")},tt.WorkspaceCommentSvg.prototype.getRelativeToSurfaceXY=function(){var t=0,e=0,o=this.useDragSurface_?this.workspace.getBlockDragSurface().getGroup():null,i=this.getSvgRoot();if(i)do{var s=(0,yt.getRelativeXY)(i);t+=s.x,e+=s.y,this.useDragSurface_&&this.workspace.getBlockDragSurface().getCurrentBlock()===i&&(s=this.workspace.getBlockDragSurface().getSurfaceTranslation(),t+=s.x,e+=s.y),i=i.parentNode}while(i&&i!==this.workspace.getBubbleCanvas()&&i!==o);return this.xy_=new H.Coordinate(t,e)},tt.WorkspaceCommentSvg.prototype.moveBy=function(t,e){var o=new((0,p.get)(p.COMMENT_MOVE))(this),i=this.getRelativeToSurfaceXY();this.translate(i.x+t,i.y+e),this.xy_=new H.Coordinate(i.x+t,i.y+e),o.recordNew(),(0,p.fire)(o),this.workspace.resizeContents()},tt.WorkspaceCommentSvg.prototype.translate=function(t,e){this.xy_=new H.Coordinate(t,e),this.getSvgRoot().setAttribute("transform","translate("+t+","+e+")")},tt.WorkspaceCommentSvg.prototype.moveToDragSurface=function(){if(this.useDragSurface_){var t=this.getRelativeToSurfaceXY();this.clearTransformAttributes_(),this.workspace.getBlockDragSurface().translateSurface(t.x,t.y),this.workspace.getBlockDragSurface().setBlocksAndShow(this.getSvgRoot())}},tt.WorkspaceCommentSvg.prototype.moveDuringDrag=function(t,e){t?t.translateSurface(e.x,e.y):(this.svgGroup_.translate_="translate("+e.x+","+e.y+")",this.svgGroup_.setAttribute("transform",this.svgGroup_.translate_+this.svgGroup_.skew_))},tt.WorkspaceCommentSvg.prototype.moveTo=function(t,e){this.translate(t,e)},tt.WorkspaceCommentSvg.prototype.clearTransformAttributes_=function(){this.getSvgRoot().removeAttribute("transform")},tt.WorkspaceCommentSvg.prototype.getBoundingRectangle=function(){var t=this.getRelativeToSurfaceXY(),e=this.getHeightWidth(),o=t.y,i=t.y+e.height;if(this.RTL){var s=t.x-e.width;t=t.x}else s=t.x,t=t.x+e.width;return new wt.Rect(o,i,s,t)},tt.WorkspaceCommentSvg.prototype.updateMovable=function(){this.isMovable()?(0,_.addClass)(this.svgGroup_,"blocklyDraggable"):(0,_.removeClass)(this.svgGroup_,"blocklyDraggable")},tt.WorkspaceCommentSvg.prototype.setMovable=function(t){St.WorkspaceComment.prototype.setMovable.call(this,t),this.updateMovable()},tt.WorkspaceCommentSvg.prototype.setEditable=function(t){St.WorkspaceComment.prototype.setEditable.call(this,t),this.textarea_&&(this.textarea_.readOnly=!t)},tt.WorkspaceCommentSvg.prototype.setDragging=function(t){t?(t=this.getSvgRoot(),t.translate_="",t.skew_="",(0,_.addClass)(this.svgGroup_,"blocklyDragging")):(0,_.removeClass)(this.svgGroup_,"blocklyDragging")},tt.WorkspaceCommentSvg.prototype.getSvgRoot=function(){return this.svgGroup_},tt.WorkspaceCommentSvg.prototype.getContent=function(){return this.textarea_?this.textarea_.value:this.content_},tt.WorkspaceCommentSvg.prototype.setContent=function(t){St.WorkspaceComment.prototype.setContent.call(this,t),this.textarea_&&(this.textarea_.value=t)},tt.WorkspaceCommentSvg.prototype.setDeleteStyle=function(t){t?(0,_.addClass)(this.svgGroup_,"blocklyDraggingDelete"):(0,_.removeClass)(this.svgGroup_,"blocklyDraggingDelete")},tt.WorkspaceCommentSvg.prototype.setAutoLayout=function(t){},tt.WorkspaceCommentSvg.prototype.toXmlWithXY=function(t){var e;this.workspace.RTL&&(e=this.workspace.getWidth()),t=this.toXml(t);var o=this.getRelativeToSurfaceXY();return t.setAttribute("x",Math.round(this.workspace.RTL?e-o.x:o.x)),t.setAttribute("y",Math.round(o.y)),t.setAttribute("h",this.getHeight()),t.setAttribute("w",this.getWidth()),t},tt.WorkspaceCommentSvg.prototype.toCopyData=function(){return{saveInfo:this.toXmlWithXY(),source:this.workspace,typeCounts:null}},tt.WorkspaceCommentSvg.prototype.getHeightWidth=function(){return{width:this.getWidth(),height:this.getHeight()}},tt.WorkspaceCommentSvg.prototype.render=function(){if(!this.rendered_){var t=this.getHeightWidth();this.createEditor_(),this.svgGroup_.appendChild(this.foreignObject_),this.svgHandleTarget_=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyCommentHandleTarget",x:0,y:0}),this.svgGroup_.appendChild(this.svgHandleTarget_),this.svgRectTarget_=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyCommentTarget",x:0,y:0,rx:zn,ry:zn}),this.svgGroup_.appendChild(this.svgRectTarget_),this.addResizeDom_(),this.isDeletable()&&this.addDeleteDom_(),this.setSize_(t.width,t.height),this.textarea_.value=this.content_,this.rendered_=!0,this.resizeGroup_&&(0,$.conditionalBind)(this.resizeGroup_,"mousedown",this,this.resizeMouseDown_),this.isDeletable()&&((0,$.conditionalBind)(this.deleteGroup_,"mousedown",this,this.deleteMouseDown_),(0,$.conditionalBind)(this.deleteGroup_,"mouseout",this,this.deleteMouseOut_),(0,$.conditionalBind)(this.deleteGroup_,"mouseup",this,this.deleteMouseUp_))}},tt.WorkspaceCommentSvg.prototype.createEditor_=function(){this.foreignObject_=(0,_.createSvgElement)(R.Svg.FOREIGNOBJECT,{x:0,y:tt.WorkspaceCommentSvg.TOP_OFFSET,class:"blocklyCommentForeignObject"},null);var t=document.createElementNS(_.HTML_NS,"body");t.setAttribute("xmlns",_.HTML_NS),t.className="blocklyMinimalBody";var e=document.createElementNS(_.HTML_NS,"textarea");return e.className="blocklyCommentTextarea",e.setAttribute("dir",this.RTL?"RTL":"LTR"),e.readOnly=!this.isEditable(),t.appendChild(e),this.textarea_=e,this.foreignObject_.appendChild(t),(0,$.conditionalBind)(e,"wheel",this,function(o){o.stopPropagation()}),(0,$.conditionalBind)(e,"change",this,function(o){this.setContent(e.value)}),this.foreignObject_},tt.WorkspaceCommentSvg.prototype.addResizeDom_=function(){this.resizeGroup_=(0,_.createSvgElement)(R.Svg.G,{class:this.RTL?"blocklyResizeSW":"blocklyResizeSE"},this.svgGroup_),(0,_.createSvgElement)(R.Svg.POLYGON,{points:"0,x x,x x,0".replace(/x/g,ue.toString())},this.resizeGroup_),(0,_.createSvgElement)(R.Svg.LINE,{class:"blocklyResizeLine",x1:ue/3,y1:ue-1,x2:ue-1,y2:ue/3},this.resizeGroup_),(0,_.createSvgElement)(R.Svg.LINE,{class:"blocklyResizeLine",x1:2*ue/3,y1:ue-1,x2:ue-1,y2:2*ue/3},this.resizeGroup_)},tt.WorkspaceCommentSvg.prototype.addDeleteDom_=function(){this.deleteGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyCommentDeleteIcon"},this.svgGroup_),this.deleteIconBorder_=(0,_.createSvgElement)(R.Svg.CIRCLE,{class:"blocklyDeleteIconShape",r:"7",cx:"7.5",cy:"7.5"},this.deleteGroup_),(0,_.createSvgElement)(R.Svg.LINE,{x1:"5",y1:"10",x2:"10",y2:"5",stroke:"#fff","stroke-width":"2"},this.deleteGroup_),(0,_.createSvgElement)(R.Svg.LINE,{x1:"5",y1:"5",x2:"10",y2:"10",stroke:"#fff","stroke-width":"2"},this.deleteGroup_)},tt.WorkspaceCommentSvg.prototype.resizeMouseDown_=function(t){this.unbindDragEvents_(),(0,$.isRightButton)(t)||(this.workspace.startDrag(t,new H.Coordinate(this.workspace.RTL?-this.width_:this.width_,this.height_)),this.onMouseUpWrapper_=(0,$.conditionalBind)(document,"mouseup",this,this.resizeMouseUp_),this.onMouseMoveWrapper_=(0,$.conditionalBind)(document,"mousemove",this,this.resizeMouseMove_),this.workspace.hideChaff()),t.stopPropagation()},tt.WorkspaceCommentSvg.prototype.deleteMouseDown_=function(t){(0,_.addClass)(this.deleteIconBorder_,"blocklyDeleteIconHighlighted"),t.stopPropagation()},tt.WorkspaceCommentSvg.prototype.deleteMouseOut_=function(t){(0,_.removeClass)(this.deleteIconBorder_,"blocklyDeleteIconHighlighted")},tt.WorkspaceCommentSvg.prototype.deleteMouseUp_=function(t){this.dispose(),t.stopPropagation()},tt.WorkspaceCommentSvg.prototype.unbindDragEvents_=function(){this.onMouseUpWrapper_&&((0,$.unbind)(this.onMouseUpWrapper_),this.onMouseUpWrapper_=null),this.onMouseMoveWrapper_&&((0,$.unbind)(this.onMouseMoveWrapper_),this.onMouseMoveWrapper_=null)},tt.WorkspaceCommentSvg.prototype.resizeMouseUp_=function(t){(0,g.clearTouchIdentifier)(),this.unbindDragEvents_()},tt.WorkspaceCommentSvg.prototype.resizeMouseMove_=function(t){this.autoLayout_=!1,t=this.workspace.moveDrag(t),this.setSize_(this.RTL?-t.x:t.x,t.y)},tt.WorkspaceCommentSvg.prototype.resizeComment_=function(){var t=this.getHeightWidth(),e=tt.WorkspaceCommentSvg.TOP_OFFSET,o=2*Il;this.foreignObject_.setAttribute("width",t.width),this.foreignObject_.setAttribute("height",t.height-e),this.RTL&&this.foreignObject_.setAttribute("x",-t.width),this.textarea_.style.width=t.width-o+"px",this.textarea_.style.height=t.height-o-e+"px"},tt.WorkspaceCommentSvg.prototype.setSize_=function(t,e){t=Math.max(t,45),e=Math.max(e,20+tt.WorkspaceCommentSvg.TOP_OFFSET),this.width_=t,this.height_=e,this.svgRect_.setAttribute("width",t),this.svgRect_.setAttribute("height",e),this.svgRectTarget_.setAttribute("width",t),this.svgRectTarget_.setAttribute("height",e),this.svgHandleTarget_.setAttribute("width",t),this.svgHandleTarget_.setAttribute("height",tt.WorkspaceCommentSvg.TOP_OFFSET),this.RTL&&(this.svgRect_.setAttribute("transform","scale(-1 1)"),this.svgRectTarget_.setAttribute("transform","scale(-1 1)")),this.resizeGroup_&&(this.RTL?(this.resizeGroup_.setAttribute("transform","translate("+(-t+ue)+","+(e-ue)+") scale(-1 1)"),this.deleteGroup_.setAttribute("transform","translate("+(-t+ue)+","+-ue+") scale(-1 1)")):(this.resizeGroup_.setAttribute("transform","translate("+(t-ue)+","+(e-ue)+")"),this.deleteGroup_.setAttribute("transform","translate("+(t-ue)+","+-ue+")"))),this.resizeComment_()},tt.WorkspaceCommentSvg.prototype.disposeInternal_=function(){this.svgHandleTarget_=this.svgRectTarget_=this.foreignObject_=this.textarea_=null,this.disposed_=!0},tt.WorkspaceCommentSvg.prototype.setFocus=function(){var t=this;this.focused_=!0,setTimeout(function(){t.disposed_||(t.textarea_.focus(),t.addFocus(),(0,_.addClass)(t.svgRectTarget_,"blocklyCommentTargetFocused"),(0,_.addClass)(t.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},tt.WorkspaceCommentSvg.prototype.blurFocus=function(){var t=this;this.focused_=!1,setTimeout(function(){t.disposed_||(t.textarea_.blur(),t.removeFocus(),(0,_.removeClass)(t.svgRectTarget_,"blocklyCommentTargetFocused"),(0,_.removeClass)(t.svgHandleTarget_,"blocklyCommentHandleTargetFocused"))},0)},tt.WorkspaceCommentSvg.fromXmlRendered=function(t,e,o){(0,p.disable)();try{var i=St.WorkspaceComment.parseAttributes(t),s=new tt.WorkspaceCommentSvg(e,i.content,i.h,i.w,i.id);if(e.rendered&&(s.initSvg(!0),s.render()),!isNaN(i.x)&&!isNaN(i.y))if(e.RTL){var l=o||e.getWidth();s.moveBy(l-i.x,i.y)}else s.moveBy(i.x,i.y)}finally{(0,p.enable)()}return St.WorkspaceComment.fireCreateEvent(s),s},tt.WorkspaceCommentSvg.DEFAULT_SIZE=100,tt.WorkspaceCommentSvg.TOP_OFFSET=10,(0,O.register)(`
.blocklyCommentForeignObject {
  position: relative;
  z-index: 0;
}

.blocklyCommentRect {
  fill: #E7DE8E;
  stroke: #bcA903;
  stroke-width: 1px;
}

.blocklyCommentTarget {
  fill: transparent;
  stroke: #bcA903;
}

.blocklyCommentTargetFocused {
  fill: none;
}

.blocklyCommentHandleTarget {
  fill: none;
}

.blocklyCommentHandleTargetFocused {
  fill: transparent;
}

.blocklyFocused>.blocklyCommentRect {
  fill: #B9B272;
  stroke: #B9B272;
}

.blocklySelected>.blocklyCommentTarget {
  stroke: #fc3;
  stroke-width: 3px;
}

.blocklyCommentDeleteIcon {
  cursor: pointer;
  fill: #000;
  display: none;
}

.blocklySelected > .blocklyCommentDeleteIcon {
  display: block;
}

.blocklyDeleteIconShape {
  fill: #000;
  stroke: #000;
  stroke-width: 1px;
}

.blocklyDeleteIconShape.blocklyDeleteIconHighlighted {
  stroke: #fc3;
}
`);var $t={Trashcan:function(t){lo.DeleteArea.call(this),this.workspace_=t,this.id="trashcan",this.contents_=[],this.flyout=null,0>=this.workspace_.options.maxTrashcanContents||(this.isLidOpen=!1,this.minOpenness_=0,this.svgLid_=this.svgGroup_=null,this.top_=this.left_=this.lidOpen_=this.lidTask_=0,this.initialized_=!1,t=new Ee.Options({scrollbars:!0,parentWorkspace:this.workspace_,rtl:this.workspace_.RTL,oneBasedIndex:this.workspace_.options.oneBasedIndex,renderer:this.workspace_.options.renderer,rendererOverrides:this.workspace_.options.rendererOverrides,move:{scrollbars:!0}}),this.workspace_.horizontalLayout?(t.toolboxPosition=this.workspace_.toolboxPosition===q.Position.TOP?q.Position.BOTTOM:q.Position.TOP,this.flyout=new((0,b.getClassFromOptions)(b.Type.FLYOUTS_HORIZONTAL_TOOLBOX,this.workspace_.options,!0))(t)):(t.toolboxPosition=this.workspace_.toolboxPosition===q.Position.RIGHT?q.Position.LEFT:q.Position.RIGHT,this.flyout=new((0,b.getClassFromOptions)(b.Type.FLYOUTS_VERTICAL_TOOLBOX,this.workspace_.options,!0))(t)),this.workspace_.addChangeListener(this.onDelete_.bind(this)))}};n.$jscomp.inherits($t.Trashcan,lo.DeleteArea),$t.Trashcan.prototype.createDom=function(){this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{class:"blocklyTrash"},null);var t=String(Math.random()).substring(2),e=(0,_.createSvgElement)(R.Svg.CLIPPATH,{id:"blocklyTrashBodyClipPath"+t},this.svgGroup_);(0,_.createSvgElement)(R.Svg.RECT,{width:un,height:qn,y:pn},e);var o=(0,_.createSvgElement)(R.Svg.IMAGE,{width:Ie.SPRITE.width,x:-Li,height:Ie.SPRITE.height,y:-wi,"clip-path":"url(#blocklyTrashBodyClipPath"+t+")"},this.svgGroup_);return o.setAttributeNS(_.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Ie.SPRITE.url),e=(0,_.createSvgElement)(R.Svg.CLIPPATH,{id:"blocklyTrashLidClipPath"+t},this.svgGroup_),(0,_.createSvgElement)(R.Svg.RECT,{width:un,height:pn},e),this.svgLid_=(0,_.createSvgElement)(R.Svg.IMAGE,{width:Ie.SPRITE.width,x:-Li,height:Ie.SPRITE.height,y:-wi,"clip-path":"url(#blocklyTrashLidClipPath"+t+")"},this.svgGroup_),this.svgLid_.setAttributeNS(_.XLINK_NS,"xlink:href",this.workspace_.options.pathToMedia+Ie.SPRITE.url),(0,$.bind)(this.svgGroup_,"mousedown",this,this.blockMouseDownWhenOpenable_),(0,$.bind)(this.svgGroup_,"mouseup",this,this.click),(0,$.bind)(o,"mouseover",this,this.mouseOver_),(0,$.bind)(o,"mouseout",this,this.mouseOut_),this.animateLid_(),this.svgGroup_},$t.Trashcan.prototype.init=function(){0<this.workspace_.options.maxTrashcanContents&&((0,_.insertAfter)(this.flyout.createDom(R.Svg.SVG),this.workspace_.getParentSvg()),this.flyout.init(this.workspace_)),this.workspace_.getComponentManager().addComponent({component:this,weight:1,capabilities:[It.ComponentManager.Capability.AUTOHIDEABLE,It.ComponentManager.Capability.DELETE_AREA,It.ComponentManager.Capability.DRAG_TARGET,It.ComponentManager.Capability.POSITIONABLE]}),this.initialized_=!0,this.setLidOpen(!1)},$t.Trashcan.prototype.dispose=function(){this.workspace_.getComponentManager().removeComponent("trashcan"),this.svgGroup_&&((0,_.removeNode)(this.svgGroup_),this.svgGroup_=null),this.workspace_=this.svgLid_=null,clearTimeout(this.lidTask_)},$t.Trashcan.prototype.hasContents_=function(){return!!this.contents_.length},$t.Trashcan.prototype.contentsIsOpen=function(){return!!this.flyout&&this.flyout.isVisible()},$t.Trashcan.prototype.openFlyout=function(){if(!this.contentsIsOpen()){var t=this.contents_.map(function(e){return JSON.parse(e)});this.flyout.show(t),this.fireUiEvent_(!0)}},$t.Trashcan.prototype.closeFlyout=function(){this.contentsIsOpen()&&(this.flyout.hide(),this.fireUiEvent_(!1),this.workspace_.recordDragTargets())},$t.Trashcan.prototype.autoHide=function(t){!t&&this.flyout&&this.closeFlyout()},$t.Trashcan.prototype.emptyContents=function(){this.hasContents_()&&(this.contents_.length=0,this.setMinOpenness_(0),this.closeFlyout())},$t.Trashcan.prototype.position=function(t,e){if(this.initialized_){var o=(0,Xt.getCornerOppositeToolbox)(this.workspace_,t);t=(0,Xt.getStartPositionRect)(o,new jt.Size(un,qn+pn),Rl,Br,t,this.workspace_),e=(0,Xt.bumpPositionRect)(t,Br,o.vertical===Xt.verticalPosition.TOP?Xt.bumpDirection.DOWN:Xt.bumpDirection.UP,e),this.top_=e.top,this.left_=e.left,this.svgGroup_.setAttribute("transform","translate("+this.left_+","+this.top_+")")}},$t.Trashcan.prototype.getBoundingRectangle=function(){return new wt.Rect(this.top_,this.top_+qn+pn,this.left_,this.left_+un)},$t.Trashcan.prototype.getClientRect=function(){if(!this.svgGroup_)return null;var t=this.svgGroup_.getBoundingClientRect(),e=t.top+wi-Zn;return t=t.left+Li-Zn,new wt.Rect(e,e+pn+qn+2*Zn,t,t+un+2*Zn)},$t.Trashcan.prototype.onDragOver=function(t){this.setLidOpen(this.wouldDelete_)},$t.Trashcan.prototype.onDragExit=function(t){this.setLidOpen(!1)},$t.Trashcan.prototype.onDrop=function(t){setTimeout(this.setLidOpen.bind(this,!1),100)},$t.Trashcan.prototype.setLidOpen=function(t){this.isLidOpen!==t&&(clearTimeout(this.lidTask_),this.isLidOpen=t,this.animateLid_())},$t.Trashcan.prototype.animateLid_=function(){var t=bl,e=1/(t+1);this.lidOpen_+=this.isLidOpen?e:-e,this.lidOpen_=Math.min(Math.max(this.lidOpen_,this.minOpenness_),1),this.setLidAngle_(this.lidOpen_*Rr),this.svgGroup_.style.opacity=Ir+this.lidOpen_*(Ol-Ir),this.lidOpen_>this.minOpenness_&&1>this.lidOpen_&&(this.lidTask_=setTimeout(this.animateLid_.bind(this),$l/t))},$t.Trashcan.prototype.setLidAngle_=function(t){var e=this.workspace_.toolboxPosition===q.Position.RIGHT||this.workspace_.horizontalLayout&&this.workspace_.RTL;this.svgLid_.setAttribute("transform","rotate("+(e?-t:t)+","+(e?4:un-4)+","+(pn-2)+")")},$t.Trashcan.prototype.setMinOpenness_=function(t){this.minOpenness_=t,this.isLidOpen||this.setLidAngle_(t*Rr)},$t.Trashcan.prototype.closeLid=function(){this.setLidOpen(!1)},$t.Trashcan.prototype.click=function(){this.hasContents_()&&this.openFlyout()},$t.Trashcan.prototype.fireUiEvent_=function(t){t=new((0,p.get)(p.TRASHCAN_OPEN))(t,this.workspace_.id),(0,p.fire)(t)},$t.Trashcan.prototype.blockMouseDownWhenOpenable_=function(t){!this.contentsIsOpen()&&this.hasContents_()&&t.stopPropagation()},$t.Trashcan.prototype.mouseOver_=function(){this.hasContents_()&&this.setLidOpen(!0)},$t.Trashcan.prototype.mouseOut_=function(){this.setLidOpen(!1)},$t.Trashcan.prototype.onDelete_=function(t){if(!(0>=this.workspace_.options.maxTrashcanContents||t.type!==p.DELETE||t.type!==p.DELETE||t.wasShadow)&&(t=this.cleanBlockJson_(t.oldJson),this.contents_.indexOf(t)===-1)){for(this.contents_.unshift(t);this.contents_.length>this.workspace_.options.maxTrashcanContents;)this.contents_.pop();this.setMinOpenness_(Cl)}},$t.Trashcan.prototype.cleanBlockJson_=function(t){function e(o){if(o){if(delete o.id,delete o.x,delete o.y,delete o.enabled,o.icons&&o.icons.comment){var i=o.icons.comment;delete i.height,delete i.width,delete i.pinned}i=o.inputs;for(var s in i){var l=i[s];e(l.block),e(l.shadow)}o.next&&(o=o.next,e(o.block),e(o.shadow))}}return t=JSON.parse(JSON.stringify(t)),e(t),t.kind="BLOCK",JSON.stringify(t)};var un=47,qn=44,pn=16,Br=20,Rl=20,Zn=10,Li=0,wi=32,Cl=.1,$l=80,bl=4,Ir=.4,Ol=.8,Rr=45,me={FlyoutButton:function(t,e,o,i){this.workspace_=t,this.targetWorkspace_=e,this.text_=o.text,this.position_=new H.Coordinate(0,0),this.isLabel_=i,this.callbackKey_=o.callbackKey||o.callbackkey,this.cssClass_=o["web-class"]||null,this.onMouseUpWrapper_=null,this.info=o,this.height=this.width=0,this.svgText_=this.svgGroup_=null}};me.FlyoutButton.prototype.createDom=function(){var t=this.isLabel_?"blocklyFlyoutLabel":"blocklyFlyoutButton";this.cssClass_&&(t+=" "+this.cssClass_),this.svgGroup_=(0,_.createSvgElement)(R.Svg.G,{class:t},this.workspace_.getCanvas());var e;this.isLabel_||(e=(0,_.createSvgElement)(R.Svg.RECT,{class:"blocklyFlyoutButtonShadow",rx:4,ry:4,x:1,y:1},this.svgGroup_)),t=(0,_.createSvgElement)(R.Svg.RECT,{class:this.isLabel_?"blocklyFlyoutLabelBackground":"blocklyFlyoutButtonBackground",rx:4,ry:4},this.svgGroup_);var o=(0,_.createSvgElement)(R.Svg.TEXT,{class:this.isLabel_?"blocklyFlyoutLabelText":"blocklyText",x:0,y:0,"text-anchor":"middle"},this.svgGroup_),i=(0,mt.replaceMessageReferences)(this.text_);this.workspace_.RTL&&(i+="\u200F"),o.textContent=i,this.isLabel_&&(this.svgText_=o,this.workspace_.getThemeManager().subscribe(this.svgText_,"flyoutForegroundColour","fill"));var s=(0,Ct.getComputedStyle)(o,"fontSize"),l=(0,Ct.getComputedStyle)(o,"fontWeight"),h=(0,Ct.getComputedStyle)(o,"fontFamily");return this.width=(0,_.getFastTextWidthWithSizeString)(o,s,l,h),i=(0,_.measureFontMetrics)(i,s,l,h),this.height=i.height,this.isLabel_||(this.width+=2*me.FlyoutButton.TEXT_MARGIN_X,this.height+=2*me.FlyoutButton.TEXT_MARGIN_Y,e.setAttribute("width",this.width),e.setAttribute("height",this.height)),t.setAttribute("width",this.width),t.setAttribute("height",this.height),o.setAttribute("x",this.width/2),o.setAttribute("y",this.height/2-i.height/2+i.baseline),this.updateTransform_(),this.onMouseUpWrapper_=(0,$.conditionalBind)(this.svgGroup_,"mouseup",this,this.onMouseUp_),this.svgGroup_},me.FlyoutButton.prototype.show=function(){this.updateTransform_(),this.svgGroup_.setAttribute("display","block")},me.FlyoutButton.prototype.updateTransform_=function(){this.svgGroup_.setAttribute("transform","translate("+this.position_.x+","+this.position_.y+")")},me.FlyoutButton.prototype.moveTo=function(t,e){this.position_.x=t,this.position_.y=e,this.updateTransform_()},me.FlyoutButton.prototype.isLabel=function(){return this.isLabel_},me.FlyoutButton.prototype.getPosition=function(){return this.position_},me.FlyoutButton.prototype.getButtonText=function(){return this.text_},me.FlyoutButton.prototype.getTargetWorkspace=function(){return this.targetWorkspace_},me.FlyoutButton.prototype.dispose=function(){this.onMouseUpWrapper_&&(0,$.unbind)(this.onMouseUpWrapper_),this.svgGroup_&&(0,_.removeNode)(this.svgGroup_),this.svgText_&&this.workspace_.getThemeManager().unsubscribe(this.svgText_)},me.FlyoutButton.prototype.onMouseUp_=function(t){(t=this.targetWorkspace_.getGesture(t))&&t.cancel(),this.isLabel_&&this.callbackKey_?console.warn("Labels should not have callbacks. Label text: "+this.text_):this.isLabel_||this.callbackKey_&&this.targetWorkspace_.getButtonCallback(this.callbackKey_)?this.isLabel_||this.targetWorkspace_.getButtonCallback(this.callbackKey_)(this):console.warn("Buttons should have callbacks. Button text: "+this.text_)},me.FlyoutButton.TEXT_MARGIN_X=5,me.FlyoutButton.TEXT_MARGIN_Y=2,(0,O.register)(`
.blocklyFlyoutButton {
  fill: #888;
  cursor: default;
}

.blocklyFlyoutButtonShadow {
  fill: #666;
}

.blocklyFlyoutButton:hover {
  fill: #aaa;
}

.blocklyFlyoutLabel {
  cursor: default;
}

.blocklyFlyoutLabelBackground {
  opacity: 0;
}
`);var Al={BlocklyOptions:function(){}},Vo={CATEGORY_NAME:"VARIABLE_DYNAMIC",onCreateVariableButtonClick_String:function(t){(0,n.module$exports$Blockly$Variables.createVariableButtonHandler)(t.getTargetWorkspace(),void 0,"String")},onCreateVariableButtonClick_Number:function(t){(0,n.module$exports$Blockly$Variables.createVariableButtonHandler)(t.getTargetWorkspace(),void 0,"Number")},onCreateVariableButtonClick_Colour:function(t){(0,n.module$exports$Blockly$Variables.createVariableButtonHandler)(t.getTargetWorkspace(),void 0,"Colour")},flyoutCategory:function(t){var e=[],o=document.createElement("button");return o.setAttribute("text",n.module$exports$Blockly$Msg.Msg.NEW_STRING_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_STRING"),e.push(o),o=document.createElement("button"),o.setAttribute("text",n.module$exports$Blockly$Msg.Msg.NEW_NUMBER_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_NUMBER"),e.push(o),o=document.createElement("button"),o.setAttribute("text",n.module$exports$Blockly$Msg.Msg.NEW_COLOUR_VARIABLE),o.setAttribute("callbackKey","CREATE_VARIABLE_COLOUR"),e.push(o),t.registerButtonCallback("CREATE_VARIABLE_STRING",Vo.onCreateVariableButtonClick_String),t.registerButtonCallback("CREATE_VARIABLE_NUMBER",Vo.onCreateVariableButtonClick_Number),t.registerButtonCallback("CREATE_VARIABLE_COLOUR",Vo.onCreateVariableButtonClick_Colour),t=(0,Vo.flyoutCategoryBlocks)(t),e=e.concat(t)},flyoutCategoryBlocks:function(t){t=t.getAllVariables();var e=[];if(0<t.length){if(Lt.Blocks.variables_set_dynamic){var o=t[t.length-1],i=(0,n.module$exports$Blockly$utils$xml.createElement)("block");i.setAttribute("type","variables_set_dynamic"),i.setAttribute("gap",24),i.appendChild((0,n.module$exports$Blockly$Variables.generateVariableFieldDom)(o)),e.push(i)}if(Lt.Blocks.variables_get_dynamic)for(t.sort(Po.VariableModel.compareByName),o=0;i=t[o];o++){var s=(0,n.module$exports$Blockly$utils$xml.createElement)("block");s.setAttribute("type","variables_get_dynamic"),s.setAttribute("gap",8),s.appendChild((0,n.module$exports$Blockly$Variables.generateVariableFieldDom)(i)),e.push(s)}}return e}},xl={IRegistrableField:{}},Pi;n.module$exports$Blockly$Procedures={CATEGORY_NAME:"PROCEDURE",DEFAULT_ARG:"x",allProcedures:function(t){var e=t.getBlocksByType("procedures_defnoreturn",!1).map(function(o){return o.getProcedureDef()});return t=t.getBlocksByType("procedures_defreturn",!1).map(function(o){return o.getProcedureDef()}),e.sort(Pi),t.sort(Pi),[e,t]}},Pi=function(t,e){return t[0].localeCompare(e[0],void 0,{sensitivity:"base"})},n.module$exports$Blockly$Procedures.findLegalName=function(t,e){if(e.isInFlyout)return t;for(t=t||n.module$exports$Blockly$Msg.Msg.UNNAMED_KEY||"unnamed";!Ml(t,e.workspace,e);){var o=t.match(/^(.*?)(\d+)$/);t=o?o[1]+(parseInt(o[2],10)+1):t+"2"}return t};var Ml=function(t,e,o){return!(0,n.module$exports$Blockly$Procedures.isNameUsed)(t,e,o)};n.module$exports$Blockly$Procedures.isNameUsed=function(t,e,o){e=e.getAllBlocks(!1);for(var i=0;i<e.length;i++)if(e[i]!==o){var s=e[i];if(s.getProcedureDef&&(s=s.getProcedureDef(),n.module$exports$Blockly$Names.Names.equals(s[0],t)))return!0}return!1},n.module$exports$Blockly$Procedures.rename=function(t){t=t.trim();var e=(0,n.module$exports$Blockly$Procedures.findLegalName)(t,this.getSourceBlock()),o=this.getValue();if(o!==t&&o!==e){t=this.getSourceBlock().workspace.getAllBlocks(!1);for(var i=0;i<t.length;i++){var s=t[i];s.renameProcedure&&s.renameProcedure(o,e)}}return e},n.module$exports$Blockly$Procedures.flyoutCategory=function(t){function e(l,h){for(var S=0;S<l.length;S++){var C=l[S][0],x=l[S][1],F=(0,n.module$exports$Blockly$utils$xml.createElement)("block");F.setAttribute("type",h),F.setAttribute("gap",16);var it=(0,n.module$exports$Blockly$utils$xml.createElement)("mutation");for(it.setAttribute("name",C),F.appendChild(it),C=0;C<x.length;C++){var xt=(0,n.module$exports$Blockly$utils$xml.createElement)("arg");xt.setAttribute("name",x[C]),it.appendChild(xt)}o.push(F)}}var o=[];if(Lt.Blocks.procedures_defnoreturn){var i=(0,n.module$exports$Blockly$utils$xml.createElement)("block");i.setAttribute("type","procedures_defnoreturn"),i.setAttribute("gap",16);var s=(0,n.module$exports$Blockly$utils$xml.createElement)("field");s.setAttribute("name","NAME"),s.appendChild((0,n.module$exports$Blockly$utils$xml.createTextNode)(n.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_PROCEDURE)),i.appendChild(s),o.push(i)}return Lt.Blocks.procedures_defreturn&&(i=(0,n.module$exports$Blockly$utils$xml.createElement)("block"),i.setAttribute("type","procedures_defreturn"),i.setAttribute("gap",16),s=(0,n.module$exports$Blockly$utils$xml.createElement)("field"),s.setAttribute("name","NAME"),s.appendChild((0,n.module$exports$Blockly$utils$xml.createTextNode)(n.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_PROCEDURE)),i.appendChild(s),o.push(i)),Lt.Blocks.procedures_ifreturn&&(i=(0,n.module$exports$Blockly$utils$xml.createElement)("block"),i.setAttribute("type","procedures_ifreturn"),i.setAttribute("gap",16),o.push(i)),o.length&&o[o.length-1].setAttribute("gap",24),t=(0,n.module$exports$Blockly$Procedures.allProcedures)(t),e(t[0],"procedures_callnoreturn"),e(t[1],"procedures_callreturn"),o};var Cr=function(t){for(var e=[],o=t.getBlocksByType("procedures_mutatorarg",!1),i=0,s;s=o[i];i++)e.push(s.getFieldValue("NAME"));o=(0,n.module$exports$Blockly$utils$xml.createElement)("xml"),i=(0,n.module$exports$Blockly$utils$xml.createElement)("block"),i.setAttribute("type","procedures_mutatorarg"),s=(0,n.module$exports$Blockly$utils$xml.createElement)("field"),s.setAttribute("name","NAME"),e=(0,n.module$exports$Blockly$Variables.generateUniqueNameFromOptions)(n.module$exports$Blockly$Procedures.DEFAULT_ARG,e),e=(0,n.module$exports$Blockly$utils$xml.createTextNode)(e),s.appendChild(e),i.appendChild(s),o.appendChild(i),t.updateToolbox(o)};n.module$exports$Blockly$Procedures.mutatorOpenListener=function(t){if(t.type===p.BUBBLE_OPEN&&t.bubbleType==="mutator"&&t.isOpen){t=X.Workspace.getById(t.workspaceId).getBlockById(t.blockId);var e=t.type;(e==="procedures_defnoreturn"||e==="procedures_defreturn")&&(t=t.mutator.getWorkspace(),Cr(t),t.addChangeListener(Nl))}};var Nl=function(t){(t.type===p.CREATE||t.type===p.DELETE||t.type===p.CHANGE)&&(t=X.Workspace.getById(t.workspaceId),Cr(t))};n.module$exports$Blockly$Procedures.getCallers=function(t,e){var o=[];e=e.getAllBlocks(!1);for(var i=0;i<e.length;i++){var s=e[i];s.getProcedureCall&&(s=s.getProcedureCall())&&n.module$exports$Blockly$Names.Names.equals(s,t)&&o.push(e[i])}return o},n.module$exports$Blockly$Procedures.mutateCallers=function(t){var e=(0,p.getRecordUndo)(),o=t.getProcedureDef()[0],i=t.mutationToDom(!0);t=(0,n.module$exports$Blockly$Procedures.getCallers)(o,t.workspace),o=0;for(var s;s=t[o];o++){var l=s.mutationToDom();l=l&&(0,n.module$exports$Blockly$Xml.domToText)(l),s.domToMutation(i);var h=s.mutationToDom();h=h&&(0,n.module$exports$Blockly$Xml.domToText)(h),l!==h&&((0,p.setRecordUndo)(!1),(0,p.fire)(new((0,p.get)(p.CHANGE))(s,"mutation",null,l,h)),(0,p.setRecordUndo)(e))}},n.module$exports$Blockly$Procedures.getDefinition=function(t,e){e=e.getAllBlocks(!1);for(var o=0;o<e.length;o++){var i=e[o];if(i.getProcedureDef&&(i=i.getProcedureDef())&&n.module$exports$Blockly$Names.Names.equals(i[0],t))return e[o]}return null},n.Blockly={VERSION:"8.0.5"},n.Blockly.ALIGN_LEFT=n.module$exports$Blockly$Input.Align.LEFT,n.Blockly.ALIGN_CENTRE=n.module$exports$Blockly$Input.Align.CENTRE,n.Blockly.ALIGN_RIGHT=n.module$exports$Blockly$Input.Align.RIGHT,n.Blockly.INPUT_VALUE=n.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,n.Blockly.OUTPUT_VALUE=n.module$exports$Blockly$ConnectionType.ConnectionType.OUTPUT_VALUE,n.Blockly.NEXT_STATEMENT=n.module$exports$Blockly$ConnectionType.ConnectionType.NEXT_STATEMENT,n.Blockly.PREVIOUS_STATEMENT=n.module$exports$Blockly$ConnectionType.ConnectionType.PREVIOUS_STATEMENT,n.Blockly.DUMMY_INPUT=n.module$exports$Blockly$inputTypes.inputTypes.DUMMY,n.Blockly.TOOLBOX_AT_TOP=q.Position.TOP,n.Blockly.TOOLBOX_AT_BOTTOM=q.Position.BOTTOM,n.Blockly.TOOLBOX_AT_LEFT=q.Position.LEFT,n.Blockly.TOOLBOX_AT_RIGHT=q.Position.RIGHT,n.Blockly.svgResize=n.module$exports$Blockly$common.svgResize;var Dl=function(t){(0,n.module$exports$Blockly$common.getMainWorkspace)().hideChaff(t)};n.Blockly.hideChaff=Dl,n.Blockly.getMainWorkspace=n.module$exports$Blockly$common.getMainWorkspace,n.Blockly.defineBlocksWithJsonArray=n.module$exports$Blockly$common.defineBlocksWithJsonArray,n.Blockly.setParentContainer=n.module$exports$Blockly$common.setParentContainer,Object.defineProperties(n.Blockly,{alert:{set:function(t){(0,y.warn)("Blockly.alert","December 2021","December 2022"),(0,Kt.setAlert)(t)},get:function(){return(0,y.warn)("Blockly.alert","December 2021","December 2022","Blockly.dialog.alert()"),Kt.alert}},confirm:{set:function(t){(0,y.warn)("Blockly.confirm","December 2021","December 2022"),(0,Kt.setConfirm)(t)},get:function(){return(0,y.warn)("Blockly.confirm","December 2021","December 2022","Blockly.dialog.confirm()"),Kt.confirm}},mainWorkspace:{set:function(t){(0,n.module$exports$Blockly$common.setMainWorkspace)(t)},get:function(){return(0,n.module$exports$Blockly$common.getMainWorkspace)()}},prompt:{set:function(t){(0,y.warn)("Blockly.prompt","December 2021","December 2022"),(0,Kt.setPrompt)(t)},get:function(){return(0,y.warn)("Blockly.prompt","December 2021","December 2022","Blockly.dialog.prompt()"),Kt.prompt}},selected:{get:function(){return(0,n.module$exports$Blockly$common.getSelected)()},set:function(t){(0,n.module$exports$Blockly$common.setSelected)(t)}},HSV_SATURATION:{get:function(){return at.colour.getHsvSaturation()},set:function(t){at.colour.setHsvSaturation(t)}},HSV_VALUE:{get:function(){return at.colour.getHsvValue()},set:function(t){at.colour.setHsvValue(t)}}}),n.Blockly.svgSize=yt.svgSize;var Ll=function(t){(0,y.warn)("Blockly.resizeSvgContents","December 2021","December 2022","Blockly.WorkspaceSvg.resizeSvgContents"),(0,L.resizeSvgContents)(t)};n.Blockly.resizeSvgContents=Ll;var wl=function(t){(0,y.warn)("Blockly.copy","December 2021","December 2022","Blockly.clipboard.copy"),(0,Le.copy)(t)};n.Blockly.copy=wl;var Pl=function(){return(0,y.warn)("Blockly.paste","December 2021","December 2022","Blockly.clipboard.paste"),!!(0,Le.paste)()};n.Blockly.paste=Pl;var Fl=function(t){(0,y.warn)("Blockly.duplicate","December 2021","December 2022","Blockly.clipboard.duplicate"),(0,Le.duplicate)(t)};n.Blockly.duplicate=Fl;var Ul=function(t){return(0,y.warn)("Blockly.isNumber","December 2021","December 2022","Blockly.utils.string.isNumber"),at.string.isNumber(t)};n.Blockly.isNumber=Ul;var Gl=function(t){return(0,y.warn)("Blockly.hueToHex","December 2021","December 2022","Blockly.utils.colour.hueToHex"),(0,Et.hueToHex)(t)};n.Blockly.hueToHex=Gl;var Vl=function(t,e,o,i){return(0,y.warn)("Blockly.bindEvent_","December 2021","December 2022","Blockly.browserEvents.bind"),(0,$.bind)(t,e,o,i)};n.Blockly.bindEvent_=Vl;var Hl=function(t){return(0,y.warn)("Blockly.unbindEvent_","December 2021","December 2022","Blockly.browserEvents.unbind"),(0,$.unbind)(t)};n.Blockly.unbindEvent_=Hl;var Wl=function(t,e,o,i,s,l){return(0,y.warn)("Blockly.bindEventWithChecks_","December 2021","December 2022","Blockly.browserEvents.conditionalBind"),(0,$.conditionalBind)(t,e,o,i,s,l)};return n.Blockly.bindEventWithChecks_=Wl,n.Blockly.COLLAPSE_CHARS=Zt.COLLAPSE_CHARS,n.Blockly.DRAG_STACK=Zt.DRAG_STACK,n.Blockly.OPPOSITE_TYPE=Zt.OPPOSITE_TYPE,n.Blockly.RENAME_VARIABLE_ID=Zt.RENAME_VARIABLE_ID,n.Blockly.DELETE_VARIABLE_ID=Zt.DELETE_VARIABLE_ID,n.Blockly.COLLAPSED_INPUT_NAME=To.COLLAPSED_INPUT_NAME,n.Blockly.COLLAPSED_FIELD_NAME=To.COLLAPSED_FIELD_NAME,n.Blockly.VARIABLE_CATEGORY_NAME=n.module$exports$Blockly$Variables.CATEGORY_NAME,n.Blockly.VARIABLE_DYNAMIC_CATEGORY_NAME=Vo.CATEGORY_NAME,n.Blockly.PROCEDURE_CATEGORY_NAME=n.module$exports$Blockly$Procedures.CATEGORY_NAME,n.Blockly.ASTNode=A.ASTNode,n.Blockly.BasicCursor=de.BasicCursor,n.Blockly.Block=D.Block,n.Blockly.BlocklyOptions=Al.BlocklyOptions,n.Blockly.BlockDragger=te.BlockDragger,n.Blockly.BlockDragSurfaceSvg=Ce.BlockDragSurfaceSvg,n.Blockly.BlockSvg=V.BlockSvg,n.Blockly.Blocks=Lt.Blocks,n.Blockly.Bubble=W.Bubble,n.Blockly.BubbleDragger=ze.BubbleDragger,n.Blockly.CollapsibleToolboxCategory=Wt.CollapsibleToolboxCategory,n.Blockly.Comment=oe.Comment,n.Blockly.ComponentManager=It.ComponentManager,n.Blockly.Connection=j.Connection,n.Blockly.ConnectionType=n.module$exports$Blockly$ConnectionType.ConnectionType,n.Blockly.ConnectionChecker=fo.ConnectionChecker,n.Blockly.ConnectionDB=Ae.ConnectionDB,n.Blockly.ContextMenu=n.module$exports$Blockly$ContextMenu,n.Blockly.ContextMenuItems=Mt,n.Blockly.ContextMenuRegistry=dt.ContextMenuRegistry,n.Blockly.Css=O,n.Blockly.Cursor=Eo.Cursor,n.Blockly.DeleteArea=lo.DeleteArea,n.Blockly.DragTarget=So.DragTarget,n.Blockly.DropDownDiv=z,n.Blockly.Events=n.module$exports$Blockly$Events,n.Blockly.Extensions=n.module$exports$Blockly$Extensions,n.Blockly.Field=w.Field,n.Blockly.FieldAngle=ot.FieldAngle,n.Blockly.FieldCheckbox=n.module$exports$Blockly$FieldCheckbox.FieldCheckbox,n.Blockly.FieldColour=Rt.FieldColour,n.Blockly.FieldDropdown=n.module$exports$Blockly$FieldDropdown.FieldDropdown,n.Blockly.FieldImage=n.module$exports$Blockly$FieldImage.FieldImage,n.Blockly.FieldLabel=n.module$exports$Blockly$FieldLabel.FieldLabel,n.Blockly.FieldLabelSerializable=Wn.FieldLabelSerializable,n.Blockly.FieldMultilineInput=Jt.FieldMultilineInput,n.Blockly.FieldNumber=se.FieldNumber,n.Blockly.FieldTextInput=n.module$exports$Blockly$FieldTextInput.FieldTextInput,n.Blockly.FieldVariable=Ot.FieldVariable,n.Blockly.Flyout=ct.Flyout,n.Blockly.FlyoutButton=me.FlyoutButton,n.Blockly.FlyoutMetricsManager=nn.FlyoutMetricsManager,n.Blockly.Generator=n.module$exports$Blockly$Generator.Generator,n.Blockly.Gesture=et.Gesture,n.Blockly.Grid=Ye.Grid,n.Blockly.HorizontalFlyout=Me.HorizontalFlyout,n.Blockly.IASTNodeLocation=ys.IASTNodeLocation,n.Blockly.IASTNodeLocationSvg=ms.IASTNodeLocationSvg,n.Blockly.IASTNodeLocationWithBlock=Ts.IASTNodeLocationWithBlock,n.Blockly.IAutoHideable=gl.IAutoHideable,n.Blockly.IBlockDragger=xs.IBlockDragger,n.Blockly.IBoundedElement=Ys.IBoundedElement,n.Blockly.IBubble=Is.IBubble,n.Blockly.ICollapsibleToolboxItem=_l.ICollapsibleToolboxItem,n.Blockly.IComponent=al.IComponent,n.Blockly.IConnectionChecker=As.IConnectionChecker,n.Blockly.IContextMenu=vs.IContextMenu,n.Blockly.Icon=Dt.Icon,n.Blockly.ICopyable=zs.ICopyable,n.Blockly.IDeletable=Ss.IDeletable,n.Blockly.IDeleteArea=ul.IDeleteArea,n.Blockly.IDragTarget=cl.IDragTarget,n.Blockly.IDraggable=Bs.IDraggable,n.Blockly.IFlyout=pl.IFlyout,n.Blockly.IKeyboardAccessible=fs.IKeyboardAccessible,n.Blockly.IMetricsManager=tl.IMetricsManager,n.Blockly.IMovable=Ks.IMovable,n.Blockly.Input=n.module$exports$Blockly$Input.Input,n.Blockly.InsertionMarkerManager=vt.InsertionMarkerManager,n.Blockly.IPositionable=Bl.IPositionable,n.Blockly.IRegistrable=ks.IRegistrable,n.Blockly.IRegistrableField=xl.IRegistrableField,n.Blockly.ISelectable=Js.ISelectable,n.Blockly.ISelectableToolboxItem=dl.ISelectableToolboxItem,n.Blockly.IStyleable=yl.IStyleable,n.Blockly.IToolbox=ml.IToolbox,n.Blockly.IToolboxItem=hl.IToolboxItem,n.Blockly.Marker=so.Marker,n.Blockly.MarkerManager=be.MarkerManager,n.Blockly.Menu=Ut.Menu,n.Blockly.MenuItem=ae.MenuItem,n.Blockly.MetricsManager=ce.MetricsManager,n.Blockly.Mutator=n.module$exports$Blockly$Mutator.Mutator,n.Blockly.Msg=n.module$exports$Blockly$Msg.Msg,n.Blockly.Names=n.module$exports$Blockly$Names.Names,n.Blockly.Options=Ee.Options,n.Blockly.Procedures=n.module$exports$Blockly$Procedures,n.Blockly.RenderedConnection=gt.RenderedConnection,n.Blockly.Scrollbar=Z.Scrollbar,n.Blockly.ScrollbarPair=ve.ScrollbarPair,n.Blockly.ShortcutItems=ye,n.Blockly.ShortcutRegistry=J.ShortcutRegistry,n.Blockly.TabNavigateCursor=Hn.TabNavigateCursor,n.Blockly.Theme=ke.Theme,n.Blockly.Themes=Ni,n.Blockly.ThemeManager=vo.ThemeManager,n.Blockly.Toolbox=rt.Toolbox,n.Blockly.ToolboxCategory=lt.ToolboxCategory,n.Blockly.ToolboxItem=xe.ToolboxItem,n.Blockly.ToolboxSeparator=ao.ToolboxSeparator,n.Blockly.Tooltip=Q,n.Blockly.Touch=g,n.Blockly.TouchGesture=_e.TouchGesture,n.Blockly.Trashcan=$t.Trashcan,n.Blockly.VariableMap=Qt.VariableMap,n.Blockly.VariableModel=Po.VariableModel,n.Blockly.Variables=n.module$exports$Blockly$Variables,n.Blockly.VariablesDynamic=Vo,n.Blockly.VerticalFlyout=Be.VerticalFlyout,n.Blockly.Warning=po.Warning,n.Blockly.WidgetDiv=v,n.Blockly.Workspace=X.Workspace,n.Blockly.WorkspaceAudio=Uo.WorkspaceAudio,n.Blockly.WorkspaceComment=St.WorkspaceComment,n.Blockly.WorkspaceCommentSvg=tt.WorkspaceCommentSvg,n.Blockly.WorkspaceDragSurfaceSvg=wo.WorkspaceDragSurfaceSvg,n.Blockly.WorkspaceDragger=qo.WorkspaceDragger,n.Blockly.WorkspaceSvg=L.WorkspaceSvg,n.Blockly.Xml=n.module$exports$Blockly$Xml,n.Blockly.ZoomControls=Ge.ZoomControls,n.Blockly.blockAnimations=Je,n.Blockly.blockRendering=kt,n.Blockly.browserEvents=$,n.Blockly.bumpObjects=Co,n.Blockly.clipboard=Le,n.Blockly.common=n.module$exports$Blockly$common,n.Blockly.config=n.module$exports$Blockly$config.config,n.Blockly.connectionTypes=n.module$exports$Blockly$ConnectionType.ConnectionType,n.Blockly.constants=To,n.Blockly.dialog=Kt,n.Blockly.fieldRegistry=$e,n.Blockly.geras=uo,n.Blockly.inject=el.inject,n.Blockly.inputTypes=n.module$exports$Blockly$inputTypes.inputTypes,n.Blockly.minimalist=On,n.Blockly.registry=b,n.Blockly.serialization={blocks:zt,exceptions:Nt,priorities:pi,registry:hi,variables:fl,workspaces:Tl,ISerializer:wn.ISerializer},n.Blockly.thrasos=bi,n.Blockly.uiPosition=Xt,n.Blockly.utils=at,n.Blockly.zelos=Ze,"Blockly"in n.module$exports$Blockly$utils$global.globalThis||(n.module$exports$Blockly$utils$global.globalThis.Blockly={Msg:n.module$exports$Blockly$Msg.Msg}),n.Blockly.__namespace__=n,n.Blockly})}(blockly_compressed)),blockly_compressed.exports}var hasRequiredBlockly;function requireBlockly(){return hasRequiredBlockly||(hasRequiredBlockly=1,function(m,f){(function(n,r){m.exports=r(requireBlockly_compressed())})(commonjsGlobal,function(n){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return n})}(blockly$1)),blockly$1.exports}var hasRequiredCoreBrowser;function requireCoreBrowser(){return hasRequiredCoreBrowser||(hasRequiredCoreBrowser=1,function(m,f){(function(n,r){m.exports=r(requireBlockly())})(commonjsGlobal,function(n){return n.setLocale=function(r){Object.keys(r).forEach(function(y){n.Msg[y]=r[y]})},n})}(coreBrowser)),coreBrowser.exports}var python_compressed={exports:{}},hasRequiredPython_compressed;function requirePython_compressed(){return hasRequiredPython_compressed||(hasRequiredPython_compressed=1,function(m,f){(function(n,r){m.exports=r(requireBlockly_compressed())})(commonjsGlobal,function(n){var r=n.__namespace__,y=new r.module$exports$Blockly$Generator.Generator("Python");y.addReservedWords("False,None,True,and,as,assert,break,class,continue,def,del,elif,else,except,exec,finally,for,from,global,if,import,in,is,lambda,nonlocal,not,or,pass,print,raise,return,try,while,with,yield,NotImplemented,Ellipsis,__debug__,quit,exit,copyright,license,credits,ArithmeticError,AssertionError,AttributeError,BaseException,BlockingIOError,BrokenPipeError,BufferError,BytesWarning,ChildProcessError,ConnectionAbortedError,ConnectionError,ConnectionRefusedError,ConnectionResetError,DeprecationWarning,EOFError,Ellipsis,EnvironmentError,Exception,FileExistsError,FileNotFoundError,FloatingPointError,FutureWarning,GeneratorExit,IOError,ImportError,ImportWarning,IndentationError,IndexError,InterruptedError,IsADirectoryError,KeyError,KeyboardInterrupt,LookupError,MemoryError,ModuleNotFoundError,NameError,NotADirectoryError,NotImplemented,NotImplementedError,OSError,OverflowError,PendingDeprecationWarning,PermissionError,ProcessLookupError,RecursionError,ReferenceError,ResourceWarning,RuntimeError,RuntimeWarning,StandardError,StopAsyncIteration,StopIteration,SyntaxError,SyntaxWarning,SystemError,SystemExit,TabError,TimeoutError,TypeError,UnboundLocalError,UnicodeDecodeError,UnicodeEncodeError,UnicodeError,UnicodeTranslateError,UnicodeWarning,UserWarning,ValueError,Warning,ZeroDivisionError,_,__build_class__,__debug__,__doc__,__import__,__loader__,__name__,__package__,__spec__,abs,all,any,apply,ascii,basestring,bin,bool,buffer,bytearray,bytes,callable,chr,classmethod,cmp,coerce,compile,complex,copyright,credits,delattr,dict,dir,divmod,enumerate,eval,exec,execfile,exit,file,filter,float,format,frozenset,getattr,globals,hasattr,hash,help,hex,id,input,int,intern,isinstance,issubclass,iter,len,license,list,locals,long,map,max,memoryview,min,next,object,oct,open,ord,pow,print,property,quit,range,raw_input,reduce,reload,repr,reversed,round,set,setattr,slice,sorted,staticmethod,str,sum,super,tuple,type,unichr,unicode,vars,xrange,zip"),y.ORDER_ATOMIC=0,y.ORDER_COLLECTION=1,y.ORDER_STRING_CONVERSION=1,y.ORDER_MEMBER=2.1,y.ORDER_FUNCTION_CALL=2.2,y.ORDER_EXPONENTIATION=3,y.ORDER_UNARY_SIGN=4,y.ORDER_BITWISE_NOT=4,y.ORDER_MULTIPLICATIVE=5,y.ORDER_ADDITIVE=6,y.ORDER_BITWISE_SHIFT=7,y.ORDER_BITWISE_AND=8,y.ORDER_BITWISE_XOR=9,y.ORDER_BITWISE_OR=10,y.ORDER_RELATIONAL=11,y.ORDER_LOGICAL_NOT=12,y.ORDER_LOGICAL_AND=13,y.ORDER_LOGICAL_OR=14,y.ORDER_CONDITIONAL=15,y.ORDER_LAMBDA=16,y.ORDER_NONE=99,y.ORDER_OVERRIDES=[[y.ORDER_FUNCTION_CALL,y.ORDER_MEMBER],[y.ORDER_FUNCTION_CALL,y.ORDER_FUNCTION_CALL],[y.ORDER_MEMBER,y.ORDER_MEMBER],[y.ORDER_MEMBER,y.ORDER_FUNCTION_CALL],[y.ORDER_LOGICAL_NOT,y.ORDER_LOGICAL_NOT],[y.ORDER_LOGICAL_AND,y.ORDER_LOGICAL_AND],[y.ORDER_LOGICAL_OR,y.ORDER_LOGICAL_OR]],y.isInitialized=!1,y.init=function(c){Object.getPrototypeOf(this).init.call(this),this.PASS=this.INDENT+`pass
`,this.nameDB_?this.nameDB_.reset():this.nameDB_=new r.module$exports$Blockly$Names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(c.getVariableMap()),this.nameDB_.populateVariables(c),this.nameDB_.populateProcedures(c);for(var k=[],a=(0,r.module$exports$Blockly$Variables.allDeveloperVariables)(c),d=0;d<a.length;d++)k.push(this.nameDB_.getName(a[d],r.module$exports$Blockly$Names.Names.DEVELOPER_VARIABLE_TYPE)+" = None");for(c=(0,r.module$exports$Blockly$Variables.allUsedVarModels)(c),a=0;a<c.length;a++)k.push(this.nameDB_.getName(c[a].getId(),r.module$exports$Blockly$Names.NameType.VARIABLE)+" = None");this.definitions_.variables=k.join(`
`),this.isInitialized=!0},y.finish=function(c){var k=[],a=[],d;for(d in this.definitions_){var g=this.definitions_[d];g.match(/^(from\s+\S+\s+)?import\s+\S+/)?k.push(g):a.push(g)}return c=Object.getPrototypeOf(this).finish.call(this,c),this.isInitialized=!1,this.nameDB_.reset(),(k.join(`
`)+`

`+a.join(`

`)).replace(/\n\n+/g,`

`).replace(/\n*$/,`


`)+c},y.scrubNakedValue=function(c){return c+`
`},y.quote_=function(c){c=c.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`);var k="'";return c.indexOf("'")!==-1&&(c.indexOf('"')===-1?k='"':c=c.replace(/'/g,"\\'")),k+c+k},y.multiline_quote_=function(c){return c.split(/\n/g).map(this.quote_).join(` + '\\n' + 
`)},y.scrub_=function(c,k,a){var d="";if(!c.outputConnection||!c.outputConnection.targetConnection){var g=c.getCommentText();g&&(g=(0,r.module$exports$Blockly$utils$string.wrap)(g,this.COMMENT_WRAP-3),d+=this.prefixLines(g+`
`,"# "));for(var I=0;I<c.inputList.length;I++)c.inputList[I].type===r.module$exports$Blockly$inputTypes.inputTypes.VALUE&&(g=c.inputList[I].connection.targetBlock())&&(g=this.allNestedComments(g))&&(d+=this.prefixLines(g,"# "))}return c=c.nextConnection&&c.nextConnection.targetBlock(),a=a?"":this.blockToCode(c),d+k+a},y.getAdjustedInt=function(c,k,a,d){a=a||0,c.workspace.options.oneBasedIndex&&a--;var g=c.workspace.options.oneBasedIndex?"1":"0";return c=this.valueToCode(c,k,a?this.ORDER_ADDITIVE:this.ORDER_NONE)||g,(0,r.module$exports$Blockly$utils$string.isNumber)(c)?(c=parseInt(c,10)+a,d&&(c=-c)):(c=0<a?"int("+c+" + "+a+")":0>a?"int("+c+" - "+-a+")":"int("+c+")",d&&(c="-"+c)),c},r.Blockly.Python=y,r.Blockly.Python.variables_get=function(c){return[r.Blockly.Python.nameDB_.getName(c.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),r.Blockly.Python.ORDER_ATOMIC]},r.Blockly.Python.variables_set=function(c){var k=r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"0";return r.Blockly.Python.nameDB_.getName(c.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE)+" = "+k+`
`},r.Blockly.Python.variables_get_dynamic=r.Blockly.Python.variables_get,r.Blockly.Python.variables_set_dynamic=r.Blockly.Python.variables_set,r.Blockly.Python.text=function(c){return[r.Blockly.Python.quote_(c.getFieldValue("TEXT")),r.Blockly.Python.ORDER_ATOMIC]},r.Blockly.Python.text_multiline=function(c){c=r.Blockly.Python.multiline_quote_(c.getFieldValue("TEXT"));var k=c.indexOf("+")!==-1?r.Blockly.Python.ORDER_ADDITIVE:r.Blockly.Python.ORDER_ATOMIC;return[c,k]};var O=/^\s*'([^']|\\')*'\s*$/,P=function(c){return O.test(c)?[c,r.Blockly.Python.ORDER_ATOMIC]:["str("+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL]};return r.Blockly.Python.text_join=function(c){switch(c.itemCount_){case 0:return["''",r.Blockly.Python.ORDER_ATOMIC];case 1:return c=r.Blockly.Python.valueToCode(c,"ADD0",r.Blockly.Python.ORDER_NONE)||"''",P(c);case 2:var k=r.Blockly.Python.valueToCode(c,"ADD0",r.Blockly.Python.ORDER_NONE)||"''";return c=r.Blockly.Python.valueToCode(c,"ADD1",r.Blockly.Python.ORDER_NONE)||"''",[P(k)[0]+" + "+P(c)[0],r.Blockly.Python.ORDER_ADDITIVE];default:k=[];for(var a=0;a<c.itemCount_;a++)k[a]=r.Blockly.Python.valueToCode(c,"ADD"+a,r.Blockly.Python.ORDER_NONE)||"''";return c=r.Blockly.Python.nameDB_.getDistinctName("x",r.module$exports$Blockly$Names.NameType.VARIABLE),["''.join([str("+c+") for "+c+" in ["+k.join(", ")+"]])",r.Blockly.Python.ORDER_FUNCTION_CALL]}},r.Blockly.Python.text_append=function(c){var k=r.Blockly.Python.nameDB_.getName(c.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE);return c=r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_NONE)||"''",k+" = str("+k+") + "+P(c)[0]+`
`},r.Blockly.Python.text_length=function(c){return["len("+(r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"''")+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.text_isEmpty=function(c){return["not len("+(r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"''")+")",r.Blockly.Python.ORDER_LOGICAL_NOT]},r.Blockly.Python.text_indexOf=function(c){var k=c.getFieldValue("END")==="FIRST"?"find":"rfind",a=r.Blockly.Python.valueToCode(c,"FIND",r.Blockly.Python.ORDER_NONE)||"''";return k=(r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_MEMBER)||"''")+"."+k+"("+a+")",c.workspace.options.oneBasedIndex?[k+" + 1",r.Blockly.Python.ORDER_ADDITIVE]:[k,r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.text_charAt=function(c){var k=c.getFieldValue("WHERE")||"FROM_START",a=r.Blockly.Python.valueToCode(c,"VALUE",k==="RANDOM"?r.Blockly.Python.ORDER_NONE:r.Blockly.Python.ORDER_MEMBER)||"''";switch(k){case"FIRST":return[a+"[0]",r.Blockly.Python.ORDER_MEMBER];case"LAST":return[a+"[-1]",r.Blockly.Python.ORDER_MEMBER];case"FROM_START":return c=r.Blockly.Python.getAdjustedInt(c,"AT"),[a+"["+c+"]",r.Blockly.Python.ORDER_MEMBER];case"FROM_END":return c=r.Blockly.Python.getAdjustedInt(c,"AT",1,!0),[a+"["+c+"]",r.Blockly.Python.ORDER_MEMBER];case"RANDOM":return r.Blockly.Python.definitions_.import_random="import random",[r.Blockly.Python.provideFunction_("text_random_letter",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(text):
  x = int(random.random() * len(text))
  return text[x]
`)+"("+a+")",r.Blockly.Python.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},r.Blockly.Python.text_getSubstring=function(c){var k=c.getFieldValue("WHERE1"),a=c.getFieldValue("WHERE2"),d=r.Blockly.Python.valueToCode(c,"STRING",r.Blockly.Python.ORDER_MEMBER)||"''";switch(k){case"FROM_START":k=r.Blockly.Python.getAdjustedInt(c,"AT1"),k===0&&(k="");break;case"FROM_END":k=r.Blockly.Python.getAdjustedInt(c,"AT1",1,!0);break;case"FIRST":k="";break;default:throw Error("Unhandled option (text_getSubstring)")}switch(a){case"FROM_START":c=r.Blockly.Python.getAdjustedInt(c,"AT2",1);break;case"FROM_END":c=r.Blockly.Python.getAdjustedInt(c,"AT2",0,!0),(0,r.module$exports$Blockly$utils$string.isNumber)(String(c))?c===0&&(c=""):(r.Blockly.Python.definitions_.import_sys="import sys",c+=" or sys.maxsize");break;case"LAST":c="";break;default:throw Error("Unhandled option (text_getSubstring)")}return[d+"["+k+" : "+c+"]",r.Blockly.Python.ORDER_MEMBER]},r.Blockly.Python.text_changeCase=function(c){var k={UPPERCASE:".upper()",LOWERCASE:".lower()",TITLECASE:".title()"}[c.getFieldValue("CASE")];return[(r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_MEMBER)||"''")+k,r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.text_trim=function(c){var k={LEFT:".lstrip()",RIGHT:".rstrip()",BOTH:".strip()"}[c.getFieldValue("MODE")];return[(r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_MEMBER)||"''")+k,r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.text_print=function(c){return"print("+(r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_NONE)||"''")+`)
`},r.Blockly.Python.text_prompt_ext=function(c){var k=r.Blockly.Python.provideFunction_("text_prompt",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(msg):
  try:
    return raw_input(msg)
  except NameError:
    return input(msg)
`),a=c.getField("TEXT")?r.Blockly.Python.quote_(c.getFieldValue("TEXT")):r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_NONE)||"''";return k=k+"("+a+")",c.getFieldValue("TYPE")==="NUMBER"&&(k="float("+k+")"),[k,r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.text_prompt=r.Blockly.Python.text_prompt_ext,r.Blockly.Python.text_count=function(c){var k=r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_MEMBER)||"''";return c=r.Blockly.Python.valueToCode(c,"SUB",r.Blockly.Python.ORDER_NONE)||"''",[k+".count("+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.text_replace=function(c){var k=r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_MEMBER)||"''",a=r.Blockly.Python.valueToCode(c,"FROM",r.Blockly.Python.ORDER_NONE)||"''";return c=r.Blockly.Python.valueToCode(c,"TO",r.Blockly.Python.ORDER_NONE)||"''",[k+".replace("+a+", "+c+")",r.Blockly.Python.ORDER_MEMBER]},r.Blockly.Python.text_reverse=function(c){return[(r.Blockly.Python.valueToCode(c,"TEXT",r.Blockly.Python.ORDER_MEMBER)||"''")+"[::-1]",r.Blockly.Python.ORDER_MEMBER]},r.Blockly.Python.procedures_defreturn=function(c){for(var k=[],a=c.workspace,d=(0,r.module$exports$Blockly$Variables.allUsedVarModels)(a)||[],g=0,I;I=d[g];g++)I=I.name,c.getVars().indexOf(I)===-1&&k.push(r.Blockly.Python.nameDB_.getName(I,r.module$exports$Blockly$Names.NameType.VARIABLE));for(a=(0,r.module$exports$Blockly$Variables.allDeveloperVariables)(a),d=0;d<a.length;d++)k.push(r.Blockly.Python.nameDB_.getName(a[d],r.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE));a=k.length?r.Blockly.Python.INDENT+"global "+k.join(", ")+`
`:"",k=r.Blockly.Python.nameDB_.getName(c.getFieldValue("NAME"),r.module$exports$Blockly$Names.NameType.PROCEDURE),d="",r.Blockly.Python.STATEMENT_PREFIX&&(d+=r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_PREFIX,c)),r.Blockly.Python.STATEMENT_SUFFIX&&(d+=r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_SUFFIX,c)),d&&(d=r.Blockly.Python.prefixLines(d,r.Blockly.Python.INDENT)),g="",r.Blockly.Python.INFINITE_LOOP_TRAP&&(g=r.Blockly.Python.prefixLines(r.Blockly.Python.injectId(r.Blockly.Python.INFINITE_LOOP_TRAP,c),r.Blockly.Python.INDENT)),I=r.Blockly.Python.statementToCode(c,"STACK");var U=r.Blockly.Python.valueToCode(c,"RETURN",r.Blockly.Python.ORDER_NONE)||"",st="";I&&U&&(st=d),U?U=r.Blockly.Python.INDENT+"return "+U+`
`:I||(I=r.Blockly.Python.PASS);for(var G=[],$=c.getVars(),Pt=0;Pt<$.length;Pt++)G[Pt]=r.Blockly.Python.nameDB_.getName($[Pt],r.module$exports$Blockly$Names.NameType.VARIABLE);return a="def "+k+"("+G.join(", ")+`):
`+a+d+g+I+st+U,a=r.Blockly.Python.scrub_(c,a),r.Blockly.Python.definitions_["%"+k]=a,null},r.Blockly.Python.procedures_defnoreturn=r.Blockly.Python.procedures_defreturn,r.Blockly.Python.procedures_callreturn=function(c){for(var k=r.Blockly.Python.nameDB_.getName(c.getFieldValue("NAME"),r.module$exports$Blockly$Names.NameType.PROCEDURE),a=[],d=c.getVars(),g=0;g<d.length;g++)a[g]=r.Blockly.Python.valueToCode(c,"ARG"+g,r.Blockly.Python.ORDER_NONE)||"None";return[k+"("+a.join(", ")+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.procedures_callnoreturn=function(c){return r.Blockly.Python.procedures_callreturn(c)[0]+`
`},r.Blockly.Python.procedures_ifreturn=function(c){var k="if "+(r.Blockly.Python.valueToCode(c,"CONDITION",r.Blockly.Python.ORDER_NONE)||"False")+`:
`;return r.Blockly.Python.STATEMENT_SUFFIX&&(k+=r.Blockly.Python.prefixLines(r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_SUFFIX,c),r.Blockly.Python.INDENT)),c.hasReturnValue_?(c=r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"None",k+=r.Blockly.Python.INDENT+"return "+c+`
`):k+=r.Blockly.Python.INDENT+`return
`,k},r.Blockly.Python.addReservedWords("math,random,Number"),r.Blockly.Python.math_number=function(c){if(c=Number(c.getFieldValue("NUM")),c===1/0){c='float("inf")';var k=r.Blockly.Python.ORDER_FUNCTION_CALL}else c===-1/0?(c='-float("inf")',k=r.Blockly.Python.ORDER_UNARY_SIGN):k=0>c?r.Blockly.Python.ORDER_UNARY_SIGN:r.Blockly.Python.ORDER_ATOMIC;return[c,k]},r.Blockly.Python.math_arithmetic=function(c){var k={ADD:[" + ",r.Blockly.Python.ORDER_ADDITIVE],MINUS:[" - ",r.Blockly.Python.ORDER_ADDITIVE],MULTIPLY:[" * ",r.Blockly.Python.ORDER_MULTIPLICATIVE],DIVIDE:[" / ",r.Blockly.Python.ORDER_MULTIPLICATIVE],POWER:[" ** ",r.Blockly.Python.ORDER_EXPONENTIATION]}[c.getFieldValue("OP")],a=k[0];k=k[1];var d=r.Blockly.Python.valueToCode(c,"A",k)||"0";return c=r.Blockly.Python.valueToCode(c,"B",k)||"0",[d+a+c,k]},r.Blockly.Python.math_single=function(c){var k=c.getFieldValue("OP");if(k==="NEG"){var a=r.Blockly.Python.valueToCode(c,"NUM",r.Blockly.Python.ORDER_UNARY_SIGN)||"0";return["-"+a,r.Blockly.Python.ORDER_UNARY_SIGN]}switch(r.Blockly.Python.definitions_.import_math="import math",c=k==="SIN"||k==="COS"||k==="TAN"?r.Blockly.Python.valueToCode(c,"NUM",r.Blockly.Python.ORDER_MULTIPLICATIVE)||"0":r.Blockly.Python.valueToCode(c,"NUM",r.Blockly.Python.ORDER_NONE)||"0",k){case"ABS":a="math.fabs("+c+")";break;case"ROOT":a="math.sqrt("+c+")";break;case"LN":a="math.log("+c+")";break;case"LOG10":a="math.log10("+c+")";break;case"EXP":a="math.exp("+c+")";break;case"POW10":a="math.pow(10,"+c+")";break;case"ROUND":a="round("+c+")";break;case"ROUNDUP":a="math.ceil("+c+")";break;case"ROUNDDOWN":a="math.floor("+c+")";break;case"SIN":a="math.sin("+c+" / 180.0 * math.pi)";break;case"COS":a="math.cos("+c+" / 180.0 * math.pi)";break;case"TAN":a="math.tan("+c+" / 180.0 * math.pi)"}if(a)return[a,r.Blockly.Python.ORDER_FUNCTION_CALL];switch(k){case"ASIN":a="math.asin("+c+") / math.pi * 180";break;case"ACOS":a="math.acos("+c+") / math.pi * 180";break;case"ATAN":a="math.atan("+c+") / math.pi * 180";break;default:throw Error("Unknown math operator: "+k)}return[a,r.Blockly.Python.ORDER_MULTIPLICATIVE]},r.Blockly.Python.math_constant=function(c){var k={PI:["math.pi",r.Blockly.Python.ORDER_MEMBER],E:["math.e",r.Blockly.Python.ORDER_MEMBER],GOLDEN_RATIO:["(1 + math.sqrt(5)) / 2",r.Blockly.Python.ORDER_MULTIPLICATIVE],SQRT2:["math.sqrt(2)",r.Blockly.Python.ORDER_MEMBER],SQRT1_2:["math.sqrt(1.0 / 2)",r.Blockly.Python.ORDER_MEMBER],INFINITY:["float('inf')",r.Blockly.Python.ORDER_ATOMIC]};return c=c.getFieldValue("CONSTANT"),c!=="INFINITY"&&(r.Blockly.Python.definitions_.import_math="import math"),k[c]},r.Blockly.Python.math_number_property=function(c){var k={EVEN:[" % 2 == 0",r.Blockly.Python.ORDER_MULTIPLICATIVE,r.Blockly.Python.ORDER_RELATIONAL],ODD:[" % 2 == 1",r.Blockly.Python.ORDER_MULTIPLICATIVE,r.Blockly.Python.ORDER_RELATIONAL],WHOLE:[" % 1 == 0",r.Blockly.Python.ORDER_MULTIPLICATIVE,r.Blockly.Python.ORDER_RELATIONAL],POSITIVE:[" > 0",r.Blockly.Python.ORDER_RELATIONAL,r.Blockly.Python.ORDER_RELATIONAL],NEGATIVE:[" < 0",r.Blockly.Python.ORDER_RELATIONAL,r.Blockly.Python.ORDER_RELATIONAL],DIVISIBLE_BY:[null,r.Blockly.Python.ORDER_MULTIPLICATIVE,r.Blockly.Python.ORDER_RELATIONAL],PRIME:[null,r.Blockly.Python.ORDER_NONE,r.Blockly.Python.ORDER_FUNCTION_CALL]},a=c.getFieldValue("PROPERTY");k=r.$jscomp.makeIterator(k[a]);var d=k.next().value,g=k.next().value;if(k=k.next().value,g=r.Blockly.Python.valueToCode(c,"NUMBER_TO_CHECK",g)||"0",a==="PRIME")r.Blockly.Python.definitions_.import_math="import math",r.Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number",c=r.Blockly.Python.provideFunction_("math_isPrime",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(n):
  # https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  # If n is not a number but a string, try parsing it.
  if not isinstance(n, Number):
    try:
      n = float(n)
    except:
      return False
  if n == 2 or n == 3:
    return True
  # False if n is negative, is 1, or not whole, or if n is divisible by 2 or 3.
  if n <= 1 or n % 1 != 0 or n % 2 == 0 or n % 3 == 0:
    return False
  # Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for x in range(6, int(math.sqrt(n)) + 2, 6):
    if n % (x - 1) == 0 or n % (x + 1) == 0:
      return False
  return True
`)+"("+g+")";else if(a==="DIVISIBLE_BY"){if(c=r.Blockly.Python.valueToCode(c,"DIVISOR",r.Blockly.Python.ORDER_MULTIPLICATIVE)||"0",c==="0")return["False",r.Blockly.Python.ORDER_ATOMIC];c=g+" % "+c+" == 0"}else c=g+d;return[c,k]},r.Blockly.Python.math_change=function(c){r.Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number";var k=r.Blockly.Python.valueToCode(c,"DELTA",r.Blockly.Python.ORDER_ADDITIVE)||"0";return c=r.Blockly.Python.nameDB_.getName(c.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),c+" = ("+c+" if isinstance("+c+", Number) else 0) + "+k+`
`},r.Blockly.Python.math_round=r.Blockly.Python.math_single,r.Blockly.Python.math_trig=r.Blockly.Python.math_single,r.Blockly.Python.math_on_list=function(c){var k=c.getFieldValue("OP");switch(c=r.Blockly.Python.valueToCode(c,"LIST",r.Blockly.Python.ORDER_NONE)||"[]",k){case"SUM":k="sum("+c+")";break;case"MIN":k="min("+c+")";break;case"MAX":k="max("+c+")";break;case"AVERAGE":r.Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number",k=r.Blockly.Python.provideFunction_("math_mean",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(myList):
  localList = [e for e in myList if isinstance(e, Number)]
  if not localList: return
  return float(sum(localList)) / len(localList)
`)+"("+c+")";break;case"MEDIAN":r.Blockly.Python.definitions_.from_numbers_import_Number="from numbers import Number",k=r.Blockly.Python.provideFunction_("math_median",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(myList):
  localList = sorted([e for e in myList if isinstance(e, Number)])
  if not localList: return
  if len(localList) % 2 == 0:
    return (localList[len(localList) // 2 - 1] + localList[len(localList) // 2]) / 2.0
  else:
    return localList[(len(localList) - 1) // 2]
`)+"("+c+")";break;case"MODE":k=r.Blockly.Python.provideFunction_("math_modes",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(some_list):
  modes = []
  # Using a lists of [item, count] to keep count rather than dict
  # to avoid "unhashable" errors when the counted item is itself a list or dict.
  counts = []
  maxCount = 1
  for item in some_list:
    found = False
    for count in counts:
      if count[0] == item:
        count[1] += 1
        maxCount = max(maxCount, count[1])
        found = True
    if not found:
      counts.append([item, 1])
  for counted_item, item_count in counts:
    if item_count == maxCount:
      modes.append(counted_item)
  return modes
`)+"("+c+")";break;case"STD_DEV":r.Blockly.Python.definitions_.import_math="import math",k=r.Blockly.Python.provideFunction_("math_standard_deviation",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(numbers):
  n = len(numbers)
  if n == 0: return
  mean = float(sum(numbers)) / n
  variance = sum((x - mean) ** 2 for x in numbers) / n
  return math.sqrt(variance)
`)+"("+c+")";break;case"RANDOM":r.Blockly.Python.definitions_.import_random="import random",k="random.choice("+c+")";break;default:throw Error("Unknown operator: "+k)}return[k,r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.math_modulo=function(c){var k=r.Blockly.Python.valueToCode(c,"DIVIDEND",r.Blockly.Python.ORDER_MULTIPLICATIVE)||"0";return c=r.Blockly.Python.valueToCode(c,"DIVISOR",r.Blockly.Python.ORDER_MULTIPLICATIVE)||"0",[k+" % "+c,r.Blockly.Python.ORDER_MULTIPLICATIVE]},r.Blockly.Python.math_constrain=function(c){var k=r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"0",a=r.Blockly.Python.valueToCode(c,"LOW",r.Blockly.Python.ORDER_NONE)||"0";return c=r.Blockly.Python.valueToCode(c,"HIGH",r.Blockly.Python.ORDER_NONE)||"float('inf')",["min(max("+k+", "+a+"), "+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.math_random_int=function(c){r.Blockly.Python.definitions_.import_random="import random";var k=r.Blockly.Python.valueToCode(c,"FROM",r.Blockly.Python.ORDER_NONE)||"0";return c=r.Blockly.Python.valueToCode(c,"TO",r.Blockly.Python.ORDER_NONE)||"0",["random.randint("+k+", "+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.math_random_float=function(c){return r.Blockly.Python.definitions_.import_random="import random",["random.random()",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.math_atan2=function(c){r.Blockly.Python.definitions_.import_math="import math";var k=r.Blockly.Python.valueToCode(c,"X",r.Blockly.Python.ORDER_NONE)||"0";return["math.atan2("+(r.Blockly.Python.valueToCode(c,"Y",r.Blockly.Python.ORDER_NONE)||"0")+", "+k+") / math.pi * 180",r.Blockly.Python.ORDER_MULTIPLICATIVE]},r.Blockly.Python.controls_repeat_ext=function(c){var k=c.getField("TIMES")?String(parseInt(c.getFieldValue("TIMES"),10)):r.Blockly.Python.valueToCode(c,"TIMES",r.Blockly.Python.ORDER_NONE)||"0";k=(0,r.module$exports$Blockly$utils$string.isNumber)(k)?parseInt(k,10):"int("+k+")";var a=r.Blockly.Python.statementToCode(c,"DO");return a=r.Blockly.Python.addLoopTrap(a,c)||r.Blockly.Python.PASS,"for "+r.Blockly.Python.nameDB_.getDistinctName("count",r.module$exports$Blockly$Names.NameType.VARIABLE)+" in range("+k+`):
`+a},r.Blockly.Python.controls_repeat=r.Blockly.Python.controls_repeat_ext,r.Blockly.Python.controls_whileUntil=function(c){var k=c.getFieldValue("MODE")==="UNTIL",a=r.Blockly.Python.valueToCode(c,"BOOL",k?r.Blockly.Python.ORDER_LOGICAL_NOT:r.Blockly.Python.ORDER_NONE)||"False",d=r.Blockly.Python.statementToCode(c,"DO");return d=r.Blockly.Python.addLoopTrap(d,c)||r.Blockly.Python.PASS,k&&(a="not "+a),"while "+a+`:
`+d},r.Blockly.Python.controls_for=function(c){var k=r.Blockly.Python.nameDB_.getName(c.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),a=r.Blockly.Python.valueToCode(c,"FROM",r.Blockly.Python.ORDER_NONE)||"0",d=r.Blockly.Python.valueToCode(c,"TO",r.Blockly.Python.ORDER_NONE)||"0",g=r.Blockly.Python.valueToCode(c,"BY",r.Blockly.Python.ORDER_NONE)||"1",I=r.Blockly.Python.statementToCode(c,"DO");I=r.Blockly.Python.addLoopTrap(I,c)||r.Blockly.Python.PASS;var U="";c=function(){return r.Blockly.Python.provideFunction_("upRange",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(start, stop, step):
  while start <= stop:
    yield start
    start += abs(step)
`)};var st=function(){return r.Blockly.Python.provideFunction_("downRange",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(start, stop, step):
  while start >= stop:
    yield start
    start -= abs(step)
`)};if((0,r.module$exports$Blockly$utils$string.isNumber)(a)&&(0,r.module$exports$Blockly$utils$string.isNumber)(d)&&(0,r.module$exports$Blockly$utils$string.isNumber)(g))a=Number(a),d=Number(d),g=Math.abs(Number(g)),a%1===0&&d%1===0&&g%1===0?(a<=d?(d++,c=a===0&&g===1?d:a+", "+d,g!==1&&(c+=", "+g)):(d--,c=a+", "+d+", -"+g),c="range("+c+")"):(c=a<d?c():st(),c+="("+a+", "+d+", "+g+")");else{var G=function($,Pt){return(0,r.module$exports$Blockly$utils$string.isNumber)($)?$=Number($):$.match(/^\w+$/)?$="float("+$+")":(Pt=r.Blockly.Python.nameDB_.getDistinctName(k+Pt,r.module$exports$Blockly$Names.NameType.VARIABLE),U+=Pt+" = float("+$+`)
`,$=Pt),$};a=G(a,"_start"),d=G(d,"_end"),g=G(g,"_inc"),typeof a=="number"&&typeof d=="number"?(c=a<d?c():st(),c+="("+a+", "+d+", "+g+")"):c="("+a+" <= "+d+") and "+c()+"("+a+", "+d+", "+g+") or "+st()+"("+a+", "+d+", "+g+")"}return U+="for "+k+" in "+c+`:
`+I},r.Blockly.Python.controls_forEach=function(c){var k=r.Blockly.Python.nameDB_.getName(c.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),a=r.Blockly.Python.valueToCode(c,"LIST",r.Blockly.Python.ORDER_RELATIONAL)||"[]",d=r.Blockly.Python.statementToCode(c,"DO");return d=r.Blockly.Python.addLoopTrap(d,c)||r.Blockly.Python.PASS,"for "+k+" in "+a+`:
`+d},r.Blockly.Python.controls_flow_statements=function(c){var k="";if(r.Blockly.Python.STATEMENT_PREFIX&&(k+=r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_PREFIX,c)),r.Blockly.Python.STATEMENT_SUFFIX&&(k+=r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_SUFFIX,c)),r.Blockly.Python.STATEMENT_PREFIX){var a=c.getSurroundLoop();a&&!a.suppressPrefixSuffix&&(k+=r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_PREFIX,a))}switch(c.getFieldValue("FLOW")){case"BREAK":return k+`break
`;case"CONTINUE":return k+`continue
`}throw Error("Unknown flow statement.")},r.Blockly.Python.controls_if=function(c){var k=0,a="";r.Blockly.Python.STATEMENT_PREFIX&&(a+=r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_PREFIX,c));do{var d=r.Blockly.Python.valueToCode(c,"IF"+k,r.Blockly.Python.ORDER_NONE)||"False",g=r.Blockly.Python.statementToCode(c,"DO"+k)||r.Blockly.Python.PASS;r.Blockly.Python.STATEMENT_SUFFIX&&(g=r.Blockly.Python.prefixLines(r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_SUFFIX,c),r.Blockly.Python.INDENT)+g),a+=(k===0?"if ":"elif ")+d+`:
`+g,k++}while(c.getInput("IF"+k));return(c.getInput("ELSE")||r.Blockly.Python.STATEMENT_SUFFIX)&&(g=r.Blockly.Python.statementToCode(c,"ELSE")||r.Blockly.Python.PASS,r.Blockly.Python.STATEMENT_SUFFIX&&(g=r.Blockly.Python.prefixLines(r.Blockly.Python.injectId(r.Blockly.Python.STATEMENT_SUFFIX,c),r.Blockly.Python.INDENT)+g),a+=`else:
`+g),a},r.Blockly.Python.controls_ifelse=r.Blockly.Python.controls_if,r.Blockly.Python.logic_compare=function(c){var k={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[c.getFieldValue("OP")],a=r.Blockly.Python.ORDER_RELATIONAL,d=r.Blockly.Python.valueToCode(c,"A",a)||"0";return c=r.Blockly.Python.valueToCode(c,"B",a)||"0",[d+" "+k+" "+c,a]},r.Blockly.Python.logic_operation=function(c){var k=c.getFieldValue("OP")==="AND"?"and":"or",a=k==="and"?r.Blockly.Python.ORDER_LOGICAL_AND:r.Blockly.Python.ORDER_LOGICAL_OR,d=r.Blockly.Python.valueToCode(c,"A",a);if(c=r.Blockly.Python.valueToCode(c,"B",a),d||c){var g=k==="and"?"True":"False";d||(d=g),c||(c=g)}else c=d="False";return[d+" "+k+" "+c,a]},r.Blockly.Python.logic_negate=function(c){return["not "+(r.Blockly.Python.valueToCode(c,"BOOL",r.Blockly.Python.ORDER_LOGICAL_NOT)||"True"),r.Blockly.Python.ORDER_LOGICAL_NOT]},r.Blockly.Python.logic_boolean=function(c){return[c.getFieldValue("BOOL")==="TRUE"?"True":"False",r.Blockly.Python.ORDER_ATOMIC]},r.Blockly.Python.logic_null=function(c){return["None",r.Blockly.Python.ORDER_ATOMIC]},r.Blockly.Python.logic_ternary=function(c){var k=r.Blockly.Python.valueToCode(c,"IF",r.Blockly.Python.ORDER_CONDITIONAL)||"False",a=r.Blockly.Python.valueToCode(c,"THEN",r.Blockly.Python.ORDER_CONDITIONAL)||"None";return c=r.Blockly.Python.valueToCode(c,"ELSE",r.Blockly.Python.ORDER_CONDITIONAL)||"None",[a+" if "+k+" else "+c,r.Blockly.Python.ORDER_CONDITIONAL]},r.Blockly.Python.lists_create_empty=function(c){return["[]",r.Blockly.Python.ORDER_ATOMIC]},r.Blockly.Python.lists_create_with=function(c){for(var k=Array(c.itemCount_),a=0;a<c.itemCount_;a++)k[a]=r.Blockly.Python.valueToCode(c,"ADD"+a,r.Blockly.Python.ORDER_NONE)||"None";return["["+k.join(", ")+"]",r.Blockly.Python.ORDER_ATOMIC]},r.Blockly.Python.lists_repeat=function(c){var k=r.Blockly.Python.valueToCode(c,"ITEM",r.Blockly.Python.ORDER_NONE)||"None";return c=r.Blockly.Python.valueToCode(c,"NUM",r.Blockly.Python.ORDER_MULTIPLICATIVE)||"0",["["+k+"] * "+c,r.Blockly.Python.ORDER_MULTIPLICATIVE]},r.Blockly.Python.lists_length=function(c){return["len("+(r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"[]")+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.lists_isEmpty=function(c){return["not len("+(r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"[]")+")",r.Blockly.Python.ORDER_LOGICAL_NOT]},r.Blockly.Python.lists_indexOf=function(c){var k=r.Blockly.Python.valueToCode(c,"FIND",r.Blockly.Python.ORDER_NONE)||"[]",a=r.Blockly.Python.valueToCode(c,"VALUE",r.Blockly.Python.ORDER_NONE)||"''",d=" -1",g="",I=" - 1";return c.workspace.options.oneBasedIndex&&(d=" 0",g=" + 1",I=""),[(c.getFieldValue("END")==="FIRST"?r.Blockly.Python.provideFunction_("first_index",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(my_list, elem):
  try: index = my_list.index(elem)`+g+`
  except: index =`+d+`
  return index
`):r.Blockly.Python.provideFunction_("last_index",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(my_list, elem):
  try: index = len(my_list) - my_list[::-1].index(elem)`+I+`
  except: index =`+d+`
  return index
`))+"("+a+", "+k+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.lists_getIndex=function(c){var k=c.getFieldValue("MODE")||"GET",a=c.getFieldValue("WHERE")||"FROM_START",d=r.Blockly.Python.valueToCode(c,"VALUE",a==="RANDOM"?r.Blockly.Python.ORDER_NONE:r.Blockly.Python.ORDER_MEMBER)||"[]";switch(a){case"FIRST":if(k==="GET")return[d+"[0]",r.Blockly.Python.ORDER_MEMBER];if(k==="GET_REMOVE")return[d+".pop(0)",r.Blockly.Python.ORDER_FUNCTION_CALL];if(k==="REMOVE")return d+`.pop(0)
`;break;case"LAST":if(k==="GET")return[d+"[-1]",r.Blockly.Python.ORDER_MEMBER];if(k==="GET_REMOVE")return[d+".pop()",r.Blockly.Python.ORDER_FUNCTION_CALL];if(k==="REMOVE")return d+`.pop()
`;break;case"FROM_START":if(c=r.Blockly.Python.getAdjustedInt(c,"AT"),k==="GET")return[d+"["+c+"]",r.Blockly.Python.ORDER_MEMBER];if(k==="GET_REMOVE")return[d+".pop("+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL];if(k==="REMOVE")return d+".pop("+c+`)
`;break;case"FROM_END":if(c=r.Blockly.Python.getAdjustedInt(c,"AT",1,!0),k==="GET")return[d+"["+c+"]",r.Blockly.Python.ORDER_MEMBER];if(k==="GET_REMOVE")return[d+".pop("+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL];if(k==="REMOVE")return d+".pop("+c+`)
`;break;case"RANDOM":if(r.Blockly.Python.definitions_.import_random="import random",k==="GET")return["random.choice("+d+")",r.Blockly.Python.ORDER_FUNCTION_CALL];if(d=r.Blockly.Python.provideFunction_("lists_remove_random_item",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(myList):
  x = int(random.random() * len(myList))
  return myList.pop(x)
`)+"("+d+")",k==="GET_REMOVE")return[d,r.Blockly.Python.ORDER_FUNCTION_CALL];if(k==="REMOVE")return d+`
`}throw Error("Unhandled combination (lists_getIndex).")},r.Blockly.Python.lists_setIndex=function(c){var k=r.Blockly.Python.valueToCode(c,"LIST",r.Blockly.Python.ORDER_MEMBER)||"[]",a=c.getFieldValue("MODE")||"GET",d=c.getFieldValue("WHERE")||"FROM_START",g=r.Blockly.Python.valueToCode(c,"TO",r.Blockly.Python.ORDER_NONE)||"None";switch(d){case"FIRST":if(a==="SET")return k+"[0] = "+g+`
`;if(a==="INSERT")return k+".insert(0, "+g+`)
`;break;case"LAST":if(a==="SET")return k+"[-1] = "+g+`
`;if(a==="INSERT")return k+".append("+g+`)
`;break;case"FROM_START":if(c=r.Blockly.Python.getAdjustedInt(c,"AT"),a==="SET")return k+"["+c+"] = "+g+`
`;if(a==="INSERT")return k+".insert("+c+", "+g+`)
`;break;case"FROM_END":if(c=r.Blockly.Python.getAdjustedInt(c,"AT",1,!0),a==="SET")return k+"["+c+"] = "+g+`
`;if(a==="INSERT")return k+".insert("+c+", "+g+`)
`;break;case"RANDOM":if(r.Blockly.Python.definitions_.import_random="import random",k.match(/^\w+$/)?c="":(c=r.Blockly.Python.nameDB_.getDistinctName("tmp_list",r.module$exports$Blockly$Names.NameType.VARIABLE),d=c+" = "+k+`
`,k=c,c=d),d=r.Blockly.Python.nameDB_.getDistinctName("tmp_x",r.module$exports$Blockly$Names.NameType.VARIABLE),c+=d+" = int(random.random() * len("+k+`))
`,a==="SET")return c+(k+"["+d+"] = "+g+`
`);if(a==="INSERT")return c+(k+".insert("+d+", "+g+`)
`)}throw Error("Unhandled combination (lists_setIndex).")},r.Blockly.Python.lists_getSublist=function(c){var k=r.Blockly.Python.valueToCode(c,"LIST",r.Blockly.Python.ORDER_MEMBER)||"[]",a=c.getFieldValue("WHERE1"),d=c.getFieldValue("WHERE2");switch(a){case"FROM_START":a=r.Blockly.Python.getAdjustedInt(c,"AT1"),a===0&&(a="");break;case"FROM_END":a=r.Blockly.Python.getAdjustedInt(c,"AT1",1,!0);break;case"FIRST":a="";break;default:throw Error("Unhandled option (lists_getSublist)")}switch(d){case"FROM_START":c=r.Blockly.Python.getAdjustedInt(c,"AT2",1);break;case"FROM_END":c=r.Blockly.Python.getAdjustedInt(c,"AT2",0,!0),(0,r.module$exports$Blockly$utils$string.isNumber)(String(c))?c===0&&(c=""):(r.Blockly.Python.definitions_.import_sys="import sys",c+=" or sys.maxsize");break;case"LAST":c="";break;default:throw Error("Unhandled option (lists_getSublist)")}return[k+"["+a+" : "+c+"]",r.Blockly.Python.ORDER_MEMBER]},r.Blockly.Python.lists_sort=function(c){var k=r.Blockly.Python.valueToCode(c,"LIST",r.Blockly.Python.ORDER_NONE)||"[]",a=c.getFieldValue("TYPE");return c=c.getFieldValue("DIRECTION")==="1"?"False":"True",[r.Blockly.Python.provideFunction_("lists_sort",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(my_list, type, reverse):
  def try_float(s):
    try:
      return float(s)
    except:
      return 0
  key_funcs = {
    "NUMERIC": try_float,
    "TEXT": str,
    "IGNORE_CASE": lambda s: str(s).lower()
  }
  key_func = key_funcs[type]
  list_cpy = list(my_list)
  return sorted(list_cpy, key=key_func, reverse=reverse)
`)+"("+k+', "'+a+'", '+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.lists_split=function(c){var k=c.getFieldValue("MODE");if(k==="SPLIT")k=r.Blockly.Python.valueToCode(c,"INPUT",r.Blockly.Python.ORDER_MEMBER)||"''",c=r.Blockly.Python.valueToCode(c,"DELIM",r.Blockly.Python.ORDER_NONE),c=k+".split("+c+")";else if(k==="JOIN")k=r.Blockly.Python.valueToCode(c,"INPUT",r.Blockly.Python.ORDER_NONE)||"[]",c=(r.Blockly.Python.valueToCode(c,"DELIM",r.Blockly.Python.ORDER_MEMBER)||"''")+".join("+k+")";else throw Error("Unknown mode: "+k);return[c,r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.lists_reverse=function(c){return["list(reversed("+(r.Blockly.Python.valueToCode(c,"LIST",r.Blockly.Python.ORDER_NONE)||"[]")+"))",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.colour_picker=function(c){return[r.Blockly.Python.quote_(c.getFieldValue("COLOUR")),r.Blockly.Python.ORDER_ATOMIC]},r.Blockly.Python.colour_random=function(c){return r.Blockly.Python.definitions_.import_random="import random",["'#%06x' % random.randint(0, 2**24 - 1)",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.colour_rgb=function(c){var k=r.Blockly.Python.provideFunction_("colour_rgb",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(r, g, b):
  r = round(min(100, max(0, r)) * 2.55)
  g = round(min(100, max(0, g)) * 2.55)
  b = round(min(100, max(0, b)) * 2.55)
  return '#%02x%02x%02x' % (r, g, b)
`),a=r.Blockly.Python.valueToCode(c,"RED",r.Blockly.Python.ORDER_NONE)||0,d=r.Blockly.Python.valueToCode(c,"GREEN",r.Blockly.Python.ORDER_NONE)||0;return c=r.Blockly.Python.valueToCode(c,"BLUE",r.Blockly.Python.ORDER_NONE)||0,[k+"("+a+", "+d+", "+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.colour_blend=function(c){var k=r.Blockly.Python.provideFunction_("colour_blend",`
def `+r.Blockly.Python.FUNCTION_NAME_PLACEHOLDER_+`(colour1, colour2, ratio):
  r1, r2 = int(colour1[1:3], 16), int(colour2[1:3], 16)
  g1, g2 = int(colour1[3:5], 16), int(colour2[3:5], 16)
  b1, b2 = int(colour1[5:7], 16), int(colour2[5:7], 16)
  ratio = min(1, max(0, ratio))
  r = round(r1 * (1 - ratio) + r2 * ratio)
  g = round(g1 * (1 - ratio) + g2 * ratio)
  b = round(b1 * (1 - ratio) + b2 * ratio)
  return '#%02x%02x%02x' % (r, g, b)
`),a=r.Blockly.Python.valueToCode(c,"COLOUR1",r.Blockly.Python.ORDER_NONE)||"'#000000'",d=r.Blockly.Python.valueToCode(c,"COLOUR2",r.Blockly.Python.ORDER_NONE)||"'#000000'";return c=r.Blockly.Python.valueToCode(c,"RATIO",r.Blockly.Python.ORDER_NONE)||0,[k+"("+a+", "+d+", "+c+")",r.Blockly.Python.ORDER_FUNCTION_CALL]},r.Blockly.Python.__namespace__=r,r.Blockly.Python})}(python_compressed)),python_compressed.exports}(function(m,f){(function(n,r){m.exports=r(requireCoreBrowser(),requirePython_compressed())})(commonjsGlobal,function(n,r){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return r})})(python);const BlocklyPython=python.exports;var axios$3={exports:{}},axios$2={exports:{}},bind$2=function(f,n){return function(){for(var y=new Array(arguments.length),O=0;O<y.length;O++)y[O]=arguments[O];return f.apply(n,y)}},bind$1=bind$2,toString=Object.prototype.toString,kindOf=function(m){return function(f){var n=toString.call(f);return m[n]||(m[n]=n.slice(8,-1).toLowerCase())}}(Object.create(null));function kindOfTest(m){return m=m.toLowerCase(),function(n){return kindOf(n)===m}}function isArray(m){return Array.isArray(m)}function isUndefined(m){return typeof m>"u"}function isBuffer(m){return m!==null&&!isUndefined(m)&&m.constructor!==null&&!isUndefined(m.constructor)&&typeof m.constructor.isBuffer=="function"&&m.constructor.isBuffer(m)}var isArrayBuffer=kindOfTest("ArrayBuffer");function isArrayBufferView(m){var f;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?f=ArrayBuffer.isView(m):f=m&&m.buffer&&isArrayBuffer(m.buffer),f}function isString(m){return typeof m=="string"}function isNumber(m){return typeof m=="number"}function isObject(m){return m!==null&&typeof m=="object"}function isPlainObject(m){if(kindOf(m)!=="object")return!1;var f=Object.getPrototypeOf(m);return f===null||f===Object.prototype}var isDate=kindOfTest("Date"),isFile=kindOfTest("File"),isBlob=kindOfTest("Blob"),isFileList=kindOfTest("FileList");function isFunction(m){return toString.call(m)==="[object Function]"}function isStream(m){return isObject(m)&&isFunction(m.pipe)}function isFormData(m){var f="[object FormData]";return m&&(typeof FormData=="function"&&m instanceof FormData||toString.call(m)===f||isFunction(m.toString)&&m.toString()===f)}var isURLSearchParams=kindOfTest("URLSearchParams");function trim(m){return m.trim?m.trim():m.replace(/^\s+|\s+$/g,"")}function isStandardBrowserEnv(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function forEach(m,f){if(!(m===null||typeof m>"u"))if(typeof m!="object"&&(m=[m]),isArray(m))for(var n=0,r=m.length;n<r;n++)f.call(null,m[n],n,m);else for(var y in m)Object.prototype.hasOwnProperty.call(m,y)&&f.call(null,m[y],y,m)}function merge(){var m={};function f(y,O){isPlainObject(m[O])&&isPlainObject(y)?m[O]=merge(m[O],y):isPlainObject(y)?m[O]=merge({},y):isArray(y)?m[O]=y.slice():m[O]=y}for(var n=0,r=arguments.length;n<r;n++)forEach(arguments[n],f);return m}function extend(m,f,n){return forEach(f,function(y,O){n&&typeof y=="function"?m[O]=bind$1(y,n):m[O]=y}),m}function stripBOM(m){return m.charCodeAt(0)===65279&&(m=m.slice(1)),m}function inherits(m,f,n,r){m.prototype=Object.create(f.prototype,r),m.prototype.constructor=m,n&&Object.assign(m.prototype,n)}function toFlatObject(m,f,n){var r,y,O,P={};f=f||{};do{for(r=Object.getOwnPropertyNames(m),y=r.length;y-- >0;)O=r[y],P[O]||(f[O]=m[O],P[O]=!0);m=Object.getPrototypeOf(m)}while(m&&(!n||n(m,f))&&m!==Object.prototype);return f}function endsWith(m,f,n){m=String(m),(n===void 0||n>m.length)&&(n=m.length),n-=f.length;var r=m.indexOf(f,n);return r!==-1&&r===n}function toArray(m){if(!m)return null;var f=m.length;if(isUndefined(f))return null;for(var n=new Array(f);f-- >0;)n[f]=m[f];return n}var isTypedArray=function(m){return function(f){return m&&f instanceof m}}(typeof Uint8Array<"u"&&Object.getPrototypeOf(Uint8Array)),utils$b={isArray,isArrayBuffer,isBuffer,isFormData,isArrayBufferView,isString,isNumber,isObject,isPlainObject,isUndefined,isDate,isFile,isBlob,isFunction,isStream,isURLSearchParams,isStandardBrowserEnv,forEach,merge,extend,trim,stripBOM,inherits,toFlatObject,kindOf,kindOfTest,endsWith,toArray,isTypedArray,isFileList},utils$a=utils$b;function encode(m){return encodeURIComponent(m).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}var buildURL$1=function(f,n,r){if(!n)return f;var y;if(r)y=r(n);else if(utils$a.isURLSearchParams(n))y=n.toString();else{var O=[];utils$a.forEach(n,function(k,a){k===null||typeof k>"u"||(utils$a.isArray(k)?a=a+"[]":k=[k],utils$a.forEach(k,function(g){utils$a.isDate(g)?g=g.toISOString():utils$a.isObject(g)&&(g=JSON.stringify(g)),O.push(encode(a)+"="+encode(g))}))}),y=O.join("&")}if(y){var P=f.indexOf("#");P!==-1&&(f=f.slice(0,P)),f+=(f.indexOf("?")===-1?"?":"&")+y}return f},utils$9=utils$b;function InterceptorManager$1(){this.handlers=[]}InterceptorManager$1.prototype.use=function(f,n,r){return this.handlers.push({fulfilled:f,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1};InterceptorManager$1.prototype.eject=function(f){this.handlers[f]&&(this.handlers[f]=null)};InterceptorManager$1.prototype.forEach=function(f){utils$9.forEach(this.handlers,function(r){r!==null&&f(r)})};var InterceptorManager_1=InterceptorManager$1,utils$8=utils$b,normalizeHeaderName$1=function(f,n){utils$8.forEach(f,function(y,O){O!==n&&O.toUpperCase()===n.toUpperCase()&&(f[n]=y,delete f[O])})},utils$7=utils$b;function AxiosError$2(m,f,n,r,y){Error.call(this),this.message=m,this.name="AxiosError",f&&(this.code=f),n&&(this.config=n),r&&(this.request=r),y&&(this.response=y)}utils$7.inherits(AxiosError$2,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code,status:this.response&&this.response.status?this.response.status:null}}});var prototype=AxiosError$2.prototype,descriptors={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED"].forEach(function(m){descriptors[m]={value:m}});Object.defineProperties(AxiosError$2,descriptors);Object.defineProperty(prototype,"isAxiosError",{value:!0});AxiosError$2.from=function(m,f,n,r,y,O){var P=Object.create(prototype);return utils$7.toFlatObject(m,P,function(k){return k!==Error.prototype}),AxiosError$2.call(P,m.message,f,n,r,y),P.name=m.name,O&&Object.assign(P,O),P};var AxiosError_1=AxiosError$2,transitional={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},utils$6=utils$b;function toFormData$1(m,f){f=f||new FormData;var n=[];function r(O){return O===null?"":utils$6.isDate(O)?O.toISOString():utils$6.isArrayBuffer(O)||utils$6.isTypedArray(O)?typeof Blob=="function"?new Blob([O]):Buffer.from(O):O}function y(O,P){if(utils$6.isPlainObject(O)||utils$6.isArray(O)){if(n.indexOf(O)!==-1)throw Error("Circular reference detected in "+P);n.push(O),utils$6.forEach(O,function(k,a){if(!utils$6.isUndefined(k)){var d=P?P+"."+a:a,g;if(k&&!P&&typeof k=="object"){if(utils$6.endsWith(a,"{}"))k=JSON.stringify(k);else if(utils$6.endsWith(a,"[]")&&(g=utils$6.toArray(k))){g.forEach(function(I){!utils$6.isUndefined(I)&&f.append(d,r(I))});return}}y(k,d)}}),n.pop()}else f.append(P,r(O))}return y(m),f}var toFormData_1=toFormData$1,settle,hasRequiredSettle;function requireSettle(){if(hasRequiredSettle)return settle;hasRequiredSettle=1;var m=AxiosError_1;return settle=function(n,r,y){var O=y.config.validateStatus;!y.status||!O||O(y.status)?n(y):r(new m("Request failed with status code "+y.status,[m.ERR_BAD_REQUEST,m.ERR_BAD_RESPONSE][Math.floor(y.status/100)-4],y.config,y.request,y))},settle}var cookies,hasRequiredCookies;function requireCookies(){if(hasRequiredCookies)return cookies;hasRequiredCookies=1;var m=utils$b;return cookies=m.isStandardBrowserEnv()?function(){return{write:function(r,y,O,P,c,k){var a=[];a.push(r+"="+encodeURIComponent(y)),m.isNumber(O)&&a.push("expires="+new Date(O).toGMTString()),m.isString(P)&&a.push("path="+P),m.isString(c)&&a.push("domain="+c),k===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(r){var y=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return y?decodeURIComponent(y[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}(),cookies}var isAbsoluteURL$1=function(f){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(f)},combineURLs$1=function(f,n){return n?f.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):f},isAbsoluteURL=isAbsoluteURL$1,combineURLs=combineURLs$1,buildFullPath$1=function(f,n){return f&&!isAbsoluteURL(n)?combineURLs(f,n):n},parseHeaders,hasRequiredParseHeaders;function requireParseHeaders(){if(hasRequiredParseHeaders)return parseHeaders;hasRequiredParseHeaders=1;var m=utils$b,f=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return parseHeaders=function(r){var y={},O,P,c;return r&&m.forEach(r.split(`
`),function(a){if(c=a.indexOf(":"),O=m.trim(a.substr(0,c)).toLowerCase(),P=m.trim(a.substr(c+1)),O){if(y[O]&&f.indexOf(O)>=0)return;O==="set-cookie"?y[O]=(y[O]?y[O]:[]).concat([P]):y[O]=y[O]?y[O]+", "+P:P}}),y},parseHeaders}var isURLSameOrigin,hasRequiredIsURLSameOrigin;function requireIsURLSameOrigin(){if(hasRequiredIsURLSameOrigin)return isURLSameOrigin;hasRequiredIsURLSameOrigin=1;var m=utils$b;return isURLSameOrigin=m.isStandardBrowserEnv()?function(){var n=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a"),y;function O(P){var c=P;return n&&(r.setAttribute("href",c),c=r.href),r.setAttribute("href",c),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return y=O(window.location.href),function(c){var k=m.isString(c)?O(c):c;return k.protocol===y.protocol&&k.host===y.host}}():function(){return function(){return!0}}(),isURLSameOrigin}var CanceledError_1,hasRequiredCanceledError;function requireCanceledError(){if(hasRequiredCanceledError)return CanceledError_1;hasRequiredCanceledError=1;var m=AxiosError_1,f=utils$b;function n(r){m.call(this,r==null?"canceled":r,m.ERR_CANCELED),this.name="CanceledError"}return f.inherits(n,m,{__CANCEL__:!0}),CanceledError_1=n,CanceledError_1}var parseProtocol,hasRequiredParseProtocol;function requireParseProtocol(){return hasRequiredParseProtocol||(hasRequiredParseProtocol=1,parseProtocol=function(f){var n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(f);return n&&n[1]||""}),parseProtocol}var xhr,hasRequiredXhr;function requireXhr(){if(hasRequiredXhr)return xhr;hasRequiredXhr=1;var m=utils$b,f=requireSettle(),n=requireCookies(),r=buildURL$1,y=buildFullPath$1,O=requireParseHeaders(),P=requireIsURLSameOrigin(),c=transitional,k=AxiosError_1,a=requireCanceledError(),d=requireParseProtocol();return xhr=function(I){return new Promise(function(st,G){var $=I.data,Pt=I.headers,Te=I.responseType,Lt;function Oo(){I.cancelToken&&I.cancelToken.unsubscribe(Lt),I.signal&&I.signal.removeEventListener("abort",Lt)}m.isFormData($)&&m.isStandardBrowserEnv()&&delete Pt["Content-Type"];var nt=new XMLHttpRequest;if(I.auth){var Ao=I.auth.username||"",Ho=I.auth.password?unescape(encodeURIComponent(I.auth.password)):"";Pt.Authorization="Basic "+btoa(Ao+":"+Ho)}var Q=y(I.baseURL,I.url);nt.open(I.method.toUpperCase(),r(Q,I.params,I.paramsSerializer),!0),nt.timeout=I.timeout;function go(){if(!!nt){var pe="getAllResponseHeaders"in nt?O(nt.getAllResponseHeaders()):null,Re=!Te||Te==="text"||Te==="json"?nt.responseText:nt.response,ne={data:Re,status:nt.status,statusText:nt.statusText,headers:pe,config:I,request:nt};f(function(ie){st(ie),Oo()},function(ie){G(ie),Oo()},ne),nt=null}}if("onloadend"in nt?nt.onloadend=go:nt.onreadystatechange=function(){!nt||nt.readyState!==4||nt.status===0&&!(nt.responseURL&&nt.responseURL.indexOf("file:")===0)||setTimeout(go)},nt.onabort=function(){!nt||(G(new k("Request aborted",k.ECONNABORTED,I,nt)),nt=null)},nt.onerror=function(){G(new k("Network Error",k.ERR_NETWORK,I,nt,nt)),nt=null},nt.ontimeout=function(){var Re=I.timeout?"timeout of "+I.timeout+"ms exceeded":"timeout exceeded",ne=I.transitional||c;I.timeoutErrorMessage&&(Re=I.timeoutErrorMessage),G(new k(Re,ne.clarifyTimeoutError?k.ETIMEDOUT:k.ECONNABORTED,I,nt)),nt=null},m.isStandardBrowserEnv()){var oo=(I.withCredentials||P(Q))&&I.xsrfCookieName?n.read(I.xsrfCookieName):void 0;oo&&(Pt[I.xsrfHeaderName]=oo)}"setRequestHeader"in nt&&m.forEach(Pt,function(Re,ne){typeof $>"u"&&ne.toLowerCase()==="content-type"?delete Pt[ne]:nt.setRequestHeader(ne,Re)}),m.isUndefined(I.withCredentials)||(nt.withCredentials=!!I.withCredentials),Te&&Te!=="json"&&(nt.responseType=I.responseType),typeof I.onDownloadProgress=="function"&&nt.addEventListener("progress",I.onDownloadProgress),typeof I.onUploadProgress=="function"&&nt.upload&&nt.upload.addEventListener("progress",I.onUploadProgress),(I.cancelToken||I.signal)&&(Lt=function(pe){!nt||(G(!pe||pe&&pe.type?new a:pe),nt.abort(),nt=null)},I.cancelToken&&I.cancelToken.subscribe(Lt),I.signal&&(I.signal.aborted?Lt():I.signal.addEventListener("abort",Lt))),$||($=null);var Ve=d(Q);if(Ve&&["http","https","file"].indexOf(Ve)===-1){G(new k("Unsupported protocol "+Ve+":",k.ERR_BAD_REQUEST,I));return}nt.send($)})},xhr}var _null,hasRequired_null;function require_null(){return hasRequired_null||(hasRequired_null=1,_null=null),_null}var utils$5=utils$b,normalizeHeaderName=normalizeHeaderName$1,AxiosError$1=AxiosError_1,transitionalDefaults=transitional,toFormData=toFormData_1,DEFAULT_CONTENT_TYPE={"Content-Type":"application/x-www-form-urlencoded"};function setContentTypeIfUnset(m,f){!utils$5.isUndefined(m)&&utils$5.isUndefined(m["Content-Type"])&&(m["Content-Type"]=f)}function getDefaultAdapter(){var m;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(m=requireXhr()),m}function stringifySafely(m,f,n){if(utils$5.isString(m))try{return(f||JSON.parse)(m),utils$5.trim(m)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(m)}var defaults$3={transitional:transitionalDefaults,adapter:getDefaultAdapter(),transformRequest:[function(f,n){if(normalizeHeaderName(n,"Accept"),normalizeHeaderName(n,"Content-Type"),utils$5.isFormData(f)||utils$5.isArrayBuffer(f)||utils$5.isBuffer(f)||utils$5.isStream(f)||utils$5.isFile(f)||utils$5.isBlob(f))return f;if(utils$5.isArrayBufferView(f))return f.buffer;if(utils$5.isURLSearchParams(f))return setContentTypeIfUnset(n,"application/x-www-form-urlencoded;charset=utf-8"),f.toString();var r=utils$5.isObject(f),y=n&&n["Content-Type"],O;if((O=utils$5.isFileList(f))||r&&y==="multipart/form-data"){var P=this.env&&this.env.FormData;return toFormData(O?{"files[]":f}:f,P&&new P)}else if(r||y==="application/json")return setContentTypeIfUnset(n,"application/json"),stringifySafely(f);return f}],transformResponse:[function(f){var n=this.transitional||defaults$3.transitional,r=n&&n.silentJSONParsing,y=n&&n.forcedJSONParsing,O=!r&&this.responseType==="json";if(O||y&&utils$5.isString(f)&&f.length)try{return JSON.parse(f)}catch(P){if(O)throw P.name==="SyntaxError"?AxiosError$1.from(P,AxiosError$1.ERR_BAD_RESPONSE,this,null,this.response):P}return f}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:require_null()},validateStatus:function(f){return f>=200&&f<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};utils$5.forEach(["delete","get","head"],function(f){defaults$3.headers[f]={}});utils$5.forEach(["post","put","patch"],function(f){defaults$3.headers[f]=utils$5.merge(DEFAULT_CONTENT_TYPE)});var defaults_1=defaults$3,utils$4=utils$b,defaults$2=defaults_1,transformData$1=function(f,n,r){var y=this||defaults$2;return utils$4.forEach(r,function(P){f=P.call(y,f,n)}),f},isCancel$1,hasRequiredIsCancel;function requireIsCancel(){return hasRequiredIsCancel||(hasRequiredIsCancel=1,isCancel$1=function(f){return!!(f&&f.__CANCEL__)}),isCancel$1}var utils$3=utils$b,transformData=transformData$1,isCancel=requireIsCancel(),defaults$1=defaults_1,CanceledError=requireCanceledError();function throwIfCancellationRequested(m){if(m.cancelToken&&m.cancelToken.throwIfRequested(),m.signal&&m.signal.aborted)throw new CanceledError}var dispatchRequest$1=function(f){throwIfCancellationRequested(f),f.headers=f.headers||{},f.data=transformData.call(f,f.data,f.headers,f.transformRequest),f.headers=utils$3.merge(f.headers.common||{},f.headers[f.method]||{},f.headers),utils$3.forEach(["delete","get","head","post","put","patch","common"],function(y){delete f.headers[y]});var n=f.adapter||defaults$1.adapter;return n(f).then(function(y){return throwIfCancellationRequested(f),y.data=transformData.call(f,y.data,y.headers,f.transformResponse),y},function(y){return isCancel(y)||(throwIfCancellationRequested(f),y&&y.response&&(y.response.data=transformData.call(f,y.response.data,y.response.headers,f.transformResponse))),Promise.reject(y)})},utils$2=utils$b,mergeConfig$2=function(f,n){n=n||{};var r={};function y(d,g){return utils$2.isPlainObject(d)&&utils$2.isPlainObject(g)?utils$2.merge(d,g):utils$2.isPlainObject(g)?utils$2.merge({},g):utils$2.isArray(g)?g.slice():g}function O(d){if(utils$2.isUndefined(n[d])){if(!utils$2.isUndefined(f[d]))return y(void 0,f[d])}else return y(f[d],n[d])}function P(d){if(!utils$2.isUndefined(n[d]))return y(void 0,n[d])}function c(d){if(utils$2.isUndefined(n[d])){if(!utils$2.isUndefined(f[d]))return y(void 0,f[d])}else return y(void 0,n[d])}function k(d){if(d in n)return y(f[d],n[d]);if(d in f)return y(void 0,f[d])}var a={url:P,method:P,data:P,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:k};return utils$2.forEach(Object.keys(f).concat(Object.keys(n)),function(g){var I=a[g]||O,U=I(g);utils$2.isUndefined(U)&&I!==k||(r[g]=U)}),r},data,hasRequiredData;function requireData(){return hasRequiredData||(hasRequiredData=1,data={version:"0.27.2"}),data}var VERSION=requireData().version,AxiosError=AxiosError_1,validators$1={};["object","boolean","number","function","string","symbol"].forEach(function(m,f){validators$1[m]=function(r){return typeof r===m||"a"+(f<1?"n ":" ")+m}});var deprecatedWarnings={};validators$1.transitional=function(f,n,r){function y(O,P){return"[Axios v"+VERSION+"] Transitional option '"+O+"'"+P+(r?". "+r:"")}return function(O,P,c){if(f===!1)throw new AxiosError(y(P," has been removed"+(n?" in "+n:"")),AxiosError.ERR_DEPRECATED);return n&&!deprecatedWarnings[P]&&(deprecatedWarnings[P]=!0,console.warn(y(P," has been deprecated since v"+n+" and will be removed in the near future"))),f?f(O,P,c):!0}};function assertOptions(m,f,n){if(typeof m!="object")throw new AxiosError("options must be an object",AxiosError.ERR_BAD_OPTION_VALUE);for(var r=Object.keys(m),y=r.length;y-- >0;){var O=r[y],P=f[O];if(P){var c=m[O],k=c===void 0||P(c,O,m);if(k!==!0)throw new AxiosError("option "+O+" must be "+k,AxiosError.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new AxiosError("Unknown option "+O,AxiosError.ERR_BAD_OPTION)}}var validator$1={assertOptions,validators:validators$1},utils$1=utils$b,buildURL=buildURL$1,InterceptorManager=InterceptorManager_1,dispatchRequest=dispatchRequest$1,mergeConfig$1=mergeConfig$2,buildFullPath=buildFullPath$1,validator=validator$1,validators=validator.validators;function Axios$1(m){this.defaults=m,this.interceptors={request:new InterceptorManager,response:new InterceptorManager}}Axios$1.prototype.request=function(f,n){typeof f=="string"?(n=n||{},n.url=f):n=f||{},n=mergeConfig$1(this.defaults,n),n.method?n.method=n.method.toLowerCase():this.defaults.method?n.method=this.defaults.method.toLowerCase():n.method="get";var r=n.transitional;r!==void 0&&validator.assertOptions(r,{silentJSONParsing:validators.transitional(validators.boolean),forcedJSONParsing:validators.transitional(validators.boolean),clarifyTimeoutError:validators.transitional(validators.boolean)},!1);var y=[],O=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(n)===!1||(O=O&&U.synchronous,y.unshift(U.fulfilled,U.rejected))});var P=[];this.interceptors.response.forEach(function(U){P.push(U.fulfilled,U.rejected)});var c;if(!O){var k=[dispatchRequest,void 0];for(Array.prototype.unshift.apply(k,y),k=k.concat(P),c=Promise.resolve(n);k.length;)c=c.then(k.shift(),k.shift());return c}for(var a=n;y.length;){var d=y.shift(),g=y.shift();try{a=d(a)}catch(I){g(I);break}}try{c=dispatchRequest(a)}catch(I){return Promise.reject(I)}for(;P.length;)c=c.then(P.shift(),P.shift());return c};Axios$1.prototype.getUri=function(f){f=mergeConfig$1(this.defaults,f);var n=buildFullPath(f.baseURL,f.url);return buildURL(n,f.params,f.paramsSerializer)};utils$1.forEach(["delete","get","head","options"],function(f){Axios$1.prototype[f]=function(n,r){return this.request(mergeConfig$1(r||{},{method:f,url:n,data:(r||{}).data}))}});utils$1.forEach(["post","put","patch"],function(f){function n(r){return function(O,P,c){return this.request(mergeConfig$1(c||{},{method:f,headers:r?{"Content-Type":"multipart/form-data"}:{},url:O,data:P}))}}Axios$1.prototype[f]=n(),Axios$1.prototype[f+"Form"]=n(!0)});var Axios_1=Axios$1,CancelToken_1,hasRequiredCancelToken;function requireCancelToken(){if(hasRequiredCancelToken)return CancelToken_1;hasRequiredCancelToken=1;var m=requireCanceledError();function f(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var r;this.promise=new Promise(function(P){r=P});var y=this;this.promise.then(function(O){if(!!y._listeners){var P,c=y._listeners.length;for(P=0;P<c;P++)y._listeners[P](O);y._listeners=null}}),this.promise.then=function(O){var P,c=new Promise(function(k){y.subscribe(k),P=k}).then(O);return c.cancel=function(){y.unsubscribe(P)},c},n(function(P){y.reason||(y.reason=new m(P),r(y.reason))})}return f.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},f.prototype.subscribe=function(r){if(this.reason){r(this.reason);return}this._listeners?this._listeners.push(r):this._listeners=[r]},f.prototype.unsubscribe=function(r){if(!!this._listeners){var y=this._listeners.indexOf(r);y!==-1&&this._listeners.splice(y,1)}},f.source=function(){var r,y=new f(function(P){r=P});return{token:y,cancel:r}},CancelToken_1=f,CancelToken_1}var spread,hasRequiredSpread;function requireSpread(){return hasRequiredSpread||(hasRequiredSpread=1,spread=function(f){return function(r){return f.apply(null,r)}}),spread}var isAxiosError,hasRequiredIsAxiosError;function requireIsAxiosError(){if(hasRequiredIsAxiosError)return isAxiosError;hasRequiredIsAxiosError=1;var m=utils$b;return isAxiosError=function(n){return m.isObject(n)&&n.isAxiosError===!0},isAxiosError}var utils=utils$b,bind=bind$2,Axios=Axios_1,mergeConfig=mergeConfig$2,defaults=defaults_1;function createInstance(m){var f=new Axios(m),n=bind(Axios.prototype.request,f);return utils.extend(n,Axios.prototype,f),utils.extend(n,f),n.create=function(y){return createInstance(mergeConfig(m,y))},n}var axios$1=createInstance(defaults);axios$1.Axios=Axios;axios$1.CanceledError=requireCanceledError();axios$1.CancelToken=requireCancelToken();axios$1.isCancel=requireIsCancel();axios$1.VERSION=requireData().version;axios$1.toFormData=toFormData_1;axios$1.AxiosError=AxiosError_1;axios$1.Cancel=axios$1.CanceledError;axios$1.all=function(f){return Promise.all(f)};axios$1.spread=requireSpread();axios$1.isAxiosError=requireIsAxiosError();axios$2.exports=axios$1;axios$2.exports.default=axios$1;(function(m){m.exports=axios$2.exports})(axios$3);const axios=getDefaultExportFromCjs(axios$3.exports);var blockly={exports:{}},browser={exports:{}},en={exports:{}},hasRequiredEn;function requireEn(){return hasRequiredEn||(hasRequiredEn=1,function(m,f){(function(n,r){m.exports=r()})(commonjsGlobal,function(){var n=n||{Msg:Object.create(null)};return n.Msg.ADD_COMMENT="Add Comment",n.Msg.CANNOT_DELETE_VARIABLE_PROCEDURE="Can't delete the variable '%1' because it's part of the definition of the function '%2'",n.Msg.CHANGE_VALUE_TITLE="Change value:",n.Msg.CLEAN_UP="Clean up Blocks",n.Msg.COLLAPSED_WARNINGS_WARNING="Collapsed blocks contain warnings.",n.Msg.COLLAPSE_ALL="Collapse Blocks",n.Msg.COLLAPSE_BLOCK="Collapse Block",n.Msg.COLOUR_BLEND_COLOUR1="colour 1",n.Msg.COLOUR_BLEND_COLOUR2="colour 2",n.Msg.COLOUR_BLEND_HELPURL="https://meyerweb.com/eric/tools/color-blend/#:::rgbp",n.Msg.COLOUR_BLEND_RATIO="ratio",n.Msg.COLOUR_BLEND_TITLE="blend",n.Msg.COLOUR_BLEND_TOOLTIP="Blends two colours together with a given ratio (0.0 - 1.0).",n.Msg.COLOUR_PICKER_HELPURL="https://en.wikipedia.org/wiki/Color",n.Msg.COLOUR_PICKER_TOOLTIP="Choose a colour from the palette.",n.Msg.COLOUR_RANDOM_HELPURL="http://randomcolour.com",n.Msg.COLOUR_RANDOM_TITLE="random colour",n.Msg.COLOUR_RANDOM_TOOLTIP="Choose a colour at random.",n.Msg.COLOUR_RGB_BLUE="blue",n.Msg.COLOUR_RGB_GREEN="green",n.Msg.COLOUR_RGB_HELPURL="https://www.december.com/html/spec/colorpercompact.html",n.Msg.COLOUR_RGB_RED="red",n.Msg.COLOUR_RGB_TITLE="colour with",n.Msg.COLOUR_RGB_TOOLTIP="Create a colour with the specified amount of red, green, and blue. All values must be between 0 and 100.",n.Msg.CONTROLS_FLOW_STATEMENTS_HELPURL="https://github.com/google/blockly/wiki/Loops#loop-termination-blocks",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK="break out of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE="continue with next iteration of loop",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK="Break out of the containing loop.",n.Msg.CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE="Skip the rest of this loop, and continue with the next iteration.",n.Msg.CONTROLS_FLOW_STATEMENTS_WARNING="Warning: This block may only be used within a loop.",n.Msg.CONTROLS_FOREACH_HELPURL="https://github.com/google/blockly/wiki/Loops#for-each",n.Msg.CONTROLS_FOREACH_TITLE="for each item %1 in list %2",n.Msg.CONTROLS_FOREACH_TOOLTIP="For each item in a list, set the variable '%1' to the item, and then do some statements.",n.Msg.CONTROLS_FOR_HELPURL="https://github.com/google/blockly/wiki/Loops#count-with",n.Msg.CONTROLS_FOR_TITLE="count with %1 from %2 to %3 by %4",n.Msg.CONTROLS_FOR_TOOLTIP="Have the variable '%1' take on the values from the start number to the end number, counting by the specified interval, and do the specified blocks.",n.Msg.CONTROLS_IF_ELSEIF_TOOLTIP="Add a condition to the if block.",n.Msg.CONTROLS_IF_ELSE_TOOLTIP="Add a final, catch-all condition to the if block.",n.Msg.CONTROLS_IF_HELPURL="https://github.com/google/blockly/wiki/IfElse",n.Msg.CONTROLS_IF_IF_TOOLTIP="Add, remove, or reorder sections to reconfigure this if block.",n.Msg.CONTROLS_IF_MSG_ELSE="else",n.Msg.CONTROLS_IF_MSG_ELSEIF="else if",n.Msg.CONTROLS_IF_MSG_IF="if",n.Msg.CONTROLS_IF_TOOLTIP_1="If a value is true, then do some statements.",n.Msg.CONTROLS_IF_TOOLTIP_2="If a value is true, then do the first block of statements. Otherwise, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_3="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements.",n.Msg.CONTROLS_IF_TOOLTIP_4="If the first value is true, then do the first block of statements. Otherwise, if the second value is true, do the second block of statements. If none of the values are true, do the last block of statements.",n.Msg.CONTROLS_REPEAT_HELPURL="https://en.wikipedia.org/wiki/For_loop",n.Msg.CONTROLS_REPEAT_INPUT_DO="do",n.Msg.CONTROLS_REPEAT_TITLE="repeat %1 times",n.Msg.CONTROLS_REPEAT_TOOLTIP="Do some statements several times.",n.Msg.CONTROLS_WHILEUNTIL_HELPURL="https://github.com/google/blockly/wiki/Loops#repeat",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_UNTIL="repeat until",n.Msg.CONTROLS_WHILEUNTIL_OPERATOR_WHILE="repeat while",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL="While a value is false, then do some statements.",n.Msg.CONTROLS_WHILEUNTIL_TOOLTIP_WHILE="While a value is true, then do some statements.",n.Msg.DELETE_ALL_BLOCKS="Delete all %1 blocks?",n.Msg.DELETE_BLOCK="Delete Block",n.Msg.DELETE_VARIABLE="Delete the '%1' variable",n.Msg.DELETE_VARIABLE_CONFIRMATION="Delete %1 uses of the '%2' variable?",n.Msg.DELETE_X_BLOCKS="Delete %1 Blocks",n.Msg.DIALOG_CANCEL="Cancel",n.Msg.DIALOG_OK="OK",n.Msg.DISABLE_BLOCK="Disable Block",n.Msg.DUPLICATE_BLOCK="Duplicate",n.Msg.DUPLICATE_COMMENT="Duplicate Comment",n.Msg.ENABLE_BLOCK="Enable Block",n.Msg.EXPAND_ALL="Expand Blocks",n.Msg.EXPAND_BLOCK="Expand Block",n.Msg.EXTERNAL_INPUTS="External Inputs",n.Msg.HELP="Help",n.Msg.INLINE_INPUTS="Inline Inputs",n.Msg.LISTS_CREATE_EMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#create-empty-list",n.Msg.LISTS_CREATE_EMPTY_TITLE="create empty list",n.Msg.LISTS_CREATE_EMPTY_TOOLTIP="Returns a list, of length 0, containing no data records",n.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD="list",n.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP="Add, remove, or reorder sections to reconfigure this list block.",n.Msg.LISTS_CREATE_WITH_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_CREATE_WITH_INPUT_WITH="create list with",n.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP="Add an item to the list.",n.Msg.LISTS_CREATE_WITH_TOOLTIP="Create a list with any number of items.",n.Msg.LISTS_GET_INDEX_FIRST="first",n.Msg.LISTS_GET_INDEX_FROM_END="# from end",n.Msg.LISTS_GET_INDEX_FROM_START="#",n.Msg.LISTS_GET_INDEX_GET="get",n.Msg.LISTS_GET_INDEX_GET_REMOVE="get and remove",n.Msg.LISTS_GET_INDEX_LAST="last",n.Msg.LISTS_GET_INDEX_RANDOM="random",n.Msg.LISTS_GET_INDEX_REMOVE="remove",n.Msg.LISTS_GET_INDEX_TAIL="",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST="Returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM="Returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST="Returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM="Returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST="Removes and returns the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM="Removes and returns the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST="Removes and returns the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM="Removes and returns a random item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST="Removes the first item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM="Removes the item at the specified position in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST="Removes the last item in a list.",n.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM="Removes a random item in a list.",n.Msg.LISTS_GET_SUBLIST_END_FROM_END="to # from end",n.Msg.LISTS_GET_SUBLIST_END_FROM_START="to #",n.Msg.LISTS_GET_SUBLIST_END_LAST="to last",n.Msg.LISTS_GET_SUBLIST_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-a-sublist",n.Msg.LISTS_GET_SUBLIST_START_FIRST="get sub-list from first",n.Msg.LISTS_GET_SUBLIST_START_FROM_END="get sub-list from # from end",n.Msg.LISTS_GET_SUBLIST_START_FROM_START="get sub-list from #",n.Msg.LISTS_GET_SUBLIST_TAIL="",n.Msg.LISTS_GET_SUBLIST_TOOLTIP="Creates a copy of the specified portion of a list.",n.Msg.LISTS_INDEX_FROM_END_TOOLTIP="%1 is the last item.",n.Msg.LISTS_INDEX_FROM_START_TOOLTIP="%1 is the first item.",n.Msg.LISTS_INDEX_OF_FIRST="find first occurrence of item",n.Msg.LISTS_INDEX_OF_HELPURL="https://github.com/google/blockly/wiki/Lists#getting-items-from-a-list",n.Msg.LISTS_INDEX_OF_LAST="find last occurrence of item",n.Msg.LISTS_INDEX_OF_TOOLTIP="Returns the index of the first/last occurrence of the item in the list. Returns %1 if item is not found.",n.Msg.LISTS_INLIST="in list",n.Msg.LISTS_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Lists#is-empty",n.Msg.LISTS_ISEMPTY_TITLE="%1 is empty",n.Msg.LISTS_ISEMPTY_TOOLTIP="Returns true if the list is empty.",n.Msg.LISTS_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Lists#length-of",n.Msg.LISTS_LENGTH_TITLE="length of %1",n.Msg.LISTS_LENGTH_TOOLTIP="Returns the length of a list.",n.Msg.LISTS_REPEAT_HELPURL="https://github.com/google/blockly/wiki/Lists#create-list-with",n.Msg.LISTS_REPEAT_TITLE="create list with item %1 repeated %2 times",n.Msg.LISTS_REPEAT_TOOLTIP="Creates a list consisting of the given value repeated the specified number of times.",n.Msg.LISTS_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Lists#reversing-a-list",n.Msg.LISTS_REVERSE_MESSAGE0="reverse %1",n.Msg.LISTS_REVERSE_TOOLTIP="Reverse a copy of a list.",n.Msg.LISTS_SET_INDEX_HELPURL="https://github.com/google/blockly/wiki/Lists#in-list--set",n.Msg.LISTS_SET_INDEX_INPUT_TO="as",n.Msg.LISTS_SET_INDEX_INSERT="insert at",n.Msg.LISTS_SET_INDEX_SET="set",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST="Inserts the item at the start of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM="Inserts the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST="Append the item to the end of a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM="Inserts the item randomly in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST="Sets the first item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM="Sets the item at the specified position in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST="Sets the last item in a list.",n.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM="Sets a random item in a list.",n.Msg.LISTS_SORT_HELPURL="https://github.com/google/blockly/wiki/Lists#sorting-a-list",n.Msg.LISTS_SORT_ORDER_ASCENDING="ascending",n.Msg.LISTS_SORT_ORDER_DESCENDING="descending",n.Msg.LISTS_SORT_TITLE="sort %1 %2 %3",n.Msg.LISTS_SORT_TOOLTIP="Sort a copy of a list.",n.Msg.LISTS_SORT_TYPE_IGNORECASE="alphabetic, ignore case",n.Msg.LISTS_SORT_TYPE_NUMERIC="numeric",n.Msg.LISTS_SORT_TYPE_TEXT="alphabetic",n.Msg.LISTS_SPLIT_HELPURL="https://github.com/google/blockly/wiki/Lists#splitting-strings-and-joining-lists",n.Msg.LISTS_SPLIT_LIST_FROM_TEXT="make list from text",n.Msg.LISTS_SPLIT_TEXT_FROM_LIST="make text from list",n.Msg.LISTS_SPLIT_TOOLTIP_JOIN="Join a list of texts into one text, separated by a delimiter.",n.Msg.LISTS_SPLIT_TOOLTIP_SPLIT="Split text into a list of texts, breaking at each delimiter.",n.Msg.LISTS_SPLIT_WITH_DELIMITER="with delimiter",n.Msg.LOGIC_BOOLEAN_FALSE="false",n.Msg.LOGIC_BOOLEAN_HELPURL="https://github.com/google/blockly/wiki/Logic#values",n.Msg.LOGIC_BOOLEAN_TOOLTIP="Returns either true or false.",n.Msg.LOGIC_BOOLEAN_TRUE="true",n.Msg.LOGIC_COMPARE_HELPURL="https://en.wikipedia.org/wiki/Inequality_(mathematics)",n.Msg.LOGIC_COMPARE_TOOLTIP_EQ="Return true if both inputs equal each other.",n.Msg.LOGIC_COMPARE_TOOLTIP_GT="Return true if the first input is greater than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_GTE="Return true if the first input is greater than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LT="Return true if the first input is smaller than the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_LTE="Return true if the first input is smaller than or equal to the second input.",n.Msg.LOGIC_COMPARE_TOOLTIP_NEQ="Return true if both inputs are not equal to each other.",n.Msg.LOGIC_NEGATE_HELPURL="https://github.com/google/blockly/wiki/Logic#not",n.Msg.LOGIC_NEGATE_TITLE="not %1",n.Msg.LOGIC_NEGATE_TOOLTIP="Returns true if the input is false. Returns false if the input is true.",n.Msg.LOGIC_NULL="null",n.Msg.LOGIC_NULL_HELPURL="https://en.wikipedia.org/wiki/Nullable_type",n.Msg.LOGIC_NULL_TOOLTIP="Returns null.",n.Msg.LOGIC_OPERATION_AND="and",n.Msg.LOGIC_OPERATION_HELPURL="https://github.com/google/blockly/wiki/Logic#logical-operations",n.Msg.LOGIC_OPERATION_OR="or",n.Msg.LOGIC_OPERATION_TOOLTIP_AND="Return true if both inputs are true.",n.Msg.LOGIC_OPERATION_TOOLTIP_OR="Return true if at least one of the inputs is true.",n.Msg.LOGIC_TERNARY_CONDITION="test",n.Msg.LOGIC_TERNARY_HELPURL="https://en.wikipedia.org/wiki/%3F:",n.Msg.LOGIC_TERNARY_IF_FALSE="if false",n.Msg.LOGIC_TERNARY_IF_TRUE="if true",n.Msg.LOGIC_TERNARY_TOOLTIP="Check the condition in 'test'. If the condition is true, returns the 'if true' value; otherwise returns the 'if false' value.",n.Msg.MATH_ADDITION_SYMBOL="+",n.Msg.MATH_ARITHMETIC_HELPURL="https://en.wikipedia.org/wiki/Arithmetic",n.Msg.MATH_ARITHMETIC_TOOLTIP_ADD="Return the sum of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_DIVIDE="Return the quotient of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MINUS="Return the difference of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_MULTIPLY="Return the product of the two numbers.",n.Msg.MATH_ARITHMETIC_TOOLTIP_POWER="Return the first number raised to the power of the second number.",n.Msg.MATH_ATAN2_HELPURL="https://en.wikipedia.org/wiki/Atan2",n.Msg.MATH_ATAN2_TITLE="atan2 of X:%1 Y:%2",n.Msg.MATH_ATAN2_TOOLTIP="Return the arctangent of point (X, Y) in degrees from -180 to 180.",n.Msg.MATH_CHANGE_HELPURL="https://en.wikipedia.org/wiki/Programming_idiom#Incrementing_a_counter",n.Msg.MATH_CHANGE_TITLE="change %1 by %2",n.Msg.MATH_CHANGE_TOOLTIP="Add a number to variable '%1'.",n.Msg.MATH_CONSTANT_HELPURL="https://en.wikipedia.org/wiki/Mathematical_constant",n.Msg.MATH_CONSTANT_TOOLTIP="Return one of the common constants: \u03C0 (3.141\u2026), e (2.718\u2026), \u03C6 (1.618\u2026), sqrt(2) (1.414\u2026), sqrt(\xBD) (0.707\u2026), or \u221E (infinity).",n.Msg.MATH_CONSTRAIN_HELPURL="https://en.wikipedia.org/wiki/Clamping_(graphics)",n.Msg.MATH_CONSTRAIN_TITLE="constrain %1 low %2 high %3",n.Msg.MATH_CONSTRAIN_TOOLTIP="Constrain a number to be between the specified limits (inclusive).",n.Msg.MATH_DIVISION_SYMBOL="\xF7",n.Msg.MATH_IS_DIVISIBLE_BY="is divisible by",n.Msg.MATH_IS_EVEN="is even",n.Msg.MATH_IS_NEGATIVE="is negative",n.Msg.MATH_IS_ODD="is odd",n.Msg.MATH_IS_POSITIVE="is positive",n.Msg.MATH_IS_PRIME="is prime",n.Msg.MATH_IS_TOOLTIP="Check if a number is an even, odd, prime, whole, positive, negative, or if it is divisible by certain number. Returns true or false.",n.Msg.MATH_IS_WHOLE="is whole",n.Msg.MATH_MODULO_HELPURL="https://en.wikipedia.org/wiki/Modulo_operation",n.Msg.MATH_MODULO_TITLE="remainder of %1 \xF7 %2",n.Msg.MATH_MODULO_TOOLTIP="Return the remainder from dividing the two numbers.",n.Msg.MATH_MULTIPLICATION_SYMBOL="\xD7",n.Msg.MATH_NUMBER_HELPURL="https://en.wikipedia.org/wiki/Number",n.Msg.MATH_NUMBER_TOOLTIP="A number.",n.Msg.MATH_ONLIST_HELPURL="",n.Msg.MATH_ONLIST_OPERATOR_AVERAGE="average of list",n.Msg.MATH_ONLIST_OPERATOR_MAX="max of list",n.Msg.MATH_ONLIST_OPERATOR_MEDIAN="median of list",n.Msg.MATH_ONLIST_OPERATOR_MIN="min of list",n.Msg.MATH_ONLIST_OPERATOR_MODE="modes of list",n.Msg.MATH_ONLIST_OPERATOR_RANDOM="random item of list",n.Msg.MATH_ONLIST_OPERATOR_STD_DEV="standard deviation of list",n.Msg.MATH_ONLIST_OPERATOR_SUM="sum of list",n.Msg.MATH_ONLIST_TOOLTIP_AVERAGE="Return the average (arithmetic mean) of the numeric values in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MAX="Return the largest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MEDIAN="Return the median number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MIN="Return the smallest number in the list.",n.Msg.MATH_ONLIST_TOOLTIP_MODE="Return a list of the most common item(s) in the list.",n.Msg.MATH_ONLIST_TOOLTIP_RANDOM="Return a random element from the list.",n.Msg.MATH_ONLIST_TOOLTIP_STD_DEV="Return the standard deviation of the list.",n.Msg.MATH_ONLIST_TOOLTIP_SUM="Return the sum of all the numbers in the list.",n.Msg.MATH_POWER_SYMBOL="^",n.Msg.MATH_RANDOM_FLOAT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_FLOAT_TITLE_RANDOM="random fraction",n.Msg.MATH_RANDOM_FLOAT_TOOLTIP="Return a random fraction between 0.0 (inclusive) and 1.0 (exclusive).",n.Msg.MATH_RANDOM_INT_HELPURL="https://en.wikipedia.org/wiki/Random_number_generation",n.Msg.MATH_RANDOM_INT_TITLE="random integer from %1 to %2",n.Msg.MATH_RANDOM_INT_TOOLTIP="Return a random integer between the two specified limits, inclusive.",n.Msg.MATH_ROUND_HELPURL="https://en.wikipedia.org/wiki/Rounding",n.Msg.MATH_ROUND_OPERATOR_ROUND="round",n.Msg.MATH_ROUND_OPERATOR_ROUNDDOWN="round down",n.Msg.MATH_ROUND_OPERATOR_ROUNDUP="round up",n.Msg.MATH_ROUND_TOOLTIP="Round a number up or down.",n.Msg.MATH_SINGLE_HELPURL="https://en.wikipedia.org/wiki/Square_root",n.Msg.MATH_SINGLE_OP_ABSOLUTE="absolute",n.Msg.MATH_SINGLE_OP_ROOT="square root",n.Msg.MATH_SINGLE_TOOLTIP_ABS="Return the absolute value of a number.",n.Msg.MATH_SINGLE_TOOLTIP_EXP="Return e to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LN="Return the natural logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_LOG10="Return the base 10 logarithm of a number.",n.Msg.MATH_SINGLE_TOOLTIP_NEG="Return the negation of a number.",n.Msg.MATH_SINGLE_TOOLTIP_POW10="Return 10 to the power of a number.",n.Msg.MATH_SINGLE_TOOLTIP_ROOT="Return the square root of a number.",n.Msg.MATH_SUBTRACTION_SYMBOL="-",n.Msg.MATH_TRIG_ACOS="acos",n.Msg.MATH_TRIG_ASIN="asin",n.Msg.MATH_TRIG_ATAN="atan",n.Msg.MATH_TRIG_COS="cos",n.Msg.MATH_TRIG_HELPURL="https://en.wikipedia.org/wiki/Trigonometric_functions",n.Msg.MATH_TRIG_SIN="sin",n.Msg.MATH_TRIG_TAN="tan",n.Msg.MATH_TRIG_TOOLTIP_ACOS="Return the arccosine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ASIN="Return the arcsine of a number.",n.Msg.MATH_TRIG_TOOLTIP_ATAN="Return the arctangent of a number.",n.Msg.MATH_TRIG_TOOLTIP_COS="Return the cosine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_SIN="Return the sine of a degree (not radian).",n.Msg.MATH_TRIG_TOOLTIP_TAN="Return the tangent of a degree (not radian).",n.Msg.NEW_COLOUR_VARIABLE="Create colour variable...",n.Msg.NEW_NUMBER_VARIABLE="Create number variable...",n.Msg.NEW_STRING_VARIABLE="Create string variable...",n.Msg.NEW_VARIABLE="Create variable...",n.Msg.NEW_VARIABLE_TITLE="New variable name:",n.Msg.NEW_VARIABLE_TYPE_TITLE="New variable type:",n.Msg.ORDINAL_NUMBER_SUFFIX="",n.Msg.PROCEDURES_ALLOW_STATEMENTS="allow statements",n.Msg.PROCEDURES_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CALLNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLNORETURN_TOOLTIP="Run the user-defined function '%1'.",n.Msg.PROCEDURES_CALLRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_CALLRETURN_TOOLTIP="Run the user-defined function '%1' and use its output.",n.Msg.PROCEDURES_CALL_BEFORE_PARAMS="with:",n.Msg.PROCEDURES_CREATE_DO="Create '%1'",n.Msg.PROCEDURES_DEFNORETURN_COMMENT="Describe this function...",n.Msg.PROCEDURES_DEFNORETURN_DO="",n.Msg.PROCEDURES_DEFNORETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE="do something",n.Msg.PROCEDURES_DEFNORETURN_TITLE="to",n.Msg.PROCEDURES_DEFNORETURN_TOOLTIP="Creates a function with no output.",n.Msg.PROCEDURES_DEFRETURN_HELPURL="https://en.wikipedia.org/wiki/Subroutine",n.Msg.PROCEDURES_DEFRETURN_RETURN="return",n.Msg.PROCEDURES_DEFRETURN_TOOLTIP="Creates a function with an output.",n.Msg.PROCEDURES_DEF_DUPLICATE_WARNING="Warning: This function has duplicate parameters.",n.Msg.PROCEDURES_HIGHLIGHT_DEF="Highlight function definition",n.Msg.PROCEDURES_IFRETURN_HELPURL="http://c2.com/cgi/wiki?GuardClause",n.Msg.PROCEDURES_IFRETURN_TOOLTIP="If a value is true, then return a second value.",n.Msg.PROCEDURES_IFRETURN_WARNING="Warning: This block may be used only within a function definition.",n.Msg.PROCEDURES_MUTATORARG_TITLE="input name:",n.Msg.PROCEDURES_MUTATORARG_TOOLTIP="Add an input to the function.",n.Msg.PROCEDURES_MUTATORCONTAINER_TITLE="inputs",n.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP="Add, remove, or reorder inputs to this function.",n.Msg.REDO="Redo",n.Msg.REMOVE_COMMENT="Remove Comment",n.Msg.RENAME_VARIABLE="Rename variable...",n.Msg.RENAME_VARIABLE_TITLE="Rename all '%1' variables to:",n.Msg.TEXT_APPEND_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_APPEND_TITLE="to %1 append text %2",n.Msg.TEXT_APPEND_TOOLTIP="Append some text to variable '%1'.",n.Msg.TEXT_CHANGECASE_HELPURL="https://github.com/google/blockly/wiki/Text#adjusting-text-case",n.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE="to lower case",n.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE="to Title Case",n.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE="to UPPER CASE",n.Msg.TEXT_CHANGECASE_TOOLTIP="Return a copy of the text in a different case.",n.Msg.TEXT_CHARAT_FIRST="get first letter",n.Msg.TEXT_CHARAT_FROM_END="get letter # from end",n.Msg.TEXT_CHARAT_FROM_START="get letter #",n.Msg.TEXT_CHARAT_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-text",n.Msg.TEXT_CHARAT_LAST="get last letter",n.Msg.TEXT_CHARAT_RANDOM="get random letter",n.Msg.TEXT_CHARAT_TAIL="",n.Msg.TEXT_CHARAT_TITLE="in text %1 %2",n.Msg.TEXT_CHARAT_TOOLTIP="Returns the letter at the specified position.",n.Msg.TEXT_COUNT_HELPURL="https://github.com/google/blockly/wiki/Text#counting-substrings",n.Msg.TEXT_COUNT_MESSAGE0="count %1 in %2",n.Msg.TEXT_COUNT_TOOLTIP="Count how many times some text occurs within some other text.",n.Msg.TEXT_CREATE_JOIN_ITEM_TOOLTIP="Add an item to the text.",n.Msg.TEXT_CREATE_JOIN_TITLE_JOIN="join",n.Msg.TEXT_CREATE_JOIN_TOOLTIP="Add, remove, or reorder sections to reconfigure this text block.",n.Msg.TEXT_GET_SUBSTRING_END_FROM_END="to letter # from end",n.Msg.TEXT_GET_SUBSTRING_END_FROM_START="to letter #",n.Msg.TEXT_GET_SUBSTRING_END_LAST="to last letter",n.Msg.TEXT_GET_SUBSTRING_HELPURL="https://github.com/google/blockly/wiki/Text#extracting-a-region-of-text",n.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT="in text",n.Msg.TEXT_GET_SUBSTRING_START_FIRST="get substring from first letter",n.Msg.TEXT_GET_SUBSTRING_START_FROM_END="get substring from letter # from end",n.Msg.TEXT_GET_SUBSTRING_START_FROM_START="get substring from letter #",n.Msg.TEXT_GET_SUBSTRING_TAIL="",n.Msg.TEXT_GET_SUBSTRING_TOOLTIP="Returns a specified portion of the text.",n.Msg.TEXT_INDEXOF_HELPURL="https://github.com/google/blockly/wiki/Text#finding-text",n.Msg.TEXT_INDEXOF_OPERATOR_FIRST="find first occurrence of text",n.Msg.TEXT_INDEXOF_OPERATOR_LAST="find last occurrence of text",n.Msg.TEXT_INDEXOF_TITLE="in text %1 %2 %3",n.Msg.TEXT_INDEXOF_TOOLTIP="Returns the index of the first/last occurrence of the first text in the second text. Returns %1 if text is not found.",n.Msg.TEXT_ISEMPTY_HELPURL="https://github.com/google/blockly/wiki/Text#checking-for-empty-text",n.Msg.TEXT_ISEMPTY_TITLE="%1 is empty",n.Msg.TEXT_ISEMPTY_TOOLTIP="Returns true if the provided text is empty.",n.Msg.TEXT_JOIN_HELPURL="https://github.com/google/blockly/wiki/Text#text-creation",n.Msg.TEXT_JOIN_TITLE_CREATEWITH="create text with",n.Msg.TEXT_JOIN_TOOLTIP="Create a piece of text by joining together any number of items.",n.Msg.TEXT_LENGTH_HELPURL="https://github.com/google/blockly/wiki/Text#text-modification",n.Msg.TEXT_LENGTH_TITLE="length of %1",n.Msg.TEXT_LENGTH_TOOLTIP="Returns the number of letters (including spaces) in the provided text.",n.Msg.TEXT_PRINT_HELPURL="https://github.com/google/blockly/wiki/Text#printing-text",n.Msg.TEXT_PRINT_TITLE="print %1",n.Msg.TEXT_PRINT_TOOLTIP="Print the specified text, number or other value.",n.Msg.TEXT_PROMPT_HELPURL="https://github.com/google/blockly/wiki/Text#getting-input-from-the-user",n.Msg.TEXT_PROMPT_TOOLTIP_NUMBER="Prompt for user for a number.",n.Msg.TEXT_PROMPT_TOOLTIP_TEXT="Prompt for user for some text.",n.Msg.TEXT_PROMPT_TYPE_NUMBER="prompt for number with message",n.Msg.TEXT_PROMPT_TYPE_TEXT="prompt for text with message",n.Msg.TEXT_REPLACE_HELPURL="https://github.com/google/blockly/wiki/Text#replacing-substrings",n.Msg.TEXT_REPLACE_MESSAGE0="replace %1 with %2 in %3",n.Msg.TEXT_REPLACE_TOOLTIP="Replace all occurances of some text within some other text.",n.Msg.TEXT_REVERSE_HELPURL="https://github.com/google/blockly/wiki/Text#reversing-text",n.Msg.TEXT_REVERSE_MESSAGE0="reverse %1",n.Msg.TEXT_REVERSE_TOOLTIP="Reverses the order of the characters in the text.",n.Msg.TEXT_TEXT_HELPURL="https://en.wikipedia.org/wiki/String_(computer_science)",n.Msg.TEXT_TEXT_TOOLTIP="A letter, word, or line of text.",n.Msg.TEXT_TRIM_HELPURL="https://github.com/google/blockly/wiki/Text#trimming-removing-spaces",n.Msg.TEXT_TRIM_OPERATOR_BOTH="trim spaces from both sides of",n.Msg.TEXT_TRIM_OPERATOR_LEFT="trim spaces from left side of",n.Msg.TEXT_TRIM_OPERATOR_RIGHT="trim spaces from right side of",n.Msg.TEXT_TRIM_TOOLTIP="Return a copy of the text with spaces removed from one or both ends.",n.Msg.TODAY="Today",n.Msg.UNDO="Undo",n.Msg.UNNAMED_KEY="unnamed",n.Msg.VARIABLES_DEFAULT_NAME="item",n.Msg.VARIABLES_GET_CREATE_SET="Create 'set %1'",n.Msg.VARIABLES_GET_HELPURL="https://github.com/google/blockly/wiki/Variables#get",n.Msg.VARIABLES_GET_TOOLTIP="Returns the value of this variable.",n.Msg.VARIABLES_SET="set %1 to %2",n.Msg.VARIABLES_SET_CREATE_GET="Create 'get %1'",n.Msg.VARIABLES_SET_HELPURL="https://github.com/google/blockly/wiki/Variables#set",n.Msg.VARIABLES_SET_TOOLTIP="Sets this variable to be equal to the input.",n.Msg.VARIABLE_ALREADY_EXISTS="A variable named '%1' already exists.",n.Msg.VARIABLE_ALREADY_EXISTS_FOR_ANOTHER_TYPE="A variable named '%1' already exists for another type: '%2'.",n.Msg.WORKSPACE_ARIA_LABEL="Blockly Workspace",n.Msg.WORKSPACE_COMMENT_DEFAULT_TEXT="Say something...",n.Msg.CONTROLS_FOREACH_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_FOR_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_IF_ELSEIF_TITLE_ELSEIF=n.Msg.CONTROLS_IF_MSG_ELSEIF,n.Msg.CONTROLS_IF_ELSE_TITLE_ELSE=n.Msg.CONTROLS_IF_MSG_ELSE,n.Msg.CONTROLS_IF_IF_TITLE_IF=n.Msg.CONTROLS_IF_MSG_IF,n.Msg.CONTROLS_IF_MSG_THEN=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.CONTROLS_WHILEUNTIL_INPUT_DO=n.Msg.CONTROLS_REPEAT_INPUT_DO,n.Msg.LISTS_CREATE_WITH_ITEM_TITLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.LISTS_GET_INDEX_HELPURL=n.Msg.LISTS_INDEX_OF_HELPURL,n.Msg.LISTS_GET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_INDEX_OF_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.LISTS_SET_INDEX_INPUT_IN_LIST=n.Msg.LISTS_INLIST,n.Msg.MATH_CHANGE_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.PROCEDURES_DEFRETURN_COMMENT=n.Msg.PROCEDURES_DEFNORETURN_COMMENT,n.Msg.PROCEDURES_DEFRETURN_DO=n.Msg.PROCEDURES_DEFNORETURN_DO,n.Msg.PROCEDURES_DEFRETURN_PROCEDURE=n.Msg.PROCEDURES_DEFNORETURN_PROCEDURE,n.Msg.PROCEDURES_DEFRETURN_TITLE=n.Msg.PROCEDURES_DEFNORETURN_TITLE,n.Msg.TEXT_APPEND_VARIABLE=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.TEXT_CREATE_JOIN_ITEM_TITLE_ITEM=n.Msg.VARIABLES_DEFAULT_NAME,n.Msg.MATH_HUE="230",n.Msg.LOOPS_HUE="120",n.Msg.LISTS_HUE="260",n.Msg.LOGIC_HUE="210",n.Msg.VARIABLES_HUE="330",n.Msg.TEXTS_HUE="160",n.Msg.PROCEDURES_HUE="290",n.Msg.COLOUR_HUE="20",n.Msg.VARIABLES_DYNAMIC_HUE="310",n.Msg})}(en)),en.exports}var blocks={exports:{}},blocks_compressed={exports:{}},hasRequiredBlocks_compressed;function requireBlocks_compressed(){return hasRequiredBlocks_compressed||(hasRequiredBlocks_compressed=1,function(m,f){(function(n,r){m.exports=r(requireBlockly_compressed())})(commonjsGlobal,function(n){var r=n.__namespace__,y={};y.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"variables_get_dynamic",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_dynamic_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableDynamicSetterGetter"]},{type:"variables_set_dynamic",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_dynamic_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableDynamicSetterGetter"]}]);var O={customContextMenu:function(u){if(this.isInFlyout)(this.type==="variables_get_dynamic"||this.type==="variables_get_reporter_dynamic")&&(T={text:r.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,enabled:!0,callback:P(this)},N=this.getField("VAR").getText(),N={text:r.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",N),enabled:!0,callback:c(this)},u.unshift(T),u.unshift(N));else{var T=this.getFieldValue("VAR"),v=this.workspace.getVariableById(T).type;if(this.type==="variables_get_dynamic"){T="variables_set_dynamic";var M=r.module$exports$Blockly$Msg.Msg.VARIABLES_GET_CREATE_SET}else T="variables_get_dynamic",M=r.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET;var N={enabled:0<this.workspace.remainingCapacity()},ut=this.getField("VAR").getText();N.text=M.replace("%1",ut),M=(0,r.module$exports$Blockly$utils$xml.createElement)("field"),M.setAttribute("name","VAR"),M.setAttribute("variabletype",v),M.appendChild((0,r.module$exports$Blockly$utils$xml.createTextNode)(ut)),v=(0,r.module$exports$Blockly$utils$xml.createElement)("block"),v.setAttribute("type",T),v.appendChild(M),N.callback=(0,r.module$exports$Blockly$ContextMenu.callbackFactory)(this,v),u.push(N)}},onchange:function(u){u=this.getFieldValue("VAR"),u=(0,r.module$exports$Blockly$Variables.getVariable)(this.workspace,u),this.type==="variables_get_dynamic"?this.outputConnection.setCheck(u.type):this.getInput("VALUE").connection.setCheck(u.type)}},P=function(u){return function(){var T=u.workspace,v=u.getField("VAR").getVariable();(0,r.module$exports$Blockly$Variables.renameVariable)(T,v)}},c=function(u){return function(){var T=u.workspace,v=u.getField("VAR").getVariable();T.deleteVariableById(v.getId()),T.refreshToolboxSelection()}};(0,r.module$exports$Blockly$Extensions.registerMixin)("contextMenu_variableDynamicSetterGetter",O),(0,r.module$exports$Blockly$common.defineBlocks)(y.blocks);var k={};k.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"variables_get",message0:"%1",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"}],output:null,style:"variable_blocks",helpUrl:"%{BKY_VARIABLES_GET_HELPURL}",tooltip:"%{BKY_VARIABLES_GET_TOOLTIP}",extensions:["contextMenu_variableSetterGetter"]},{type:"variables_set",message0:"%{BKY_VARIABLES_SET}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_VARIABLES_DEFAULT_NAME}"},{type:"input_value",name:"VALUE"}],previousStatement:null,nextStatement:null,style:"variable_blocks",tooltip:"%{BKY_VARIABLES_SET_TOOLTIP}",helpUrl:"%{BKY_VARIABLES_SET_HELPURL}",extensions:["contextMenu_variableSetterGetter"]}]);var a={customContextMenu:function(u){if(this.isInFlyout)(this.type==="variables_get"||this.type==="variables_get_reporter")&&(T={text:r.module$exports$Blockly$Msg.Msg.RENAME_VARIABLE,enabled:!0,callback:d(this)},M=this.getField("VAR").getText(),M={text:r.module$exports$Blockly$Msg.Msg.DELETE_VARIABLE.replace("%1",M),enabled:!0,callback:g(this)},u.unshift(T),u.unshift(M));else{if(this.type==="variables_get")var T="variables_set",v=r.module$exports$Blockly$Msg.Msg.VARIABLES_GET_CREATE_SET;else T="variables_get",v=r.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET;var M={enabled:0<this.workspace.remainingCapacity()},N=this.getField("VAR").getText();M.text=v.replace("%1",N),v=(0,r.module$exports$Blockly$utils$xml.createElement)("field"),v.setAttribute("name","VAR"),v.appendChild((0,r.module$exports$Blockly$utils$xml.createTextNode)(N)),N=(0,r.module$exports$Blockly$utils$xml.createElement)("block"),N.setAttribute("type",T),N.appendChild(v),M.callback=(0,r.module$exports$Blockly$ContextMenu.callbackFactory)(this,N),u.push(M)}}},d=function(u){return function(){var T=u.workspace,v=u.getField("VAR").getVariable();(0,r.module$exports$Blockly$Variables.renameVariable)(T,v)}},g=function(u){return function(){var T=u.workspace,v=u.getField("VAR").getVariable();T.deleteVariableById(v.getId()),T.refreshToolboxSelection()}};(0,r.module$exports$Blockly$Extensions.registerMixin)("contextMenu_variableSetterGetter",a),(0,r.module$exports$Blockly$common.defineBlocks)(k.blocks);var I={};I.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"text",message0:"%1",args0:[{type:"field_input",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["text_quotes","parent_tooltip_when_inline"]},{type:"text_multiline",message0:"%1 %2",args0:[{type:"field_image",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAARCAYAAADpPU2iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAdhgAAHYYBXaITgQAAABh0RVh0U29mdHdhcmUAcGFpbnQubmV0IDQuMS42/U4J6AAAAP1JREFUOE+Vks0KQUEYhjmRIja4ABtZ2dm5A3t3Ia6AUm7CylYuQRaUhZSlLZJiQbFAyRnPN33y01HOW08z8873zpwzM4F3GWOCruvGIE4/rLaV+Nq1hVGMBqzhqlxgCys4wJA65xnogMHsQ5lujnYHTejBBCK2mE4abjCgMGhNxHgDFWjDSG07kdfVa2pZMf4ZyMAdWmpZMfYOsLiDMYMjlMB+K613QISRhTnITnsYg5yUd0DETmEoMlkFOeIT/A58iyK5E18BuTBfgYXfwNJv4P9/oEBerLylOnRhygmGdPpTTBZAPkde61lbQe4moWUvYUZYLfUNftIY4zwA5X2Z9AYnQrEAAAAASUVORK5CYII=",width:12,height:17,alt:"\xB6"},{type:"field_multilinetext",name:"TEXT",text:""}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_TEXT_HELPURL}",tooltip:"%{BKY_TEXT_TEXT_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"text_join",message0:"",output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_JOIN_HELPURL}",tooltip:"%{BKY_TEXT_JOIN_TOOLTIP}",mutator:"text_join_mutator"},{type:"text_create_join_container",message0:"%{BKY_TEXT_CREATE_JOIN_TITLE_JOIN} %1 %2",args0:[{type:"input_dummy"},{type:"input_statement",name:"STACK"}],style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_TOOLTIP}",enableContextMenu:!1},{type:"text_create_join_item",message0:"%{BKY_TEXT_CREATE_JOIN_ITEM_TITLE_ITEM}",previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:"%{BKY_TEXT_CREATE_JOIN_ITEM_TOOLTIP}",enableContextMenu:!1},{type:"text_append",message0:"%{BKY_TEXT_APPEND_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_TEXT_APPEND_VARIABLE}"},{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",extensions:["text_append_tooltip"]},{type:"text_length",message0:"%{BKY_TEXT_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"text_blocks",tooltip:"%{BKY_TEXT_LENGTH_TOOLTIP}",helpUrl:"%{BKY_TEXT_LENGTH_HELPURL}"},{type:"text_isEmpty",message0:"%{BKY_TEXT_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"text_blocks",tooltip:"%{BKY_TEXT_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_TEXT_ISEMPTY_HELPURL}"},{type:"text_indexOf",message0:"%{BKY_TEXT_INDEXOF_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"END",options:[["%{BKY_TEXT_INDEXOF_OPERATOR_FIRST}","FIRST"],["%{BKY_TEXT_INDEXOF_OPERATOR_LAST}","LAST"]]},{type:"input_value",name:"FIND",check:"String"}],output:"Number",style:"text_blocks",helpUrl:"%{BKY_TEXT_INDEXOF_HELPURL}",inputsInline:!0,extensions:["text_indexOf_tooltip"]},{type:"text_charAt",message0:"%{BKY_TEXT_CHARAT_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"String"},{type:"field_dropdown",name:"WHERE",options:[["%{BKY_TEXT_CHARAT_FROM_START}","FROM_START"],["%{BKY_TEXT_CHARAT_FROM_END}","FROM_END"],["%{BKY_TEXT_CHARAT_FIRST}","FIRST"],["%{BKY_TEXT_CHARAT_LAST}","LAST"],["%{BKY_TEXT_CHARAT_RANDOM}","RANDOM"]]}],output:"String",style:"text_blocks",helpUrl:"%{BKY_TEXT_CHARAT_HELPURL}",inputsInline:!0,mutator:"text_charAt_mutator"}]),I.blocks.text_getSubstring={init:function(){this.WHERE_OPTIONS_1=[[r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FROM_START,"FROM_START"],[r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FROM_END,"FROM_END"],[r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_FROM_START,"FROM_START"],[r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_FROM_END,"FROM_END"],[r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_END_LAST,"LAST"]],this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("STRING").setCheck("String").appendField(r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_INPUT_IN_TEXT),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL&&this.appendDummyInput("TAIL").appendField(r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL),this.setInputsInline(!0),this.setOutput(!0,"String"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TOOLTIP)},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation"),T=this.getInput("AT1").type===r.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return u.setAttribute("at1",T),T=this.getInput("AT2").type===r.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,u.setAttribute("at2",T),u},domToMutation:function(u){var T=u.getAttribute("at1")==="true";u=u.getAttribute("at2")==="true",this.updateAt_(1,T),this.updateAt_(2,u)},updateAt_:function(u,T){this.removeInput("AT"+u),this.removeInput("ORDINAL"+u,!0),T?(this.appendValueInput("AT"+u).setCheck("Number"),r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+u).appendField(r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+u),u===2&&r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(r.module$exports$Blockly$Msg.Msg.TEXT_GET_SUBSTRING_TAIL));var v=new r.module$exports$Blockly$FieldDropdown.FieldDropdown(this["WHERE_OPTIONS_"+u],function(M){var N=M==="FROM_START"||M==="FROM_END";if(N!==T){var ut=this.getSourceBlock();return ut.updateAt_(u,N),ut.setFieldValue(M,"WHERE"+u),null}});this.getInput("AT"+u).appendField(v,"WHERE"+u),u===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2"))}},I.blocks.text_changeCase={init:function(){var u=[[r.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_UPPERCASE,"UPPERCASE"],[r.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_LOWERCASE,"LOWERCASE"],[r.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_OPERATOR_TITLECASE,"TITLECASE"]];this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new r.module$exports$Blockly$FieldDropdown.FieldDropdown(u),"CASE"),this.setOutput(!0,"String"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.TEXT_CHANGECASE_TOOLTIP)}},I.blocks.text_trim={init:function(){var u=[[r.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_BOTH,"BOTH"],[r.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_LEFT,"LEFT"],[r.module$exports$Blockly$Msg.Msg.TEXT_TRIM_OPERATOR_RIGHT,"RIGHT"]];this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.TEXT_TRIM_HELPURL),this.setStyle("text_blocks"),this.appendValueInput("TEXT").setCheck("String").appendField(new r.module$exports$Blockly$FieldDropdown.FieldDropdown(u),"MODE"),this.setOutput(!0,"String"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.TEXT_TRIM_TOOLTIP)}},I.blocks.text_print={init:function(){this.jsonInit({message0:r.module$exports$Blockly$Msg.Msg.TEXT_PRINT_TITLE,args0:[{type:"input_value",name:"TEXT"}],previousStatement:null,nextStatement:null,style:"text_blocks",tooltip:r.module$exports$Blockly$Msg.Msg.TEXT_PRINT_TOOLTIP,helpUrl:r.module$exports$Blockly$Msg.Msg.TEXT_PRINT_HELPURL})}};var U={updateType_:function(u){this.outputConnection.setCheck(u==="NUMBER"?"Number":"String")},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return u.setAttribute("type",this.getFieldValue("TYPE")),u},domToMutation:function(u){this.updateType_(u.getAttribute("type"))}};I.blocks.text_prompt_ext=Object.assign({},U,{init:function(){var u=[[r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]];this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks");var T=this;u=new r.module$exports$Blockly$FieldDropdown.FieldDropdown(u,function(v){T.updateType_(v)}),this.appendValueInput("TEXT").appendField(u,"TYPE"),this.setOutput(!0,"String"),this.setTooltip(function(){return T.getFieldValue("TYPE")==="TEXT"?r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_TEXT:r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})}}),I.blocks.text_prompt=Object.assign({},U,{init:function(){this.mixin(st);var u=[[r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_TEXT,"TEXT"],[r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TYPE_NUMBER,"NUMBER"]],T=this;this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_HELPURL),this.setStyle("text_blocks"),u=new r.module$exports$Blockly$FieldDropdown.FieldDropdown(u,function(v){T.updateType_(v)}),this.appendDummyInput().appendField(u,"TYPE").appendField(this.newQuote_(!0)).appendField(new r.module$exports$Blockly$FieldTextInput.FieldTextInput(""),"TEXT").appendField(this.newQuote_(!1)),this.setOutput(!0,"String"),this.setTooltip(function(){return T.getFieldValue("TYPE")==="TEXT"?r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_TEXT:r.module$exports$Blockly$Msg.Msg.TEXT_PROMPT_TOOLTIP_NUMBER})}}),I.blocks.text_count={init:function(){this.jsonInit({message0:r.module$exports$Blockly$Msg.Msg.TEXT_COUNT_MESSAGE0,args0:[{type:"input_value",name:"SUB",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"Number",inputsInline:!0,style:"text_blocks",tooltip:r.module$exports$Blockly$Msg.Msg.TEXT_COUNT_TOOLTIP,helpUrl:r.module$exports$Blockly$Msg.Msg.TEXT_COUNT_HELPURL})}},I.blocks.text_replace={init:function(){this.jsonInit({message0:r.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_MESSAGE0,args0:[{type:"input_value",name:"FROM",check:"String"},{type:"input_value",name:"TO",check:"String"},{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:r.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_TOOLTIP,helpUrl:r.module$exports$Blockly$Msg.Msg.TEXT_REPLACE_HELPURL})}},I.blocks.text_reverse={init:function(){this.jsonInit({message0:r.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_MESSAGE0,args0:[{type:"input_value",name:"TEXT",check:"String"}],output:"String",inputsInline:!0,style:"text_blocks",tooltip:r.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_TOOLTIP,helpUrl:r.module$exports$Blockly$Msg.Msg.TEXT_REVERSE_HELPURL})}};var st={QUOTE_IMAGE_LEFT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAn0lEQVQI1z3OMa5BURSF4f/cQhAKjUQhuQmFNwGJEUi0RKN5rU7FHKhpjEH3TEMtkdBSCY1EIv8r7nFX9e29V7EBAOvu7RPjwmWGH/VuF8CyN9/OAdvqIXYLvtRaNjx9mMTDyo+NjAN1HNcl9ZQ5oQMM3dgDUqDo1l8DzvwmtZN7mnD+PkmLa+4mhrxVA9fRowBWmVBhFy5gYEjKMfz9AylsaRRgGzvZAAAAAElFTkSuQmCC",QUOTE_IMAGE_RIGHT_DATAURI:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAKCAQAAAAqJXdxAAAAqUlEQVQI1z3KvUpCcRiA8ef9E4JNHhI0aFEacm1o0BsI0Slx8wa8gLauoDnoBhq7DcfWhggONDmJJgqCPA7neJ7p934EOOKOnM8Q7PDElo/4x4lFb2DmuUjcUzS3URnGib9qaPNbuXvBO3sGPHJDRG6fGVdMSeWDP2q99FQdFrz26Gu5Tq7dFMzUvbXy8KXeAj57cOklgA+u1B5AoslLtGIHQMaCVnwDnADZIFIrXsoXrgAAAABJRU5ErkJggg==",QUOTE_IMAGE_WIDTH:12,QUOTE_IMAGE_HEIGHT:12,quoteField_:function(u){for(var T=0,v;v=this.inputList[T];T++)for(var M=0,N;N=v.fieldRow[M];M++)if(u===N.name){v.insertFieldAt(M,this.newQuote_(!0)),v.insertFieldAt(M+2,this.newQuote_(!1));return}console.warn('field named "'+u+'" not found in '+this.toDevString())},newQuote_:function(u){return u=this.RTL?!u:u,new r.module$exports$Blockly$FieldImage.FieldImage(u?this.QUOTE_IMAGE_LEFT_DATAURI:this.QUOTE_IMAGE_RIGHT_DATAURI,this.QUOTE_IMAGE_WIDTH,this.QUOTE_IMAGE_HEIGHT,u?"\u201C":"\u201D")}},G=function(){this.mixin(st),this.quoteField_("TEXT")},$={mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return u.setAttribute("items",this.itemCount_),u},domToMutation:function(u){this.itemCount_=parseInt(u.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(u){this.itemCount_=u.itemCount,this.updateShape_()},decompose:function(u){var T=u.newBlock("text_create_join_container");T.initSvg();for(var v=T.getInput("STACK").connection,M=0;M<this.itemCount_;M++){var N=u.newBlock("text_create_join_item");N.initSvg(),v.connect(N.previousConnection),v=N.nextConnection}return T},compose:function(u){var T=u.getInputTargetBlock("STACK");for(u=[];T&&!T.isInsertionMarker();)u.push(T.valueConnection_),T=T.nextConnection&&T.nextConnection.targetBlock();for(T=0;T<this.itemCount_;T++){var v=this.getInput("ADD"+T).connection.targetConnection;v&&u.indexOf(v)===-1&&v.disconnect()}for(this.itemCount_=u.length,this.updateShape_(),T=0;T<this.itemCount_;T++)r.module$exports$Blockly$Mutator.Mutator.reconnect(u[T],this,"ADD"+T)},saveConnections:function(u){u=u.getInputTargetBlock("STACK");for(var T=0;u;){var v=this.getInput("ADD"+T);u.valueConnection_=v&&v.connection.targetConnection,u=u.nextConnection&&u.nextConnection.targetBlock(),T++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(this.newQuote_(!0)).appendField(this.newQuote_(!1));for(var u=0;u<this.itemCount_;u++)if(!this.getInput("ADD"+u)){var T=this.appendValueInput("ADD"+u).setAlign(r.module$exports$Blockly$Input.Align.RIGHT);u===0&&T.appendField(r.module$exports$Blockly$Msg.Msg.TEXT_JOIN_TITLE_CREATEWITH)}for(u=this.itemCount_;this.getInput("ADD"+u);u++)this.removeInput("ADD"+u)}},Pt=function(){this.mixin(st),this.itemCount_=2,this.updateShape_(),this.setMutator(new r.module$exports$Blockly$Mutator.Mutator(["text_create_join_item"]))};(0,r.module$exports$Blockly$Extensions.register)("text_append_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_TEXT_APPEND_TOOLTIP}","VAR"));var Te=function(){var u=this;this.setTooltip(function(){return r.module$exports$Blockly$Msg.Msg.TEXT_INDEXOF_TOOLTIP.replace("%1",u.workspace.options.oneBasedIndex?"0":"-1")})},Lt={mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return u.setAttribute("at",!!this.isAt_),u},domToMutation:function(u){u=u.getAttribute("at")!=="false",this.updateAt_(u)},updateAt_:function(u){this.removeInput("AT",!0),this.removeInput("ORDINAL",!0),u&&(this.appendValueInput("AT").setCheck("Number"),r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)),r.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TAIL&&(this.removeInput("TAIL",!0),this.appendDummyInput("TAIL").appendField(r.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TAIL)),this.isAt_=u}},Oo=function(){this.getField("WHERE").setValidator(function(T){T=T==="FROM_START"||T==="FROM_END",T!==this.isAt_&&this.getSourceBlock().updateAt_(T)}),this.updateAt_(!0);var u=this;this.setTooltip(function(){var T=u.getFieldValue("WHERE"),v=r.module$exports$Blockly$Msg.Msg.TEXT_CHARAT_TOOLTIP;return(T==="FROM_START"||T==="FROM_END")&&(T=T==="FROM_START"?r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP:r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_END_TOOLTIP)&&(v+="  "+T.replace("%1",u.workspace.options.oneBasedIndex?"#1":"#0")),v})};(0,r.module$exports$Blockly$Extensions.register)("text_indexOf_tooltip",Te),(0,r.module$exports$Blockly$Extensions.register)("text_quotes",G),(0,r.module$exports$Blockly$Extensions.registerMutator)("text_join_mutator",$,Pt),(0,r.module$exports$Blockly$Extensions.registerMutator)("text_charAt_mutator",Lt,Oo),(0,r.module$exports$Blockly$common.defineBlocks)(I.blocks);var nt={blocks:{}},Ao={setStatements_:function(u){this.hasStatements_!==u&&(u?(this.appendStatementInput("STACK").appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_DO),this.getInput("RETURN")&&this.moveInputBefore("STACK","RETURN")):this.removeInput("STACK",!0),this.hasStatements_=u)},updateParams_:function(){var u="";this.arguments_.length&&(u=r.module$exports$Blockly$Msg.Msg.PROCEDURES_BEFORE_PARAMS+" "+this.arguments_.join(", ")),(0,r.module$exports$Blockly$Events.disable)();try{this.setFieldValue(u,"PARAMS")}finally{(0,r.module$exports$Blockly$Events.enable)()}},mutationToDom:function(u){var T=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");u&&T.setAttribute("name",this.getFieldValue("NAME"));for(var v=0;v<this.argumentVarModels_.length;v++){var M=(0,r.module$exports$Blockly$utils$xml.createElement)("arg"),N=this.argumentVarModels_[v];M.setAttribute("name",N.name),M.setAttribute("varid",N.getId()),u&&this.paramIds_&&M.setAttribute("paramId",this.paramIds_[v]),T.appendChild(M)}return this.hasStatements_||T.setAttribute("statements","false"),T},domToMutation:function(u){this.arguments_=[],this.argumentVarModels_=[];for(var T=0,v;v=u.childNodes[T];T++)if(v.nodeName.toLowerCase()==="arg"){var M=v.getAttribute("name");v=v.getAttribute("varid")||v.getAttribute("varId"),this.arguments_.push(M),v=(0,r.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,v,M,""),v!==null?this.argumentVarModels_.push(v):console.log("Failed to create a variable with name "+M+", ignoring.")}this.updateParams_(),(0,r.module$exports$Blockly$Procedures.mutateCallers)(this),this.setStatements_(u.getAttribute("statements")!=="false")},saveExtraState:function(){if(!this.argumentVarModels_.length&&this.hasStatements_)return null;var u=Object.create(null);if(this.argumentVarModels_.length){u.params=[];for(var T=0;T<this.argumentVarModels_.length;T++)u.params.push({name:this.argumentVarModels_[T].name,id:this.argumentVarModels_[T].getId()})}return this.hasStatements_||(u.hasStatements=!1),u},loadExtraState:function(u){if(this.arguments_=[],this.argumentVarModels_=[],u.params)for(var T=0;T<u.params.length;T++){var v=u.params[T];v=(0,r.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,v.id,v.name,""),this.arguments_.push(v.name),this.argumentVarModels_.push(v)}this.updateParams_(),(0,r.module$exports$Blockly$Procedures.mutateCallers)(this),this.setStatements_(u.hasStatements!==!1)},decompose:function(u){var T=(0,r.module$exports$Blockly$utils$xml.createElement)("block");T.setAttribute("type","procedures_mutatorcontainer");var v=(0,r.module$exports$Blockly$utils$xml.createElement)("statement");v.setAttribute("name","STACK"),T.appendChild(v);for(var M=0;M<this.arguments_.length;M++){var N=(0,r.module$exports$Blockly$utils$xml.createElement)("block");N.setAttribute("type","procedures_mutatorarg");var ut=(0,r.module$exports$Blockly$utils$xml.createElement)("field");ut.setAttribute("name","NAME");var no=(0,r.module$exports$Blockly$utils$xml.createTextNode)(this.arguments_[M]);ut.appendChild(no),N.appendChild(ut),ut=(0,r.module$exports$Blockly$utils$xml.createElement)("next"),N.appendChild(ut),v.appendChild(N),v=ut}return u=(0,r.module$exports$Blockly$Xml.domToBlock)(T,u),this.type==="procedures_defreturn"?u.setFieldValue(this.hasStatements_,"STATEMENTS"):u.removeInput("STATEMENT_INPUT"),(0,r.module$exports$Blockly$Procedures.mutateCallers)(this),u},compose:function(u){this.arguments_=[],this.paramIds_=[],this.argumentVarModels_=[];for(var T=u.getInputTargetBlock("STACK");T&&!T.isInsertionMarker();){var v=T.getFieldValue("NAME");this.arguments_.push(v),v=this.workspace.getVariable(v,""),this.argumentVarModels_.push(v),this.paramIds_.push(T.id),T=T.nextConnection&&T.nextConnection.targetBlock()}this.updateParams_(),(0,r.module$exports$Blockly$Procedures.mutateCallers)(this),u=u.getFieldValue("STATEMENTS"),u!==null&&(u=u==="TRUE",this.hasStatements_!==u)&&(u?(this.setStatements_(!0),r.module$exports$Blockly$Mutator.Mutator.reconnect(this.statementConnection_,this,"STACK"),this.statementConnection_=null):(u=this.getInput("STACK").connection,(this.statementConnection_=u.targetConnection)&&(u=u.targetBlock(),u.unplug(),u.bumpNeighbours()),this.setStatements_(!1)))},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},renameVarById:function(u,T){var v=this.workspace.getVariableById(u);if(v.type===""){v=v.name,T=this.workspace.getVariableById(T);for(var M=!1,N=0;N<this.argumentVarModels_.length;N++)this.argumentVarModels_[N].getId()===u&&(this.arguments_[N]=T.name,this.argumentVarModels_[N]=T,M=!0);M&&(this.displayRenamedVar_(v,T.name),(0,r.module$exports$Blockly$Procedures.mutateCallers)(this))}},updateVarName:function(u){for(var T=u.name,v=!1,M,N=0;N<this.argumentVarModels_.length;N++)this.argumentVarModels_[N].getId()===u.getId()&&(M=this.arguments_[N],this.arguments_[N]=T,v=!0);v&&(this.displayRenamedVar_(M,T),(0,r.module$exports$Blockly$Procedures.mutateCallers)(this))},displayRenamedVar_:function(u,T){if(this.updateParams_(),this.mutator&&this.mutator.isVisible())for(var v=this.mutator.workspace_.getAllBlocks(!1),M=0,N;N=v[M];M++)N.type==="procedures_mutatorarg"&&r.module$exports$Blockly$Names.Names.equals(u,N.getFieldValue("NAME"))&&N.setFieldValue(T,"NAME")},customContextMenu:function(u){if(!this.isInFlyout){var T={enabled:!0},v=this.getFieldValue("NAME");T.text=r.module$exports$Blockly$Msg.Msg.PROCEDURES_CREATE_DO.replace("%1",v);var M=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");for(M.setAttribute("name",v),v=0;v<this.arguments_.length;v++){var N=(0,r.module$exports$Blockly$utils$xml.createElement)("arg");N.setAttribute("name",this.arguments_[v]),M.appendChild(N)}if(v=(0,r.module$exports$Blockly$utils$xml.createElement)("block"),v.setAttribute("type",this.callType_),v.appendChild(M),T.callback=(0,r.module$exports$Blockly$ContextMenu.callbackFactory)(this,v),u.push(T),!this.isCollapsed())for(T=0;T<this.argumentVarModels_.length;T++)M={enabled:!0},v=this.argumentVarModels_[T],M.text=r.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET.replace("%1",v.name),v=(0,r.module$exports$Blockly$Variables.generateVariableFieldDom)(v),N=(0,r.module$exports$Blockly$utils$xml.createElement)("block"),N.setAttribute("type","variables_get"),N.appendChild(v),M.callback=(0,r.module$exports$Blockly$ContextMenu.callbackFactory)(this,N),u.push(M)}}};nt.blocks.procedures_defnoreturn=Object.assign({},Ao,{init:function(){var u=(0,r.module$exports$Blockly$Procedures.findLegalName)("",this);u=new r.module$exports$Blockly$FieldTextInput.FieldTextInput(u,r.module$exports$Blockly$Procedures.rename),u.setSpellcheck(!1),this.appendDummyInput().appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_TITLE).appendField(u,"NAME").appendField("","PARAMS"),this.setMutator(new r.module$exports$Blockly$Mutator.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_COMMENT&&this.setCommentText(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_TOOLTIP),this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!1]},callType_:"procedures_callnoreturn"}),nt.blocks.procedures_defreturn=Object.assign({},Ao,{init:function(){var u=(0,r.module$exports$Blockly$Procedures.findLegalName)("",this);u=new r.module$exports$Blockly$FieldTextInput.FieldTextInput(u,r.module$exports$Blockly$Procedures.rename),u.setSpellcheck(!1),this.appendDummyInput().appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_TITLE).appendField(u,"NAME").appendField("","PARAMS"),this.appendValueInput("RETURN").setAlign(r.module$exports$Blockly$Input.Align.RIGHT).appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.setMutator(new r.module$exports$Blockly$Mutator.Mutator(["procedures_mutatorarg"])),(this.workspace.options.comments||this.workspace.options.parentWorkspace&&this.workspace.options.parentWorkspace.options.comments)&&r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_COMMENT&&this.setCommentText(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_COMMENT),this.setStyle("procedure_blocks"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_TOOLTIP),this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.setStatements_(!0),this.statementConnection_=null},getProcedureDef:function(){return[this.getFieldValue("NAME"),this.arguments_,!0]},callType_:"procedures_callreturn"}),nt.blocks.procedures_mutatorcontainer={init:function(){this.appendDummyInput().appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORCONTAINER_TITLE),this.appendStatementInput("STACK"),this.appendDummyInput("STATEMENT_INPUT").appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_ALLOW_STATEMENTS).appendField(new r.module$exports$Blockly$FieldCheckbox.FieldCheckbox("TRUE"),"STATEMENTS"),this.setStyle("procedure_blocks"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORCONTAINER_TOOLTIP),this.contextMenu=!1}},nt.blocks.procedures_mutatorarg={init:function(){var u=new r.module$exports$Blockly$FieldTextInput.FieldTextInput(r.module$exports$Blockly$Procedures.DEFAULT_ARG,this.validator_);u.oldShowEditorFn_=u.showEditor_,u.showEditor_=function(){this.createdVariables_=[],this.oldShowEditorFn_()},this.appendDummyInput().appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORARG_TITLE).appendField(u,"NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.PROCEDURES_MUTATORARG_TOOLTIP),this.contextMenu=!1,u.onFinishEditing_=this.deleteIntermediateVars_,u.createdVariables_=[],u.onFinishEditing_("x")},validator_:function(u){var T=this.getSourceBlock(),v=r.module$exports$Blockly$Mutator.Mutator.findParentWs(T.workspace);if(u=u.replace(/[\s\xa0]+/g," ").replace(/^ | $/g,""),!u)return null;for(var M=(T.workspace.targetWorkspace||T.workspace).getAllBlocks(!1),N=u.toLowerCase(),ut=0;ut<M.length;ut++)if(M[ut].id!==this.getSourceBlock().id){var no=M[ut].getFieldValue("NAME");if(no&&no.toLowerCase()===N)return null}return T.isInFlyout||((T=v.getVariable(u,""))&&T.name!==u&&v.renameVariableById(T.getId(),u),T||(T=v.createVariable(u,""))&&this.createdVariables_&&this.createdVariables_.push(T)),u},deleteIntermediateVars_:function(u){var T=r.module$exports$Blockly$Mutator.Mutator.findParentWs(this.getSourceBlock().workspace);if(T)for(var v=0;v<this.createdVariables_.length;v++){var M=this.createdVariables_[v];M.name!==u&&T.deleteVariableById(M.getId())}}};var Ho={getProcedureCall:function(){return this.getFieldValue("NAME")},renameProcedure:function(u,T){r.module$exports$Blockly$Names.Names.equals(u,this.getProcedureCall())&&(this.setFieldValue(T,"NAME"),this.setTooltip((this.outputConnection?r.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLRETURN_TOOLTIP:r.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLNORETURN_TOOLTIP).replace("%1",T)))},setProcedureParameters_:function(u,T){var v=(0,r.module$exports$Blockly$Procedures.getDefinition)(this.getProcedureCall(),this.workspace),M=v&&v.mutator&&v.mutator.isVisible();if(M?this.setCollapsed(!1):(this.quarkConnections_={},this.quarkIds_=null),u.join(`
`)===this.arguments_.join(`
`))this.quarkIds_=T;else{if(T.length!==u.length)throw RangeError("paramNames and paramIds must be the same length.");this.quarkIds_||(this.quarkConnections_={},this.quarkIds_=[]),v=this.rendered,this.rendered=!1;for(var N=0;N<this.arguments_.length;N++){var ut=this.getInput("ARG"+N);ut&&(ut=ut.connection.targetConnection,this.quarkConnections_[this.quarkIds_[N]]=ut,M&&ut&&T.indexOf(this.quarkIds_[N])===-1&&(ut.disconnect(),ut.getSourceBlock().bumpNeighbours()))}for(this.arguments_=[].concat(u),this.argumentVarModels_=[],u=0;u<this.arguments_.length;u++)M=(0,r.module$exports$Blockly$Variables.getOrCreateVariablePackage)(this.workspace,null,this.arguments_[u],""),this.argumentVarModels_.push(M);if(this.updateShape_(),this.quarkIds_=T)for(T=0;T<this.arguments_.length;T++)u=this.quarkIds_[T],u in this.quarkConnections_&&(r.module$exports$Blockly$Mutator.Mutator.reconnect(this.quarkConnections_[u],this,"ARG"+T)||delete this.quarkConnections_[u]);(this.rendered=v)&&this.render()}},updateShape_:function(){for(var u=0;u<this.arguments_.length;u++){var T=this.getField("ARGNAME"+u);if(T){(0,r.module$exports$Blockly$Events.disable)();try{T.setValue(this.arguments_[u])}finally{(0,r.module$exports$Blockly$Events.enable)()}}else T=new r.module$exports$Blockly$FieldLabel.FieldLabel(this.arguments_[u]),this.appendValueInput("ARG"+u).setAlign(r.module$exports$Blockly$Input.Align.RIGHT).appendField(T,"ARGNAME"+u).init()}for(u=this.arguments_.length;this.getInput("ARG"+u);u++)this.removeInput("ARG"+u);(u=this.getInput("TOPROW"))&&(this.arguments_.length?this.getField("WITH")||(u.appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_CALL_BEFORE_PARAMS,"WITH"),u.init()):this.getField("WITH")&&u.removeField("WITH"))},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");u.setAttribute("name",this.getProcedureCall());for(var T=0;T<this.arguments_.length;T++){var v=(0,r.module$exports$Blockly$utils$xml.createElement)("arg");v.setAttribute("name",this.arguments_[T]),u.appendChild(v)}return u},domToMutation:function(u){var T=u.getAttribute("name");this.renameProcedure(this.getProcedureCall(),T),T=[];for(var v=[],M=0,N;N=u.childNodes[M];M++)N.nodeName.toLowerCase()==="arg"&&(T.push(N.getAttribute("name")),v.push(N.getAttribute("paramId")));this.setProcedureParameters_(T,v)},saveExtraState:function(){var u=Object.create(null);return u.name=this.getProcedureCall(),this.arguments_.length&&(u.params=this.arguments_),u},loadExtraState:function(u){if(this.renameProcedure(this.getProcedureCall(),u.name),u=u.params){var T=[];T.length=u.length,T.fill(null),this.setProcedureParameters_(u,T)}},getVars:function(){return this.arguments_},getVarModels:function(){return this.argumentVarModels_},onchange:function(u){if(this.workspace&&!this.workspace.isFlyout&&u.recordUndo)if(u.type===r.module$exports$Blockly$Events.BLOCK_CREATE&&u.ids.indexOf(this.id)!==-1){var T=this.getProcedureCall();if(T=(0,r.module$exports$Blockly$Procedures.getDefinition)(T,this.workspace),!T||T.type===this.defType_&&JSON.stringify(T.getVars())===JSON.stringify(this.arguments_)||(T=null),!T){(0,r.module$exports$Blockly$Events.setGroup)(u.group),u=(0,r.module$exports$Blockly$utils$xml.createElement)("xml"),T=(0,r.module$exports$Blockly$utils$xml.createElement)("block"),T.setAttribute("type",this.defType_);var v=this.getRelativeToSurfaceXY(),M=v.y+2*r.module$exports$Blockly$config.config.snapRadius;T.setAttribute("x",v.x+r.module$exports$Blockly$config.config.snapRadius*(this.RTL?-1:1)),T.setAttribute("y",M),v=this.mutationToDom(),T.appendChild(v),v=(0,r.module$exports$Blockly$utils$xml.createElement)("field"),v.setAttribute("name","NAME"),M=this.getProcedureCall();var N=(0,r.module$exports$Blockly$Procedures.findLegalName)(M,this);M!==N&&this.renameProcedure(M,N),v.appendChild((0,r.module$exports$Blockly$utils$xml.createTextNode)(M)),T.appendChild(v),u.appendChild(T),(0,r.module$exports$Blockly$Xml.domToWorkspace)(u,this.workspace),(0,r.module$exports$Blockly$Events.setGroup)(!1)}}else u.type===r.module$exports$Blockly$Events.BLOCK_DELETE?(T=this.getProcedureCall(),(0,r.module$exports$Blockly$Procedures.getDefinition)(T,this.workspace)||((0,r.module$exports$Blockly$Events.setGroup)(u.group),this.dispose(!0),(0,r.module$exports$Blockly$Events.setGroup)(!1))):u.type===r.module$exports$Blockly$Events.CHANGE&&u.element==="disabled"&&(T=this.getProcedureCall(),(T=(0,r.module$exports$Blockly$Procedures.getDefinition)(T,this.workspace))&&T.id===u.blockId&&((T=(0,r.module$exports$Blockly$Events.getGroup)())&&console.log("Saw an existing group while responding to a definition change"),(0,r.module$exports$Blockly$Events.setGroup)(u.group),u.newValue?(this.previousEnabledState_=this.isEnabled(),this.setEnabled(!1)):this.setEnabled(this.previousEnabledState_),(0,r.module$exports$Blockly$Events.setGroup)(T)))},customContextMenu:function(u){if(this.workspace.isMovable()){var T={enabled:!0};T.text=r.module$exports$Blockly$Msg.Msg.PROCEDURES_HIGHLIGHT_DEF;var v=this.getProcedureCall(),M=this.workspace;T.callback=function(){var N=(0,r.module$exports$Blockly$Procedures.getDefinition)(v,M);N&&(M.centerOnBlock(N.id),N.select())},u.push(T)}}};nt.blocks.procedures_callnoreturn=Object.assign({},Ho,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLNORETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defnoreturn"}),nt.blocks.procedures_callreturn=Object.assign({},Ho,{init:function(){this.appendDummyInput("TOPROW").appendField("","NAME"),this.setOutput(!0),this.setStyle("procedure_blocks"),this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.PROCEDURES_CALLRETURN_HELPURL),this.arguments_=[],this.argumentVarModels_=[],this.quarkConnections_={},this.quarkIds_=null,this.previousEnabledState_=!0},defType_:"procedures_defreturn"}),nt.blocks.procedures_ifreturn={init:function(){this.appendValueInput("CONDITION").setCheck("Boolean").appendField(r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_IF),this.appendValueInput("VALUE").appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setStyle("procedure_blocks"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_TOOLTIP),this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_HELPURL),this.hasReturnValue_=!0},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return u.setAttribute("value",Number(this.hasReturnValue_)),u},domToMutation:function(u){this.hasReturnValue_=u.getAttribute("value")==="1",this.hasReturnValue_||(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN))},onchange:function(u){if(!(this.workspace.isDragging&&this.workspace.isDragging()||u.type!==r.module$exports$Blockly$Events.BLOCK_MOVE)){var T=!1,v=this;do{if(this.FUNCTION_TYPES.indexOf(v.type)!==-1){T=!0;break}v=v.getSurroundParent()}while(v);T?(v.type==="procedures_defnoreturn"&&this.hasReturnValue_?(this.removeInput("VALUE"),this.appendDummyInput("VALUE").appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!1):v.type!=="procedures_defreturn"||this.hasReturnValue_||(this.removeInput("VALUE"),this.appendValueInput("VALUE").appendField(r.module$exports$Blockly$Msg.Msg.PROCEDURES_DEFRETURN_RETURN),this.hasReturnValue_=!0),this.setWarningText(null)):this.setWarningText(r.module$exports$Blockly$Msg.Msg.PROCEDURES_IFRETURN_WARNING),this.isInFlyout||(v=(0,r.module$exports$Blockly$Events.getGroup)(),(0,r.module$exports$Blockly$Events.setGroup)(u.group),this.setEnabled(T),(0,r.module$exports$Blockly$Events.setGroup)(v))}},FUNCTION_TYPES:["procedures_defnoreturn","procedures_defreturn"]},(0,r.module$exports$Blockly$common.defineBlocks)(nt.blocks);var Q={};Q.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"math_number",message0:"%1",args0:[{type:"field_number",name:"NUM",value:0}],output:"Number",helpUrl:"%{BKY_MATH_NUMBER_HELPURL}",style:"math_blocks",tooltip:"%{BKY_MATH_NUMBER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"math_arithmetic",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Number"},{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ADDITION_SYMBOL}","ADD"],["%{BKY_MATH_SUBTRACTION_SYMBOL}","MINUS"],["%{BKY_MATH_MULTIPLICATION_SYMBOL}","MULTIPLY"],["%{BKY_MATH_DIVISION_SYMBOL}","DIVIDE"],["%{BKY_MATH_POWER_SYMBOL}","POWER"]]},{type:"input_value",name:"B",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ARITHMETIC_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_single",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_SINGLE_OP_ROOT}","ROOT"],["%{BKY_MATH_SINGLE_OP_ABSOLUTE}","ABS"],["-","NEG"],["ln","LN"],["log10","LOG10"],["e^","EXP"],["10^","POW10"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_SINGLE_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_trig",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_TRIG_SIN}","SIN"],["%{BKY_MATH_TRIG_COS}","COS"],["%{BKY_MATH_TRIG_TAN}","TAN"],["%{BKY_MATH_TRIG_ASIN}","ASIN"],["%{BKY_MATH_TRIG_ACOS}","ACOS"],["%{BKY_MATH_TRIG_ATAN}","ATAN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_TRIG_HELPURL}",extensions:["math_op_tooltip"]},{type:"math_constant",message0:"%1",args0:[{type:"field_dropdown",name:"CONSTANT",options:[["\u03C0","PI"],["e","E"],["\u03C6","GOLDEN_RATIO"],["sqrt(2)","SQRT2"],["sqrt(\xBD)","SQRT1_2"],["\u221E","INFINITY"]]}],output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTANT_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTANT_HELPURL}"},{type:"math_number_property",message0:"%1 %2",args0:[{type:"input_value",name:"NUMBER_TO_CHECK",check:"Number"},{type:"field_dropdown",name:"PROPERTY",options:[["%{BKY_MATH_IS_EVEN}","EVEN"],["%{BKY_MATH_IS_ODD}","ODD"],["%{BKY_MATH_IS_PRIME}","PRIME"],["%{BKY_MATH_IS_WHOLE}","WHOLE"],["%{BKY_MATH_IS_POSITIVE}","POSITIVE"],["%{BKY_MATH_IS_NEGATIVE}","NEGATIVE"],["%{BKY_MATH_IS_DIVISIBLE_BY}","DIVISIBLE_BY"]]}],inputsInline:!0,output:"Boolean",style:"math_blocks",tooltip:"%{BKY_MATH_IS_TOOLTIP}",mutator:"math_is_divisibleby_mutator"},{type:"math_change",message0:"%{BKY_MATH_CHANGE_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:"%{BKY_MATH_CHANGE_TITLE_ITEM}"},{type:"input_value",name:"DELTA",check:"Number"}],previousStatement:null,nextStatement:null,style:"variable_blocks",helpUrl:"%{BKY_MATH_CHANGE_HELPURL}",extensions:["math_change_tooltip"]},{type:"math_round",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ROUND_OPERATOR_ROUND}","ROUND"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDUP}","ROUNDUP"],["%{BKY_MATH_ROUND_OPERATOR_ROUNDDOWN}","ROUNDDOWN"]]},{type:"input_value",name:"NUM",check:"Number"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ROUND_HELPURL}",tooltip:"%{BKY_MATH_ROUND_TOOLTIP}"},{type:"math_on_list",message0:"%1 %2",args0:[{type:"field_dropdown",name:"OP",options:[["%{BKY_MATH_ONLIST_OPERATOR_SUM}","SUM"],["%{BKY_MATH_ONLIST_OPERATOR_MIN}","MIN"],["%{BKY_MATH_ONLIST_OPERATOR_MAX}","MAX"],["%{BKY_MATH_ONLIST_OPERATOR_AVERAGE}","AVERAGE"],["%{BKY_MATH_ONLIST_OPERATOR_MEDIAN}","MEDIAN"],["%{BKY_MATH_ONLIST_OPERATOR_MODE}","MODE"],["%{BKY_MATH_ONLIST_OPERATOR_STD_DEV}","STD_DEV"],["%{BKY_MATH_ONLIST_OPERATOR_RANDOM}","RANDOM"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Number",style:"math_blocks",helpUrl:"%{BKY_MATH_ONLIST_HELPURL}",mutator:"math_modes_of_list_mutator",extensions:["math_op_tooltip"]},{type:"math_modulo",message0:"%{BKY_MATH_MODULO_TITLE}",args0:[{type:"input_value",name:"DIVIDEND",check:"Number"},{type:"input_value",name:"DIVISOR",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_MODULO_TOOLTIP}",helpUrl:"%{BKY_MATH_MODULO_HELPURL}"},{type:"math_constrain",message0:"%{BKY_MATH_CONSTRAIN_TITLE}",args0:[{type:"input_value",name:"VALUE",check:"Number"},{type:"input_value",name:"LOW",check:"Number"},{type:"input_value",name:"HIGH",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_CONSTRAIN_TOOLTIP}",helpUrl:"%{BKY_MATH_CONSTRAIN_HELPURL}"},{type:"math_random_int",message0:"%{BKY_MATH_RANDOM_INT_TITLE}",args0:[{type:"input_value",name:"FROM",check:"Number"},{type:"input_value",name:"TO",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_INT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_INT_HELPURL}"},{type:"math_random_float",message0:"%{BKY_MATH_RANDOM_FLOAT_TITLE_RANDOM}",output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_RANDOM_FLOAT_TOOLTIP}",helpUrl:"%{BKY_MATH_RANDOM_FLOAT_HELPURL}"},{type:"math_atan2",message0:"%{BKY_MATH_ATAN2_TITLE}",args0:[{type:"input_value",name:"X",check:"Number"},{type:"input_value",name:"Y",check:"Number"}],inputsInline:!0,output:"Number",style:"math_blocks",tooltip:"%{BKY_MATH_ATAN2_TOOLTIP}",helpUrl:"%{BKY_MATH_ATAN2_HELPURL}"}]);var go={ADD:"%{BKY_MATH_ARITHMETIC_TOOLTIP_ADD}",MINUS:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MINUS}",MULTIPLY:"%{BKY_MATH_ARITHMETIC_TOOLTIP_MULTIPLY}",DIVIDE:"%{BKY_MATH_ARITHMETIC_TOOLTIP_DIVIDE}",POWER:"%{BKY_MATH_ARITHMETIC_TOOLTIP_POWER}",ROOT:"%{BKY_MATH_SINGLE_TOOLTIP_ROOT}",ABS:"%{BKY_MATH_SINGLE_TOOLTIP_ABS}",NEG:"%{BKY_MATH_SINGLE_TOOLTIP_NEG}",LN:"%{BKY_MATH_SINGLE_TOOLTIP_LN}",LOG10:"%{BKY_MATH_SINGLE_TOOLTIP_LOG10}",EXP:"%{BKY_MATH_SINGLE_TOOLTIP_EXP}",POW10:"%{BKY_MATH_SINGLE_TOOLTIP_POW10}",SIN:"%{BKY_MATH_TRIG_TOOLTIP_SIN}",COS:"%{BKY_MATH_TRIG_TOOLTIP_COS}",TAN:"%{BKY_MATH_TRIG_TOOLTIP_TAN}",ASIN:"%{BKY_MATH_TRIG_TOOLTIP_ASIN}",ACOS:"%{BKY_MATH_TRIG_TOOLTIP_ACOS}",ATAN:"%{BKY_MATH_TRIG_TOOLTIP_ATAN}",SUM:"%{BKY_MATH_ONLIST_TOOLTIP_SUM}",MIN:"%{BKY_MATH_ONLIST_TOOLTIP_MIN}",MAX:"%{BKY_MATH_ONLIST_TOOLTIP_MAX}",AVERAGE:"%{BKY_MATH_ONLIST_TOOLTIP_AVERAGE}",MEDIAN:"%{BKY_MATH_ONLIST_TOOLTIP_MEDIAN}",MODE:"%{BKY_MATH_ONLIST_TOOLTIP_MODE}",STD_DEV:"%{BKY_MATH_ONLIST_TOOLTIP_STD_DEV}",RANDOM:"%{BKY_MATH_ONLIST_TOOLTIP_RANDOM}"};(0,r.module$exports$Blockly$Extensions.register)("math_op_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipForDropdown)("OP",go));var oo={mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation"),T=this.getFieldValue("PROPERTY")==="DIVISIBLE_BY";return u.setAttribute("divisor_input",T),u},domToMutation:function(u){u=u.getAttribute("divisor_input")==="true",this.updateShape_(u)},updateShape_:function(u){var T=this.getInput("DIVISOR");u?T||this.appendValueInput("DIVISOR").setCheck("Number"):T&&this.removeInput("DIVISOR")}},Ve=function(){this.getField("PROPERTY").setValidator(function(u){u=u==="DIVISIBLE_BY",this.getSourceBlock().updateShape_(u)})};(0,r.module$exports$Blockly$Extensions.registerMutator)("math_is_divisibleby_mutator",oo,Ve),(0,r.module$exports$Blockly$Extensions.register)("math_change_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_MATH_CHANGE_TOOLTIP}","VAR"));var pe={updateType_:function(u){u==="MODE"?this.outputConnection.setCheck("Array"):this.outputConnection.setCheck("Number")},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return u.setAttribute("op",this.getFieldValue("OP")),u},domToMutation:function(u){this.updateType_(u.getAttribute("op"))}},Re=function(){this.getField("OP").setValidator(function(u){this.updateType_(u)}.bind(this))};(0,r.module$exports$Blockly$Extensions.registerMutator)("math_modes_of_list_mutator",pe,Re),(0,r.module$exports$Blockly$common.defineBlocks)(Q.blocks);var ne={};ne.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"controls_repeat_ext",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"input_value",name:"TIMES",check:"Number"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_repeat",message0:"%{BKY_CONTROLS_REPEAT_TITLE}",args0:[{type:"field_number",name:"TIMES",value:10,min:0,precision:1}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",tooltip:"%{BKY_CONTROLS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_CONTROLS_REPEAT_HELPURL}"},{type:"controls_whileUntil",message0:"%1 %2",args0:[{type:"field_dropdown",name:"MODE",options:[["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_WHILE}","WHILE"],["%{BKY_CONTROLS_WHILEUNTIL_OPERATOR_UNTIL}","UNTIL"]]},{type:"input_value",name:"BOOL",check:"Boolean"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_WHILEUNTIL_HELPURL}",extensions:["controls_whileUntil_tooltip"]},{type:"controls_for",message0:"%{BKY_CONTROLS_FOR_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"FROM",check:"Number",align:"RIGHT"},{type:"input_value",name:"TO",check:"Number",align:"RIGHT"},{type:"input_value",name:"BY",check:"Number",align:"RIGHT"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],inputsInline:!0,previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOR_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_for_tooltip"]},{type:"controls_forEach",message0:"%{BKY_CONTROLS_FOREACH_TITLE}",args0:[{type:"field_variable",name:"VAR",variable:null},{type:"input_value",name:"LIST",check:"Array"}],message1:"%{BKY_CONTROLS_REPEAT_INPUT_DO} %1",args1:[{type:"input_statement",name:"DO"}],previousStatement:null,nextStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FOREACH_HELPURL}",extensions:["contextMenu_newGetVariableBlock","controls_forEach_tooltip"]},{type:"controls_flow_statements",message0:"%1",args0:[{type:"field_dropdown",name:"FLOW",options:[["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_BREAK}","BREAK"],["%{BKY_CONTROLS_FLOW_STATEMENTS_OPERATOR_CONTINUE}","CONTINUE"]]}],previousStatement:null,style:"loop_blocks",helpUrl:"%{BKY_CONTROLS_FLOW_STATEMENTS_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_flow_tooltip","controls_flow_in_loop_check"]}]);var xo={WHILE:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_WHILE}",UNTIL:"%{BKY_CONTROLS_WHILEUNTIL_TOOLTIP_UNTIL}"};(0,r.module$exports$Blockly$Extensions.register)("controls_whileUntil_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipForDropdown)("MODE",xo));var ie={BREAK:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_BREAK}",CONTINUE:"%{BKY_CONTROLS_FLOW_STATEMENTS_TOOLTIP_CONTINUE}"};(0,r.module$exports$Blockly$Extensions.register)("controls_flow_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipForDropdown)("FLOW",ie));var Mo={customContextMenu:function(u){if(!this.isInFlyout){var T=this.getField("VAR").getVariable(),v=T.name;if(!this.isCollapsed()&&v!==null){var M={enabled:!0};M.text=r.module$exports$Blockly$Msg.Msg.VARIABLES_SET_CREATE_GET.replace("%1",v),T=(0,r.module$exports$Blockly$Variables.generateVariableFieldDom)(T),v=(0,r.module$exports$Blockly$utils$xml.createElement)("block"),v.setAttribute("type","variables_get"),v.appendChild(T),M.callback=(0,r.module$exports$Blockly$ContextMenu.callbackFactory)(this,v),u.push(M)}}}};(0,r.module$exports$Blockly$Extensions.registerMixin)("contextMenu_newGetVariableBlock",Mo),(0,r.module$exports$Blockly$Extensions.register)("controls_for_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_CONTROLS_FOR_TOOLTIP}","VAR")),(0,r.module$exports$Blockly$Extensions.register)("controls_forEach_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipWithFieldText)("%{BKY_CONTROLS_FOREACH_TOOLTIP}","VAR")),ne.loopTypes=new Set(["controls_repeat","controls_repeat_ext","controls_forEach","controls_for","controls_whileUntil"]);var Ft={getSurroundLoop:function(){var u=this;do{if(ne.loopTypes.has(u.type))return u;u=u.getSurroundParent()}while(u);return null},onchange:function(u){if(this.workspace.isDragging&&!this.workspace.isDragging()&&u.type===r.module$exports$Blockly$Events.BLOCK_MOVE){var T=this.getSurroundLoop(this);if(this.setWarningText(T?null:r.module$exports$Blockly$Msg.Msg.CONTROLS_FLOW_STATEMENTS_WARNING),!this.isInFlyout){var v=(0,r.module$exports$Blockly$Events.getGroup)();(0,r.module$exports$Blockly$Events.setGroup)(u.group),this.setEnabled(T),(0,r.module$exports$Blockly$Events.setGroup)(v)}}}};(0,r.module$exports$Blockly$Extensions.registerMixin)("controls_flow_in_loop_check",Ft),(0,r.module$exports$Blockly$common.defineBlocks)(ne.blocks);var No={};No.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"logic_boolean",message0:"%1",args0:[{type:"field_dropdown",name:"BOOL",options:[["%{BKY_LOGIC_BOOLEAN_TRUE}","TRUE"],["%{BKY_LOGIC_BOOLEAN_FALSE}","FALSE"]]}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_BOOLEAN_TOOLTIP}",helpUrl:"%{BKY_LOGIC_BOOLEAN_HELPURL}"},{type:"controls_if",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],previousStatement:null,nextStatement:null,style:"logic_blocks",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,mutator:"controls_if_mutator",extensions:["controls_if_tooltip"]},{type:"controls_ifelse",message0:"%{BKY_CONTROLS_IF_MSG_IF} %1",args0:[{type:"input_value",name:"IF0",check:"Boolean"}],message1:"%{BKY_CONTROLS_IF_MSG_THEN} %1",args1:[{type:"input_statement",name:"DO0"}],message2:"%{BKY_CONTROLS_IF_MSG_ELSE} %1",args2:[{type:"input_statement",name:"ELSE"}],previousStatement:null,nextStatement:null,style:"logic_blocks",tooltip:"%{BKYCONTROLS_IF_TOOLTIP_2}",helpUrl:"%{BKY_CONTROLS_IF_HELPURL}",suppressPrefixSuffix:!0,extensions:["controls_if_tooltip"]},{type:"logic_compare",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A"},{type:"field_dropdown",name:"OP",options:[["=","EQ"],["\u2260","NEQ"],["\u200F<","LT"],["\u200F\u2264","LTE"],["\u200F>","GT"],["\u200F\u2265","GTE"]]},{type:"input_value",name:"B"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_COMPARE_HELPURL}",extensions:["logic_compare","logic_op_tooltip"]},{type:"logic_operation",message0:"%1 %2 %3",args0:[{type:"input_value",name:"A",check:"Boolean"},{type:"field_dropdown",name:"OP",options:[["%{BKY_LOGIC_OPERATION_AND}","AND"],["%{BKY_LOGIC_OPERATION_OR}","OR"]]},{type:"input_value",name:"B",check:"Boolean"}],inputsInline:!0,output:"Boolean",style:"logic_blocks",helpUrl:"%{BKY_LOGIC_OPERATION_HELPURL}",extensions:["logic_op_tooltip"]},{type:"logic_negate",message0:"%{BKY_LOGIC_NEGATE_TITLE}",args0:[{type:"input_value",name:"BOOL",check:"Boolean"}],output:"Boolean",style:"logic_blocks",tooltip:"%{BKY_LOGIC_NEGATE_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NEGATE_HELPURL}"},{type:"logic_null",message0:"%{BKY_LOGIC_NULL}",output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_NULL_TOOLTIP}",helpUrl:"%{BKY_LOGIC_NULL_HELPURL}"},{type:"logic_ternary",message0:"%{BKY_LOGIC_TERNARY_CONDITION} %1",args0:[{type:"input_value",name:"IF",check:"Boolean"}],message1:"%{BKY_LOGIC_TERNARY_IF_TRUE} %1",args1:[{type:"input_value",name:"THEN"}],message2:"%{BKY_LOGIC_TERNARY_IF_FALSE} %1",args2:[{type:"input_value",name:"ELSE"}],output:null,style:"logic_blocks",tooltip:"%{BKY_LOGIC_TERNARY_TOOLTIP}",helpUrl:"%{BKY_LOGIC_TERNARY_HELPURL}",extensions:["logic_ternary"]},{type:"controls_if_if",message0:"%{BKY_CONTROLS_IF_IF_TITLE_IF}",nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_IF_TOOLTIP}"},{type:"controls_if_elseif",message0:"%{BKY_CONTROLS_IF_ELSEIF_TITLE_ELSEIF}",previousStatement:null,nextStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSEIF_TOOLTIP}"},{type:"controls_if_else",message0:"%{BKY_CONTROLS_IF_ELSE_TITLE_ELSE}",previousStatement:null,enableContextMenu:!1,style:"logic_blocks",tooltip:"%{BKY_CONTROLS_IF_ELSE_TOOLTIP}"}]);var Qn={EQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_EQ}",NEQ:"%{BKY_LOGIC_COMPARE_TOOLTIP_NEQ}",LT:"%{BKY_LOGIC_COMPARE_TOOLTIP_LT}",LTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_LTE}",GT:"%{BKY_LOGIC_COMPARE_TOOLTIP_GT}",GTE:"%{BKY_LOGIC_COMPARE_TOOLTIP_GTE}",AND:"%{BKY_LOGIC_OPERATION_TOOLTIP_AND}",OR:"%{BKY_LOGIC_OPERATION_TOOLTIP_OR}"};(0,r.module$exports$Blockly$Extensions.register)("logic_op_tooltip",(0,r.module$exports$Blockly$Extensions.buildTooltipForDropdown)("OP",Qn));var ti={elseifCount_:0,elseCount_:0,mutationToDom:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return this.elseifCount_&&u.setAttribute("elseif",this.elseifCount_),this.elseCount_&&u.setAttribute("else",1),u},domToMutation:function(u){this.elseifCount_=parseInt(u.getAttribute("elseif"),10)||0,this.elseCount_=parseInt(u.getAttribute("else"),10)||0,this.rebuildShape_()},saveExtraState:function(){if(!this.elseifCount_&&!this.elseCount_)return null;var u=Object.create(null);return this.elseifCount_&&(u.elseIfCount=this.elseifCount_),this.elseCount_&&(u.hasElse=!0),u},loadExtraState:function(u){this.elseifCount_=u.elseIfCount||0,this.elseCount_=u.hasElse?1:0,this.updateShape_()},decompose:function(u){var T=u.newBlock("controls_if_if");T.initSvg();for(var v=T.nextConnection,M=1;M<=this.elseifCount_;M++){var N=u.newBlock("controls_if_elseif");N.initSvg(),v.connect(N.previousConnection),v=N.nextConnection}return this.elseCount_&&(u=u.newBlock("controls_if_else"),u.initSvg(),v.connect(u.previousConnection)),T},compose:function(u){u=u.nextConnection.targetBlock(),this.elseCount_=this.elseifCount_=0;for(var T=[null],v=[null],M=null;u&&!u.isInsertionMarker();){switch(u.type){case"controls_if_elseif":this.elseifCount_++,T.push(u.valueConnection_),v.push(u.statementConnection_);break;case"controls_if_else":this.elseCount_++,M=u.statementConnection_;break;default:throw TypeError("Unknown block type: "+u.type)}u=u.nextConnection&&u.nextConnection.targetBlock()}this.updateShape_(),this.reconnectChildBlocks_(T,v,M)},saveConnections:function(u){u=u.nextConnection.targetBlock();for(var T=1;u;){switch(u.type){case"controls_if_elseif":var v=this.getInput("IF"+T),M=this.getInput("DO"+T);u.valueConnection_=v&&v.connection.targetConnection,u.statementConnection_=M&&M.connection.targetConnection,T++;break;case"controls_if_else":v=this.getInput("ELSE"),u.statementConnection_=v&&v.connection.targetConnection;break;default:throw TypeError("Unknown block type: "+u.type)}u=u.nextConnection&&u.nextConnection.targetBlock()}},rebuildShape_:function(){var u=[null],T=[null],v=null;this.getInput("ELSE")&&(v=this.getInput("ELSE").connection.targetConnection);for(var M=1;this.getInput("IF"+M);M++){var N=this.getInput("IF"+M),ut=this.getInput("DO"+M);u.push(N.connection.targetConnection),T.push(ut.connection.targetConnection)}this.updateShape_(),this.reconnectChildBlocks_(u,T,v)},updateShape_:function(){this.getInput("ELSE")&&this.removeInput("ELSE");for(var u=1;this.getInput("IF"+u);u++)this.removeInput("IF"+u),this.removeInput("DO"+u);for(u=1;u<=this.elseifCount_;u++)this.appendValueInput("IF"+u).setCheck("Boolean").appendField(r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_ELSEIF),this.appendStatementInput("DO"+u).appendField(r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_THEN);this.elseCount_&&this.appendStatementInput("ELSE").appendField(r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_MSG_ELSE)},reconnectChildBlocks_:function(u,T,v){for(var M=1;M<=this.elseifCount_;M++)r.module$exports$Blockly$Mutator.Mutator.reconnect(u[M],this,"IF"+M),r.module$exports$Blockly$Mutator.Mutator.reconnect(T[M],this,"DO"+M);r.module$exports$Blockly$Mutator.Mutator.reconnect(v,this,"ELSE")}};(0,r.module$exports$Blockly$Extensions.registerMutator)("controls_if_mutator",ti,null,["controls_if_elseif","controls_if_else"]);var Dn=function(){this.setTooltip(function(){if(this.elseifCount_||this.elseCount_){if(!this.elseifCount_&&this.elseCount_)return r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_2;if(this.elseifCount_&&!this.elseCount_)return r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_3;if(this.elseifCount_&&this.elseCount_)return r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_4}else return r.module$exports$Blockly$Msg.Msg.CONTROLS_IF_TOOLTIP_1;return""}.bind(this))};(0,r.module$exports$Blockly$Extensions.register)("controls_if_tooltip",Dn);var ei={onchange:function(u){this.prevBlocks_||(this.prevBlocks_=[null,null]);var T=this.getInputTargetBlock("A"),v=this.getInputTargetBlock("B");T&&v&&!this.workspace.connectionChecker.doTypeChecks(T.outputConnection,v.outputConnection)&&((0,r.module$exports$Blockly$Events.setGroup)(u.group),u=this.prevBlocks_[0],u!==T&&(T.unplug(),!u||u.isDisposed()||u.isShadow()||this.getInput("A").connection.connect(u.outputConnection)),T=this.prevBlocks_[1],T!==v&&(v.unplug(),!T||T.isDisposed()||T.isShadow()||this.getInput("B").connection.connect(T.outputConnection)),this.bumpNeighbours(),(0,r.module$exports$Blockly$Events.setGroup)(!1)),this.prevBlocks_[0]=this.getInputTargetBlock("A"),this.prevBlocks_[1]=this.getInputTargetBlock("B")}},oi=function(){this.mixin(ei)};(0,r.module$exports$Blockly$Extensions.register)("logic_compare",oi);var ni={prevParentConnection_:null,onchange:function(u){var T=this.getInputTargetBlock("THEN"),v=this.getInputTargetBlock("ELSE"),M=this.outputConnection.targetConnection;if((T||v)&&M)for(var N=0;2>N;N++){var ut=N===1?T:v;ut&&!ut.workspace.connectionChecker.doTypeChecks(ut.outputConnection,M)&&((0,r.module$exports$Blockly$Events.setGroup)(u.group),M===this.prevParentConnection_?(this.unplug(),M.getSourceBlock().bumpNeighbours()):(ut.unplug(),ut.bumpNeighbours()),(0,r.module$exports$Blockly$Events.setGroup)(!1))}this.prevParentConnection_=M}};(0,r.module$exports$Blockly$Extensions.registerMixin)("logic_ternary",ni),(0,r.module$exports$Blockly$common.defineBlocks)(No.blocks);var fe={};fe.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"lists_create_empty",message0:"%{BKY_LISTS_CREATE_EMPTY_TITLE}",output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_CREATE_EMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_CREATE_EMPTY_HELPURL}"},{type:"lists_repeat",message0:"%{BKY_LISTS_REPEAT_TITLE}",args0:[{type:"input_value",name:"ITEM"},{type:"input_value",name:"NUM",check:"Number"}],output:"Array",style:"list_blocks",tooltip:"%{BKY_LISTS_REPEAT_TOOLTIP}",helpUrl:"%{BKY_LISTS_REPEAT_HELPURL}"},{type:"lists_reverse",message0:"%{BKY_LISTS_REVERSE_MESSAGE0}",args0:[{type:"input_value",name:"LIST",check:"Array"}],output:"Array",inputsInline:!0,style:"list_blocks",tooltip:"%{BKY_LISTS_REVERSE_TOOLTIP}",helpUrl:"%{BKY_LISTS_REVERSE_HELPURL}"},{type:"lists_isEmpty",message0:"%{BKY_LISTS_ISEMPTY_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Boolean",style:"list_blocks",tooltip:"%{BKY_LISTS_ISEMPTY_TOOLTIP}",helpUrl:"%{BKY_LISTS_ISEMPTY_HELPURL}"},{type:"lists_length",message0:"%{BKY_LISTS_LENGTH_TITLE}",args0:[{type:"input_value",name:"VALUE",check:["String","Array"]}],output:"Number",style:"list_blocks",tooltip:"%{BKY_LISTS_LENGTH_TOOLTIP}",helpUrl:"%{BKY_LISTS_LENGTH_HELPURL}"}]),fe.blocks.lists_create_with={init:function(){this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_HELPURL),this.setStyle("list_blocks"),this.itemCount_=3,this.updateShape_(),this.setOutput(!0,"Array"),this.setMutator(new r.module$exports$Blockly$Mutator.Mutator(["lists_create_with_item"])),this.setTooltip(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_TOOLTIP)},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return u.setAttribute("items",this.itemCount_),u},domToMutation:function(u){this.itemCount_=parseInt(u.getAttribute("items"),10),this.updateShape_()},saveExtraState:function(){return{itemCount:this.itemCount_}},loadExtraState:function(u){this.itemCount_=u.itemCount,this.updateShape_()},decompose:function(u){var T=u.newBlock("lists_create_with_container");T.initSvg();for(var v=T.getInput("STACK").connection,M=0;M<this.itemCount_;M++){var N=u.newBlock("lists_create_with_item");N.initSvg(),v.connect(N.previousConnection),v=N.nextConnection}return T},compose:function(u){var T=u.getInputTargetBlock("STACK");for(u=[];T&&!T.isInsertionMarker();)u.push(T.valueConnection_),T=T.nextConnection&&T.nextConnection.targetBlock();for(T=0;T<this.itemCount_;T++){var v=this.getInput("ADD"+T).connection.targetConnection;v&&u.indexOf(v)===-1&&v.disconnect()}for(this.itemCount_=u.length,this.updateShape_(),T=0;T<this.itemCount_;T++)r.module$exports$Blockly$Mutator.Mutator.reconnect(u[T],this,"ADD"+T)},saveConnections:function(u){u=u.getInputTargetBlock("STACK");for(var T=0;u;){var v=this.getInput("ADD"+T);u.valueConnection_=v&&v.connection.targetConnection,u=u.nextConnection&&u.nextConnection.targetBlock(),T++}},updateShape_:function(){this.itemCount_&&this.getInput("EMPTY")?this.removeInput("EMPTY"):this.itemCount_||this.getInput("EMPTY")||this.appendDummyInput("EMPTY").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_EMPTY_TITLE);for(var u=0;u<this.itemCount_;u++)if(!this.getInput("ADD"+u)){var T=this.appendValueInput("ADD"+u).setAlign(r.module$exports$Blockly$Input.Align.RIGHT);u===0&&T.appendField(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_INPUT_WITH)}for(u=this.itemCount_;this.getInput("ADD"+u);u++)this.removeInput("ADD"+u)}},fe.blocks.lists_create_with_container={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_CONTAINER_TITLE_ADD),this.appendStatementInput("STACK"),this.setTooltip(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_CONTAINER_TOOLTIP),this.contextMenu=!1}},fe.blocks.lists_create_with_item={init:function(){this.setStyle("list_blocks"),this.appendDummyInput().appendField(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_ITEM_TITLE),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(r.module$exports$Blockly$Msg.Msg.LISTS_CREATE_WITH_ITEM_TOOLTIP),this.contextMenu=!1}},fe.blocks.lists_indexOf={init:function(){var u=[[r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_FIRST,"FIRST"],[r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_LAST,"LAST"]];this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_HELPURL),this.setStyle("list_blocks"),this.setOutput(!0,"Number"),this.appendValueInput("VALUE").setCheck("Array").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_INPUT_IN_LIST),this.appendValueInput("FIND").appendField(new r.module$exports$Blockly$FieldDropdown.FieldDropdown(u),"END"),this.setInputsInline(!0);var T=this;this.setTooltip(function(){return r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_OF_TOOLTIP.replace("%1",T.workspace.options.oneBasedIndex?"0":"-1")})}},fe.blocks.lists_getIndex={init:function(){var u=[[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_GET,"GET"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_GET_REMOVE,"GET_REMOVE"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_REMOVE,"REMOVE"]];this.WHERE_OPTIONS=[[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_LAST,"LAST"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_HELPURL),this.setStyle("list_blocks"),u=new r.module$exports$Blockly$FieldDropdown.FieldDropdown(u,function(v){v=v==="REMOVE",this.getSourceBlock().updateStatement_(v)}),this.appendValueInput("VALUE").setCheck("Array").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(u,"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL&&this.appendDummyInput("TAIL").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL),this.setInputsInline(!0),this.setOutput(!0),this.updateAt_(!0);var T=this;this.setTooltip(function(){var v=T.getFieldValue("MODE"),M=T.getFieldValue("WHERE"),N="";switch(v+" "+M){case"GET FROM_START":case"GET FROM_END":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FROM;break;case"GET FIRST":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_FIRST;break;case"GET LAST":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_LAST;break;case"GET RANDOM":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_RANDOM;break;case"GET_REMOVE FROM_START":case"GET_REMOVE FROM_END":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FROM;break;case"GET_REMOVE FIRST":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_FIRST;break;case"GET_REMOVE LAST":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_LAST;break;case"GET_REMOVE RANDOM":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_GET_REMOVE_RANDOM;break;case"REMOVE FROM_START":case"REMOVE FROM_END":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FROM;break;case"REMOVE FIRST":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_FIRST;break;case"REMOVE LAST":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_LAST;break;case"REMOVE RANDOM":N=r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TOOLTIP_REMOVE_RANDOM}return(M==="FROM_START"||M==="FROM_END")&&(N+="  "+(M==="FROM_START"?r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP:r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_END_TOOLTIP).replace("%1",T.workspace.options.oneBasedIndex?"#1":"#0")),N})},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");u.setAttribute("statement",!this.outputConnection);var T=this.getInput("AT").type===r.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return u.setAttribute("at",T),u},domToMutation:function(u){var T=u.getAttribute("statement")==="true";this.updateStatement_(T),u=u.getAttribute("at")!=="false",this.updateAt_(u)},updateStatement_:function(u){u!==!this.outputConnection&&(this.unplug(!0,!0),u?(this.setOutput(!1),this.setPreviousStatement(!0),this.setNextStatement(!0)):(this.setPreviousStatement(!1),this.setNextStatement(!1),this.setOutput(!0)))},updateAt_:function(u){this.removeInput("AT"),this.removeInput("ORDINAL",!0),u?(this.appendValueInput("AT").setCheck("Number"),r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var T=new r.module$exports$Blockly$FieldDropdown.FieldDropdown(this.WHERE_OPTIONS,function(v){var M=v==="FROM_START"||v==="FROM_END";if(M!==u){var N=this.getSourceBlock();return N.updateAt_(M),N.setFieldValue(v,"WHERE"),null}});this.getInput("AT").appendField(T,"WHERE"),r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_TAIL&&this.moveInputBefore("TAIL",null)}},fe.blocks.lists_setIndex={init:function(){var u=[[r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_SET,"SET"],[r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INSERT,"INSERT"]];this.WHERE_OPTIONS=[[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_START,"FROM_START"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FROM_END,"FROM_END"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_FIRST,"FIRST"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_LAST,"LAST"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_INDEX_RANDOM,"RANDOM"]],this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INPUT_IN_LIST),this.appendDummyInput().appendField(new r.module$exports$Blockly$FieldDropdown.FieldDropdown(u),"MODE").appendField("","SPACE"),this.appendDummyInput("AT"),this.appendValueInput("TO").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_INPUT_TO),this.setInputsInline(!0),this.setPreviousStatement(!0),this.setNextStatement(!0),this.setTooltip(r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP),this.updateAt_(!0);var T=this;this.setTooltip(function(){var v=T.getFieldValue("MODE"),M=T.getFieldValue("WHERE"),N="";switch(v+" "+M){case"SET FROM_START":case"SET FROM_END":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FROM;break;case"SET FIRST":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_FIRST;break;case"SET LAST":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_LAST;break;case"SET RANDOM":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_SET_RANDOM;break;case"INSERT FROM_START":case"INSERT FROM_END":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FROM;break;case"INSERT FIRST":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_FIRST;break;case"INSERT LAST":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_LAST;break;case"INSERT RANDOM":N=r.module$exports$Blockly$Msg.Msg.LISTS_SET_INDEX_TOOLTIP_INSERT_RANDOM}return(M==="FROM_START"||M==="FROM_END")&&(N+="  "+r.module$exports$Blockly$Msg.Msg.LISTS_INDEX_FROM_START_TOOLTIP.replace("%1",T.workspace.options.oneBasedIndex?"#1":"#0")),N})},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation"),T=this.getInput("AT").type===r.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return u.setAttribute("at",T),u},domToMutation:function(u){u=u.getAttribute("at")!=="false",this.updateAt_(u)},updateAt_:function(u){this.removeInput("AT"),this.removeInput("ORDINAL",!0),u?(this.appendValueInput("AT").setCheck("Number"),r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL").appendField(r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT");var T=new r.module$exports$Blockly$FieldDropdown.FieldDropdown(this.WHERE_OPTIONS,function(v){var M=v==="FROM_START"||v==="FROM_END";if(M!==u){var N=this.getSourceBlock();return N.updateAt_(M),N.setFieldValue(v,"WHERE"),null}});this.moveInputBefore("AT","TO"),this.getInput("ORDINAL")&&this.moveInputBefore("ORDINAL","TO"),this.getInput("AT").appendField(T,"WHERE")}},fe.blocks.lists_getSublist={init:function(){this.WHERE_OPTIONS_1=[[r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FROM_START,"FROM_START"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FROM_END,"FROM_END"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_START_FIRST,"FIRST"]],this.WHERE_OPTIONS_2=[[r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_FROM_START,"FROM_START"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_FROM_END,"FROM_END"],[r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_END_LAST,"LAST"]],this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("LIST").setCheck("Array").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_INPUT_IN_LIST),this.appendDummyInput("AT1"),this.appendDummyInput("AT2"),r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL&&this.appendDummyInput("TAIL").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.updateAt_(1,!0),this.updateAt_(2,!0),this.setTooltip(r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TOOLTIP)},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation"),T=this.getInput("AT1").type===r.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE;return u.setAttribute("at1",T),T=this.getInput("AT2").type===r.module$exports$Blockly$ConnectionType.ConnectionType.INPUT_VALUE,u.setAttribute("at2",T),u},domToMutation:function(u){var T=u.getAttribute("at1")==="true";u=u.getAttribute("at2")==="true",this.updateAt_(1,T),this.updateAt_(2,u)},updateAt_:function(u,T){this.removeInput("AT"+u),this.removeInput("ORDINAL"+u,!0),T?(this.appendValueInput("AT"+u).setCheck("Number"),r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX&&this.appendDummyInput("ORDINAL"+u).appendField(r.module$exports$Blockly$Msg.Msg.ORDINAL_NUMBER_SUFFIX)):this.appendDummyInput("AT"+u);var v=new r.module$exports$Blockly$FieldDropdown.FieldDropdown(this["WHERE_OPTIONS_"+u],function(M){var N=M==="FROM_START"||M==="FROM_END";if(N!==T){var ut=this.getSourceBlock();return ut.updateAt_(u,N),ut.setFieldValue(M,"WHERE"+u),null}});this.getInput("AT"+u).appendField(v,"WHERE"+u),u===1&&(this.moveInputBefore("AT1","AT2"),this.getInput("ORDINAL1")&&this.moveInputBefore("ORDINAL1","AT2")),r.module$exports$Blockly$Msg.Msg.LISTS_GET_SUBLIST_TAIL&&this.moveInputBefore("TAIL",null)}},fe.blocks.lists_sort={init:function(){this.jsonInit({message0:r.module$exports$Blockly$Msg.Msg.LISTS_SORT_TITLE,args0:[{type:"field_dropdown",name:"TYPE",options:[[r.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_NUMERIC,"NUMERIC"],[r.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_TEXT,"TEXT"],[r.module$exports$Blockly$Msg.Msg.LISTS_SORT_TYPE_IGNORECASE,"IGNORE_CASE"]]},{type:"field_dropdown",name:"DIRECTION",options:[[r.module$exports$Blockly$Msg.Msg.LISTS_SORT_ORDER_ASCENDING,"1"],[r.module$exports$Blockly$Msg.Msg.LISTS_SORT_ORDER_DESCENDING,"-1"]]},{type:"input_value",name:"LIST",check:"Array"}],output:"Array",style:"list_blocks",tooltip:r.module$exports$Blockly$Msg.Msg.LISTS_SORT_TOOLTIP,helpUrl:r.module$exports$Blockly$Msg.Msg.LISTS_SORT_HELPURL})}},fe.blocks.lists_split={init:function(){var u=this,T=new r.module$exports$Blockly$FieldDropdown.FieldDropdown([[r.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_LIST_FROM_TEXT,"SPLIT"],[r.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TEXT_FROM_LIST,"JOIN"]],function(v){u.updateType_(v)});this.setHelpUrl(r.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_HELPURL),this.setStyle("list_blocks"),this.appendValueInput("INPUT").setCheck("String").appendField(T,"MODE"),this.appendValueInput("DELIM").setCheck("String").appendField(r.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_WITH_DELIMITER),this.setInputsInline(!0),this.setOutput(!0,"Array"),this.setTooltip(function(){var v=u.getFieldValue("MODE");if(v==="SPLIT")return r.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TOOLTIP_SPLIT;if(v==="JOIN")return r.module$exports$Blockly$Msg.Msg.LISTS_SPLIT_TOOLTIP_JOIN;throw Error("Unknown mode: "+v)})},updateType_:function(u){if(this.getFieldValue("MODE")!==u){var T=this.getInput("INPUT").connection;T.setShadowDom(null);var v=T.targetBlock();v&&(T.disconnect(),v.isShadow()?v.dispose():this.bumpNeighbours())}u==="SPLIT"?(this.outputConnection.setCheck("Array"),this.getInput("INPUT").setCheck("String")):(this.outputConnection.setCheck("String"),this.getInput("INPUT").setCheck("Array"))},mutationToDom:function(){var u=(0,r.module$exports$Blockly$utils$xml.createElement)("mutation");return u.setAttribute("mode",this.getFieldValue("MODE")),u},domToMutation:function(u){this.updateType_(u.getAttribute("mode"))}},(0,r.module$exports$Blockly$common.defineBlocks)(fe.blocks);var _={};_.blocks=(0,r.module$exports$Blockly$common.createBlockDefinitionsFromJsonArray)([{type:"colour_picker",message0:"%1",args0:[{type:"field_colour",name:"COLOUR",colour:"#ff0000"}],output:"Colour",helpUrl:"%{BKY_COLOUR_PICKER_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_PICKER_TOOLTIP}",extensions:["parent_tooltip_when_inline"]},{type:"colour_random",message0:"%{BKY_COLOUR_RANDOM_TITLE}",output:"Colour",helpUrl:"%{BKY_COLOUR_RANDOM_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RANDOM_TOOLTIP}"},{type:"colour_rgb",message0:"%{BKY_COLOUR_RGB_TITLE} %{BKY_COLOUR_RGB_RED} %1 %{BKY_COLOUR_RGB_GREEN} %2 %{BKY_COLOUR_RGB_BLUE} %3",args0:[{type:"input_value",name:"RED",check:"Number",align:"RIGHT"},{type:"input_value",name:"GREEN",check:"Number",align:"RIGHT"},{type:"input_value",name:"BLUE",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_RGB_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_RGB_TOOLTIP}"},{type:"colour_blend",message0:"%{BKY_COLOUR_BLEND_TITLE} %{BKY_COLOUR_BLEND_COLOUR1} %1 %{BKY_COLOUR_BLEND_COLOUR2} %2 %{BKY_COLOUR_BLEND_RATIO} %3",args0:[{type:"input_value",name:"COLOUR1",check:"Colour",align:"RIGHT"},{type:"input_value",name:"COLOUR2",check:"Colour",align:"RIGHT"},{type:"input_value",name:"RATIO",check:"Number",align:"RIGHT"}],output:"Colour",helpUrl:"%{BKY_COLOUR_BLEND_HELPURL}",style:"colour_blocks",tooltip:"%{BKY_COLOUR_BLEND_TOOLTIP}"}]),(0,r.module$exports$Blockly$common.defineBlocks)(_.blocks),r.Blockly.libraryBlocks={},r.Blockly.libraryBlocks.colour=_,r.Blockly.libraryBlocks.lists=fe,r.Blockly.libraryBlocks.logic=No,r.Blockly.libraryBlocks.loops=ne,r.Blockly.libraryBlocks.math=Q,r.Blockly.libraryBlocks.procedures=nt,r.Blockly.libraryBlocks.texts=I,r.Blockly.libraryBlocks.variables=k,r.Blockly.libraryBlocks.variablesDynamic=y;var De=Object.assign({},_.blocks,fe.blocks,No.blocks,ne.blocks,Q.blocks,nt.blocks,k.blocks,y.blocks);return r.Blockly.libraryBlocks.blocks=De,r.Blockly.libraryBlocks.__namespace__=r,r.Blockly.libraryBlocks})}(blocks_compressed)),blocks_compressed.exports}var hasRequiredBlocks;function requireBlocks(){return hasRequiredBlocks||(hasRequiredBlocks=1,function(m,f){(function(n,r){m.exports=r(requireBlocks_compressed())})(commonjsGlobal,function(n){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return n})}(blocks)),blocks.exports}var javascript={exports:{}},javascript_compressed={exports:{}},hasRequiredJavascript_compressed;function requireJavascript_compressed(){return hasRequiredJavascript_compressed||(hasRequiredJavascript_compressed=1,function(m,f){(function(n,r){m.exports=r(requireBlockly_compressed())})(commonjsGlobal,function(n){var r=n.__namespace__,y=new r.module$exports$Blockly$Generator.Generator("JavaScript");y.addReservedWords("break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,in,instanceof,new,return,super,switch,this,throw,try,typeof,var,void,while,with,yield,enum,implements,interface,let,package,private,protected,public,static,await,null,true,false,arguments,"+Object.getOwnPropertyNames(r.module$exports$Blockly$utils$global.globalThis).join(",")),y.ORDER_ATOMIC=0,y.ORDER_NEW=1.1,y.ORDER_MEMBER=1.2,y.ORDER_FUNCTION_CALL=2,y.ORDER_INCREMENT=3,y.ORDER_DECREMENT=3,y.ORDER_BITWISE_NOT=4.1,y.ORDER_UNARY_PLUS=4.2,y.ORDER_UNARY_NEGATION=4.3,y.ORDER_LOGICAL_NOT=4.4,y.ORDER_TYPEOF=4.5,y.ORDER_VOID=4.6,y.ORDER_DELETE=4.7,y.ORDER_AWAIT=4.8,y.ORDER_EXPONENTIATION=5,y.ORDER_MULTIPLICATION=5.1,y.ORDER_DIVISION=5.2,y.ORDER_MODULUS=5.3,y.ORDER_SUBTRACTION=6.1,y.ORDER_ADDITION=6.2,y.ORDER_BITWISE_SHIFT=7,y.ORDER_RELATIONAL=8,y.ORDER_IN=8,y.ORDER_INSTANCEOF=8,y.ORDER_EQUALITY=9,y.ORDER_BITWISE_AND=10,y.ORDER_BITWISE_XOR=11,y.ORDER_BITWISE_OR=12,y.ORDER_LOGICAL_AND=13,y.ORDER_LOGICAL_OR=14,y.ORDER_CONDITIONAL=15,y.ORDER_ASSIGNMENT=16,y.ORDER_YIELD=17,y.ORDER_COMMA=18,y.ORDER_NONE=99,y.ORDER_OVERRIDES=[[y.ORDER_FUNCTION_CALL,y.ORDER_MEMBER],[y.ORDER_FUNCTION_CALL,y.ORDER_FUNCTION_CALL],[y.ORDER_MEMBER,y.ORDER_MEMBER],[y.ORDER_MEMBER,y.ORDER_FUNCTION_CALL],[y.ORDER_LOGICAL_NOT,y.ORDER_LOGICAL_NOT],[y.ORDER_MULTIPLICATION,y.ORDER_MULTIPLICATION],[y.ORDER_ADDITION,y.ORDER_ADDITION],[y.ORDER_LOGICAL_AND,y.ORDER_LOGICAL_AND],[y.ORDER_LOGICAL_OR,y.ORDER_LOGICAL_OR]],y.isInitialized=!1,y.init=function(a){Object.getPrototypeOf(this).init.call(this),this.nameDB_?this.nameDB_.reset():this.nameDB_=new r.module$exports$Blockly$Names.Names(this.RESERVED_WORDS_),this.nameDB_.setVariableMap(a.getVariableMap()),this.nameDB_.populateVariables(a),this.nameDB_.populateProcedures(a);for(var d=[],g=(0,r.module$exports$Blockly$Variables.allDeveloperVariables)(a),I=0;I<g.length;I++)d.push(this.nameDB_.getName(g[I],r.module$exports$Blockly$Names.NameType.DEVELOPER_VARIABLE));for(a=(0,r.module$exports$Blockly$Variables.allUsedVarModels)(a),g=0;g<a.length;g++)d.push(this.nameDB_.getName(a[g].getId(),r.module$exports$Blockly$Names.NameType.VARIABLE));d.length&&(this.definitions_.variables="var "+d.join(", ")+";"),this.isInitialized=!0},y.finish=function(a){var d=(0,r.module$exports$Blockly$utils$object.values)(this.definitions_);return a=Object.getPrototypeOf(this).finish.call(this,a),this.isInitialized=!1,this.nameDB_.reset(),d.join(`

`)+`


`+a},y.scrubNakedValue=function(a){return a+`;
`},y.quote_=function(a){return a=a.replace(/\\/g,"\\\\").replace(/\n/g,`\\
`).replace(/'/g,"\\'"),"'"+a+"'"},y.multiline_quote_=function(a){return a.split(/\n/g).map(this.quote_).join(` + '\\n' +
`)},y.scrub_=function(a,d,g){var I="";if(!a.outputConnection||!a.outputConnection.targetConnection){var U=a.getCommentText();U&&(U=(0,r.module$exports$Blockly$utils$string.wrap)(U,this.COMMENT_WRAP-3),I+=this.prefixLines(U+`
`,"// "));for(var st=0;st<a.inputList.length;st++)a.inputList[st].type===r.module$exports$Blockly$inputTypes.inputTypes.VALUE&&(U=a.inputList[st].connection.targetBlock())&&(U=this.allNestedComments(U))&&(I+=this.prefixLines(U,"// "))}return a=a.nextConnection&&a.nextConnection.targetBlock(),g=g?"":this.blockToCode(a),I+d+g},y.getAdjusted=function(a,d,g,I,U){g=g||0,U=U||this.ORDER_NONE,a.workspace.options.oneBasedIndex&&g--;var st=a.workspace.options.oneBasedIndex?"1":"0",G=U;if(0<g)var $=G=this.ORDER_ADDITION;else 0>g?$=G=this.ORDER_SUBTRACTION:I&&($=G=this.ORDER_UNARY_NEGATION);return a=this.valueToCode(a,d,G)||st,(0,r.module$exports$Blockly$utils$string.isNumber)(a)?(a=Number(a)+g,I&&(a=-a)):(0<g?a=a+" + "+g:0>g&&(a=a+" - "+-g),I&&(a=g?"-("+a+")":"-"+a),$=Math.floor($),U=Math.floor(U),$&&U>=$&&(a="("+a+")")),a},r.Blockly.JavaScript=y,r.Blockly.JavaScript.variables_get=function(a){return[r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),r.Blockly.JavaScript.ORDER_ATOMIC]},r.Blockly.JavaScript.variables_set=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0";return r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE)+" = "+d+`;
`},r.Blockly.JavaScript.variables_get_dynamic=r.Blockly.JavaScript.variables_get,r.Blockly.JavaScript.variables_set_dynamic=r.Blockly.JavaScript.variables_set;var O=/^\s*'([^']|\\')*'\s*$/,P=function(a){return O.test(a)?[a,r.Blockly.JavaScript.ORDER_ATOMIC]:["String("+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},c=function(a,d,g){return d==="FIRST"?"0":d==="FROM_END"?a+".length - 1 - "+g:d==="LAST"?a+".length - 1":g};r.Blockly.JavaScript.text=function(a){return[r.Blockly.JavaScript.quote_(a.getFieldValue("TEXT")),r.Blockly.JavaScript.ORDER_ATOMIC]},r.Blockly.JavaScript.text_multiline=function(a){a=r.Blockly.JavaScript.multiline_quote_(a.getFieldValue("TEXT"));var d=a.indexOf("+")!==-1?r.Blockly.JavaScript.ORDER_ADDITION:r.Blockly.JavaScript.ORDER_ATOMIC;return[a,d]},r.Blockly.JavaScript.text_join=function(a){switch(a.itemCount_){case 0:return["''",r.Blockly.JavaScript.ORDER_ATOMIC];case 1:return a=r.Blockly.JavaScript.valueToCode(a,"ADD0",r.Blockly.JavaScript.ORDER_NONE)||"''",P(a);case 2:var d=r.Blockly.JavaScript.valueToCode(a,"ADD0",r.Blockly.JavaScript.ORDER_NONE)||"''";return a=r.Blockly.JavaScript.valueToCode(a,"ADD1",r.Blockly.JavaScript.ORDER_NONE)||"''",[P(d)[0]+" + "+P(a)[0],r.Blockly.JavaScript.ORDER_ADDITION];default:d=Array(a.itemCount_);for(var g=0;g<a.itemCount_;g++)d[g]=r.Blockly.JavaScript.valueToCode(a,"ADD"+g,r.Blockly.JavaScript.ORDER_NONE)||"''";return["["+d.join(",")+"].join('')",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]}},r.Blockly.JavaScript.text_append=function(a){var d=r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE);return a=r.Blockly.JavaScript.valueToCode(a,"TEXT",r.Blockly.JavaScript.ORDER_NONE)||"''",d+" += "+P(a)[0]+`;
`},r.Blockly.JavaScript.text_length=function(a){return[(r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_MEMBER)||"''")+".length",r.Blockly.JavaScript.ORDER_MEMBER]},r.Blockly.JavaScript.text_isEmpty=function(a){return["!"+(r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_MEMBER)||"''")+".length",r.Blockly.JavaScript.ORDER_LOGICAL_NOT]},r.Blockly.JavaScript.text_indexOf=function(a){var d=a.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",g=r.Blockly.JavaScript.valueToCode(a,"FIND",r.Blockly.JavaScript.ORDER_NONE)||"''";return d=(r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_MEMBER)||"''")+"."+d+"("+g+")",a.workspace.options.oneBasedIndex?[d+" + 1",r.Blockly.JavaScript.ORDER_ADDITION]:[d,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.text_charAt=function(a){var d=a.getFieldValue("WHERE")||"FROM_START",g=r.Blockly.JavaScript.valueToCode(a,"VALUE",d==="RANDOM"?r.Blockly.JavaScript.ORDER_NONE:r.Blockly.JavaScript.ORDER_MEMBER)||"''";switch(d){case"FIRST":return[g+".charAt(0)",r.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"LAST":return[g+".slice(-1)",r.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_START":return a=r.Blockly.JavaScript.getAdjusted(a,"AT"),[g+".charAt("+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"FROM_END":return a=r.Blockly.JavaScript.getAdjusted(a,"AT",1,!0),[g+".slice("+a+").charAt(0)",r.Blockly.JavaScript.ORDER_FUNCTION_CALL];case"RANDOM":return[r.Blockly.JavaScript.provideFunction_("textRandomLetter",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(text) {
  var x = Math.floor(Math.random() * text.length);
  return text[x];
}
`)+"("+g+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]}throw Error("Unhandled option (text_charAt).")},r.Blockly.JavaScript.text_getSubstring=function(a){var d=a.getFieldValue("WHERE1"),g=a.getFieldValue("WHERE2"),I=d!=="FROM_END"&&d!=="LAST"&&g!=="FROM_END"&&g!=="LAST",U=r.Blockly.JavaScript.valueToCode(a,"STRING",I?r.Blockly.JavaScript.ORDER_MEMBER:r.Blockly.JavaScript.ORDER_NONE)||"''";if(d==="FIRST"&&g==="LAST")return[U,r.Blockly.JavaScript.ORDER_NONE];if(U.match(/^'?\w+'?$/)||I){switch(d){case"FROM_START":d=r.Blockly.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":d=r.Blockly.JavaScript.getAdjusted(a,"AT1",1,!1,r.Blockly.JavaScript.ORDER_SUBTRACTION),d=U+".length - "+d;break;case"FIRST":d="0";break;default:throw Error("Unhandled option (text_getSubstring).")}switch(g){case"FROM_START":g=r.Blockly.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":g=r.Blockly.JavaScript.getAdjusted(a,"AT2",0,!1,r.Blockly.JavaScript.ORDER_SUBTRACTION),g=U+".length - "+g;break;case"LAST":g=U+".length";break;default:throw Error("Unhandled option (text_getSubstring).")}U=U+".slice("+d+", "+g+")"}else{I=r.Blockly.JavaScript.getAdjusted(a,"AT1"),a=r.Blockly.JavaScript.getAdjusted(a,"AT2");var st={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};U=r.Blockly.JavaScript.provideFunction_("subsequence"+st[d]+st[g],`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+(d==="FROM_END"||d==="FROM_START"?", at1":"")+(g==="FROM_END"||g==="FROM_START"?", at2":"")+`) {
  var start = `+c("sequence",d,"at1")+`;
  var end = `+c("sequence",g,"at2")+` + 1;
  return sequence.slice(start, end);
}
`)+"("+U+(d==="FROM_END"||d==="FROM_START"?", "+I:"")+(g==="FROM_END"||g==="FROM_START"?", "+a:"")+")"}return[U,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.text_changeCase=function(a){var d={UPPERCASE:".toUpperCase()",LOWERCASE:".toLowerCase()",TITLECASE:null}[a.getFieldValue("CASE")];return a=r.Blockly.JavaScript.valueToCode(a,"TEXT",d?r.Blockly.JavaScript.ORDER_MEMBER:r.Blockly.JavaScript.ORDER_NONE)||"''",[d?a+d:r.Blockly.JavaScript.provideFunction_("textToTitleCase",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(str) {
  return str.replace(/\\S+/g,
      function(txt) {return txt[0].toUpperCase() + txt.substring(1).toLowerCase();});
}
`)+"("+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.text_trim=function(a){var d={LEFT:".replace(/^[\\s\\xa0]+/, '')",RIGHT:".replace(/[\\s\\xa0]+$/, '')",BOTH:".trim()"}[a.getFieldValue("MODE")];return[(r.Blockly.JavaScript.valueToCode(a,"TEXT",r.Blockly.JavaScript.ORDER_MEMBER)||"''")+d,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.text_print=function(a){return"window.alert("+(r.Blockly.JavaScript.valueToCode(a,"TEXT",r.Blockly.JavaScript.ORDER_NONE)||"''")+`);
`},r.Blockly.JavaScript.text_prompt_ext=function(a){var d="window.prompt("+(a.getField("TEXT")?r.Blockly.JavaScript.quote_(a.getFieldValue("TEXT")):r.Blockly.JavaScript.valueToCode(a,"TEXT",r.Blockly.JavaScript.ORDER_NONE)||"''")+")";return a.getFieldValue("TYPE")==="NUMBER"&&(d="Number("+d+")"),[d,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.text_prompt=r.Blockly.JavaScript.text_prompt_ext,r.Blockly.JavaScript.text_count=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"TEXT",r.Blockly.JavaScript.ORDER_NONE)||"''";return a=r.Blockly.JavaScript.valueToCode(a,"SUB",r.Blockly.JavaScript.ORDER_NONE)||"''",[r.Blockly.JavaScript.provideFunction_("textCount",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(haystack, needle) {
  if (needle.length === 0) {
    return haystack.length + 1;
  } else {
    return haystack.split(needle).length - 1;
  }
}
`)+"("+d+", "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.text_replace=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"TEXT",r.Blockly.JavaScript.ORDER_NONE)||"''",g=r.Blockly.JavaScript.valueToCode(a,"FROM",r.Blockly.JavaScript.ORDER_NONE)||"''";return a=r.Blockly.JavaScript.valueToCode(a,"TO",r.Blockly.JavaScript.ORDER_NONE)||"''",[r.Blockly.JavaScript.provideFunction_("textReplace",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(haystack, needle, replacement) {
  needle = needle.replace(/([-()\\[\\]{}+?*.$\\^|,:#<!\\\\])/g, '\\\\$1')
                 .replace(/\\x08/g, '\\\\x08');
  return haystack.replace(new RegExp(needle, 'g'), replacement);
}
`)+"("+d+", "+g+", "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.text_reverse=function(a){return[(r.Blockly.JavaScript.valueToCode(a,"TEXT",r.Blockly.JavaScript.ORDER_MEMBER)||"''")+".split('').reverse().join('')",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.procedures_defreturn=function(a){var d=r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("NAME"),r.module$exports$Blockly$Names.NameType.PROCEDURE),g="";r.Blockly.JavaScript.STATEMENT_PREFIX&&(g+=r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_PREFIX,a)),r.Blockly.JavaScript.STATEMENT_SUFFIX&&(g+=r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_SUFFIX,a)),g&&(g=r.Blockly.JavaScript.prefixLines(g,r.Blockly.JavaScript.INDENT));var I="";r.Blockly.JavaScript.INFINITE_LOOP_TRAP&&(I=r.Blockly.JavaScript.prefixLines(r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.INFINITE_LOOP_TRAP,a),r.Blockly.JavaScript.INDENT));var U=r.Blockly.JavaScript.statementToCode(a,"STACK"),st=r.Blockly.JavaScript.valueToCode(a,"RETURN",r.Blockly.JavaScript.ORDER_NONE)||"",G="";U&&st&&(G=g),st&&(st=r.Blockly.JavaScript.INDENT+"return "+st+`;
`);for(var $=[],Pt=a.getVars(),Te=0;Te<Pt.length;Te++)$[Te]=r.Blockly.JavaScript.nameDB_.getName(Pt[Te],r.module$exports$Blockly$Names.NameType.VARIABLE);return g="function "+d+"("+$.join(", ")+`) {
`+g+I+U+G+st+"}",g=r.Blockly.JavaScript.scrub_(a,g),r.Blockly.JavaScript.definitions_["%"+d]=g,null},r.Blockly.JavaScript.procedures_defnoreturn=r.Blockly.JavaScript.procedures_defreturn,r.Blockly.JavaScript.procedures_callreturn=function(a){for(var d=r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("NAME"),r.module$exports$Blockly$Names.NameType.PROCEDURE),g=[],I=a.getVars(),U=0;U<I.length;U++)g[U]=r.Blockly.JavaScript.valueToCode(a,"ARG"+U,r.Blockly.JavaScript.ORDER_NONE)||"null";return[d+"("+g.join(", ")+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.procedures_callnoreturn=function(a){return r.Blockly.JavaScript.procedures_callreturn(a)[0]+`;
`},r.Blockly.JavaScript.procedures_ifreturn=function(a){var d="if ("+(r.Blockly.JavaScript.valueToCode(a,"CONDITION",r.Blockly.JavaScript.ORDER_NONE)||"false")+`) {
`;return r.Blockly.JavaScript.STATEMENT_SUFFIX&&(d+=r.Blockly.JavaScript.prefixLines(r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_SUFFIX,a),r.Blockly.JavaScript.INDENT)),a.hasReturnValue_?(a=r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_NONE)||"null",d+=r.Blockly.JavaScript.INDENT+"return "+a+`;
`):d+=r.Blockly.JavaScript.INDENT+`return;
`,d+`}
`},r.Blockly.JavaScript.math_number=function(a){return a=Number(a.getFieldValue("NUM")),[a,0<=a?r.Blockly.JavaScript.ORDER_ATOMIC:r.Blockly.JavaScript.ORDER_UNARY_NEGATION]},r.Blockly.JavaScript.math_arithmetic=function(a){var d={ADD:[" + ",r.Blockly.JavaScript.ORDER_ADDITION],MINUS:[" - ",r.Blockly.JavaScript.ORDER_SUBTRACTION],MULTIPLY:[" * ",r.Blockly.JavaScript.ORDER_MULTIPLICATION],DIVIDE:[" / ",r.Blockly.JavaScript.ORDER_DIVISION],POWER:[null,r.Blockly.JavaScript.ORDER_NONE]}[a.getFieldValue("OP")],g=d[0];d=d[1];var I=r.Blockly.JavaScript.valueToCode(a,"A",d)||"0";return a=r.Blockly.JavaScript.valueToCode(a,"B",d)||"0",g?[I+g+a,d]:["Math.pow("+I+", "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.math_single=function(a){var d=a.getFieldValue("OP");if(d==="NEG")return a=r.Blockly.JavaScript.valueToCode(a,"NUM",r.Blockly.JavaScript.ORDER_UNARY_NEGATION)||"0",a[0]==="-"&&(a=" "+a),["-"+a,r.Blockly.JavaScript.ORDER_UNARY_NEGATION];switch(a=d==="SIN"||d==="COS"||d==="TAN"?r.Blockly.JavaScript.valueToCode(a,"NUM",r.Blockly.JavaScript.ORDER_DIVISION)||"0":r.Blockly.JavaScript.valueToCode(a,"NUM",r.Blockly.JavaScript.ORDER_NONE)||"0",d){case"ABS":var g="Math.abs("+a+")";break;case"ROOT":g="Math.sqrt("+a+")";break;case"LN":g="Math.log("+a+")";break;case"EXP":g="Math.exp("+a+")";break;case"POW10":g="Math.pow(10,"+a+")";break;case"ROUND":g="Math.round("+a+")";break;case"ROUNDUP":g="Math.ceil("+a+")";break;case"ROUNDDOWN":g="Math.floor("+a+")";break;case"SIN":g="Math.sin("+a+" / 180 * Math.PI)";break;case"COS":g="Math.cos("+a+" / 180 * Math.PI)";break;case"TAN":g="Math.tan("+a+" / 180 * Math.PI)"}if(g)return[g,r.Blockly.JavaScript.ORDER_FUNCTION_CALL];switch(d){case"LOG10":g="Math.log("+a+") / Math.log(10)";break;case"ASIN":g="Math.asin("+a+") / Math.PI * 180";break;case"ACOS":g="Math.acos("+a+") / Math.PI * 180";break;case"ATAN":g="Math.atan("+a+") / Math.PI * 180";break;default:throw Error("Unknown math operator: "+d)}return[g,r.Blockly.JavaScript.ORDER_DIVISION]},r.Blockly.JavaScript.math_constant=function(a){return{PI:["Math.PI",r.Blockly.JavaScript.ORDER_MEMBER],E:["Math.E",r.Blockly.JavaScript.ORDER_MEMBER],GOLDEN_RATIO:["(1 + Math.sqrt(5)) / 2",r.Blockly.JavaScript.ORDER_DIVISION],SQRT2:["Math.SQRT2",r.Blockly.JavaScript.ORDER_MEMBER],SQRT1_2:["Math.SQRT1_2",r.Blockly.JavaScript.ORDER_MEMBER],INFINITY:["Infinity",r.Blockly.JavaScript.ORDER_ATOMIC]}[a.getFieldValue("CONSTANT")]},r.Blockly.JavaScript.math_number_property=function(a){var d={EVEN:[" % 2 === 0",r.Blockly.JavaScript.ORDER_MODULUS,r.Blockly.JavaScript.ORDER_EQUALITY],ODD:[" % 2 === 1",r.Blockly.JavaScript.ORDER_MODULUS,r.Blockly.JavaScript.ORDER_EQUALITY],WHOLE:[" % 1 === 0",r.Blockly.JavaScript.ORDER_MODULUS,r.Blockly.JavaScript.ORDER_EQUALITY],POSITIVE:[" > 0",r.Blockly.JavaScript.ORDER_RELATIONAL,r.Blockly.JavaScript.ORDER_RELATIONAL],NEGATIVE:[" < 0",r.Blockly.JavaScript.ORDER_RELATIONAL,r.Blockly.JavaScript.ORDER_RELATIONAL],DIVISIBLE_BY:[null,r.Blockly.JavaScript.ORDER_MODULUS,r.Blockly.JavaScript.ORDER_EQUALITY],PRIME:[null,r.Blockly.JavaScript.ORDER_NONE,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},g=a.getFieldValue("PROPERTY");d=r.$jscomp.makeIterator(d[g]);var I=d.next().value,U=d.next().value;return d=d.next().value,U=r.Blockly.JavaScript.valueToCode(a,"NUMBER_TO_CHECK",U)||"0",g==="PRIME"?a=r.Blockly.JavaScript.provideFunction_("mathIsPrime",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(n) {
  // https://en.wikipedia.org/wiki/Primality_test#Naive_methods
  if (n == 2 || n == 3) {
    return true;
  }
  // False if n is NaN, negative, is 1, or not whole.
  // And false if n is divisible by 2 or 3.
  if (isNaN(n) || n <= 1 || n % 1 !== 0 || n % 2 === 0 || n % 3 === 0) {
    return false;
  }
  // Check all the numbers of form 6k +/- 1, up to sqrt(n).
  for (var x = 6; x <= Math.sqrt(n) + 1; x += 6) {
    if (n % (x - 1) === 0 || n % (x + 1) === 0) {
      return false;
    }
  }
  return true;
}
`)+"("+U+")":g==="DIVISIBLE_BY"?(a=r.Blockly.JavaScript.valueToCode(a,"DIVISOR",r.Blockly.JavaScript.ORDER_MODULUS)||"0",a=U+" % "+a+" === 0"):a=U+I,[a,d]},r.Blockly.JavaScript.math_change=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"DELTA",r.Blockly.JavaScript.ORDER_ADDITION)||"0";return a=r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),a+" = (typeof "+a+" === 'number' ? "+a+" : 0) + "+d+`;
`},r.Blockly.JavaScript.math_round=r.Blockly.JavaScript.math_single,r.Blockly.JavaScript.math_trig=r.Blockly.JavaScript.math_single,r.Blockly.JavaScript.math_on_list=function(a){var d=a.getFieldValue("OP");switch(d){case"SUM":a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_MEMBER)||"[]",a+=".reduce(function(x, y) {return x + y;})";break;case"MIN":a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_NONE)||"[]",a="Math.min.apply(null, "+a+")";break;case"MAX":a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_NONE)||"[]",a="Math.max.apply(null, "+a+")";break;case"AVERAGE":d=r.Blockly.JavaScript.provideFunction_("mathMean",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(myList) {
  return myList.reduce(function(x, y) {return x + y;}) / myList.length;
}
`),a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_NONE)||"[]",a=d+"("+a+")";break;case"MEDIAN":d=r.Blockly.JavaScript.provideFunction_("mathMedian",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(myList) {
  var localList = myList.filter(function (x) {return typeof x === 'number';});
  if (!localList.length) return null;
  localList.sort(function(a, b) {return b - a;});
  if (localList.length % 2 === 0) {
    return (localList[localList.length / 2 - 1] + localList[localList.length / 2]) / 2;
  } else {
    return localList[(localList.length - 1) / 2];
  }
}
`),a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_NONE)||"[]",a=d+"("+a+")";break;case"MODE":d=r.Blockly.JavaScript.provideFunction_("mathModes",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(values) {
  var modes = [];
  var counts = [];
  var maxCount = 0;
  for (var i = 0; i < values.length; i++) {
    var value = values[i];
    var found = false;
    var thisCount;
    for (var j = 0; j < counts.length; j++) {
      if (counts[j][0] === value) {
        thisCount = ++counts[j][1];
        found = true;
        break;
      }
    }
    if (!found) {
      counts.push([value, 1]);
      thisCount = 1;
    }
    maxCount = Math.max(thisCount, maxCount);
  }
  for (var j = 0; j < counts.length; j++) {
    if (counts[j][1] === maxCount) {
        modes.push(counts[j][0]);
    }
  }
  return modes;
}
`),a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_NONE)||"[]",a=d+"("+a+")";break;case"STD_DEV":d=r.Blockly.JavaScript.provideFunction_("mathStandardDeviation",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(numbers) {
  var n = numbers.length;
  if (!n) return null;
  var mean = numbers.reduce(function(x, y) {return x + y;}) / n;
  var variance = 0;
  for (var j = 0; j < n; j++) {
    variance += Math.pow(numbers[j] - mean, 2);
  }
  variance = variance / n;
  return Math.sqrt(variance);
}
`),a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_NONE)||"[]",a=d+"("+a+")";break;case"RANDOM":d=r.Blockly.JavaScript.provideFunction_("mathRandomList",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(list) {
  var x = Math.floor(Math.random() * list.length);
  return list[x];
}
`),a=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_NONE)||"[]",a=d+"("+a+")";break;default:throw Error("Unknown operator: "+d)}return[a,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.math_modulo=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"DIVIDEND",r.Blockly.JavaScript.ORDER_MODULUS)||"0";return a=r.Blockly.JavaScript.valueToCode(a,"DIVISOR",r.Blockly.JavaScript.ORDER_MODULUS)||"0",[d+" % "+a,r.Blockly.JavaScript.ORDER_MODULUS]},r.Blockly.JavaScript.math_constrain=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_NONE)||"0",g=r.Blockly.JavaScript.valueToCode(a,"LOW",r.Blockly.JavaScript.ORDER_NONE)||"0";return a=r.Blockly.JavaScript.valueToCode(a,"HIGH",r.Blockly.JavaScript.ORDER_NONE)||"Infinity",["Math.min(Math.max("+d+", "+g+"), "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.math_random_int=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"FROM",r.Blockly.JavaScript.ORDER_NONE)||"0";return a=r.Blockly.JavaScript.valueToCode(a,"TO",r.Blockly.JavaScript.ORDER_NONE)||"0",[r.Blockly.JavaScript.provideFunction_("mathRandomInt",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(a, b) {
  if (a > b) {
    // Swap a and b to ensure a is smaller.
    var c = a;
    a = b;
    b = c;
  }
  return Math.floor(Math.random() * (b - a + 1) + a);
}
`)+"("+d+", "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.math_random_float=function(a){return["Math.random()",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.math_atan2=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"X",r.Blockly.JavaScript.ORDER_NONE)||"0";return["Math.atan2("+(r.Blockly.JavaScript.valueToCode(a,"Y",r.Blockly.JavaScript.ORDER_NONE)||"0")+", "+d+") / Math.PI * 180",r.Blockly.JavaScript.ORDER_DIVISION]},r.Blockly.JavaScript.controls_repeat_ext=function(a){var d=a.getField("TIMES")?String(Number(a.getFieldValue("TIMES"))):r.Blockly.JavaScript.valueToCode(a,"TIMES",r.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",g=r.Blockly.JavaScript.statementToCode(a,"DO");g=r.Blockly.JavaScript.addLoopTrap(g,a),a="";var I=r.Blockly.JavaScript.nameDB_.getDistinctName("count",r.module$exports$Blockly$Names.NameType.VARIABLE),U=d;return d.match(/^\w+$/)||(0,r.module$exports$Blockly$utils$string.isNumber)(d)||(U=r.Blockly.JavaScript.nameDB_.getDistinctName("repeat_end",r.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+U+" = "+d+`;
`),a+("for (var "+I+" = 0; "+I+" < "+U+"; "+I+`++) {
`+g+`}
`)},r.Blockly.JavaScript.controls_repeat=r.Blockly.JavaScript.controls_repeat_ext,r.Blockly.JavaScript.controls_whileUntil=function(a){var d=a.getFieldValue("MODE")==="UNTIL",g=r.Blockly.JavaScript.valueToCode(a,"BOOL",d?r.Blockly.JavaScript.ORDER_LOGICAL_NOT:r.Blockly.JavaScript.ORDER_NONE)||"false",I=r.Blockly.JavaScript.statementToCode(a,"DO");return I=r.Blockly.JavaScript.addLoopTrap(I,a),d&&(g="!"+g),"while ("+g+`) {
`+I+`}
`},r.Blockly.JavaScript.controls_for=function(a){var d=r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),g=r.Blockly.JavaScript.valueToCode(a,"FROM",r.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",I=r.Blockly.JavaScript.valueToCode(a,"TO",r.Blockly.JavaScript.ORDER_ASSIGNMENT)||"0",U=r.Blockly.JavaScript.valueToCode(a,"BY",r.Blockly.JavaScript.ORDER_ASSIGNMENT)||"1",st=r.Blockly.JavaScript.statementToCode(a,"DO");if(st=r.Blockly.JavaScript.addLoopTrap(st,a),(0,r.module$exports$Blockly$utils$string.isNumber)(g)&&(0,r.module$exports$Blockly$utils$string.isNumber)(I)&&(0,r.module$exports$Blockly$utils$string.isNumber)(U)){var G=Number(g)<=Number(I);a="for ("+d+" = "+g+"; "+d+(G?" <= ":" >= ")+I+"; "+d,d=Math.abs(Number(U)),a=(d===1?a+(G?"++":"--"):a+((G?" += ":" -= ")+d))+(`) {
`+st+`}
`)}else a="",G=g,g.match(/^\w+$/)||(0,r.module$exports$Blockly$utils$string.isNumber)(g)||(G=r.Blockly.JavaScript.nameDB_.getDistinctName(d+"_start",r.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+G+" = "+g+`;
`),g=I,I.match(/^\w+$/)||(0,r.module$exports$Blockly$utils$string.isNumber)(I)||(g=r.Blockly.JavaScript.nameDB_.getDistinctName(d+"_end",r.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+g+" = "+I+`;
`),I=r.Blockly.JavaScript.nameDB_.getDistinctName(d+"_inc",r.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+I+" = ",a=(0,r.module$exports$Blockly$utils$string.isNumber)(U)?a+(Math.abs(U)+`;
`):a+("Math.abs("+U+`);
`),a=a+("if ("+G+" > "+g+`) {
`)+(r.Blockly.JavaScript.INDENT+I+" = -"+I+`;
`),a+=`}
`,a+="for ("+d+" = "+G+"; "+I+" >= 0 ? "+d+" <= "+g+" : "+d+" >= "+g+"; "+d+" += "+I+`) {
`+st+`}
`;return a},r.Blockly.JavaScript.controls_forEach=function(a){var d=r.Blockly.JavaScript.nameDB_.getName(a.getFieldValue("VAR"),r.module$exports$Blockly$Names.NameType.VARIABLE),g=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_ASSIGNMENT)||"[]",I=r.Blockly.JavaScript.statementToCode(a,"DO");I=r.Blockly.JavaScript.addLoopTrap(I,a),a="";var U=g;return g.match(/^\w+$/)||(U=r.Blockly.JavaScript.nameDB_.getDistinctName(d+"_list",r.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+U+" = "+g+`;
`),g=r.Blockly.JavaScript.nameDB_.getDistinctName(d+"_index",r.module$exports$Blockly$Names.NameType.VARIABLE),I=r.Blockly.JavaScript.INDENT+d+" = "+U+"["+g+`];
`+I,a+("for (var "+g+" in "+U+`) {
`+I+`}
`)},r.Blockly.JavaScript.controls_flow_statements=function(a){var d="";if(r.Blockly.JavaScript.STATEMENT_PREFIX&&(d+=r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_PREFIX,a)),r.Blockly.JavaScript.STATEMENT_SUFFIX&&(d+=r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_SUFFIX,a)),r.Blockly.JavaScript.STATEMENT_PREFIX){var g=a.getSurroundLoop();g&&!g.suppressPrefixSuffix&&(d+=r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_PREFIX,g))}switch(a.getFieldValue("FLOW")){case"BREAK":return d+`break;
`;case"CONTINUE":return d+`continue;
`}throw Error("Unknown flow statement.")},r.Blockly.JavaScript.controls_if=function(a){var d=0,g="";r.Blockly.JavaScript.STATEMENT_PREFIX&&(g+=r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_PREFIX,a));do{var I=r.Blockly.JavaScript.valueToCode(a,"IF"+d,r.Blockly.JavaScript.ORDER_NONE)||"false",U=r.Blockly.JavaScript.statementToCode(a,"DO"+d);r.Blockly.JavaScript.STATEMENT_SUFFIX&&(U=r.Blockly.JavaScript.prefixLines(r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_SUFFIX,a),r.Blockly.JavaScript.INDENT)+U),g+=(0<d?" else ":"")+"if ("+I+`) {
`+U+"}",d++}while(a.getInput("IF"+d));return(a.getInput("ELSE")||r.Blockly.JavaScript.STATEMENT_SUFFIX)&&(d=r.Blockly.JavaScript.statementToCode(a,"ELSE"),r.Blockly.JavaScript.STATEMENT_SUFFIX&&(d=r.Blockly.JavaScript.prefixLines(r.Blockly.JavaScript.injectId(r.Blockly.JavaScript.STATEMENT_SUFFIX,a),r.Blockly.JavaScript.INDENT)+d),g+=` else {
`+d+"}"),g+`
`},r.Blockly.JavaScript.controls_ifelse=r.Blockly.JavaScript.controls_if,r.Blockly.JavaScript.logic_compare=function(a){var d={EQ:"==",NEQ:"!=",LT:"<",LTE:"<=",GT:">",GTE:">="}[a.getFieldValue("OP")],g=d==="=="||d==="!="?r.Blockly.JavaScript.ORDER_EQUALITY:r.Blockly.JavaScript.ORDER_RELATIONAL,I=r.Blockly.JavaScript.valueToCode(a,"A",g)||"0";return a=r.Blockly.JavaScript.valueToCode(a,"B",g)||"0",[I+" "+d+" "+a,g]},r.Blockly.JavaScript.logic_operation=function(a){var d=a.getFieldValue("OP")==="AND"?"&&":"||",g=d==="&&"?r.Blockly.JavaScript.ORDER_LOGICAL_AND:r.Blockly.JavaScript.ORDER_LOGICAL_OR,I=r.Blockly.JavaScript.valueToCode(a,"A",g);if(a=r.Blockly.JavaScript.valueToCode(a,"B",g),I||a){var U=d==="&&"?"true":"false";I||(I=U),a||(a=U)}else a=I="false";return[I+" "+d+" "+a,g]},r.Blockly.JavaScript.logic_negate=function(a){var d=r.Blockly.JavaScript.ORDER_LOGICAL_NOT;return["!"+(r.Blockly.JavaScript.valueToCode(a,"BOOL",d)||"true"),d]},r.Blockly.JavaScript.logic_boolean=function(a){return[a.getFieldValue("BOOL")==="TRUE"?"true":"false",r.Blockly.JavaScript.ORDER_ATOMIC]},r.Blockly.JavaScript.logic_null=function(a){return["null",r.Blockly.JavaScript.ORDER_ATOMIC]},r.Blockly.JavaScript.logic_ternary=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"IF",r.Blockly.JavaScript.ORDER_CONDITIONAL)||"false",g=r.Blockly.JavaScript.valueToCode(a,"THEN",r.Blockly.JavaScript.ORDER_CONDITIONAL)||"null";return a=r.Blockly.JavaScript.valueToCode(a,"ELSE",r.Blockly.JavaScript.ORDER_CONDITIONAL)||"null",[d+" ? "+g+" : "+a,r.Blockly.JavaScript.ORDER_CONDITIONAL]},r.Blockly.JavaScript.lists_create_empty=function(a){return["[]",r.Blockly.JavaScript.ORDER_ATOMIC]},r.Blockly.JavaScript.lists_create_with=function(a){for(var d=Array(a.itemCount_),g=0;g<a.itemCount_;g++)d[g]=r.Blockly.JavaScript.valueToCode(a,"ADD"+g,r.Blockly.JavaScript.ORDER_NONE)||"null";return["["+d.join(", ")+"]",r.Blockly.JavaScript.ORDER_ATOMIC]},r.Blockly.JavaScript.lists_repeat=function(a){var d=r.Blockly.JavaScript.provideFunction_("listsRepeat",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(value, n) {
  var array = [];
  for (var i = 0; i < n; i++) {
    array[i] = value;
  }
  return array;
}
`),g=r.Blockly.JavaScript.valueToCode(a,"ITEM",r.Blockly.JavaScript.ORDER_NONE)||"null";return a=r.Blockly.JavaScript.valueToCode(a,"NUM",r.Blockly.JavaScript.ORDER_NONE)||"0",[d+"("+g+", "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.lists_length=function(a){return[(r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_MEMBER)||"[]")+".length",r.Blockly.JavaScript.ORDER_MEMBER]},r.Blockly.JavaScript.lists_isEmpty=function(a){return["!"+(r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_MEMBER)||"[]")+".length",r.Blockly.JavaScript.ORDER_LOGICAL_NOT]},r.Blockly.JavaScript.lists_indexOf=function(a){var d=a.getFieldValue("END")==="FIRST"?"indexOf":"lastIndexOf",g=r.Blockly.JavaScript.valueToCode(a,"FIND",r.Blockly.JavaScript.ORDER_NONE)||"''";return d=(r.Blockly.JavaScript.valueToCode(a,"VALUE",r.Blockly.JavaScript.ORDER_MEMBER)||"[]")+"."+d+"("+g+")",a.workspace.options.oneBasedIndex?[d+" + 1",r.Blockly.JavaScript.ORDER_ADDITION]:[d,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.lists_getIndex=function(a){var d=a.getFieldValue("MODE")||"GET",g=a.getFieldValue("WHERE")||"FROM_START",I=r.Blockly.JavaScript.valueToCode(a,"VALUE",g==="RANDOM"?r.Blockly.JavaScript.ORDER_NONE:r.Blockly.JavaScript.ORDER_MEMBER)||"[]";switch(g){case"FIRST":if(d==="GET")return[I+"[0]",r.Blockly.JavaScript.ORDER_MEMBER];if(d==="GET_REMOVE")return[I+".shift()",r.Blockly.JavaScript.ORDER_MEMBER];if(d==="REMOVE")return I+`.shift();
`;break;case"LAST":if(d==="GET")return[I+".slice(-1)[0]",r.Blockly.JavaScript.ORDER_MEMBER];if(d==="GET_REMOVE")return[I+".pop()",r.Blockly.JavaScript.ORDER_MEMBER];if(d==="REMOVE")return I+`.pop();
`;break;case"FROM_START":if(a=r.Blockly.JavaScript.getAdjusted(a,"AT"),d==="GET")return[I+"["+a+"]",r.Blockly.JavaScript.ORDER_MEMBER];if(d==="GET_REMOVE")return[I+".splice("+a+", 1)[0]",r.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(d==="REMOVE")return I+".splice("+a+`, 1);
`;break;case"FROM_END":if(a=r.Blockly.JavaScript.getAdjusted(a,"AT",1,!0),d==="GET")return[I+".slice("+a+")[0]",r.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(d==="GET_REMOVE")return[I+".splice("+a+", 1)[0]",r.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(d==="REMOVE")return I+".splice("+a+", 1);";break;case"RANDOM":if(I=r.Blockly.JavaScript.provideFunction_("listsGetRandomItem",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(list, remove) {
  var x = Math.floor(Math.random() * list.length);
  if (remove) {
    return list.splice(x, 1)[0];
  } else {
    return list[x];
  }
}
`)+"("+I+", "+(d!=="GET")+")",d==="GET"||d==="GET_REMOVE")return[I,r.Blockly.JavaScript.ORDER_FUNCTION_CALL];if(d==="REMOVE")return I+`;
`}throw Error("Unhandled combination (lists_getIndex).")},r.Blockly.JavaScript.lists_setIndex=function(a){function d(){if(g.match(/^\w+$/))return"";var G=r.Blockly.JavaScript.nameDB_.getDistinctName("tmpList",r.module$exports$Blockly$Names.NameType.VARIABLE),$="var "+G+" = "+g+`;
`;return g=G,$}var g=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_MEMBER)||"[]",I=a.getFieldValue("MODE")||"GET",U=a.getFieldValue("WHERE")||"FROM_START",st=r.Blockly.JavaScript.valueToCode(a,"TO",r.Blockly.JavaScript.ORDER_ASSIGNMENT)||"null";switch(U){case"FIRST":if(I==="SET")return g+"[0] = "+st+`;
`;if(I==="INSERT")return g+".unshift("+st+`);
`;break;case"LAST":if(I==="SET")return d()+(g+"["+g+".length - 1] = "+st+`;
`);if(I==="INSERT")return g+".push("+st+`);
`;break;case"FROM_START":if(a=r.Blockly.JavaScript.getAdjusted(a,"AT"),I==="SET")return g+"["+a+"] = "+st+`;
`;if(I==="INSERT")return g+".splice("+a+", 0, "+st+`);
`;break;case"FROM_END":if(a=r.Blockly.JavaScript.getAdjusted(a,"AT",1,!1,r.Blockly.JavaScript.ORDER_SUBTRACTION),U=d(),I==="SET")return U+(g+"["+g+".length - "+a+"] = "+st+`;
`);if(I==="INSERT")return U+(g+".splice("+g+".length - "+a+", 0, "+st+`);
`);break;case"RANDOM":if(a=d(),U=r.Blockly.JavaScript.nameDB_.getDistinctName("tmpX",r.module$exports$Blockly$Names.NameType.VARIABLE),a+="var "+U+" = Math.floor(Math.random() * "+g+`.length);
`,I==="SET")return a+(g+"["+U+"] = "+st+`;
`);if(I==="INSERT")return a+(g+".splice("+U+", 0, "+st+`);
`)}throw Error("Unhandled combination (lists_setIndex).")};var k=function(a,d,g){return d==="FIRST"?"0":d==="FROM_END"?a+".length - 1 - "+g:d==="LAST"?a+".length - 1":g};return r.Blockly.JavaScript.lists_getSublist=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_MEMBER)||"[]",g=a.getFieldValue("WHERE1"),I=a.getFieldValue("WHERE2");if(g==="FIRST"&&I==="LAST")d+=".slice(0)";else if(d.match(/^\w+$/)||g!=="FROM_END"&&I==="FROM_START"){switch(g){case"FROM_START":g=r.Blockly.JavaScript.getAdjusted(a,"AT1");break;case"FROM_END":g=r.Blockly.JavaScript.getAdjusted(a,"AT1",1,!1,r.Blockly.JavaScript.ORDER_SUBTRACTION),g=d+".length - "+g;break;case"FIRST":g="0";break;default:throw Error("Unhandled option (lists_getSublist).")}switch(I){case"FROM_START":I=r.Blockly.JavaScript.getAdjusted(a,"AT2",1);break;case"FROM_END":I=r.Blockly.JavaScript.getAdjusted(a,"AT2",0,!1,r.Blockly.JavaScript.ORDER_SUBTRACTION),I=d+".length - "+I;break;case"LAST":I=d+".length";break;default:throw Error("Unhandled option (lists_getSublist).")}d=d+".slice("+g+", "+I+")"}else{var U=r.Blockly.JavaScript.getAdjusted(a,"AT1");a=r.Blockly.JavaScript.getAdjusted(a,"AT2");var st={FIRST:"First",LAST:"Last",FROM_START:"FromStart",FROM_END:"FromEnd"};d=r.Blockly.JavaScript.provideFunction_("subsequence"+st[g]+st[I],`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+"(sequence"+(g==="FROM_END"||g==="FROM_START"?", at1":"")+(I==="FROM_END"||I==="FROM_START"?", at2":"")+`) {
  var start = `+k("sequence",g,"at1")+`;
  var end = `+k("sequence",I,"at2")+` + 1;
  return sequence.slice(start, end);
}
`)+"("+d+(g==="FROM_END"||g==="FROM_START"?", "+U:"")+(I==="FROM_END"||I==="FROM_START"?", "+a:"")+")"}return[d,r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.lists_sort=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]",g=a.getFieldValue("DIRECTION")==="1"?1:-1;a=a.getFieldValue("TYPE");var I=r.Blockly.JavaScript.provideFunction_("listsGetSortCompare",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(type, direction) {
  var compareFuncs = {
    'NUMERIC': function(a, b) {
        return Number(a) - Number(b); },
    'TEXT': function(a, b) {
        return a.toString() > b.toString() ? 1 : -1; },
    'IGNORE_CASE': function(a, b) {
        return a.toString().toLowerCase() > b.toString().toLowerCase() ? 1 : -1; },
  };
  var compare = compareFuncs[type];
  return function(a, b) { return compare(a, b) * direction; };
}
      `);return[d+".slice().sort("+I+'("'+a+'", '+g+"))",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.lists_split=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"INPUT",r.Blockly.JavaScript.ORDER_MEMBER),g=r.Blockly.JavaScript.valueToCode(a,"DELIM",r.Blockly.JavaScript.ORDER_NONE)||"''";if(a=a.getFieldValue("MODE"),a==="SPLIT")d||(d="''"),a="split";else if(a==="JOIN")d||(d="[]"),a="join";else throw Error("Unknown mode: "+a);return[d+"."+a+"("+g+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.lists_reverse=function(a){return[(r.Blockly.JavaScript.valueToCode(a,"LIST",r.Blockly.JavaScript.ORDER_FUNCTION_CALL)||"[]")+".slice().reverse()",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.colour_picker=function(a){return[r.Blockly.JavaScript.quote_(a.getFieldValue("COLOUR")),r.Blockly.JavaScript.ORDER_ATOMIC]},r.Blockly.JavaScript.colour_random=function(a){return[r.Blockly.JavaScript.provideFunction_("colourRandom",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`() {
  var num = Math.floor(Math.random() * Math.pow(2, 24));
  return '#' + ('00000' + num.toString(16)).substr(-6);
}
`)+"()",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.colour_rgb=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"RED",r.Blockly.JavaScript.ORDER_NONE)||0,g=r.Blockly.JavaScript.valueToCode(a,"GREEN",r.Blockly.JavaScript.ORDER_NONE)||0;return a=r.Blockly.JavaScript.valueToCode(a,"BLUE",r.Blockly.JavaScript.ORDER_NONE)||0,[r.Blockly.JavaScript.provideFunction_("colourRgb",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(r, g, b) {
  r = Math.max(Math.min(Number(r), 100), 0) * 2.55;
  g = Math.max(Math.min(Number(g), 100), 0) * 2.55;
  b = Math.max(Math.min(Number(b), 100), 0) * 2.55;
  r = ('0' + (Math.round(r) || 0).toString(16)).slice(-2);
  g = ('0' + (Math.round(g) || 0).toString(16)).slice(-2);
  b = ('0' + (Math.round(b) || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+d+", "+g+", "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.colour_blend=function(a){var d=r.Blockly.JavaScript.valueToCode(a,"COLOUR1",r.Blockly.JavaScript.ORDER_NONE)||"'#000000'",g=r.Blockly.JavaScript.valueToCode(a,"COLOUR2",r.Blockly.JavaScript.ORDER_NONE)||"'#000000'";return a=r.Blockly.JavaScript.valueToCode(a,"RATIO",r.Blockly.JavaScript.ORDER_NONE)||.5,[r.Blockly.JavaScript.provideFunction_("colourBlend",`
function `+r.Blockly.JavaScript.FUNCTION_NAME_PLACEHOLDER_+`(c1, c2, ratio) {
  ratio = Math.max(Math.min(Number(ratio), 1), 0);
  var r1 = parseInt(c1.substring(1, 3), 16);
  var g1 = parseInt(c1.substring(3, 5), 16);
  var b1 = parseInt(c1.substring(5, 7), 16);
  var r2 = parseInt(c2.substring(1, 3), 16);
  var g2 = parseInt(c2.substring(3, 5), 16);
  var b2 = parseInt(c2.substring(5, 7), 16);
  var r = Math.round(r1 * (1 - ratio) + r2 * ratio);
  var g = Math.round(g1 * (1 - ratio) + g2 * ratio);
  var b = Math.round(b1 * (1 - ratio) + b2 * ratio);
  r = ('0' + (r || 0).toString(16)).slice(-2);
  g = ('0' + (g || 0).toString(16)).slice(-2);
  b = ('0' + (b || 0).toString(16)).slice(-2);
  return '#' + r + g + b;
}
`)+"("+d+", "+g+", "+a+")",r.Blockly.JavaScript.ORDER_FUNCTION_CALL]},r.Blockly.JavaScript.__namespace__=r,r.Blockly.JavaScript})}(javascript_compressed)),javascript_compressed.exports}var hasRequiredJavascript;function requireJavascript(){return hasRequiredJavascript||(hasRequiredJavascript=1,function(m,f){(function(n,r){m.exports=r(requireCoreBrowser(),requireJavascript_compressed())})(commonjsGlobal,function(n,r){/**
 * @license
 * Copyright 2020 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return r})}(javascript)),javascript.exports}var hasRequiredBrowser;function requireBrowser(){return hasRequiredBrowser||(hasRequiredBrowser=1,function(m,f){(function(n,r){m.exports=r(requireCoreBrowser(),requireEn(),requireBlocks(),requireJavascript())})(commonjsGlobal,function(n,r,y,O){return n.setLocale(r),n})}(browser)),browser.exports}(function(m,f){(function(n,r){m.exports=r(requireBrowser())})(commonjsGlobal,function(n){/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */return n})})(blockly);const Blockly=blockly.exports,define_block=[{type:"distants_sensor",message0:"%1 DistantSensor   %2 %3 cm. %4 %5",args0:[{type:"field_image",src:"https://pbs.twimg.com/media/ETyuj_DX0AAkOiE.png",width:35,height:35,alt:"*",flipRtl:!1},{type:"field_dropdown",name:"lenght",options:[[">=",">="],["<=","<="]]},{type:"field_number",name:"distant",value:0},{type:"input_dummy"},{type:"input_statement",name:"NAME"}],previousStatement:null,nextStatement:null,colour:15,tooltip:"",helpUrl:""},{type:"matrix",message0:"%1 Matrix :  %2",args0:[{type:"field_image",src:"https://static-00.iconduck.com/assets.00/8-8-led-matrix-display-icon-252x512-3so7x9sy.png",width:20,height:20,alt:"*",flipRtl:!1},{type:"field_input",name:"text",text:"\u0E41\u0E2A\u0E14\u0E07\u0E1C\u0E25"}],previousStatement:null,nextStatement:null,colour:30,tooltip:"",helpUrl:""},{type:"timesleep",message0:"Time Sleep ( %1  )",args0:[{type:"field_number",name:"NAME",value:0}],previousStatement:null,nextStatement:null,colour:190,tooltip:"",helpUrl:""},{type:"gpiosetup",message0:"GPIO.setup ( %1 , %2 )",args0:[{type:"input_value",name:"NAME"},{type:"field_dropdown",name:"pinset",options:[["Input","GPIO.IN"],["Output","GPIO.OUT"]]}],previousStatement:null,nextStatement:null,colour:190,tooltip:"",helpUrl:""},{type:"gpio_output",lastDummyAlign0:"CENTRE",message0:"GPIO.output (  %1 , %2 )",args0:[{type:"input_value",name:"pin"},{type:"input_value",name:"state"}],previousStatement:null,nextStatement:null,colour:190,tooltip:"",helpUrl:""},{type:"gpio_state",message0:"GPIO. %1",args0:[{type:"field_dropdown",name:"setpin",options:[["HIGH","HIGH"],["LOW","LOW"]]}],output:null,colour:190,tooltip:"",helpUrl:""},{type:"turn_mactrix",message0:"turn %1 %2 %3",args0:[{type:"field_dropdown",name:"show",options:[["red","R"],["yellow","Y"],["green","G"],["all","all"]]},{type:"field_colour",name:"NAME",colour:"#66ff99"},{type:"field_number",name:"NAME",value:0}],inputsInline:!1,previousStatement:null,nextStatement:null,colour:135,tooltip:"",helpUrl:""},{type:"block_setport",message0:"Set port :  %1 %2",args0:[{type:"field_number",name:"port",value:3},{type:"field_dropdown",name:"pin",options:[["GPIO.INPUT","in"],["GPIO.OUTPUT","out"]]}],previousStatement:null,nextStatement:null,colour:190,tooltip:"You can set port for raspberry pi in this block.",helpUrl:""},{type:"timesleep",message0:"Time Sleep ( %1  )",args0:[{type:"field_number",name:"NAME",value:0}],previousStatement:null,nextStatement:null,colour:190,tooltip:"",helpUrl:""},{type:"gpio_input",message0:"GPIO.input ( %1 )",args0:[{type:"field_number",name:"pin",value:0,min:0}],output:null,colour:190,tooltip:"",helpUrl:""},{type:"ledP",message0:"LED  %1 %2  : %3 %4 ",args0:[{type:"field_image",src:"https://cdn-icons-png.flaticon.com/512/2338/2338808.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"field_dropdown",name:"PIN",options:[["01","13"],["02","15"],["03","16"],["04","18"],["05","29"],["06","31"],["07","35"],["08","37"]]},{type:"input_value",name:"state"},{type:"input_dummy"}],previousStatement:null,nextStatement:null,colour:65,tooltip:"",helpUrl:""},{type:"state",message0:"%1",args0:[{type:"field_dropdown",name:"bool",options:[["High","HIGH"],["Low","LOW"]]}],output:null,colour:165,tooltip:"\u0E40\u0E1B\u0E34\u0E14\u0E1B\u0E34\u0E14\u0E2A\u0E16\u0E32\u0E19\u0E30 GPIO",helpUrl:""},{type:"start",message0:"Start %1 %2 %3",args0:[{type:"field_image",src:"https://cdn-icons-png.flaticon.com/512/5969/5969184.png",width:20,height:20,alt:"*",flipRtl:!0},{type:"input_dummy",align:"CENTRE"},{type:"input_statement",name:"add"}],colour:165,tooltip:"",helpUrl:""},{type:"buttons",message0:"Button  %1 %2 %3 On Click %4",args0:[{type:"field_image",src:"https://cdn-icons-png.flaticon.com/512/5735/5735377.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"field_dropdown",name:"PIN",options:[["01","36"],["02","38"],["03","40"]]},{type:"input_dummy"},{type:"input_statement",name:"Button"}],previousStatement:null,nextStatement:null,colour:260,tooltip:"",helpUrl:""},{type:"buzzerp",message0:"%1 Beep !! %2 s",args0:[{type:"field_image",src:"https://cdn-icons-png.flaticon.com/512/5387/5387095.png",width:25,height:25,alt:"*",flipRtl:!1},{type:"field_number",name:"time",value:0,min:0}],previousStatement:null,nextStatement:null,colour:20,tooltip:"Buzzer",helpUrl:""}];Blockly.defineBlocksWithJsonArray(define_block);Blockly.Python.distants_sensor=function(m){var f=m.getFieldValue("lenght"),n=m.getFieldValue("distant"),r=Blockly.Python.statementToCode(m,"NAME"),y=`if((sensor.distance*100) ${f} ${n}):
${r}`;return y};Blockly.Python.matrix=function(m){var f=m.getFieldValue("text"),n=`Dot_Matrix("${f}")
`;return n};Blockly.Python.turn_mactrix=function(m){m.getFieldValue("show"),m.getFieldValue("NAME"),m.getFieldValue("NAME");var f=`const text = 0 
`;return f};Blockly.Python.block_setport=function(m){var f=m.getFieldValue("port"),n=m.getFieldValue("pin"),r=`const ports = [${f},"${n}"]
`;return r};Blockly.Python.timesleep=function(m){var f=m.getFieldValue("NAME"),n=`time.sleep(${f})
`;return n};Blockly.Python.gpiosetup=function(m){var f=Blockly.Python.valueToCode(m,"NAME",Blockly.Python.ORDER_ATOMIC),n=m.getFieldValue("pinset"),r=`GPIO.setup(${f}, ${n})
`;return r};Blockly.Python.gpio_output=function(m){var f=Blockly.Python.valueToCode(m,"pin",Blockly.Python.ORDER_ATOMIC),n=Blockly.Python.valueToCode(m,"state",Blockly.Python.ORDER_ATOMIC),r=`GPIO.output(${f}, ${n})
`;return r};Blockly.Python.gpio_state=function(m){var f=m.getFieldValue("setpin"),n=`GPIO.${f}`;return[n,Blockly.Python.ORDER_NONE]};Blockly.Python.gpio_input=function(m){var f=m.getFieldValue("pin"),n=`GPIO.input(${f})`;return[n,Blockly.Python.ORDER_NONE]};Blockly.Python.start=function(m){var f=Blockly.Python.statementToCode(m,"add");f==""&&(f="   pass");var n=`while True:
${f}`;return n};Blockly.Python.state=function(m){var f=m.getFieldValue("bool"),n=`GPIO.${f}`;return[n,Blockly.Python.ORDER_NONE]};Blockly.Python.ledP=function(m){var f=m.getFieldValue("PIN"),n=Blockly.Python.valueToCode(m,"state",Blockly.Python.ORDER_ATOMIC),r=`GPIO.output(${f},${n})
`;return r};Blockly.Python.buttons=function(m){var f=m.getFieldValue("PIN"),n=Blockly.Python.statementToCode(m,"Button");n==""&&(n="   pass");var r=`if GPIO.input(${f}) == GPIO.LOW:
${n}`;return r};Blockly.Python.buzzerp=function(m){var f=m.getFieldValue("time"),n=`buzzer.on()
time.sleep(${f})
buzzer.off()
`;return n};const BlocklyAddSLotALL=()=>[{kind:"BLOCK",type:"start"},{kind:"BLOCK",type:"state"},{kind:"BLOCK",type:"ledP"},{kind:"BLOCK",type:"buttons"},{kind:"BLOCK",type:"matrix"},{kind:"BLOCK",type:"distants_sensor"},{kind:"BLOCK",type:"timesleep"},{kind:"BLOCK",type:"buzzerp"}],BlocklyAddSLotDistant=()=>[{kind:"BLOCK",type:"distants_sensor"},{kind:"BLOCK",type:"timesleep"}],BlocklyAddSLotMatrix=()=>[{kind:"BLOCK",type:"matrix"},{kind:"BLOCK",type:"timesleep"}],BlocklyAddSLotLed=()=>[{kind:"BLOCK",type:"ledP"},{kind:"BLOCK",type:"timesleep"}],BlocklyAddSLotButton=()=>[{kind:"BLOCK",type:"buttons"},{kind:"BLOCK",type:"timesleep"}],BlocklyAddSLotBuzzer=()=>[{kind:"BLOCK",type:"buzzerp"},{kind:"BLOCK",type:"timesleep"}],tools={contents:[{kind:"CATEGORY",contents:[{kind:"BLOCK",blockxml:'<block type="controls_if"></block>',type:"controls_if"},{kind:"BLOCK",blockxml:'<block type="logic_compare"></block>',type:"logic_compare"},{kind:"BLOCK",blockxml:'<block type="logic_operation"></block>',type:"logic_operation"},{kind:"BLOCK",blockxml:'<block type="logic_negate"></block>',type:"logic_negate"},{kind:"BLOCK",blockxml:'<block type="logic_boolean"></block>',type:"logic_boolean"},{kind:"BLOCK",blockxml:'<block type="logic_null"></block>',type:"logic_null"},{kind:"BLOCK",blockxml:'<block type="logic_ternary"></block>',type:"logic_ternary"}],id:"catLogic",colour:"210",name:"Logic"},{kind:"CATEGORY",contents:[{kind:"BLOCK",blockxml:`<block type="controls_repeat_ext">
          <value name="TIMES">
            <shadow type="math_number">
              <field name="NUM">10</field>
            </shadow>
          </value>
        </block>`,type:"controls_repeat_ext"},{kind:"BLOCK",blockxml:'<block type="controls_whileUntil"></block>',type:"controls_whileUntil"},{kind:"BLOCK",blockxml:`<block type="controls_for">
          <value name="FROM">
            <shadow type="math_number">
              <field name="NUM">1</field>
            </shadow>
          </value>
          <value name="TO">
            <shadow type="math_number">
              <field name="NUM">10</field>
            </shadow>
          </value>
          <value name="BY">
            <shadow type="math_number">
              <field name="NUM">1</field>
            </shadow>
          </value>
        </block>`,type:"controls_for"},{kind:"BLOCK",blockxml:'<block type="controls_forEach"></block>',type:"controls_forEach"},{kind:"BLOCK",blockxml:'<block type="controls_flow_statements"></block>',type:"controls_flow_statements"}],id:"catLoops",colour:"120",name:"Loops"},{kind:"CATEGORY",contents:[{kind:"BLOCK",blockxml:'<block type="math_number"></block>',type:"math_number"},{kind:"BLOCK",blockxml:`<block type="math_arithmetic">
          <value name="A">
            <shadow type="math_number">
              <field name="NUM">1</field>
            </shadow>
          </value>
          <value name="B">
            <shadow type="math_number">
              <field name="NUM">1</field>
            </shadow>
          </value>
        </block>`,type:"math_arithmetic"},{kind:"BLOCK",blockxml:`<block type="math_single">
          <value name="NUM">
            <shadow type="math_number">
              <field name="NUM">9</field>
            </shadow>
          </value>
        </block>`,type:"math_single"},{kind:"BLOCK",blockxml:`<block type="math_trig">
          <value name="NUM">
            <shadow type="math_number">
              <field name="NUM">45</field>
            </shadow>
          </value>
        </block>`,type:"math_trig"},{kind:"BLOCK",blockxml:'<block type="math_constant"></block>',type:"math_constant"},{kind:"BLOCK",blockxml:`<block type="math_number_property">
          <value name="NUMBER_TO_CHECK">
            <shadow type="math_number">
              <field name="NUM">0</field>
            </shadow>
          </value>
        </block>`,type:"math_number_property"},{kind:"BLOCK",blockxml:`<block type="math_change">
          <value name="DELTA">
            <shadow type="math_number">
              <field name="NUM">1</field>
            </shadow>
          </value>
        </block>`,type:"math_change"},{kind:"BLOCK",blockxml:`<block type="math_round">
          <value name="NUM">
            <shadow type="math_number">
              <field name="NUM">3.1</field>
            </shadow>
          </value>
        </block>`,type:"math_round"},{kind:"BLOCK",blockxml:'<block type="math_on_list"></block>',type:"math_on_list"},{kind:"BLOCK",blockxml:`<block type="math_modulo">
          <value name="DIVIDEND">
            <shadow type="math_number">
              <field name="NUM">64</field>
            </shadow>
          </value>
          <value name="DIVISOR">
            <shadow type="math_number">
              <field name="NUM">10</field>
            </shadow>
          </value>
        </block>`,type:"math_modulo"},{kind:"BLOCK",blockxml:`<block type="math_constrain">
          <value name="VALUE">
            <shadow type="math_number">
              <field name="NUM">50</field>
            </shadow>
          </value>
          <value name="LOW">
            <shadow type="math_number">
              <field name="NUM">1</field>
            </shadow>
          </value>
          <value name="HIGH">
            <shadow type="math_number">
              <field name="NUM">100</field>
            </shadow>
          </value>
        </block>`,type:"math_constrain"},{kind:"BLOCK",blockxml:`<block type="math_random_int">
          <value name="FROM">
            <shadow type="math_number">
              <field name="NUM">1</field>
            </shadow>
          </value>
          <value name="TO">
            <shadow type="math_number">
              <field name="NUM">100</field>
            </shadow>
          </value>
        </block>`,type:"math_random_int"},{kind:"BLOCK",blockxml:'<block type="math_random_float"></block>',type:"math_random_float"}],id:"catMath",colour:"230",name:"Math"},{kind:"CATEGORY",contents:[{kind:"BLOCK",blockxml:'<block type="text"></block>',type:"text"},{kind:"BLOCK",blockxml:'<block type="text_join"></block>',type:"text_join"},{kind:"BLOCK",blockxml:`<block type="text_append">
          <value name="TEXT">
            <shadow type="text"></shadow>
          </value>
        </block>`,type:"text_append"},{kind:"BLOCK",blockxml:`<block type="text_length">
          <value name="VALUE">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>`,type:"text_length"},{kind:"BLOCK",blockxml:`<block type="text_isEmpty">
          <value name="VALUE">
            <shadow type="text">
              <field name="TEXT"></field>
            </shadow>
          </value>
        </block>`,type:"text_isEmpty"},{kind:"BLOCK",blockxml:`<block type="text_indexOf">
          <value name="VALUE">
            <block type="variables_get">
              <field name="VAR">text</field>
            </block>
          </value>
          <value name="FIND">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>`,type:"text_indexOf"},{kind:"BLOCK",blockxml:`<block type="text_charAt">
          <value name="VALUE">
            <block type="variables_get">
              <field name="VAR">text</field>
            </block>
          </value>
        </block>`,type:"text_charAt"},{kind:"BLOCK",blockxml:`<block type="text_getSubstring">
          <value name="STRING">
            <block type="variables_get">
              <field name="VAR">text</field>
            </block>
          </value>
        </block>`,type:"text_getSubstring"},{kind:"BLOCK",blockxml:`<block type="text_changeCase">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>`,type:"text_changeCase"},{kind:"BLOCK",blockxml:`<block type="text_trim">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>`,type:"text_trim"},{kind:"BLOCK",blockxml:`<block type="text_print">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>`,type:"text_print"},{kind:"BLOCK",blockxml:`<block type="text_prompt_ext">
          <value name="TEXT">
            <shadow type="text">
              <field name="TEXT">abc</field>
            </shadow>
          </value>
        </block>`,type:"text_prompt_ext"}],id:"catText",colour:"160",name:"Text"},{kind:"CATEGORY",id:"catVariables",colour:"330",custom:"VARIABLE",name:"Variables"},{kind:"SEP"},{kind:"CATEGORY",contents:BlocklyAddSLotALL(),id:"catport",colour:"190",name:"All"},{kind:"CATEGORY",contents:BlocklyAddSLotLed(),id:"catport",colour:"190",name:"LED"},{kind:"CATEGORY",contents:BlocklyAddSLotButton(),id:"catport",colour:"190",name:"Button"},{kind:"CATEGORY",contents:BlocklyAddSLotMatrix(),id:"catport",colour:"190",name:"Matrix"},{kind:"CATEGORY",contents:BlocklyAddSLotDistant(),id:"catport",colour:"190",name:"Ultrasonic"},{kind:"CATEGORY",contents:BlocklyAddSLotBuzzer(),id:"catport",colour:"190",name:"Buzzer"}],id:"toolbox",style:"display: none"};var coreBrowserExports=requireCoreBrowser();/**
 * @license
 * Copyright 2021 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const theme_led=coreBrowserExports.Theme.defineTheme("dark",{base:coreBrowserExports.Themes.Classic,blockStyles:{colour_blocks:{colourPrimary:"#a5745b",colourSecondary:"#dbc7bd",colourTertiary:"#845d49"},list_blocks:{colourPrimary:"#745ba5",colourSecondary:"#c7bddb",colourTertiary:"#5d4984"},logic_blocks:{colourPrimary:"#5b80a5",colourSecondary:"#bdccdb",colourTertiary:"#496684"},loop_blocks:{colourPrimary:"#5ba55b",colourSecondary:"#bddbbd",colourTertiary:"#498449"},math_blocks:{colourPrimary:"#5b67a5",colourSecondary:"#bdc2db",colourTertiary:"#495284"},procedure_blocks:{colourPrimary:"#995ba5",colourSecondary:"#d6bddb",colourTertiary:"#7a4984"},text_blocks:{colourPrimary:"#5ba58c",colourSecondary:"#bddbd1",colourTertiary:"#498470"},variable_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},variable_dynamic_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a"},hat_blocks:{colourPrimary:"#a55b99",colourSecondary:"#dbbdd6",colourTertiary:"#84497a",hat:"cap"}},categoryStyles:{colour_category:{colour:"#a5745b"},list_category:{colour:"#745ba5"},logic_category:{colour:"#5b80a5"},loop_category:{colour:"#5ba55b"},math_category:{colour:"#5b67a5"},procedure_category:{colour:"#995ba5"},text_category:{colour:"#5ba58c"},variable_category:{colour:"#a55b99"},variable_dynamic_category:{colour:"#a55b99"}},componentStyles:{workspaceBackgroundColour:"#d1d1d1",toolboxBackgroundColour:"blackBackground",toolboxForegroundColour:"#fff",flyoutBackgroundColour:"#252526",flyoutForegroundColour:"#ccc",flyoutOpacity:1,scrollbarColour:"#797979",insertionMarkerColour:"#fff",insertionMarkerOpacity:.3,scrollbarOpacity:.4,cursorColour:"#d0d0d0",blackBackground:"#333"}}),BlocklyComponent_vue_vue_type_style_index_0_scoped_335fa5fc_lang="",_sfc_main$a={__name:"BlocklyComponent",props:["options"],setup(m,{expose:f}){/**
 * @license
 * Copyright 2022 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n=ref(),r=ref(),y=shallowRef();f({workspace:y});const O={toolbox:tools,theme:theme_led,collapse:!0,comments:!0,disable:!0,maxBlocks:1/0,trashcan:!0,horizontalLayout:!0,toolboxPosition:"end",css:!0,media:"https://blockly-demo.appspot.com/static/media/",scrollbars:!0,sounds:!0,oneBasedIndex:!0,zoom:{controls:!0,wheel:!0,startScale:1,maxScale:3,minScale:.3,scaleSpeed:1.2}};return onMounted(()=>{O.toolbox||(O.toolbox=n.value),y.value=Blockly.inject(r.value,O)}),(P,c)=>{const k=resolveComponent("xml");return openBlock(),createElementBlock("div",null,[createBaseVNode("div",{id:"blocklyDiv",class:"blocklyDiv",ref_key:"blocklyDiv",ref:r},null,512),createVNode(k,{ref_key:"blocklyToolbox",ref:n,style:{display:"none"}},{default:withCtx(()=>[renderSlot(P.$slots,"default",{},void 0,!0)]),_:3},512)])}}},BlocklyComponent=_export_sfc(_sfc_main$a,[["__scopeId","data-v-335fa5fc"]]),CodeText_vue_vue_type_style_index_0_scoped_1d1899d4_lang="",_withScopeId$6=m=>(pushScopeId("data-v-1d1899d4"),m=m(),popScopeId(),m),_hoisted_1$9={key:0,class:"shadow"},_hoisted_2$9=_withScopeId$6(()=>createBaseVNode("div",{class:"head tool-color p-2"},[createBaseVNode("div",{class:"row"},[createBaseVNode("div",{class:"col"}," Code "),createBaseVNode("div",{class:"col text-end"},[createBaseVNode("small",null," #Python ")])])],-1)),_hoisted_3$9={class:"fullbody"},_hoisted_4$8=["innerHTML"],_hoisted_5$5={key:1,class:"shadow box"},_hoisted_6$3=_withScopeId$6(()=>createBaseVNode("div",{class:"head tool-color p-2"},[createBaseVNode("div",{class:"row"},[createBaseVNode("div",{class:"col"}," Code "),createBaseVNode("div",{class:"col text-end"},[createBaseVNode("small",null," #Python ")])])],-1)),_hoisted_7$3={class:"body"},_hoisted_8$3=["innerHTML"],_sfc_main$9={__name:"CodeText",props:{code:String,fullcode:String},setup(m){const f=m,n=y=>{const O={boolean:["True","False"],conditions:["if","else","for","retrun","while"],another:["range","pass"]};for(let P in y)for(let c in O)for(let k in O[c])y[P].includes(O[c][k])&&(y[P]=`<text class='${c}'>${y[P]}</text>`);return y},r=computed(()=>{let y=f.code.split(" ");var O=document.createElement("h1");return O.inertText=y[0],y[0]=O.inertText,y=n(y),y.join(" ")});return computed(()=>{if(f.fullcode=="fullcode")return"fullcode"}),onUpdated(()=>{console.log(f)}),onMounted(()=>{}),(y,O)=>f.fullcode=="fullcode"?(openBlock(),createElementBlock("div",_hoisted_1$9,[_hoisted_2$9,createBaseVNode("div",_hoisted_3$9,[createBaseVNode("div",{innerHTML:unref(r)},null,8,_hoisted_4$8)])])):(openBlock(),createElementBlock("div",_hoisted_5$5,[_hoisted_6$3,createBaseVNode("div",_hoisted_7$3,[createBaseVNode("div",{innerHTML:unref(r)},null,8,_hoisted_8$3)])]))}},CodeText=_export_sfc(_sfc_main$9,[["__scopeId","data-v-1d1899d4"]]),Led_vue_vue_type_style_index_0_scoped_c9c37a89_lang="",_withScopeId$5=m=>(pushScopeId("data-v-c9c37a89"),m=m(),popScopeId(),m),_hoisted_1$8={class:"row g-2"},_hoisted_2$8={class:"col-3 d-flex justify-content-center"},_hoisted_3$8={class:"LED-platfrom d-flex justify-content-center"},_hoisted_4$7=_withScopeId$5(()=>createBaseVNode("span",{class:"LED"},null,-1)),_hoisted_5$4={class:"text-white",style:{"margin-top":"125px"}},_hoisted_6$2=_withScopeId$5(()=>createBaseVNode("b",null," LED : ",-1)),_hoisted_7$2=createTextVNode(),_hoisted_8$2={class:"text-warning"},_hoisted_9$2=_withScopeId$5(()=>createBaseVNode("br",null,null,-1)),_hoisted_10$2=_withScopeId$5(()=>createBaseVNode("b",null,"Pin :",-1)),_hoisted_11$1=createTextVNode(),_hoisted_12$1={class:"text-primary"},_sfc_main$8={__name:"Led",setup(m){const f=ref({0:{Led:0,Pin:"17",State:!1},1:{Led:1,Pin:"27",State:!1},2:{Led:2,Pin:"22",State:!1},3:{Led:3,Pin:"23",State:!1},4:{Led:4,Pin:"05",State:!1},5:{Led:5,Pin:"06",State:!1},6:{Led:6,Pin:"19",State:!1},7:{Led:7,Pin:"26",State:!1}});return onUpdated(()=>{}),onMounted(()=>{}),(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$8,[(openBlock(!0),createElementBlock(Fragment,null,renderList(f.value,y=>(openBlock(),createElementBlock("div",_hoisted_2$8,[createBaseVNode("div",_hoisted_3$8,[_hoisted_4$7,createBaseVNode("text",_hoisted_5$4,[_hoisted_6$2,_hoisted_7$2,createBaseVNode("span",_hoisted_8$2,toDisplayString(y.Led),1),_hoisted_9$2,_hoisted_10$2,_hoisted_11$1,createBaseVNode("span",_hoisted_12$1,toDisplayString(y.Pin),1)])])]))),256))]))}},Led=_export_sfc(_sfc_main$8,[["__scopeId","data-v-c9c37a89"]]),Button_vue_vue_type_style_index_0_scoped_3f64e00d_lang="",_withScopeId$4=m=>(pushScopeId("data-v-3f64e00d"),m=m(),popScopeId(),m),_hoisted_1$7={class:"row g-2 d-flex justify-content-center"},_hoisted_2$7={class:"col-3"},_hoisted_3$7={class:"Button-platfrom d-flex justify-content-center"},_hoisted_4$6=_withScopeId$4(()=>createBaseVNode("button",{class:"Button"},null,-1)),_hoisted_5$3={class:"text-white",style:{"margin-top":"125px"}},_hoisted_6$1=_withScopeId$4(()=>createBaseVNode("b",null," Button : ",-1)),_hoisted_7$1=createTextVNode(),_hoisted_8$1={class:"text-warning"},_hoisted_9$1=_withScopeId$4(()=>createBaseVNode("br",null,null,-1)),_hoisted_10$1=createTextVNode(),_hoisted_11=_withScopeId$4(()=>createBaseVNode("b",null,"Pin :",-1)),_hoisted_12={class:"text-primary"},_sfc_main$7={__name:"Button",setup(m){const f=ref({0:{Button:0,Pin:16,State:!1},1:{Button:1,Pin:20,State:!1},2:{Button:2,Pin:21,State:!1}});return onUpdated(()=>{}),onMounted(()=>{}),(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(f.value,y=>(openBlock(),createElementBlock("div",_hoisted_2$7,[createBaseVNode("div",_hoisted_3$7,[_hoisted_4$6,createBaseVNode("text",_hoisted_5$3,[_hoisted_6$1,_hoisted_7$1,createBaseVNode("span",_hoisted_8$1,toDisplayString(y.Button),1),_hoisted_9$1,_hoisted_10$1,_hoisted_11,createBaseVNode("span",_hoisted_12,toDisplayString(y.Pin),1)])])]))),256))]))}},Button=_export_sfc(_sfc_main$7,[["__scopeId","data-v-3f64e00d"]]),Ultrasonic_vue_vue_type_style_index_0_scoped_c49c1992_lang="",_withScopeId$3=m=>(pushScopeId("data-v-c49c1992"),m=m(),popScopeId(),m),_hoisted_1$6={class:"Ultrasonic-platfrom"},_hoisted_2$6=_withScopeId$3(()=>createBaseVNode("div",{class:"text-white"},"Ultrasonic Sensor",-1)),_hoisted_3$6=_withScopeId$3(()=>createBaseVNode("div",{class:"row d-flex justify-content-between"},[createBaseVNode("div",{class:"Ultrasonic"}),createBaseVNode("div",{class:"Ultrasonic"})],-1)),_hoisted_4$5=[_hoisted_2$6,_hoisted_3$6],_sfc_main$6={__name:"Ultrasonic",setup(m){return ref({0:{TRIG:0,Pin:11,State:!1},1:{"ECHO ":1,Pin:13,State:!1}}),onUpdated(()=>{}),onMounted(()=>{}),(f,n)=>(openBlock(),createElementBlock("div",_hoisted_1$6,_hoisted_4$5))}},Ultrasonic=_export_sfc(_sfc_main$6,[["__scopeId","data-v-c49c1992"]]),ModuleDisplay_vue_vue_type_style_index_0_scoped_a2c2a18b_lang="",_hoisted_1$5={class:"btn-group shadow me-3 layout",role:"group","aria-label":"Basic example"},_hoisted_2$5=["onClick"],_hoisted_3$5={class:"display text-center"},_sfc_main$5={__name:"ModuleDisplay",setup(m){const f=ref(["LED","Button","Matrix LED","Ultrasonic","Buzzer"]);let n=ref("LED");return onUpdated(()=>{}),onMounted(()=>{}),(r,y)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1$5,[(openBlock(!0),createElementBlock(Fragment,null,renderList(f.value,O=>(openBlock(),createElementBlock("button",{type:"button",class:"btn btn-outline-dark",onClick:P=>isRef(n)?n.value=O:n=O},toDisplayString(O),9,_hoisted_2$5))),256))]),createBaseVNode("div",_hoisted_3$5,[unref(n)=="LED"?(openBlock(),createBlock(Led,{key:0})):createCommentVNode("",!0),unref(n)=="Button"?(openBlock(),createBlock(Button,{key:1})):createCommentVNode("",!0),unref(n)=="Ultrasonic"?(openBlock(),createBlock(Ultrasonic,{key:2})):createCommentVNode("",!0)])],64))}},ModuleDisplay=_export_sfc(_sfc_main$5,[["__scopeId","data-v-a2c2a18b"]]),Menu_workspace_vue_vue_type_style_index_0_scoped_89566898_lang="",_withScopeId$2=m=>(pushScopeId("data-v-89566898"),m=m(),popScopeId(),m),_hoisted_1$4={class:"col"},_hoisted_2$4=_withScopeId$2(()=>createBaseVNode("i",{class:"bi bi-code-square"},[createBaseVNode("small",null," Debug Code ")],-1)),_hoisted_3$4=[_hoisted_2$4],_hoisted_4$4={class:"col-2 text-end"},_hoisted_5$2=_withScopeId$2(()=>createBaseVNode("i",{class:"bi bi-filetype-py"},null,-1)),_sfc_main$4={__name:"Menu_workspace",setup(m){let f="localhost:3030",n=ref("Start"),r=ref(!1);const y=()=>{n.value="Stop",console.log(n)},O=()=>{const P={Authorization:"Bearer my-token","My-Custom-Header":"foobar"};r.value=!r.value,axios.get(`http://${f}/service/s/${r.value}`,{headers:P}).then(c=>{console.log(c.data),r.value?n.value="Stop":n.value="Start"}).catch(c=>{this.errorMessage=c.message,console.error("There was an error!",c)})};return onUpdated(()=>{}),(P,c)=>(openBlock(),createElementBlock("div",{class:"button_layout row g-1",style:normalizeStyle(P.Mobile_Code)},[createBaseVNode("div",_hoisted_1$4,[createBaseVNode("button",{onClick:c[0]||(c[0]=k=>P.$emit("debug")),class:"btn btn-warning mx-1"},_hoisted_3$4),createBaseVNode("button",{onClick:O,class:"btn btn-success mx-1",id:"bt_run"},[createBaseVNode("small",null,toDisplayString(unref(n)),1)])]),createBaseVNode("div",_hoisted_4$4,[createBaseVNode("button",{onClick:y,class:"btn btn-outline-info"},[createTextVNode(toDisplayString(P.Mode_state)+" ",1),_hoisted_5$2])])],4))}},Menu=_export_sfc(_sfc_main$4,[["__scopeId","data-v-89566898"]]),Menu_tool_vue_vue_type_style_index_0_scoped_a859c148_lang="",_hoisted_1$3={class:"main"},_hoisted_2$3={class:"head tool-color p-3"},_hoisted_3$3={class:"btn-group shadow",role:"group","aria-label":"Basic example"},_hoisted_4$3={class:"body"},_sfc_main$3={__name:"Menu_tool",setup(m){return onMounted(()=>{}),(f,n)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createBaseVNode("button",{type:"button",class:"btn btn-secondary",onClick:n[0]||(n[0]=r=>f.$emit("tabs","raspberrypi"))},"Raspberrypi"),createBaseVNode("button",{type:"button",class:"btn btn-secondary",onClick:n[1]||(n[1]=r=>f.$emit("tabs","module"))},"Module"),createBaseVNode("button",{type:"button",class:"btn btn-secondary",onClick:n[2]||(n[2]=r=>f.$emit("tabs","fullcode"))},"Fullcode")])]),createBaseVNode("div",_hoisted_4$3,[renderSlot(f.$slots,"default",{},void 0,!0)])]))}},Menu_tool=_export_sfc(_sfc_main$3,[["__scopeId","data-v-a859c148"]]),DebugCode_vue_vue_type_style_index_0_scoped_3667400c_lang="",_withScopeId$1=m=>(pushScopeId("data-v-3667400c"),m=m(),popScopeId(),m),_hoisted_1$2={class:"bg-white shadow box"},_hoisted_2$2=_withScopeId$1(()=>createBaseVNode("div",{class:"head tool-color p-2"},[createBaseVNode("div",{class:"row"},[createBaseVNode("div",{class:"col"},"DebugCode"),createBaseVNode("div",{class:"col text-end"},[createBaseVNode("small",null," #Python in raspberrypi ")])])],-1)),_hoisted_3$2={class:"body"},_hoisted_4$2=["innerHTML"],_sfc_main$2={__name:"DebugCode",props:{code:String,fullcode:String},setup(m){const f=m;return onUpdated(()=>{console.log(f)}),onMounted(()=>{}),(n,r)=>(openBlock(),createElementBlock("div",_hoisted_1$2,[_hoisted_2$2,createBaseVNode("div",_hoisted_3$2,[createBaseVNode("div",{innerHTML:n.Codetext},null,8,_hoisted_4$2)])]))}},DebugCode=_export_sfc(_sfc_main$2,[["__scopeId","data-v-3667400c"]]),viewRAspPort_vue_vue_type_style_index_0_scoped_38020929_lang="",_withScopeId=m=>(pushScopeId("data-v-38020929"),m=m(),popScopeId(),m),_hoisted_1$1={class:"box"},_hoisted_2$1=_withScopeId(()=>createBaseVNode("div",{class:"head p-2 text-center"}," Raspberrypi pin ",-1)),_hoisted_3$1={class:"body"},_hoisted_4$1={class:"table text-center"},_hoisted_5$1=_withScopeId(()=>createBaseVNode("thead",null,[createBaseVNode("tr",null,[createBaseVNode("th",{scope:"col"},"PIN"),createBaseVNode("th",{scope:"col"},"NAME"),createBaseVNode("th",{scope:"col"}),createBaseVNode("th",{scope:"col"}),createBaseVNode("th",{scope:"col"},"NAME"),createBaseVNode("th",{scope:"col"},"PIN")])],-1)),_hoisted_6={class:"small"},_hoisted_7={scope:"row"},_hoisted_8={scope:"row"},_hoisted_9={scope:"row"},_hoisted_10={scope:"row"},_sfc_main$1={__name:"viewRAspPort",props:{code:String,fullcode:String},setup(m){const f=m;let n=ref({row1:{pin_l:"01",name_l:"3.3V DC Power",state_l:!1,pin_r:"02",name_r:"5V DC Power",state_r:!1},row2:{pin_l:"03",name_l:"GPIO02(SDA1,I2C)",state_l:!1,pin_r:"04",name_r:"5V DC Power",state_r:!1},row3:{pin_l:"05",name_l:"GPIO03(SDL1,I2C)",state_l:!1,pin_r:"06",name_r:"Ground",state_r:!1},row4:{pin_l:"07",name_l:"GPIO04(GPCLK0)",state_l:!1,pin_r:"08",name_r:"GPIO14(TXDO,UART)",state_r:!1},row5:{pin_l:"09",name_l:"Ground",state_l:!1,pin_r:"10",name_r:"GPIO15(RXDO,UART)",state_r:!1},row6:{pin_l:"11",name_l:"GPIO17",state_l:!1,pin_r:"12",name_r:"GPIO18(PWM0)",state_r:!1},row7:{pin_l:"13",name_l:"GPIO17",state_l:!1,pin_r:"14",name_r:"Ground",state_r:!1},row8:{pin_l:"15",name_l:"GPIO22",state_l:!1,pin_r:"16",name_r:"GPIO23",state_r:!1},row9:{pin_l:"17",name_l:"3v3 Power",state_l:!1,pin_r:"18",name_r:"GPIO 24",state_r:!1},row10:{pin_l:"19",name_l:"GPIO10(SPI0 MOSI)",state_l:!1,pin_r:"20",name_r:"Ground",state_r:!1},row11:{pin_l:"21",name_l:"GPIO9(SPI0 MISO)",state_l:!1,pin_r:"22",name_r:"GPIO25",state_r:!1},row12:{pin_l:"23",name_l:"GPIO11(SPI0 SCLK)",state_l:!1,pin_r:"24",name_r:"GPIO8(SPI Chip Select 0)",state_r:!1},row13:{pin_l:"25",name_l:"Ground",state_l:!1,pin_r:"26",name_r:"GPIO7(SPI Chip Select 1)",state_r:!1},row14:{pin_l:"27",name_l:"GPIO0(HAT EEPROM i2c Data)",state_l:!1,pin_r:"28",name_r:"GPIO1(HAT EEPROM i2c Clock)",state_r:!1},row15:{pin_l:"29",name_l:"GPIO5",state_l:!1,pin_r:"30",name_r:"Ground",state_r:!1},row16:{pin_l:"31",name_l:"GPIO6",state_l:!1,pin_r:"32",name_r:"GPIO12(PWM0)",state_r:!1},row17:{pin_l:"33",name_l:"GPIO13(PWM1)",state_l:!1,pin_r:"34",name_r:"Ground",state_r:!1},row18:{pin_l:"35",name_l:"GPIO19(PCM Frame Sync)",state_l:!1,pin_r:"36",name_r:"GPIO16",state_r:!1},row19:{pin_l:"37",name_l:"GPIO26",state_l:!1,pin_r:"38",name_r:"GPIO20(PCM Data-In)",state_r:!1},row20:{pin_l:"39",name_l:"Ground",state_l:!1,pin_r:"40",name_r:"GPIO21(PCM Data-Out)",state_r:!1}});const r=O=>{const P={boolean:["True","False"],conditions:["if","else","for","retrun","while"],another:["range","pass"]};for(let c in O)for(let k in P)for(let a in P[k])O[c].includes(P[k][a])&&(O[c]=`<text class='${k}'> ${O[c]} </text>`);return O},y=O=>O=="Ground"?"color:#5c994e;":O.includes("GPIO")?"color:#327fa8":"color:#d63418";return computed(()=>{let O=f.code.split(" ");var P=document.createElement("h1");return P.inertText=O[0],O[0]=P.inertText,O=r(O),console.log(O),O.join(" ")}),computed(()=>{if(f.fullcode=="fullcode")return"fullcode"}),onUpdated(()=>{console.log(f)}),onMounted(()=>{}),(O,P)=>(openBlock(),createElementBlock("div",_hoisted_1$1,[_hoisted_2$1,createBaseVNode("div",_hoisted_3$1,[createBaseVNode("table",_hoisted_4$1,[_hoisted_5$1,createBaseVNode("tbody",null,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(n),(c,k)=>(openBlock(),createElementBlock("tr",_hoisted_6,[createBaseVNode("th",_hoisted_7,toDisplayString(c.pin_l),1),createBaseVNode("th",{scope:"row",style:normalizeStyle(y(c.name_l))},toDisplayString(c.name_l),5),createBaseVNode("th",_hoisted_8,toDisplayString(c.state_l),1),createBaseVNode("th",_hoisted_9,toDisplayString(c.state_r),1),createBaseVNode("th",{scope:"row",style:normalizeStyle(y(c.name_r))},toDisplayString(c.name_r),5),createBaseVNode("th",_hoisted_10,toDisplayString(c.pin_r),1)]))),256))])])])]))}},viewRAspPort=_export_sfc(_sfc_main$1,[["__scopeId","data-v-38020929"]]),MainView_vue_vue_type_style_index_0_scoped_ca0051df_lang="",_hoisted_1={class:"leftdisplay shadow"},_hoisted_2={class:"rightdisplay"},_hoisted_3={key:0,class:"slot-rasp"},_hoisted_4={key:1,class:"slot-code"},_hoisted_5={key:2,class:"slot-module text-end"};let fack="localhost:3030";const __default__={data(){return{Run_state:"bi bi-play",myjson:null,Mode_state:"Mode",mode:!0,code:"",ipa:window.location.host,mobile_switch:!1}},computed:{Mobile_Code(){if(this.mobile_switch)return"display:block;"},Mobile(){if(this.mobile_switch)return"display:none"},CodeText(){console.log(this.code);let m=this.code.split(" ");var f=document.createElement("h1");return f.inertText=m[0],m[0]=f.inertText,m.join(" ")}},mounted(){this.$refs.foo.workspace.addChangeListener(this.onEvent)},methods:{onEvent(event){if(event.type=="move"||event.type=="delete"||event.type=="change"){BlocklyPython.addReservedWords("code"),this.code=BlocklyPython.workspaceToCode(this.$refs.foo.workspace),console.log(this.code);try{eval(this.code)}catch(m){}}},Debug(){const m={text_code:this.code},f={Authorization:"Bearer my-token","My-Custom-Header":"foobar"};axios.post(`http://${fack}/control/debug`,m,{headers:f}).then(n=>{console.log(n.data)}).catch(n=>{this.errorMessage=n.message,console.error("There was an error!",n)})},chang_mode(){this.mode=!this.mode,this.mode?this.Mode_state="Code":this.Mode_state="Mode"}}},_sfc_main=Object.assign(__default__,{__name:"MainView",setup(m){const f=ref();let n=ref("raspberrypi");return(r,y)=>(openBlock(),createElementBlock(Fragment,null,[createBaseVNode("div",_hoisted_1,[createBaseVNode("div",null,[createVNode(Menu,{onDebug:r.Debug},null,8,["onDebug"])]),createVNode(BlocklyComponent,{id:"blockly",style:normalizeStyle(r.Mobile),ref_key:"foo",ref:f},null,8,["style"])]),createBaseVNode("div",_hoisted_2,[createVNode(Menu_tool,{onTabs:y[0]||(y[0]=O=>isRef(n)?n.value=O:n=O)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref(n))+" ",1),unref(n)=="raspberrypi"?(openBlock(),createElementBlock("div",_hoisted_3,[createVNode(DebugCode,{code:r.code},null,8,["code"]),createVNode(viewRAspPort,{code:r.code},null,8,["code"])])):createCommentVNode("",!0),unref(n)!="module"?(openBlock(),createElementBlock("div",_hoisted_4,[createVNode(CodeText,{code:r.code,fullcode:unref(n)},null,8,["code","fullcode"])])):(openBlock(),createElementBlock("div",_hoisted_5,[createVNode(ModuleDisplay)]))]),_:1})])],64))}}),MainView=_export_sfc(_sfc_main,[["__scopeId","data-v-ca0051df"]]);export{MainView as default};
